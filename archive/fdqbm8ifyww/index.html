<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="实例讲解基于 React&#43;Redux 的前端开发流程"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>实例讲解基于 React&#43;Redux 的前端开发流程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/fdqbm8ifyww/",
				"appid": "1613049289050283", 
				"title": "实例讲解基于 React&#43;Redux 的前端开发流程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:59"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ocodi9lc9i/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/97jv67q41s/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&text=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&text=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&title=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&is_video=false&description=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&title=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&title=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&title=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffdqbm8ifyww%2f&title=%e5%ae%9e%e4%be%8b%e8%ae%b2%e8%a7%a3%e5%9f%ba%e4%ba%8e%20React%2bRedux%20%e7%9a%84%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e6%b5%81%e7%a8%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">实例讲解基于 React&#43;Redux 的前端开发流程</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前言：在当下的前端界，react 和 redux 发展得如火如荼，react 在 github 的 star 数达 42000 \x2b，超过了 jquery 的 39000\x2b，也即将超过前几年比较火的angular 1 的 49000\x2b；redux 的 star 数也要接近 20000，可见大家对其的热情程度，究竟是什么魔力让大家为之疯狂呢？让我们上车，亲自体验一波试试~~本文章偏向于讲解redux流程。\x3c\/p\x3e\n\x3cp\x3e宅印前端基于 react \x2b redux 的模式开发，我们指定了一套分工明确的并行开发流程。下面通过一个 \x3cstrong\x3e“苹果篮子”\x3c\/strong\x3e 实例，来看看整个应用开发流程。\x3c\/p\x3e\n\x3cblockquote\x3e非常感谢 @ckinmind 为本教程提供完整源码demo \x3cbr\x3e完整源码：\x3ca href=\x22https:\/\/github.com\/ckinmind\/apple-basket-redux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ckinmind\/a...\x3c\/a\x3e\x3cbr\x3e实例体验 \x3ca href=\x22https:\/\/ckinmind.github.io\/apple-basket-redux\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/ckinmind.github.io\/ap...\x3c\/a\x3e\x3cbr\x3e(摘苹果的过程模拟请求网络，体现一个异步动作，所以响应看起来有些延迟)\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e更优雅的方式\x3c\/strong\x3e：如果你想更优雅地使用  react \x2b redux ，欢迎查看我的最新系列文章 \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000013985433\x22\x3epastate.js 响应式 react 框架\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e首先，我们来看看这个实例的原型：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633602\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633602\x22 alt=\x22苹果篮子\x22 title=\x22苹果篮子\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看到这个水果篮子的样子，大家应该可以明白它的功能：你可以做两件事 -- 摘苹果和吃苹果。当你摘苹果时，应用会向后台发送ajax请求索取苹果，每个苹果有两个属性：编号和重量。当你吃苹果掉时，不用告诉后台，在前端偷偷吃掉就好啦~ 同时苹果篮子会显示当前的苹果量和已经吃掉的苹果量。好！那下面我们来开工！\x3c\/p\x3e\n\x3cp\x3e下面先来总体了解一下 redux 应用的基本原理，一图胜千言：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633603\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633603\x22 alt=\x22redux 流程\x22 title=\x22redux 流程\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可见整个redux流程的逻辑非常清晰，数据流是单向循环的，就像一个生产的流水线：\x3c\/p\x3e\n\x3cblockquote\x3estore（存放状态） -\x26gt; container（显示状态） -\x26gt; reducer （处理动作）-\x26gt; store\x3c\/blockquote\x3e\n\x3cp\x3e这一点对精细化分工协作很有好处。\x3c\/p\x3e\n\x3cp\x3e我们来看看这三个概念：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3estore\x3c\/strong\x3e 是应用的状态管理中心，保存着是应用的状态（state），当收到状态的更新时，会触发视觉组件进行更新。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3econtainer\x3c\/strong\x3e  是视觉组件的容器，负责把传入的状态变量渲染成视觉组件，在浏览器显示出来。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3ereducer\x3c\/strong\x3e 是动作(action)的处理中心， 负责处理各种动作并产生新的状态（state），返回给store。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eNOTE：从对象的包含关系上讲，reducer 是store的一部分，但在逻辑上我们把它分出来，这样会比较容易理解整个redux流程。\x3c\/p\x3e\n\x3cp\x3e我们可以做个形象的比喻，把 js 比喻成巴士，把 store, container, reducer 比喻为三个车站，再把 state 和 action 比喻成两种乘客。这是一趟环路巴士：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cem\x3e\x3ccode\x3ejs巴士\x3c\/code\x3e\x3c\/em\x3e 从 \x3cem\x3e\x3ccode\x3estore车站\x3c\/code\x3e\x3c\/em\x3e 出发，载上 \x3cem\x3e\x3ccode\x3estate乘客\x3c\/code\x3e\x3c\/em\x3e ，\x3cem\x3e\x3ccode\x3estate乘客\x3c\/code\x3e\x3c\/em\x3e 到达某个 \x3cem\x3e\x3ccode\x3econtainer车站\x3c\/code\x3e\x3c\/em\x3e 下车并把自己展示出来\x3c\/li\x3e\n\x3cli\x3e过了一会，有一个 \x3cem\x3e\x3ccode\x3eaction乘客\x3c\/code\x3e\x3c\/em\x3e 上车了，\x3cem\x3e\x3ccode\x3ejs巴士\x3c\/code\x3e\x3c\/em\x3e 把 \x3cem\x3e\x3ccode\x3eaction乘客\x3c\/code\x3e\x3c\/em\x3e 送到 \x3cem\x3e\x3ccode\x3ereducer车站\x3c\/code\x3e\x3c\/em\x3e，在这里 \x3cem\x3e\x3ccode\x3eaction乘客\x3c\/code\x3e\x3c\/em\x3e 和  \x3cem\x3e\x3ccode\x3estate乘客\x3c\/code\x3e\x3c\/em\x3e 生了一个孩子 \x3cem\x3e\x3ccode\x3enew state\x3c\/code\x3e\x3c\/em\x3e，js巴士把 \x3cem\x3e\x3ccode\x3enew state\x3c\/code\x3e\x3c\/em\x3e 送回了 \x3cem\x3e\x3ccode\x3estore车站\x3c\/code\x3e\x3c\/em\x3e（好像是人生轮回→_→）\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3eredux 只是定义了应用的数据流程，只解决了 “数据层”（model layer） 的问题，一般还会使用 react， angular 等作为“显示层” （UI layer） 来一起使用，我们项目采用 react 作为显示框架。\x3c\/p\x3e\n\x3cp\x3e在开始之前，这里先提供一些介绍react和redux的参考资料，如果在下文遇到哪些点不理解，可以来这里翻看参考资料：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ereact相关： \x3ca href=\x22http:\/\/facebook.github.io\/react\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact官网\x3c\/a\x3e, \x3ca href=\x22http:\/\/reactjs.cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact中文站点\x3c\/a\x3e,  \x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2015\/03\/react.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e阮一峰react 入门\x3c\/a\x3e, \x3ca href=\x22http:\/\/react-china.org\/c\/jiao-cheng\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact教程集合\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3eredux相关：\x3ca href=\x22http:\/\/redux.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux官网\x3c\/a\x3e , \x3ca href=\x22http:\/\/cn.redux.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux中文文档\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e下文的展示的js代码，会用到少量简单的 \x3ca href=\x22http:\/\/es6.ruanyifeng.com\/#docs\/intro\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ees6\x3c\/a\x3e 语法，可以在遇到时参考这里，或自己查找资料：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Statements\/import\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eimport\x3c\/a\x3e \/ \x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Statements\/export\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexport\x3c\/a\x3e ：es6代码模块化模式\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Statements\/let\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elet 声明语句\x3c\/a\x3e ： 块级变量声明语句\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Functions\/Arrow_functions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e箭头函数\x3c\/a\x3e： (..) =\x26gt; {..} 形式的函数\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们会使用 babel 编译器把es6语法编译成es5, 所以大家不必担心浏览器兼容性问题，可以大胆使用es6。\x3c\/p\x3e\n\x3cp\x3e应用的基础配置工作由前端开发主管负责，大家不必详细理解。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e按任务分工来分步讲解\x3c\/h2\x3e\n\x3cp\x3e按照开发的内容，我们把前端团队分为两个小组： “布局组” 和 “逻辑组”，每个小组有2种任务，一共4种任务。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e\x3cstrong\x3e布局组\x3c\/strong\x3e - 负责 contianer、component 部分\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e任务1：\x3cstrong\x3e静态布局\x3c\/strong\x3e  - 使用 HTML \x2b CSS 静态布局\x3c\/li\x3e\n\x3cli\x3e任务2：\x3cstrong\x3e动态布局\x3c\/strong\x3e  - 使用 JSX 语法对静态布局做动态渲染处理\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3cstrong\x3e逻辑组\x3c\/strong\x3e - 负责 action、reducer 部分\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e任务1：\x3cstrong\x3eaction 开发\x3c\/strong\x3e - 制作 redux 流程的 action\x3c\/li\x3e\n\x3cli\x3e任务2：\x3cstrong\x3ereducer 开发\x3c\/strong\x3e - 制作 redux 流程的 reducer\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e布局组\x3c\/strong\x3e 要求对 HTML \x2b CSS 布局比较熟悉，只需要会简单的 js 即可， 不需要完整地理解redux流程。\x3cbr\x3e\x3cstrong\x3e逻辑组\x3c\/strong\x3e 要求对 js 比较熟悉，最好可以比较完整地理解redux流程， 但基本不需要涉及HTML \x2b CSS布局工作。\x3c\/p\x3e\n\x3cp\x3e接下来，先给出我们教程相关的 src 目录。这里大家可以先一扫而过，大概了解即可\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22- src              源码文件夹：包含项目源码，我们基本都在这个文件夹下做开发\n    - containers   容器文件夹：存放容器组件，比如 “苹果篮子”\n    - components   组件文件夹：存放普通显示组件，比如 “苹果”\n    - actions      actions文件夹：存放可以发出的action \n    - reducers     reducers文件夹：存放action的处理器reducers\n    - services     服务文件夹：存放经过封装的服务，如 ajax服务, 模拟数据服务\n    - styles       样式文件夹：存放应用的样式，如css, scss\n    - images       图片文件夹：存放图片资源\n    - apis         开发接口文件夹：存放开发接口文档\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haml\x22\x3e\x3ccode\x3e-\x3cspan class=\x22ruby\x22\x3e src              源码文件夹：包含项目源码，我们基本都在这个文件夹下做开发\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e containers   容器文件夹：存放容器组件，比如 “苹果篮子”\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e components   组件文件夹：存放普通显示组件，比如 “苹果”\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e actions      actions文件夹：存放可以发出的action \n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e reducers     reducers文件夹：存放action的处理器reducers\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e services     服务文件夹：存放经过封装的服务，如 ajax服务, 模拟数据服务\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e styles       样式文件夹：存放应用的样式，如css, scss\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e images       图片文件夹：存放图片资源\n\x3c\/span\x3e    -\x3cspan class=\x22ruby\x22\x3e apis         开发接口文件夹：存放开发接口文档\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面正式开始啦，先从布局组开始。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e布局组\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e任务1：静态布局\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e能力要求：只需要会使用 HTML \x2b CSS （SASS）进行布局即可\x3c\/li\x3e\n\x3cli\x3e任务内容：1. 苹果篮子组件（容器组件） 2. 水果组件（显示组件）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eredux 的组件分为两类，一类是\x3cstrong\x3e容器组件 container\x3c\/strong\x3e ，一类是\x3cstrong\x3e普通显示组件 component\x3c\/strong\x3e。容器负责接收store中的state和并发送action, 大多数时候需要和store直接连接，容器一般不需要多次使用，比如我们这个应用的苹果篮子。普通组件放在容器里面，由容器确定显示的时机、数量和内容，普通组件一般会多次使用。\x3c\/p\x3e\n\x3ch4\x3e1. 苹果篮子容器 AppleBasket.jsx \x2b appleBasket.scss\x3c\/h4\x3e\n\x3cp\x3e苹果篮子组件的原型如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633604\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633604\x22 alt=\x22苹果篮子\x22 title=\x22苹果篮子\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对于容器，我们使用 React 组件类 的方式书写，这里主要是静态的jsx代码，相当于html。\x3c\/p\x3e\n\x3cp\x3e下面是 \x3cem\x3eAppleBasket.jsx\x3c\/em\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport { connect } from \x27react-redux\x27;\n\nclass AppleBusket extends React.Component {\n  \n  render(){\n    return (\n      \x3cdiv className=\x26quot;appleBusket\x26quot;\x3e\n        \x3cdiv className=\x26quot;title\x26quot;\x3e苹果篮子\x3c\/div\x3e\n        \n        \x3cdiv className=\x26quot;stats\x26quot;\x3e\n            \x3cdiv className=\x26quot;section\x26quot;\x3e\n                \x3cdiv className=\x26quot;head\x26quot;\x3e当前\x3c\/div\x3e\n                \x3cdiv className=\x26quot;content\x26quot;\x3e0个苹果，0克\x3c\/div\x3e\n            \x3c\/div\x3e\n            \x3cdiv className=\x26quot;section\x26quot;\x3e\n                \x3cdiv className=\x26quot;head\x26quot;\x3e已吃掉\x3c\/div\x3e\n                \x3cdiv className=\x26quot;content\x26quot;\x3e2个苹果，480克\x3c\/div\x3e\n            \x3c\/div\x3e            \n        \x3c\/div\x3e\n                    \n        \x3cdiv className=\x26quot;appleList\x26quot;\x3e\n            \x3cdiv className=\x26quot;empty-tip\x26quot;\x3e苹果篮子空空如也\x3c\/div\x3e\n        \x3c\/div\x3e\n        \n        \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\n            \x3cbutton\x3e摘苹果\x3c\/button\x3e\n        \x3c\/div\x3e\n        \n      \x3c\/div\x3e\n    );\n  }\n\n}\n\nexport default connect()(AppleBusket);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppleBusket\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22appleBusket\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22title\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e苹果篮子\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stats\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22section\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22head\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e当前\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e0个苹果，0克\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22section\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22head\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e已吃掉\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e2个苹果，480克\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e            \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22appleList\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22empty-tip\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e苹果篮子空空如也\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn-div\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e摘苹果\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect()(AppleBusket);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时静态布局开发人员还要负责书写样式，宅印的样式使用sass 书写，  下面是的例子是\x3cem\x3eappleBasket.scss\x3c\/em\x3e , 大家可以做参考：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.appleBusket{\n    width: 400px;\n    margin: 20px;\n    border-radius: 4px;\n    border: 1px solid #ddd;\n    \x3e.title{\n        padding: 6px 0px;\n        text-align: center;\n        color: #069;\n        font-size: 20px;\n        \/\/font-weight: 600;\n    }\n    \x3e.stats{\n        width: 100%;\n        $border: 1px dashed #ddd;\n        border-top: $border;\n        border-bottom: $border;\n        padding: 10px 0px;\n        .section{\n            display: inline-block;\n            width: 50%;\n            padding-left: 8px;\n            .head{\n                padding: 6px 0px;\n                font-size: 16px;\n                color: #069;\n            }\n            .content{\n                font-size: 20px;\n                font-weight: 200;\n            }\n            \x26amp;:first-of-type{\n                border-right: 1px solid #f0f0f0;\n            }\n        }\n    }\n    \x3e.appleList{\n        padding: 10px 0px;\n        .empty-tip{\n            text-align: center;\n            font-size: 16px;\n            color: #ccc;\n            padding: 20px 0px;\n        }\n    }\n    \x3e.btn-div{\n        text-align: center;\n        button{\n            color: #fff;\n            background-color: #096;\n            border: none;\n            font-size: 14px;\n            padding: 6px 40px; \n            border-radius: 6px;\n            margin: 20px auto;\n        }\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scss\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.appleBusket\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e400px\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e solid \x3cspan class=\x22hljs-number\x22\x3e#ddd\x3c\/span\x3e;\n    \x26gt;\x3cspan class=\x22hljs-selector-class\x22\x3e.title\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#069\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/font-weight: 600;\x3c\/span\x3e\n    }\n    \x26gt;\x3cspan class=\x22hljs-selector-class\x22\x3e.stats\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-variable\x22\x3e$border\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e dashed \x3cspan class=\x22hljs-number\x22\x3e#ddd\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-top\x3c\/span\x3e: \x3cspan class=\x22hljs-variable\x22\x3e$border\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-bottom\x3c\/span\x3e: \x3cspan class=\x22hljs-variable\x22\x3e$border\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-selector-class\x22\x3e.section\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: inline-block;\n            \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding-left\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-selector-class\x22\x3e.head\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e16px\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#069\x3c\/span\x3e;\n            }\n            \x3cspan class=\x22hljs-selector-class\x22\x3e.content\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-attribute\x22\x3efont-weight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n            }\n            \x26amp;:first-of-type{\n                \x3cspan class=\x22hljs-attribute\x22\x3eborder-right\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e solid \x3cspan class=\x22hljs-number\x22\x3e#f0f0f0\x3c\/span\x3e;\n            }\n        }\n    }\n    \x26gt;\x3cspan class=\x22hljs-selector-class\x22\x3e.appleList\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-selector-class\x22\x3e.empty-tip\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n            \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e16px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#ccc\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        }\n    }\n    \x26gt;\x3cspan class=\x22hljs-selector-class\x22\x3e.btn-div\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebutton\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#096\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: none;\n            \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e14px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e40px\x3c\/span\x3e; \n            \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e auto;\n        }\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2. 苹果组件 AppleItem.jsx \x2b appleItem.scss\x3c\/h4\x3e\n\x3cp\x3e苹果组件的样子如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633605\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633605\x22 alt=\x22苹果组件\x22 title=\x22苹果组件\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e普通组件的定义方法和容器类似，只是其不需要使用redux连接器来封装，如下：\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eAppleItem.jsx\x3c\/em\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nclass AppleItem extends React.Component {\n\n    render() {\n\n        return (\n            \x3cdiv className=\x26quot;appleItem\x26quot;\x3e\n                \x3cdiv className=\x26quot;apple\x26quot;\x3e\x3cimg src=\x26quot;..\/images\/apple.png\x26quot; alt=\x26quot;\x26quot;\/\x3e\x3c\/div\x3e\n                \x3cdiv className=\x26quot;info\x26quot;\x3e\n                    \x3cdiv className=\x26quot;name\x26quot;\x3e红苹果 - 1号\x3c\/div\x3e\n                    \x3cdiv className=\x26quot;weight\x26quot;\x3e265克\x3c\/div\x3e\n                \x3c\/div\x3e\n                \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\x3cbutton\x3e吃掉\x3c\/button\x3e\x3c\/div\x3e\n            \x3c\/div\x3e\n        );\n\n    }\n\n\n}\n\nexport default AppleItem;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppleItem\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n\n    render() {\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22appleItem\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22apple\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22..\/images\/apple.png\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22info\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e红苹果 - 1号\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22weight\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e265克\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn-div\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e吃掉\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        );\n\n    }\n\n\n}\n\nexport default AppleItem;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e样式文件 appleItem.scss 在此省略。\x3c\/p\x3e\n\x3cp\x3e哪些显示元素要作为容器，哪些要作为普通组件，没有百分之百确定划分规则，大家根据自己的理解把它划分到某一类即可。\x3c\/p\x3e\n\x3cp\x3e这些就是任务一的内容，书写静态布局，基本都是html\x2bcss工作，不需要涉及js代码。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e任务2：动态渲染\x3c\/h3\x3e\n\x3cp\x3e写完了静态布局后，接下来要进行动态渲染啦~\x3c\/p\x3e\n\x3cp\x3e动态渲染听起来很高大上，其实意思就是根据一个stete数据对象来显示内容而已。首先需要确定其state的结构。\x3cstrong\x3e容器\x3c\/strong\x3e的state 是 store 中state的一部分，前端管理员会事先约定好其数据结构，并在对应的reducer中给出，只要去那里复制一份出来即可。\x3cstrong\x3e普通组件\x3c\/strong\x3e的state只要自己定义即可，并在文件中说明清楚。\x3c\/p\x3e\n\x3ch4\x3e1. 容器的动态渲染\x3c\/h4\x3e\n\x3cp\x3e下面看看“苹果篮子”的动态布局，我们去 appleBasketReducer.js 可以得到水果篮子的 state 的结构如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    isPicking : false,\n    newAppleId: 1,\n    apples: [\n        \/*{\n            id: 0,\n            weight: 235,\n            isEaten: false\n         }*\/\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3eisPicking\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    newAppleId:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    apples:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\/*{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            id:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            weight:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            isEaten:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n         \x3cspan class=\x22hljs-string\x22\x3e}*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e]\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们这个数据结构把它 “实例化”，如下这样放在我们改成写的 AppleBasket.jsx 中，然后我们开始书写我们的动态渲染代码啦，如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport { connect } from \x27react-redux\x27;\n\nimport AppleItem from \x27..\/components\/AppleItem\x27;\n\nclass AppleBusket extends React.Component {\n\n    render() {\n        \n        let { state } = this.props;\n        \n        \/\/这部分从对应的 appleBasketReducer.js 中拷贝\n        let mockState = {\n            isPicking : false,\n            newAppleId: 3,\n            apples: [\n                {\n                    id: 1,\n                    weight: 235,\n                    isEaten: true\n                },\n                {\n                    id: 2,\n                    weight: 256,\n                    isEaten: false\n                }\n            ]\n        };\n        \n        \/\/是否开启模拟数据的开关，注释这行代码关闭模拟数据\n        state = mockState;\n        \n        \n        \/\/对 state 做显示级别的转化\n        let stats = {\n            appleNow: {\n                quantity: 0,\n                weight: 0\n            },\n            appleEaten: {\n                quantity: 0,\n                weight: 0\n            }\n        };\n        \n        state.apples.map(apple =\x3e {\n            let selector = apple.isEaten ? \x27appleEaten\x27:\x27appleNow\x27;\n            stats[selector].quantity \x2b\x2b;\n            stats[selector].weight \x2b= apple.weight;\n        })\n        \n        \n        return (\n            \x3cdiv className=\x26quot;appleBusket\x26quot;\x3e\n                \x3cdiv className=\x26quot;title\x26quot;\x3e苹果篮子\x3c\/div\x3e\n\n                \x3cdiv className=\x26quot;stats\x26quot;\x3e\n                    \x3cdiv className=\x26quot;section\x26quot;\x3e\n                        \x3cdiv className=\x26quot;head\x26quot;\x3e当前\x3c\/div\x3e\n                        \x3cdiv className=\x26quot;content\x26quot;\x3e\n                            {stats.appleNow.quantity}个苹果，\n                            {stats.appleNow.weight}克\n                        \x3c\/div\x3e\n                    \x3c\/div\x3e\n                    \x3cdiv className=\x26quot;section\x26quot;\x3e\n                        \x3cdiv className=\x26quot;head\x26quot;\x3e已吃掉\x3c\/div\x3e\n                        \x3cdiv className=\x26quot;content\x26quot;\x3e\n                            {stats.appleEaten.quantity}个苹果，\n                            {stats.appleEaten.weight}克\n                        \x3c\/div\x3e\n                    \x3c\/div\x3e\n                \x3c\/div\x3e\n\n                \x3cdiv className=\x26quot;appleList\x26quot;\x3e\n                    { state.apples.map(apple =\x3e \x3cAppleItem state ={apple} \/\x3e) }\n                \x3c\/div\x3e\n\n                \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\n                    \x3cbutton\x3e摘苹果\x3c\/button\x3e\n                \x3c\/div\x3e\n\n            \x3c\/div\x3e\n        );\n    }\n\n}\n\nfunction select(state) {\n    return {\n        state: state.appleBusket\n    }\n}\n\nexport default connect(select)(AppleBusket);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e AppleItem \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/AppleItem\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppleBusket\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n\n    render() {\n        \n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e { state } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/这部分从对应的 appleBasketReducer.js 中拷贝\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mockState = {\n            \x3cspan class=\x22hljs-attr\x22\x3eisPicking\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3enewAppleId\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eapples\x3c\/span\x3e: [\n                {\n                    \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eweight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eisEaten\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n                },\n                {\n                    \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eweight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e256\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eisEaten\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n                }\n            ]\n        };\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/是否开启模拟数据的开关，注释这行代码关闭模拟数据\x3c\/span\x3e\n        state = mockState;\n        \n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/对 state 做显示级别的转化\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e stats = {\n            \x3cspan class=\x22hljs-attr\x22\x3eappleNow\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3equantity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eweight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3eappleEaten\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3equantity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eweight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n            }\n        };\n        \n        state.apples.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eapple\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e selector = apple.isEaten ? \x3cspan class=\x22hljs-string\x22\x3e\x27appleEaten\x27\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27appleNow\x27\x3c\/span\x3e;\n            stats[selector].quantity \x2b\x2b;\n            stats[selector].weight \x2b= apple.weight;\n        })\n        \n        \n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22appleBusket\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22title\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e苹果篮子\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stats\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22section\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22head\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e当前\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                            {stats.appleNow.quantity}个苹果，\n                            {stats.appleNow.weight}克\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22section\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22head\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e已吃掉\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                            {stats.appleEaten.quantity}个苹果，\n                            {stats.appleEaten.weight}克\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22appleList\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    { state.apples.map(apple =\x26gt; \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAppleItem\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e =\x3cspan class=\x22hljs-string\x22\x3e{apple}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e) }\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn-div\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e摘苹果\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        );\n    }\n\n}\n\nfunction select(state) {\n    return {\n        state: state.appleBusket\n    }\n}\n\nexport default connect(select)(AppleBusket);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可见，动态布局的工作要求只是在 HTML \x2b CSS 布局的基础上，再加上 JSX 语法能力即可。\x3c\/p\x3e\n\x3ch4\x3e2. 普通显示组件的动态渲染\x3c\/h4\x3e\n\x3cp\x3e普通显示组件的动态渲染和容器类似，只是这里的state可以自己规定，并给出示例的mockState（模拟state），使用组件的人按照示例传入数据即可使用。\x3c\/p\x3e\n\x3cp\x3eAppleItem.jsx 的更新如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nclass AppleItem extends React.Component {\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.state != this.props.state;\n    }\n\n    render() {\n\n        let { state, actions } = this.props;\n\n        \/**\n         * 这个区域是 mock 数据区，也作为组件文档，请书写清楚\n         * \/\/在组件发布时，请注释掉，提高性能\n         *\/\n        let mockState = {\n            id: 1,\n            weight: 256,\n            isEaten: false\n        };\n        \n        let mockActions = {\n            eatApple : id =\x3e console.log(\x27eatApple\x27,id)\n        };\n\n        \/**\n         * 开关这行代码，用于切换装入的数据来源。(为了开关的方便，请把两句代码合成一行)\n         * 在开发阶段打开，使用内部 state 和 action, 开发完成后请注释关闭\n         *\/\n        state = mockState; actions = mockActions;\n\n        if (state.isEaten) return null;\n\n        return (\n            \x3cdiv className=\x26quot;appleItem\x26quot;\x3e\n                \x3cdiv className=\x26quot;apple\x26quot;\x3e\x3cimg src=\x26quot;..\/images\/apple.png\x26quot; alt=\x26quot;\x26quot;\/\x3e\x3c\/div\x3e\n                \x3cdiv className=\x26quot;info\x26quot;\x3e\n                    \x3cdiv className=\x26quot;name\x26quot;\x3e红苹果 - {state.id}号\x3c\/div\x3e\n                    \x3cdiv className=\x26quot;weight\x26quot;\x3e{state.weight}克\x3c\/div\x3e\n                \x3c\/div\x3e\n                \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\x3cbutton onClick={() =\x3e actions.eatApple(state.id) }\x3e吃掉\x3c\/button\x3e\x3c\/div\x3e\n            \x3c\/div\x3e\n        );\n\n    }\n\n\n}\n\nexport default AppleItem;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eimport React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27react\x27;\n\nclass AppleItem extends React.Component {\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e != this.props.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n    }\n\n    render() {\n\n        let { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, actions } = this.props;\n\n        \/**\n         * 这个区域是 mock 数据区，也作为组件文档，请书写清楚\n         * \/\/在组件发布时，请注释掉，提高性能\n         *\/\n        let mockState = {\n            id: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            weight: \x3cspan class=\x22hljs-number\x22\x3e256\x3c\/span\x3e,\n            isEaten: false\n        };\n        \n        let mockActions = {\n            eatApple : id =\x26gt; console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x27eatApple\x27,id)\n        };\n\n        \/**\n         * 开关这行代码，用于切换装入的数据来源。(为了开关的方便，请把两句代码合成一行)\n         * 在开发阶段打开，使用内部 \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e 和 action, 开发完成后请注释关闭\n         *\/\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = mockState; actions = mockActions;\n\n        if (\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.isEaten) return null;\n\n        return (\n            \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22appleItem\x22\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22apple\x22\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e\x26lt;img src=\x22..\/images\/apple.png\x22 alt=\x22\x22\/\x26gt;\x3c\/span\x3e\x26lt;\/div\x26gt;\n                \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22info\x22\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22name\x22\x26gt;\x3c\/span\x3e红苹果 - {\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.id}号\x26lt;\/div\x26gt;\n                    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22weight\x22\x26gt;\x3c\/span\x3e{\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.weight}克\x26lt;\/div\x26gt;\n                \x26lt;\/div\x26gt;\n                \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22btn-div\x22\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={() =\x26gt;\x3c\/span\x3e actions.eatApple(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.id) }\x26gt;吃掉\x26lt;\/button\x26gt;\x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n        );\n\n    }\n\n\n}\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e AppleItem;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e容器和普通显示组件state的对比：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e容器的state我们是从store中的总state直接获得的，注意 AppleBusket.jsx 靠后面这段代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function select(state) {\n    return {\n        state: state.appleBusket\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3efunction select(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e) {\n    return {\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.appleBusket\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eselect是一个state筛选器, 功能是选择总state中的 appleBusket 作为本容器的state。而这个state的格式我们会在其对应的reducer中规定（因为我们需要在reducer中提供对应state的默认值）\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e普通显示组件的state格式由组件开发人员自己约定即可，并在mockState 区域给出例子。当别人要使用你的显示组件时，必须根据你规定的格式传入state数据。在组件里面，我们一般会实现如下这样一个自动切换器，当组件的使用者在使用该组件时没有传入state, 就会显示内部的模拟state，为使用者带来预览效果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if(state === undefined)  state = mockState;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eif(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e === undefined)  \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = mockState;\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e以上就是\x3cstrong\x3e布局组\x3c\/strong\x3e的开发工作： 静态布局 \x2b 动态布局。前者只需要会html\x2bcss布局即可，后者还要会一些jsx的语法和基本的js语法。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e逻辑组\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e任务1：\x3cstrong\x3eaction 开发\x3c\/strong\x3e\x26nbsp;\x3c\/h3\x3e\n\x3cp\x3e任务内容：开发 redux 流程的 action，并把action部署到对应容器和组件中。\x3cbr\x3e技能要求：需要对js比较熟悉，并要求要会使用jq的ajax功能。\x3c\/p\x3e\n\x3cp\x3e首先，我们先来看看 action 的定义。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 狭义的 action\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e狭义的action是指一个简单的对象，对象的结构如下，只要在对象内包含type属性指明action的名称即可，同时，在对象的其他属性里，可以以任何形式自由保存其他相关数据。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let action = {\n    type: \x27ACTION_NAME\x27,\n    ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e action = {\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_NAME\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-params\x22\x3e...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一般 type 的内容使用 大写字母\x2b下划线 的格式。\x3c\/p\x3e\n\x3cp\x3e在这个定义的基础上，业界提出以一种标准 action， 叫做 \x3ca href=\x22https:\/\/github.com\/acdlite\/flux-standard-action\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFlux Standard Action\x3c\/a\x3e , 该标准下的action除了type属性之外，只允许多加（不是必须包含）这三个属性：payload，error，meta。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let FSA = {\n    type: \x27ACTION_NAME\x27,\n    payload: \x3cbool | number | string | object\x3e, \/\/action的负载，可以是数据或 error 对象\n    error: \x3cbool\x3e, \/\/ 指明该action是否是一个以 error 为负载的action\n    meta: \x3cstring\x3e \/\/ action元数据， 包含解释该action含义的信息\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e FSA = {\n    type: \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_NAME\x27\x3c\/span\x3e,\n    payload: \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ebool\x3c\/span\x3e | number | \x3cspan class=\x22hljs-keyword\x22\x3estring\x3c\/span\x3e | \x3cspan class=\x22hljs-keyword\x22\x3eobject\x3c\/span\x3e\x26gt;, \x3cspan class=\x22hljs-comment\x22\x3e\/\/action的负载，可以是数据或 error 对象\x3c\/span\x3e\n    error: \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ebool\x3c\/span\x3e\x26gt;, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指明该action是否是一个以 error 为负载的action\x3c\/span\x3e\n    meta: \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3estring\x3c\/span\x3e\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ action元数据， 包含解释该action含义的信息\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们宅印约定都要使用 Flux Standard Action，下面是吃苹果 action：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let FSA = {\n    type: \x27EAT_APPLE\x27,\n    payload: 3, \/\/ 负载是3, 说明吃掉3号苹果， 这里也可以写成 { id : 3 }\n    meta: \x27This action will eat an apple!\x27 \/\/ (不是必须的)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e FSA = {\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27EAT_APPLE\x27\x3c\/span\x3e,\n    payload: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 负载是3, 说明吃掉3号苹果， 这里也可以写成 { id : 3 }\x3c\/span\x3e\n    meta: \x3cspan class=\x22hljs-string\x22\x3e\x27This action will eat an apple!\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (不是必须的)\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一个action只是一个对象，他需要根据时机被 store 的 dispatch 函数调用才会开始进行处理：\x3ccode\x3estore.dispatch(action_1)\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2. 广义的 action\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e广义的 action 是指在中间件的支持下，dispatch 函数可以调用的数据类型，除了普通action之外，常见的有 thunk, promise 等。我们用常用的 thunk来举个例子。\x3c\/p\x3e\n\x3cp\x3ethunk 其实就是一个代码片段，可以简单理解为一种特定的函数，我们可以dispatch 这个thunk。 thunk函数具有如下的签名\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(dispatch, getState) =\x3e { \n    \/\/在函数体内可以使用 dispatch 方法来发射其他 action\n    \/\/在函数体内可以使用 getState 方法来获取当前的state\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e(dispatch, getState) =\x26gt; { \n    \/\/在函数体内可以使用 dispatch 方法来发射其他 action\n    \/\/在函数体内可以使用 getState 方法来获取当前的\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是一个我们摘苹果动作的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let pickAppleAction = (dispatch, getState) =\x3e { \n    ajax({\n        url: \x27\/pickApple\x27,\n        method: \x27GET\x27,\n    }).done(data =\x3e {\n        \/\/发射普通 action\n        dispatch({\n            type: \x27DONE_PICK_APPLE\x27,\n            payload: data.weight \/\/ 或者 payload: {weight: data.weight}\n        }); \n    }).fail(xhr =\x3e {\n        \/\/发射普通 action, 其负载是一个error\n        dispatch({\n            type: \x27FAIL_PICK_APPLE\x27,\n            payload: new Error(xhr.responseText) ,\n            error: true\n        }); \n    })\n}\n        \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e pickAppleAction = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3edispatch, getState\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e { \n    ajax({\n        url: \x3cspan class=\x22hljs-string\x22\x3e\x27\/pickApple\x27\x3c\/span\x3e,\n        method: \x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e,\n    }).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/发射普通 action\x3c\/span\x3e\n        dispatch({\n            \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27DONE_PICK_APPLE\x27\x3c\/span\x3e,\n            payload: data.weight \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 或者 payload: {weight: data.weight}\x3c\/span\x3e\n        }); \n    }).fail(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3exhr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/发射普通 action, 其负载是一个error\x3c\/span\x3e\n        dispatch({\n            \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27FAIL_PICK_APPLE\x27\x3c\/span\x3e,\n            payload: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(xhr.responseText) ,\n            error: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        }); \n    })\n}\n        \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e定义好之后，我们可以直接这样调用这个thunk：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dispatch( pickAppleAction )\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3edispatch\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e( pickAppleAction )\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来，我们来做进一步优化，把action统一为actionCreator , 我们不难察觉，每次都要书写{ type: \x27ACTION_NAME\x27 ... } 是很麻烦也很容易出错的，actionCreator 就是为解决这个问题而生的，actionCreator 就是一个产生特定action（这里指广义的action）的函数，下面来看简单的actionCreator 例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/传统写法\nvar eatApple = function(id) {\n    return {\n        type: \x27EAT_APPLE\x27, \n        payload: id\n    }\n}\n\n\/\/ es6 写法\nlet eatApple = id =\x3e ({\n    type: \x27EAT_APPLE\x27, \n    payload: id\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/传统写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e eatApple = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eid\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27EAT_APPLE\x27\x3c\/span\x3e, \n        payload: id\n    }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ es6 写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e eatApple = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eid\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27EAT_APPLE\x27\x3c\/span\x3e, \n    payload: id\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一来，一方面是使用起来比较简单方便，另一方面是具有文档作用。\x3cbr\x3e只需要这样发射action就可以啦：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dispatch(eatApple(3))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3edispatch(\x3cspan class=\x22hljs-name\x22\x3eeatApple\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e普通action的actionCreator封装工作, 可以使用 \x3ca href=\x22https:\/\/github.com\/acdlite\/redux-actions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-actions\x3c\/a\x3e 自动完成, 查看其文档就可以快速上手，可以根据情况使用。\x3c\/p\x3e\n\x3cp\x3e在项目中，我们会为每个板块写一个的action文件，并统一使用actionCreator, 所以最终 appleAction.js 如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import ajax from \x27..\/services\/ajax\x27; \/\/经过封装的加强型 ajax 函数\n\n\/\/这是名空间，对普通action做划分\nconst prefix = \x27apple\/\x27;\n\nlet actions = {\n\n    \/\/注意这里需要 () =\x3e ... , 不然 pickAppleAction 不是一个actionCreator, 而是一个thunk\n    pickApple: () =\x3e (dispatch, getState) =\x3e {\n        \n        \/\/如果正在摘苹果，则结束这个thunk, 不执行摘苹果\n        if(getState().isPicking)\n            return;\n        \n        \/\/通知开始摘苹果\n        dispatch(actions.beginPickApple());\n        \n        \/\/发送摘苹果请求\n        ajax({\n            url: \x27\/appleBasket\/pickApple\x27,\n            method: \x27GET\x27\n        }).done(data =\x3e {\n            dispatch(actions.donePickApple(data.weight))\n        })\n        .fail(xhr =\x3e {\n            dispatch(actions.failPickApple(xhr.responseText));\n        })\n    },\n    \n    beginPickApple: () =\x3e ({\n        type: \x27apple\/BEGIN_PICK_APPLE\x27\n    }),\n    \n    donePickApple: appleWeight =\x3e ({\n        type: \x27apple\/DONE_PICK_APPLE\x27,\n        payload: appleWeight\n    }),\n    \n    failPickApple: errMsg =\x3e ({\n        type: \x27apple\/FAIL_PICK_APPLE\x27,\n        payload: new Error(errMsg),\n        error: true\n    }),\n    \n    eatApple: appleId =\x3e ({\n        type: \x27apple\/EAT_APPLE\x27,\n        payload: appleId\n    })\n\n};\n\nexport default actions;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ajax \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/services\/ajax\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/经过封装的加强型 ajax 函数\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/这是名空间，对普通action做划分\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e prefix = \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e actions = {\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/注意这里需要 () =\x26gt; ... , 不然 pickAppleAction 不是一个actionCreator, 而是一个thunk\x3c\/span\x3e\n    pickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e (dispatch, getState) =\x26gt; {\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果正在摘苹果，则结束这个thunk, 不执行摘苹果\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(getState().isPicking)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/通知开始摘苹果\x3c\/span\x3e\n        dispatch(actions.beginPickApple());\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/发送摘苹果请求\x3c\/span\x3e\n        ajax({\n            url: \x3cspan class=\x22hljs-string\x22\x3e\x27\/appleBasket\/pickApple\x27\x3c\/span\x3e,\n            method: \x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e\n        }).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(actions.donePickApple(data.weight))\n        })\n        .fail(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3exhr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(actions.failPickApple(xhr.responseText));\n        })\n    },\n    \n    beginPickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/BEGIN_PICK_APPLE\x27\x3c\/span\x3e\n    }),\n    \n    donePickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eappleWeight\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/DONE_PICK_APPLE\x27\x3c\/span\x3e,\n        payload: appleWeight\n    }),\n    \n    failPickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerrMsg\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/FAIL_PICK_APPLE\x27\x3c\/span\x3e,\n        payload: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(errMsg),\n        error: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \n    eatApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eappleId\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/EAT_APPLE\x27\x3c\/span\x3e,\n        payload: appleId\n    })\n\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e actions;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一来，只要引入 \x26nbsp;appleAction.js ，就可以快速使用定义好的action，结合某些编辑器的智能提示功能，非常方便，下面是 vsCode 编辑器的效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633606\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633606\x22 alt=\x22导入苹果篮子板块的action\x22 title=\x22导入苹果篮子板块的action\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633607\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633607\x22 alt=\x22vsCode中的智能提示 \x22 title=\x22vsCode中的智能提示 \x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e写好了action之后，只要在 container 的对应位置装上action就好了,  下面是appleBasket.jsx 总体代码:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport { connect } from \x27react-redux\x27;\n\nimport AppleItem from \x27..\/components\/AppleItem\x27;\nimport actions from \x27..\/actions\/appleActions\x27;\n\nclass AppleBusket extends React.Component {\n    render() {\n        let { state, dispatch } = this.props;\n        ...\n        return (\n          ...\n          \x3cdiv className=\x26quot;appleList\x26quot;\x3e\n              { state.apples.map(apple =\x3e\n                  \x3cAppleItem\n                      state ={apple}\n                      actions=\x22{{\x22eatApple: id =\x3e dispatch(actions.eatApple(id))\x22}}\x22\n                      key={apple.id}\n                  \/\x3e\n              ) }\n          \x3c\/div\x3e\n\n          \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\n              \x3cbutton onClick={() =\x3e dispatch(actions.pickApple())}\x3e摘苹果\x3c\/button\x3e\n          \x3c\/div\x3e\n          ...\n       )\n    }\n}\n\nfunction selectState(state) {\n    return {\n        state: state.appleBusket\n    }\n}\nexport default connect(selectState)(AppleBusket);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eimport React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27react\x27;\nimport { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27react-redux\x27;\n\nimport AppleItem \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27..\/components\/AppleItem\x27;\nimport actions \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27..\/actions\/appleActions\x27;\n\nclass AppleBusket extends React.Component {\n    render() {\n        let { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, dispatch } = this.props;\n        ...\n        return (\n          ...\n          \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22appleList\x22\x26gt;\x3c\/span\x3e\n              { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.map(apple =\x26gt;\n                  \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;AppleItem\n                      state ={apple}\n                      actions=\x22{{\x22eatApple: id =\x26gt;\x3c\/span\x3e dispatch(actions.eatApple(id))\x22}}\x22\n                      key={apple.id}\n                  \/\x26gt;\n              ) }\n          \x26lt;\/div\x26gt;\n\n          \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22btn-div\x22\x26gt;\x3c\/span\x3e\n              \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={() =\x26gt;\x3c\/span\x3e dispatch(actions.pickApple())}\x26gt;摘苹果\x26lt;\/button\x26gt;\n          \x26lt;\/div\x26gt;\n          ...\n       )\n    }\n}\n\nfunction selectState(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e) {\n    return {\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.appleBusket\n    }\n}\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(selectState)(AppleBusket);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意这两行。就是装入action的地方\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22actions=\x22{{\x22eatApple: id =\x3e dispatch(actions.eatApple(id))\x22}}\x22\n\x3cbutton onClick={() =\x3e dispatch(actions.pickApple())}\x3e摘苹果\x3c\/button\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs django\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3eactions=\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22eatApple: id =\x26gt; dispatch(actions.eatApple(id))\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e dispatch(actions.pickApple())}\x26gt;摘苹果\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中引入的actions其实是actionCreators。\x3c\/p\x3e\n\x3cp\x3e此外，actionCreator还有很简洁的用法：对actionCreator做dispatch级别的封装，这个过程我们可以使用 redux 提供的 bindActionCreators 函数自动完成。然后就可以直接调用action，而不需要使用dispatch方法去调用actionCreator。看下面更新后的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport { bindActionCreators } from \x27redux\x27;\nimport { connect } from \x27react-redux\x27;\n\nimport AppleItem from \x27..\/components\/AppleItem\x27;\nimport actions from \x27..\/actions\/appleActions\x27;\n\nclass AppleBusket extends React.Component {\n    render() {\n        let { state, actions} = this.props;\n        ...\n        return (\n          ...\n          \x3cdiv className=\x26quot;appleList\x26quot;\x3e\n              { state.apples.map(apple =\x3e\n                  \x3cAppleItem\n                      state ={apple}\n                      actions=\x22{{\x22eatApple: actions.eatApple\x22}}\x22\n                      key={apple.id}\n                  \/\x3e\n              ) }\n          \x3c\/div\x3e\n\n          \x3cdiv className=\x26quot;btn-div\x26quot;\x3e\n              \x3cbutton onClick={actions.pickApple}\x3e摘苹果\x3c\/button\x3e\n          \x3c\/div\x3e\n          ...\n       )\n    }\n}\n\nfunction selectState(state) {\n    return {\n        state: state.appleBusket\n    }\n}\n\nfunction buildActionDispatcher(dispatch) {\n  return {\n      actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport default connect(selectState, buildActionDispatcher)(AppleBusket);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eimport React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27react\x27;\nimport { bindActionCreators } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27redux\x27;\nimport { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27react-redux\x27;\n\nimport AppleItem \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27..\/components\/AppleItem\x27;\nimport actions \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27..\/actions\/appleActions\x27;\n\nclass AppleBusket extends React.Component {\n    render() {\n        let { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, actions} = this.props;\n        ...\n        return (\n          ...\n          \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22appleList\x22\x26gt;\x3c\/span\x3e\n              { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.map(apple =\x26gt;\n                  \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;AppleItem\n                      state ={apple}\n                      actions=\x22{{\x22eatApple: actions.eatApple\x22}}\x22\n                      key={apple.id}\n                  \/\x26gt;\x3c\/span\x3e\n              ) }\n          \x26lt;\/div\x26gt;\n\n          \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div className=\x22btn-div\x22\x26gt;\x3c\/span\x3e\n              \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={actions.pickApple}\x26gt;\x3c\/span\x3e摘苹果\x26lt;\/button\x26gt;\n          \x26lt;\/div\x26gt;\n          ...\n       )\n    }\n}\n\nfunction selectState(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e) {\n    return {\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.appleBusket\n    }\n}\n\nfunction buildActionDispatcher(dispatch) {\n  return {\n      actions: bindActionCreators(actions, dispatch)\n    }\n}\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(selectState, buildActionDispatcher)(AppleBusket);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意这三个变动：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let { state, actions } = this.props;\nactions=\x22{{\x22eatApple: actions.eatApple \x22}}\x22\n\x3cbutton onClick={actions.pickApple}\x3e摘苹果\x3c\/button\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3elet { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, actions } = this.props;\nactions=\x22{{\x22eatApple: actions.eatApple \x22}}\x22\n\x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={actions.pickApple}\x26gt;\x3c\/span\x3e摘苹果\x26lt;\/button\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们对比一下之前的写法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let { state, dispatch } = this.props\nactions=\x22{{\x22eatApple: id =\x3e dispatch(actions.eatApple(id))\x22}}\x22\n\x3cbutton onClick={() =\x3e dispatch(actions.pickApple())}\x3e摘苹果\x3c\/button\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3elet { \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, dispatch } = this.props\nactions=\x22{{\x22eatApple: id =\x26gt; dispatch(actions.eatApple(id))\x22}}\x22\n\x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={() =\x26gt;\x3c\/span\x3e dispatch(actions.pickApple())}\x26gt;摘苹果\x26lt;\/button\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以发现使用新的方式使代码简洁了很多！\x3c\/p\x3e\n\x3cp\x3e但是，这对于有对象属性提示功能编辑器来说，这种方式会使编辑器无法分析对象属性：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633608\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633608\x22 alt=\x22不能判断出对象的属性，大家可以对比上一图的效果\x22 title=\x22不能判断出对象的属性，大家可以对比上一图的效果\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这时，需要一边看actions文件对该actions对象的定义，一边在目标位置填入action，不过这也不是很麻烦。而且对于使用没有对象属性提示的编辑器的开发者来说，这个 drawback 根本就不存在。我们相对推荐使用这种经过dispatch封装的action, 但不要求，大家根据自己的情况使用即可。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e对于普通显示组件\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e对于普通显示组件的actions传递方式，我们统一使用actions属性传递，如下：\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eAppleBasket.jsx\x3c\/em\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\n\x3cAppleItem\n    state ={apple}\n    actions=\x22{{\x22eatApple: actions.eatApple \x22}}\x22\n    key={apple.id}\n\/\x3e\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e...\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAppleItem\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e =\x3cspan class=\x22hljs-string\x22\x3e{apple}\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3eactions\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22eatApple:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eactions.eatApple\x3c\/span\x3e \x22}}\x22\n    \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{apple.id}\x3c\/span\x3e\n\/\x26gt;\x3c\/span\x3e\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cem\x3eAppleItem.jsx\x3c\/em\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\n\x3cbutton onClick={() =\x3e actions.eatApple(state.id)}\x3e吃掉\x3c\/button\x3e\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e...\n\x3cspan class=\x22hljs-variable\x22\x3e\x26lt;button onClick={() =\x26gt;\x3c\/span\x3e actions.eatApple(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.id)}\x26gt;吃掉\x26lt;\/button\x26gt;\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e普通显示组件使用统一actions属性接受父级的action，可以在组件内部建立mockActions, 这个mockActions 既有文档功能，也有测试功能，非常实用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let mockActions = {\n    eatApple : id =\x3e console.log(\x27eatApple\x27,id), \/\/指定了函数的签名\n    foo: (arg1,arg2) =\x3e console.log(\x27foo\x27,arg1,arg2) \/\/也响应了调用测试\n};\n\n\/**\n  * 开关这行代码，用于切换装入的state和actions来源。(为了开关的方便，请把两句代码合成一行)\n  * 在开发阶段打开，使用内部 state 和 action, 开发完成后请注释关闭\n  *\/\nstate = mockState; actions = mockActions;    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3elet mockActions = {\n    eatApple : id =\x26gt; console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x27eatApple\x27,id), \/\/指定了函数的签名\n    foo: (arg1,arg2) =\x26gt; console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x27foo\x27,arg1,arg2) \/\/也响应了调用测试\n};\n\n\/**\n  * 开关这行代码，用于切换装入的\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e和actions来源。(为了开关的方便，请把两句代码合成一行)\n  * 在开发阶段打开，使用内部 \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e 和 action, 开发完成后请注释关闭\n  *\/\n\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = mockState; actions = mockActions;    \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e点击 “摘苹果” 和 “吃掉” 按钮，我们看看控制台，已经可以发出我们想要的action啦：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633609\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633609\x22 alt=\x22该log功能需要 redux-log 中间件支持\x22 title=\x22该log功能需要 redux-log 中间件支持\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e好啦，actions 开发的内容就介绍到这里。我们来总结一下我们对action所做的封装：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3eaction\x3c\/strong\x3e -\x26gt; \x3cstrong\x3eactionCreator\x3c\/strong\x3e -\x26gt; \x3cstrong\x3eactionDispatcher\x3c\/strong\x3e\n\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e任务2：reducer 开发\x3c\/h3\x3e\n\x3cp\x3e开发内容： reducer的其实就是action的\x3cstrong\x3e处理器\x3c\/strong\x3e。其开发的内容很明确清晰，就是开发一类函数，接受action 和 当前的state，返回新的state。\x3c\/p\x3e\n\x3cp\x3e技术要求：要求对js比较熟悉，需要会使用 immutable.js 这个数据静态化库。\x3c\/p\x3e\n\x3cp\x3e下面是reducer功能的图解：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633610\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633610\x22 alt=\x22reducer的功能\x22 title=\x22reducer的功能\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们先看看我们苹果板块的state的数据结构，非常简单，这里是某个时刻的状态：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    isPicking : false,\n    newAppleId: 1,\n    apples: [\n        {\n            id: 0,\n            weight: 235,\n            isEaten: false\n        }\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3eisPicking\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    newAppleId:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    apples:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            id:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            weight:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            isEaten:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e]\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有三个一级属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3eisPicking\x3c\/strong\x3e ：表示是否正在摘苹果，我们在上面已经知道，摘苹果其实是发送一个ajax请求，向后台摘一个苹果，这个请求在进行时我们会把 isPicking 设置为ture, 表明正在摘苹果，同时禁止在完成前再发送摘苹果请求\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3enewAppleId\x3c\/strong\x3e：表示新苹果的编号\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eapples\x3c\/strong\x3e：是苹果列表数组，存放着苹果对象，苹果对象的结构在apples数组里有给出实例。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们上面提及actions分为广义的action和狭义的普通action。其实，非普通action, 如thunk，一般会以发起普通action结束。我们reducer只需要处理狭义上的普通action,。在我们摘苹果应用里，总共有这4个普通action:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/通知store应用开始摘苹果\nbeginPickApple: () =\x3e ({\n    type: \x27apple\/BEGIN_PICK_APPLE\x27\n}),\n\n\/\/摘苹果成功    \ndonePickApple: appleWeight =\x3e ({\n    type: \x27apple\/DONE_PICK_APPLE\x27,\n    payload: appleWeight\n}),\n\n\/\/摘苹果失败    \nfailPickApple: error =\x3e ({\n    type: \x27apple\/FAIL_PICK_APPLE\x27,\n    payload: error,\n    error: true\n}),\n\n\/\/吃苹果\neatApple: appleId =\x3e ({\n    type: \x27apple\/EAT_APPLE\x27,\n    payload: appleId\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/通知store应用开始摘苹果\x3c\/span\x3e\nbeginPickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/BEGIN_PICK_APPLE\x27\x3c\/span\x3e\n}),\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/摘苹果成功    \x3c\/span\x3e\ndonePickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eappleWeight\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/DONE_PICK_APPLE\x27\x3c\/span\x3e,\n    payload: appleWeight\n}),\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/摘苹果失败    \x3c\/span\x3e\nfailPickApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/FAIL_PICK_APPLE\x27\x3c\/span\x3e,\n    payload: error,\n    error: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n}),\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/吃苹果\x3c\/span\x3e\neatApple: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eappleId\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\/EAT_APPLE\x27\x3c\/span\x3e,\n    payload: appleId\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是根据action，写出的 reducer 的基本结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 (state = defaultState, action) =\x3e {\n\n    switch (action.type) {\n        case \x27apple\/BEGIN_PICK_APPLE\x27:\n            \/\/TODO\n            return state;\n            \n        case \x27apple\/DONE_PICK_APPLE\x27:\n            \/\/TODO\n            return state;\n            \n        case \x27apple\/FAIL_PICK_APPLE\x27:\n            \/\/TODO\n            return state;\n            \n        case \x27apple\/EAT_APPLE\x27:\n            \/\/TODO\n            return state;\n            \n        default:\n            return state;\n    }\n  \n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e (\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3eState, action) =\x26gt; {\n\n    switch (action.type) {\n        case \x27apple\/BEGIN_PICK_APPLE\x27:\n            \/\/TODO\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n            \n        case \x27apple\/DONE_PICK_APPLE\x27:\n            \/\/TODO\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n            \n        case \x27apple\/FAIL_PICK_APPLE\x27:\n            \/\/TODO\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n            \n        case \x27apple\/EAT_APPLE\x27:\n            \/\/TODO\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n            \n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n    }\n  \n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以看到，reducer是一个函数，接受state和action两个参数，在函数内部，根据 action.type 来确定要做哪些操作，并且每种操作都要返回state（或者是新的，或者是原来的）。\x3c\/p\x3e\n\x3cp\x3e我们以 \x3ccode\x3eapple\/EAT_APPLE\x3c\/code\x3e动作为例，讲解如何书写reducer。EAT_APPLE 动作的含义是吃苹果，我们可以非常简单地处理这个动作：直接把对应苹果对象的 isEaten 属性设为true即可。\x3c\/p\x3e\n\x3cp\x3e按照一般的思维，我们会这样处理：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\n    case \x27apple\/EAT_APPLE\x27:\n        state.apples[action.payload].isEaten = true;\n        return state;\n...\n            \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e...\n    case \x27apple\/EAT_APPLE\x27:\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples[action.payload].isEaten = true;\n        return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n...\n            \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是，这种方法在 redux 应用里看不到作用，因为这种写法不会使store触发react进行重新渲染，为什么呢？因为 \x3ccode\x3enewState == oldState\x3c\/code\x3e ! 下面我们来做一些解释：\x3c\/p\x3e\n\x3cp\x3e首先，要先从js对象的相等判断运算说起，我们看下面的代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = { foo: \x27bar\x27};\nlet b = { foo: \x27bar\x27};\nconsole.log( a == b ); \/\/结果是 false\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a = { foo: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e b = { foo: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e};\nconsole.log( a == b ); \/\/结果是 \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ea 和 b 看起来一样，但为什么是false呢？因为对象和数组的赋值是引用赋值， a 和 b 只是一个引用符号，其所指向的对象实体不同（比如 a -\x26gt; object#001, b -\x26gt; object#002），js的对象（数组）相等判断是根据是否指向同一个对象实体来的确定的 (object#001 ？= object#002 \/\/ false)，详见 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Operators\/Comparison_Operators#Equality\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e再看看下面的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = {foo: \x27bar\x27};\nlet b = a;\nb.foo = \x27good\x27;\n\nconsole.log( a == b ); \/\/结果是 true\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3elet a = {foo: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e}\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\nlet \x3cspan class=\x22hljs-keyword\x22\x3eb \x3c\/span\x3e= a\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eb.foo \x3c\/span\x3e= \x3cspan class=\x22hljs-string\x22\x3e\x27good\x27\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\nconsole.log( a == \x3cspan class=\x22hljs-keyword\x22\x3eb \x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e; \/\/结果是 true\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在应该可以理解刚才为什么\x3ccode\x3enewState == oldState\x3c\/code\x3e了吧~\x3c\/p\x3e\n\x3cp\x3eredux 是根据返回的state是否改变来决定是否通知 react 更新的。根据这种情况所，可能有人会这样改进刚才的reducer：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    state.apples[action.payload].isEaten = true;\n    newState = Object.assign({},state);\n    return newState;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples[action.payload].isEaten = true;\n    newState = Object.assign({},\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e);\n    return newState;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一来，点击 “吃掉”按钮，看到了有效果了，苹果不见了！但是，这种写法只是迎合了redux更新视觉组件的触发条件，还具有很大的局限性，不是我们redux规定的reducer。下面我们来看看正确的reducer：\x3c\/p\x3e\n\x3cp\x3e首先，reducer有这样的重要约束：\x3cstrong\x3e在reducer里，不可以修改原来的state，需要保持使每个版本的state不变\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e这种保持数据不变（\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Persistent_data_structure\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePersistent data structure\x3c\/a\x3e）的方式在函数式编程（\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Functional_programming\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFunctional programming\x3c\/a\x3e）非常常见。在我们的redux应用里，其意义在于：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 调试意义\x3c\/strong\x3e：保持每个版本的state的不变性，使得我们可以跟踪每个时刻的state, 跟踪应用的“发展史”，这个特性为调试带来了很大的方便。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633611\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633611\x22 alt=\x22我们点击了摘苹果按钮，最终发起了两个(普通)action, 我们可以轻松查看action前后的state\x22 title=\x22我们点击了摘苹果按钮，最终发起了两个(普通)action, 我们可以轻松查看action前后的state\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2. 性能意义\x3c\/strong\x3e：保持state不变这个约束引导我们使用\x3cstrong\x3e局部更新对象的方法\x3c\/strong\x3e，这样会可以非常有效地提高react或其他显示框架的渲染效率。我们先来看看为了保持数据不变性，要怎么对state做更新，以我们的苹果篮子state为例：\x3c\/p\x3e\n\x3cp\x3e例子：通知开始摘苹果：\x3ccode\x3eapple\/BEGIN_PICK_APPLE\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e为了保证每个版本的state不变性，我们有两种实现方式：“深复制”，“浅复制”。我们来看两种模式的内部原理：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e深复制方式\x3c\/strong\x3e：有人会这样想：“保持state的不变性很容易，只需要深复制一个state, 让后在新的state要怎么修改就怎么修改，不ok了吗？”，如下就是深复制\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633612\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633612\x22 alt=\x22深复制\x22 title=\x22深复制\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这种方式是一种很低级保持不变性的方式：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e深复制操作运行效率低\x3c\/li\x3e\n\x3cli\x3e没有为渲染环节提供提高渲染效率的铺垫\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e它只是简单迎合保持数据不变性的约束，虽然有一定调试意义，但是，不但没有提高程序的性能，反而降低了程序的总体性能！没有实践意义。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e浅复制方式\x3c\/strong\x3e：浅复制模式只对内部数据发生变化的引用做更新，如下\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633613\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633613\x22 alt=\x22Paste_Image.png\x22 title=\x22Paste_Image.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e“state” 对象的内部数据发生变化，所以创建新的state引用；而apples array 内部数据不发生变化，所以就不对该引用做更新！在这个操作中，这种浅复制的方法运行效率比较高，而且其简单地实现了数据不变性，为调试带来方便，同时，也是更重要的，这种浅复制的方式极大地提高了视觉组件渲染阶段的运行效率！我们来对比一下：当用户点击摘苹果时，如果使用“深复制”，渲染程序需要重新遍历整个state对象树来做视觉更新，而使用浅复制来实现数据不变性时，渲染程序只需要遍历state对象的\x3cstrong\x3e一级子节点\x3c\/strong\x3e即可，而不需要对apples array 做遍历，性能大大地提高。尤其是当苹果很多的时候，两种方式的性能差距是非常明显的。\x3c\/p\x3e\n\x3cp\x3e备注：在react组件里面，要开启条件更新这个生命周期函数 shouldComponentUpdate， 才会对把这个性能提高点释放出来，类似这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nshouldComponentUpdate(nextProps) {\n    return nextProps.state != this.props.state;\n}\n...\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e...\nshouldComponentUpdate(nextProps) {\n    return nextProps.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e != this.props.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n}\n...\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们再给出 “吃苹果” reducer 进行浅复制的例子：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633614\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633614\x22 alt=\x22吃苹果过程\x22 title=\x22吃苹果过程\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e现在大家应该理解了用浅复制实现数据不变性的原理和意义了，下面我们来看具体的代码实现。\x3c\/p\x3e\n\x3cp\x3e我们的代码用 es6 编写，这里要用到 es6 两个非常方便的特性：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Object\/assign\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eObejct.assign()\x3c\/a\x3e 方法，该方法用于产生新的对象\x3c\/li\x3e\n\x3cli\x3e延展操作符 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Operators\/Spread_operator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSpread operator\x3c\/a\x3e : ...\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e大家可以稍微看一下文档，或者看我下面的例子就知道其用法了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ apple basket reducer\n\nexport default (state = {\n    isPicking: false,\n    newAppleId: 1,\n    apples: [\n        {\n            id: 0,\n            weight: 235,\n            isEaten: false\n        }\n    ]\n}, action) =\x3e {\n    \n    let newState ;\n    \n\n    switch (action.type) {\n        case \x27apple\/BEGIN_PICK_APPLE\x27:\n            newState = Object.assign({}, state, {\n                isPicking: true\n            });\n            return newState;\n\n        case \x27apple\/DONE_PICK_APPLE\x27:\n            newState = Object.assign({}, state, {\n                apples: [\n                    ...state.apples,\n                    {\n                        id: state.newAppleId,\n                        weight: action.payload,\n                        isEaten: false\n                    }\n                ],\n                newAppleId: state.newAppleId \x2b 1,\n                isPicking: false\n            })\n            return newState;\n\n        case \x27apple\/FAIL_PICK_APPLE\x27:\n            \/\/这里只是简单处理\n            newState = Object.assign({}, state, {\n                isPicking: false\n            });\n            return newState;\n\n        case \x27apple\/EAT_APPLE\x27:\n            newState = Object.assign({}, state, {\n                apples: [\n                    ...state.apples.slice(0, action.payload),\n                    Object.assign({}, state.apples[action.payload], { isEaten: true }),\n                    ...state.apples.slice(action.payload \x2b 1)\n                ]\n            })\n            return newState;\n\n        default:\n            return state;\n    }\n\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ apple basket reducer\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = {\n    isPicking: false,\n    newAppleId: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    apples: [\n        {\n            id: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            weight: \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e,\n            isEaten: false\n        }\n    ]\n}, action) =\x26gt; {\n    \n    let newState ;\n    \n\n    switch (action.type) {\n        case \x27apple\/BEGIN_PICK_APPLE\x27:\n            newState = Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, {\n                isPicking: true\n            });\n            return newState;\n\n        case \x27apple\/DONE_PICK_APPLE\x27:\n            newState = Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, {\n                apples: [\n                    ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples,\n                    {\n                        id: \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.newAppleId,\n                        weight: action.payload,\n                        isEaten: false\n                    }\n                ],\n                newAppleId: \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.newAppleId \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                isPicking: false\n            })\n            return newState;\n\n        case \x27apple\/FAIL_PICK_APPLE\x27:\n            \/\/这里只是简单处理\n            newState = Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, {\n                isPicking: false\n            });\n            return newState;\n\n        case \x27apple\/EAT_APPLE\x27:\n            newState = Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, {\n                apples: [\n                    ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action.payload),\n                    Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples[action.payload], { isEaten: true }),\n                    ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.slice(action.payload \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n                ]\n            })\n            return newState;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n    }\n\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e大家会发现这种浅复制操作在开发的过程会复杂一点，于是就有了 \x3ca href=\x22http:\/\/facebook.github.io\/immutable-js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eimmutable.js\x3c\/a\x3e 这个专门处理不变性数据的库(也是facebook出品)，它可以使用类似赋值的方式生成浅复制的不变性数据，下面来看看它怎么简化我们的开发：\x3c\/p\x3e\n\x3cp\x3e我们用 \x3ccode\x3eapple\/EAT_APPLE\x3c\/code\x3e 这个reducer来说明。\x3c\/p\x3e\n\x3cp\x3e这是原来的 reducer：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\ncase \x27apple\/EAT_APPLE\x27:\n    newState = Object.assign({}, state, {\n        apples: [\n            ...state.apples.slice(0, action.payload),\n            Object.assign({}, state.apples[action.payload], { isEaten: true }),\n            ...state.apples.slice(action.payload \x2b 1)\n        ]\n    })\n    return newState;\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e...\ncase \x27apple\/EAT_APPLE\x27:\n    newState = Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, {\n        apples: [\n            ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action.payload),\n            Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples[action.payload], { isEaten: true }),\n            ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.apples.slice(action.payload \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n        ]\n    })\n    return newState;\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这是使用 immutable.js 库的reducer :\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { fromJS } from \x27immutable\x27;\n...\ncase \x27apple\/EAT_APPLE\x27:\n    return fromJS(state).setIn([\x27apples\x27,action.payload,\x27isEaten\x27], true).toJS();\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eimport { \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3eJS } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27immutable\x27;\n...\ncase \x27apple\/EAT_APPLE\x27:\n    return \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3eJS(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e).\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eIn([\x27apples\x27,action.payload,\x27isEaten\x27], true).\x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3eJS();\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用了immutable.js后，轻松一行代码搞定！如果团队约定 state 都用 immutable 内部的数据类型，就可以连 fromJS 和 toJS 的转化都省了，超级方便！\x3c\/p\x3e\n\x3cp\x3e到这里， reducer 任务的介绍就结束啦~\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e至此，我们四个任务都介绍完了，大家应该对redux流程有一定概念了，我们来回顾一下我们的4个任务：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007633615\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007633615\x22 alt=\x22redux开发流程\x22 title=\x22redux开发流程\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这样子，我们通过流程化把 react \x2b redux 的主要流程都定义好了，这种模式的可构建性很高，可以构建非常复杂的单页面应用，不会因为应用的业务复杂性增加而增加开发复杂性。\x3c\/p\x3e\n\x3cp\x3e并且在这种分工里面，布局组对专注于写样式布局，大多是基本的HTML\x2bCSS 工作；逻辑组专注于开发应用逻辑，基本都是JS工作，分工得到非常明确的规划，人们可以更好地做精自己负责的工作，各个部件的耦合性很低，人员安排灵活性比较大。\x3c\/p\x3e\n\x3cp\x3e这就是我们用苹果篮子实例讲解的react\x2bredux开发流程，大家形成redux流程基本的概念就好，具体的理解还是要在实践中慢慢参透。\x3c\/p\x3e\n\x3cp\x3e一些依赖的JS库没有在这里给大家介绍，大家可以在后面的相关js库中查看。\x3c\/p\x3e\n\x3cblockquote\x3e非常感谢 @ckinmind 为本教程提供完整源码demo \x3cbr\x3e完整源码：\x3ca href=\x22https:\/\/github.com\/ckinmind\/apple-basket-redux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ckinmind\/a...\x3c\/a\x3e\x3cbr\x3e实例体验 \x3ca href=\x22https:\/\/ckinmind.github.io\/apple-basket-redux\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/ckinmind.github.io\/ap...\x3c\/a\x3e\x3cbr\x3e(摘苹果的过程模拟请求网络，体现一个异步动作，所以响应看起来有些延迟)\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e参考资料\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《MDN Javascript Documents》\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e阮一峰 \x3ca href=\x22http:\/\/es6.ruanyifeng.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《ECMAScript 6入门》\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3eIVAN ROGIC \x3ca href=\x22https:\/\/www.toptal.com\/react\/react-redux-and-immutablejs\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《React, Redux and Immutable.js: Ingredients for Efficient Web Applications》\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e项目相关js库列表：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/webpack\/webpack\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack\x3c\/a\x3e ： js开发环境和打包器\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/babel\/babel\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel\x3c\/a\x3e ： es6 编译器\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/facebook\/react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact\x3c\/a\x3e ： 当下非常火的显示框架\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-router\x3c\/a\x3e ： 与react搭配的前端路由器\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/reactjs\/redux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux\x3c\/a\x3e ： web应用的状态容器（定义了一套非常清晰的数据传递   流程）\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/reactjs\/react-redux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-redux\x3c\/a\x3e ： react 和 redux 的连接器\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/theaqua\/redux-logger\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-logger\x3c\/a\x3e ： redux 的控制台 log 中间件\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/gaearon\/redux-thunk\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-thunk\x3c\/a\x3e： redux 的 thunk 中间件\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router-redux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-router-redux\x3c\/a\x3e : react-router和 redux 配套使用的连接器\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/facebook\/immutable-js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eimmutable.js\x3c\/a\x3e: js 持久化数据框架\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/nuysoft\/Mock\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emock.js\x3c\/a\x3e ： 用于产生模拟后台数据的框架\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/jquery\/jquery\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejquery\x3c\/a\x3e: 在项目中，我们仅使用它的非常通行的 ajax 功能\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e感谢您的阅读，希望这篇文章对大家有帮助，欢迎回复和讨论。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>实例讲解基于 React+Redux 的前端开发流程</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005356568">https://segmentfault.com/a/1190000005356568</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/fdqbm8ifyww/" target="_blank">https://alili.tech/archive/fdqbm8ifyww/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>