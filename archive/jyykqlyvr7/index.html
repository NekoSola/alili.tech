<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用 Docker 搭建前端 Java 开发环境"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用 Docker 搭建前端 Java 开发环境 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jyykqlyvr7/",
				"appid": "1613049289050283", 
				"title": "使用 Docker 搭建前端 Java 开发环境 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jak378joz6a/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3h1lbn5k757/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&text=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&text=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&title=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&is_video=false&description=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&title=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&title=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&title=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjyykqlyvr7%2f&title=%e4%bd%bf%e7%94%a8%20Docker%20%e6%90%ad%e5%bb%ba%e5%89%8d%e7%ab%af%20Java%20%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用 Docker 搭建前端 Java 开发环境</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e这篇文章是为了解决前后端开发没有彻底分离的坑，因为我司用的是java，入职第一天就是搭建本地开发环境，看见了多年不见的eclipse的图标出现我的电脑上，我是难过的。后来知道并不是我一个人有此感受。依稀记得有个同学整整一天项目都没跑起来的崩溃感。为了解决这个问题我们尝试了很多方案，但是大大小小都有许多坑。\x3cbr\x3e直到有一天....我坐在地铁上，看着对面的妹子发呆，忽然一道闪电滑过，地铁突然停了！\x3cbr\x3e为什么我突然想不起当天那个妹子长什么样子了~好惆怅。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e解决的痛点\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e免搭建后端开发环境。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e开发环境改变只需要改变镜像就能同步更新。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e不需要eclipse等IDE工具。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e切换开发项目\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e解决思路\x3c\/h2\x3e\n\x3cp\x3e利用docker启动Ubuntu镜像，在容器中搭建好项目需要的开发环境，使用挂载卷将本地代码挂载到容器中，使用容器中的环境编译运行代码，宿主机通过 docker 暴漏出的端口访问容器中的服务，这样前端的开发机上就只需要部署docker就搞定了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e关于docker\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e了解docker\x3c\/h3\x3e\n\x3cp\x3e本文并不打算细讲\x3ccode\x3edocker\x3c\/code\x3e的知识，相关的文章有很多，如果有兴趣可以看 \x3ca href=\x22https:\/\/yeasy.gitbooks.io\/docker_practice\/content\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这本书\x3c\/a\x3e，对于docker的使用我也仅限于此工具的开发，如果有不对的地方还有大家指出来。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e加速器\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/docs.daocloud.io\/faq\/what-is-daocloud-accelerator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edaocloud 加速器\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e搭建环境\x3c\/h2\x3e\n\x3cp\x3e下载和安装好docker之后我们就可以开始了，我们下面讲的都是java，不过其他环境同理。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e获取 Ubuntu 镜像。\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3edocker pull ubuntu\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e完成后执行 \x3ccode\x3edocker images\x3c\/code\x3e 就能看到一个刚刚更新的镜像了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e进入容器\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3edocker run -it ubuntu\x3c\/code\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e安装软件、配置环境变量\x3c\/h3\x3e\n\x3cp\x3e首先更新apt-get\x3cbr\x3e\x3ccode\x3eapt-get update\x3c\/code\x3e \x3c\/p\x3e\n\x3cp\x3e接下来就可以使用 \x3ccode\x3eapt-get install *\x3c\/code\x3e 安装你需要的软件了，如果没有就下载安装包自行安装，同时配置好环境变量，这里就不赘述了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e启动服务\x3c\/h3\x3e\n\x3cp\x3e进入tomcat目录，启动服务，在浏览器打开 \x3ccode\x3e0.0.0.0:8080\x3c\/code\x3e, 如果没有错的话你会看到该服务器无法访问。这是因为我们刚才启动的服务是在docker内，如果不做一些操作的话我们是无法访问到docker内部的服务的。\x3c\/p\x3e\n\x3cp\x3e所以，我们先退出容器\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eexit\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e退出之后执行 \x3ccode\x3edocker ps -a\x3c\/code\x3e，就能看到我们刚才的容器依然还在，可能大多刚接触docker的人都会犯这个错误，以为退出容器之后容器就销毁了，其实不然。\x3c\/p\x3e\n\x3cp\x3e如果我们想再进入这个容器可以执行下面的命令，容器ID请复制自己的。\x3cbr\x3e\x3ccode\x3edocker exec -it 容器ID  bash\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e虽然容器还在运行，但是他并没有持久化，为了防止万一，在我们修改容器里面的内容之后尽快持久化。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker commit 容器ID java\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e这个命令的意思是将我们容器持久化为一个新的镜像，名字叫java。\x3c\/p\x3e\n\x3cp\x3e启动这个新建的镜像。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker run -it -p 8080:8080 java\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e注意看我们的启动命令发生了变化，多了一个 \x3ccode\x3e-P\x3c\/code\x3e 这个命令的意思是将容器内的 \x3ccode\x3e8080\x3c\/code\x3e 端口暴漏到宿主机上。\x3c\/p\x3e\n\x3cp\x3e再次访问 \x3ccode\x3e0.0.0.0:8080\x3c\/code\x3e，我们就能看到那只小花猫了，真可爱。\x3c\/p\x3e\n\x3cp\x3e刚才那个容器还在占用我们的内存怎么办，干掉他。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker rm 容器ID\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e至此我们的第一步已经完成了，接下来我们就要集成我们的代码了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e集成代码\x3c\/h2\x3e\n\x3cp\x3e我们刚才启动的容器是一个完全的独立的黑盒子，它根本不知道我们的代码再哪里，所以我们就要使用docker的挂载卷让宿主机和容器可以共享目录。\x3c\/p\x3e\n\x3cp\x3e不好意思，我们又要干掉刚才启动的那个容器了。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker run -it -v \/Users\/name\/web:\/opt\/root -p 8080:8080 java\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e我们的启动命令又加入了新成员 \x3ccode\x3e-v\x3c\/code\x3e。这个命令的意思就是将用户根目录下的 \x3ccode\x3eweb\x3c\/code\x3e 目录挂在到容器中 \x3ccode\x3e\/opt\/root\x3c\/code\x3e 目录下。\x3c\/p\x3e\n\x3cp\x3e进入目录后我们就能发现web目录下的文件静静的躺在里面，像是沉睡多年的玛丽苏在等待你的呼唤。\x3c\/p\x3e\n\x3cp\x3e开始呼唤吧。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3emvn clean install -U -Plocal -DskipTests\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e一段时间过后我们就会看到打包成功的提示，将war包copy到 tomcat webapps 目录下，就能访问你的项目了。\x3c\/p\x3e\n\x3cp\x3e至此我们的项目终于跑起来了，但是有几个问题。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e每次都要跑这么长的命令？好麻烦。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e每次改代码都要重新打包，时间很长。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e启动日志怎么看？报错了怎么办？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e怎么修改前端模板文件不需要重启服务？\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e基于这些问题，我们就需要写一个脚本来解决了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3eshell脚本\x3c\/h2\x3e\n\x3cp\x3e脚本将提供下面几个指令\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e-y 更新maven包-编译-打包-发布-启动tomcat\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-p 编译-打包-发布-启动tomcat\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-r 重启tomcat\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-c 重新编译java文件-发布-启动tomcat\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-w 监听vm文件,默认5S同步一次\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-l 查看tomcat日志\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e-h 帮助\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# 需要变动的变量\n#################################################################\n\n# 环境变量,根据conf目录下选择\n\nDEV=\x26quot;local\x26quot;\n\n#################################################################\n\n# 不需要改动的变量\n# war包地址\nWAR_URL=\x26quot;\/opt\/root\/target\/*.war\x26quot;\n\n# tomcat 地址\nTOM_URL=\x26quot;\/usr\/share\/tomcat7\x26quot;\n\n# 项目启动地址\nTOM_ROOT=\x26quot;${TOM_URL}\/webapps\x26quot;\n\n# 文件监听间隔，单位秒\nWT=5\n\n# 拷贝 vm\nWC_VM=\x26quot;src\/main\/webapp\/WEB-INF\/tpl \/usr\/share\/tomcat7\/webapps\/ROOT\/WEB-INF\/\x26quot;\n\n# 拷贝class\nWC_JAVA=\x26quot;target\/classes \/usr\/share\/tomcat7\/webapps\/ROOT\/WEB-INF\/\x26quot;\n\n# 通用方法\n# \n\n# 使用新包\nfunction newwar(){\n\n    # 删除旧包\n    rm -rf ${TOM_ROOT}\/*\n\n    # 移动war包\n    mv ${WAR_URL} ${TOM_ROOT}\/ROOT.war\n}\n\n# 重启tomcat\nfunction restart(){\n    # 关闭已启动程序\n    killall -9 java\n    # 启动服务\n    ${TOM_URL}\/bin\/startup.sh\n    # 输入启动日志\n    tail -f ${TOM_URL}\/logs\/catalina.out\n}\n\n# 指令处理\nwhile getopts \x26quot;:yprcwlh\x26quot; optname\ndo\n    case \x26quot;$optname\x26quot; in\n    \x26quot;y\x26quot;)\n        echo \x26quot;更新jar包\x26quot;\n\n        mvn clean install -U -P${DEV} -DskipTests\n        newwar\n        restart\n        ;;\n    \x26quot;p\x26quot;)\n        echo \x26quot;重新打包\x26quot;\n\n        mvn clean package -P${DEV} -DskipTests\n\n        newwar\n        restart\n        ;;\n    \x26quot;r\x26quot;)\n        echo \x26quot;重启tomcat\x26quot;\n\n        restart\n        ;;\n    \x26quot;c\x26quot;)\n        echo \x26quot;重新编译并重启服务\x26quot;\n\n        mvn clean compile -P${DEV} -DskipTests\n        cp -R ${WC_JAVA}\n        restart\n        ;;\n    \x26quot;w\x26quot;)\n        echo \x26quot;开始监听vm文件\x26quot;\n\n        # 监听 VM\n        watch -n ${WT} cp -R ${WC_VM}\n        ;;\n    \x26quot;l\x26quot;)\n        echo \x26quot;日志\x26quot;\n\n        # 监听 VM\n        tail -f ${TOM_URL}\/logs\/catalina.out\n        ;;\n    \x26quot;h\x26quot;)\n\n        echo \x26quot; -y 更新maven包-编译-打包-发布-启动一条龙服务\x26quot;\n        echo \x26quot; -p 编译打包发布启动一条龙服务\x26quot;\n        echo \x26quot; -r 重启tomcat\x26quot;\n        echo \x26quot; -c 重新java文件并部署重启服务\x26quot;\n        echo \x26quot; -w 监听vm文件,默认5S同步一次\x26quot;\n        echo \x26quot; -l 查看日志\x26quot;\n        echo \x26quot; -h 帮助\x26quot;\n        ;;\n    esac\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode class=\x22shell\x22\x3e# 需要变动的变量\n#################################################################\n\n# 环境变量,根据conf目录下选择\n\nDEV=\x3cspan class=\x22hljs-string\x22\x3e\x22local\x22\x3c\/span\x3e\n\n#################################################################\n\n# 不需要改动的变量\n# war包地址\nWAR_URL=\x3cspan class=\x22hljs-string\x22\x3e\x22\/opt\/root\/target\/*.war\x22\x3c\/span\x3e\n\n# tomcat 地址\nTOM_URL=\x3cspan class=\x22hljs-string\x22\x3e\x22\/usr\/share\/tomcat7\x22\x3c\/span\x3e\n\n# 项目启动地址\nTOM_ROOT=\x3cspan class=\x22hljs-string\x22\x3e\x22${TOM_URL}\/webapps\x22\x3c\/span\x3e\n\n# 文件监听间隔，单位秒\nWT=\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e\n\n# 拷贝 vm\nWC_VM=\x3cspan class=\x22hljs-string\x22\x3e\x22src\/main\/webapp\/WEB-INF\/tpl \/usr\/share\/tomcat7\/webapps\/ROOT\/WEB-INF\/\x22\x3c\/span\x3e\n\n# 拷贝\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\nWC_JAVA=\x3cspan class=\x22hljs-string\x22\x3e\x22target\/classes \/usr\/share\/tomcat7\/webapps\/ROOT\/WEB-INF\/\x22\x3c\/span\x3e\n\n# 通用方法\n# \n\n# 使用新包\nfunction newwar(){\n\n    # 删除旧包\n    rm -rf ${TOM_ROOT}\x3cspan class=\x22hljs-comment\x22\x3e\/*\n\n    # 移动war包\n    mv ${WAR_URL} ${TOM_ROOT}\/ROOT.war\n}\n\n# 重启tomcat\nfunction restart(){\n    # 关闭已启动程序\n    killall -9 java\n    # 启动服务\n    ${TOM_URL}\/bin\/startup.sh\n    # 输入启动日志\n    tail -f ${TOM_URL}\/logs\/catalina.out\n}\n\n# 指令处理\nwhile getopts \x22:yprcwlh\x22 optname\ndo\n    case \x22$optname\x22 in\n    \x22y\x22)\n        echo \x22更新jar包\x22\n\n        mvn clean install -U -P${DEV} -DskipTests\n        newwar\n        restart\n        ;;\n    \x22p\x22)\n        echo \x22重新打包\x22\n\n        mvn clean package -P${DEV} -DskipTests\n\n        newwar\n        restart\n        ;;\n    \x22r\x22)\n        echo \x22重启tomcat\x22\n\n        restart\n        ;;\n    \x22c\x22)\n        echo \x22重新编译并重启服务\x22\n\n        mvn clean compile -P${DEV} -DskipTests\n        cp -R ${WC_JAVA}\n        restart\n        ;;\n    \x22w\x22)\n        echo \x22开始监听vm文件\x22\n\n        # 监听 VM\n        watch -n ${WT} cp -R ${WC_VM}\n        ;;\n    \x22l\x22)\n        echo \x22日志\x22\n\n        # 监听 VM\n        tail -f ${TOM_URL}\/logs\/catalina.out\n        ;;\n    \x22h\x22)\n\n        echo \x22 -y 更新maven包-编译-打包-发布-启动一条龙服务\x22\n        echo \x22 -p 编译打包发布启动一条龙服务\x22\n        echo \x22 -r 重启tomcat\x22\n        echo \x22 -c 重新java文件并部署重启服务\x22\n        echo \x22 -w 监听vm文件,默认5S同步一次\x22\n        echo \x22 -l 查看日志\x22\n        echo \x22 -h 帮助\x22\n        ;;\n    esac\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e推广到团队\x3c\/h2\x3e\n\x3cp\x3e经过上面三步，我们的工具已经建好了，但是怎么让其他人也能使用起来呢？\x3c\/p\x3e\n\x3cp\x3edocker 提供了云服务，如果我们的镜像足够小就可以将镜像推送到云上供团队其他人下载运行，但是我们的镜像已经超过了1G。。。所以我们就不能使用这种方式了。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker save java -o .\/java.tar\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e使用上面的命令可以将镜像持久化到本地文件 \x3ccode\x3ejava.tar\x3c\/code\x3e，然后通过其他手段进行传输到其他同学的机器上，我们使用AirDrop，几分钟的事情。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocker load -i java.tar\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e其他同学可以通过这个命令将我们的镜像加载到他的docker中。\x3c\/p\x3e\n\x3cp\x3e再将shell脚本集成到项目根目录中，就可以愉快的使用了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e感谢\x3c\/h2\x3e\n\x3cp\x3e特别感谢我司 @董珂 @海峰 @宾哥 几位同学提供的帮助！谢谢。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用 Docker 搭建前端 Java 开发环境</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006843830">https://segmentfault.com/a/1190000006843830</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jyykqlyvr7/" target="_blank">https://alili.tech/archive/jyykqlyvr7/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>