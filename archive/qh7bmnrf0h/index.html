<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Vue 2.0 升（cai）级（keng）之旅"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Vue 2.0 升（cai）级（keng）之旅 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qh7bmnrf0h/",
				"appid": "1613049289050283", 
				"title": "Vue 2.0 升（cai）级（keng）之旅 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-05T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zzwkiran7ls/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/j8ivsbl0u5/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&text=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&text=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&title=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&is_video=false&description=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&title=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&title=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&title=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqh7bmnrf0h%2f&title=Vue%202.0%20%e5%8d%87%ef%bc%88cai%ef%bc%89%e7%ba%a7%ef%bc%88keng%ef%bc%89%e4%b9%8b%e6%97%85"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Vue 2.0 升（cai）级（keng）之旅</h1><div class="meta"><div class="postdate"><time datetime="2019-02-05" itemprop="datePublished">2019-02-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3eTroubleshooting of upgrading Vue from 1.0 to 2.0\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e系列文章:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eVue 2.0 升（cai）级（keng）之旅 (本文)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006673171\x22\x3eVuex — The core of Vue application\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007753975\x22 target=\x22_blank\x22\x3e从单页应用(SPA)到服务器渲染(SSR)\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e本文不包含 Vue 2.0 所有新特性，如 SSR 等，本文并没有涉及，本文只包含 \x3ca\x3e个人博客项目\x3c\/a\x3e 升级中所遇到的经验分享，如有兴趣，可以查看 Vue 2.0 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/issues\/2873\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echanges log\x3c\/a\x3e。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e这节净是些唠叨，只想看升(tian)级(keng)的可直接跳过。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e从去年年底开始写博客，那时对怎么搞个博客网站一窍不通，看别人用 \x3ca href=\x22https:\/\/pages.github.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGithub Pages\x3c\/a\x3e 写博客挺赞的，就也想搞个玩玩。技术选型时，在 \x3ca href=\x22https:\/\/jekyllrb.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejekyll\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/hexo.io\/zh-cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehexo\x3c\/a\x3e 中选择了前者，或许你会问为什么？估计当时大脑的供氧量不足了吧...\x3c\/p\x3e\n\x3cp\x3e于是，我的博客就这么诞生了。（jekyll 版的博客已经废弃了，如果你有兴趣，可以查看之前的\x3ca href=\x22https:\/\/github.com\/DiscipleD\/DiscipleD.github.io\/commits\/master\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e提交\x3c\/a\x3e）\x3c\/p\x3e\n\x3cp\x3e可是，用久了就发现并不怎么好用，虽然支持 markdown，可代码块要转换成 highlighter 标签；其次，\x3ca href=\x22https:\/\/github.com\/aron-bordin\/neo-hpstr-jekyll-theme\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e主题\x3c\/a\x3e模板是挺好看，可换成中文字杂就那么别扭哪；还有，对 jekyll 的模板又不熟，自定义也不方便。\x3c\/p\x3e\n\x3cp\x3e年初有一天，突然想到自己也是搞技术的，为啥不自己搭一个博客网站哪？对，顺带还能学学新技术，何乐而不为。又到了技术选型的时候了，这次摆在我面前又有 2 个选择，\x3ca href=\x22https:\/\/facebook.github.io\/react\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/vuejs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue\x3c\/a\x3e，这次我选择了后者。\x3c\/p\x3e\n\x3cp\x3eWhy？因为，后者更轻量级，也更贴近我熟悉的 \x3ca href=\x22https:\/\/angularjs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAngular\x3c\/a\x3e 的语法，还有，那时网上就有说今年 4 月 Vue 会升级到 2.0 和 Vue 兼具 React 和 Angular 的优点等等。（好吧，老实说，不选 React 只是因为不喜欢 JSX 而已。-_-||）\x3c\/p\x3e\n\x3cp\x3eSo，我就用 Vue 1.10\x2b 搭建了自己的新博客——\x3ca href=\x22http:\/\/discipled.me\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDisciple.Ding Blog\x3c\/a\x3e(点这里看\x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e)，并渐渐地往里添加一些新学到的东西，\x3ca href=\x22https:\/\/babeljs.io\/docs\/learn-es2015\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eES6\x3c\/a\x3e, \x3ca href=\x22http:\/\/webpack.github.io\/docs\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack\x3c\/a\x3e, \x3ca href=\x22https:\/\/www.docker.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edocker\x3c\/a\x3e 等，并在 \x3ca href=\x22https:\/\/www.daocloud.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDAOcloud\x3c\/a\x3e 上发布了。(免费用了人家那么久的服务，在这里做个硬广也是应该的，DAOcloud 的确很好用，特别和 Github 绑定之后能自动构建，应用更新也及其简单，只是有个缺点就是有带宽限制。)\x3c\/p\x3e\n\x3cp\x3e在不久之前，Vue 如约发布了 2.0 版本。正如计划之初，博客 Vue 的版本也将升级到 2.0。\x3c\/p\x3e\n\x3cp\x3e说了那么多，再不进入正题就要变成标题党了。好，那就开始我们的升(cai)级(keng)之旅。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e升(tian)级(keng)之旅\x3c\/h2\x3e\n\x3cp\x3e首先，升级依赖。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install vue@next vue-router@next --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22Bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install vue@next vue-router@next --save\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eimport vue\x3c\/h3\x3e\n\x3cp\x3e顺利安装完成并按 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/issues\/2873\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echangelog\x3c\/a\x3e 做了修改之后，启动项目也正常，当我兴致勃勃地打开 Browser，驾轻就熟地输入 localhost，并自然而然地按下 Enter，一切水到渠成。\x3c\/p\x3e\n\x3cp\x3e然而，迎接我的竟是一片白板，控制台里赫然映着一串红字。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e[Vue warn] : You are using the runtime-only build of Vue where the template option is not available. Either pre-compile the templates into render functions, or use the compiler-included build. (found in root instance)\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3eWhat? template 选项不能用了，changelog 没提到啊？但 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/tree\/43183911dedfbb30ebacccf2d76ced74d998448a\/examples\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-router\x3c\/a\x3e 的例子中都在用啊，什么鬼？甚至我将代码全部替换成例子中的代码依旧无法运行，但在 vue-router 项目里就能跑，什么鬼啊！\x3c\/p\x3e\n\x3cp\x3e但是，我并不妥协，分别打断点运行，发现两者竟然跑的不是同一段代码，纳尼！\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import vue from \x27vue\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样的 \x3ccode\x3eimport\x3c\/code\x3e 语句，却有不一样的结果，vue-router 中引的是 vue.js，而在我的项目中引的竟然是 vue.common.js...common...mon...n...\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006435895\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006435895\x22 alt=\x22懵逼\x22 title=\x22懵逼\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e为什么会引 vue.common.js，\x3ccode\x3efrom \x27vue\x27\x3c\/code\x3e 不该引的是 vue.js 么？这就要引入另一个知识点：package.json。\x3c\/p\x3e\n\x3cp\x3epackage.json 中的 \x3ccode\x3emain\x3c\/code\x3e 属性决定了，当项目被引入时，输出的是哪个文件，而 vue 的 package.json 中的 \x3ccode\x3emain\x3c\/code\x3e 指向的是 \x3ccode\x3edist\/vue.common.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e福利时间：推荐一个网站 \x3ca href=\x22http:\/\/json.is\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejson.is\x3c\/a\x3e，它对 package.json 里的每条属性都有详细的解释。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e找到了问题产生的原因，那么解决也就轻而易举了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import vue from \x27vue\/dist\/vue.js\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\/dist\/vue.js\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e每次引用 vue 的时候都要写那么长，一点都不优雅，而且为什么 vue-router 的例子可以用啊？\x3c\/p\x3e\n\x3cp\x3e我要一探究竟。确认了 vue-router 中依赖的 vue 的 package.json 文件中的 \x3ccode\x3emain\x3c\/code\x3e 字段指向的也是 \x3ccode\x3edist\/vue.common.js\x3c\/code\x3e。那就只有一个可能了，webpack 对引入做了处理，查看 webpack.config.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n    \/\/ 省略...\n    resolve: {\n        alias: {\n            \x27vue\x27: \x27vue\/dist\/vue.js\x27\n        }\n    },\n    ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n    resolve: {\n        \x3cspan class=\x22hljs-attr\x22\x3ealias\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue\/dist\/vue.js\x27\x3c\/span\x3e\n        }\n    },\n    ...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e果然啊~他用 webpack 的别名功能把 \x3ccode\x3evue\/dist\/vue.js\x3c\/code\x3e 命名成了 vue，防不胜防。\x3c\/p\x3e\n\x3cp\x3e在自己项目的 wepack.config.js 里同样给 vue 起别名，这样就又能愉快地使用 \x3ccode\x3eimport vue from \x27vue\x27\x3c\/code\x3e 了。\x3c\/p\x3e\n\x3cp\x3e你是不是以为这样就结束了？不，对待一个问题要刨根问底，不能不求甚解。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e为什么 vue 默认导出的是 vue.common.js，它和 vue.js 的区别在哪里，又有什么关系？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e这个问题在囧克斯的\x3ca href=\x22http:\/\/jiongks.name\/blog\/code-review-for-vue-next\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e博客\x3c\/a\x3e中有提到。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eVue 最早会打包生成三个文件，一个是 runtime only 的文件 vue.common.js，一个是 compiler only 的文件 compiler.js，一个是 runtime \x2b compiler 的文件 vue.js。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e也就是说，\x3ccode\x3evue.js = vue.common.js \x2b compiler.js\x3c\/code\x3e，而如果要使用 \x3ccode\x3etemplate\x3c\/code\x3e 这个属性的话就一定要用 compiler.js，那么，引入 vue.js 是最恰当的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e路由升级\x3c\/h3\x3e\n\x3cp\x3evue-router 的升级并不困难，参照 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/releases\/tag\/v2.0.0-beta.1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReleases Note\x3c\/a\x3e 上的注释修改应该没有什么大问题，主要的变化有两点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e路由配置从一系列的方法调用，变成了传递一个配置对象\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e原先的 \x3ccode\x3ev-link\x3c\/code\x3e 指令，变成了 \x3ccode\x3erouter-link\x3c\/code\x3e Component，路径指向用 \x3ccode\x3eto\x3c\/code\x3e 属性\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e正当你以为会一路顺风顺水，轻松升级路由完成的时候，现实总会给你当头一棒。\x3c\/p\x3e\n\x3cp\x3e之前博客的 vue-router 中使用了 \x3ccode\x3ebeforeEach\x3c\/code\x3e 和 \x3ccode\x3eafterEach\x3c\/code\x3e 方法，根据 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/releases\/tag\/v2.0.0-beta.1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRelease Note\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3erouter.beforeEach (replaced by the beforeEach option)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3erouter.afterEach (replaced by the afterEach option)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3e行，那我把它改到配置里\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const ROUTER_SETTING = {\n    routes: [\n        \/\/ 省略...\n    ],\n    beforeEach: () =\x3e { \/* some function *\/ },\n    afterEach: () =\x3e { \/* some function *\/ }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ROUTER_SETTING = {\n    \x3cspan class=\x22hljs-attr\x22\x3eroutes\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n    ],\n    \x3cspan class=\x22hljs-attr\x22\x3ebeforeEach\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e },\n    \x3cspan class=\x22hljs-attr\x22\x3eafterEach\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eBut, not work. What\x27s wrong?\x3c\/p\x3e\n\x3cp\x3e难道我哪里写错了？又经过我一番谷哥和查阅文档之后，发现在下一个版本的 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/releases\/tag\/v2.0.0-beta.2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRelease Note\x3c\/a\x3e 中有这么一段\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3ebeforeEach and afterEach are reverted as router instance methods (options removed). This makes it more convenient for plugins\/modules to add hooks after the router instance has been created.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e好吧，它又被恢复回路由实例的方法了。那么，改回去\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const router = new VueRouter(ROUTER_SETTING);\n\nrouter\n    .beforeEach(() =\x3e { \/* some function *\/ })\n    .afterEach(() =\x3e { \/* some function *\/ });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e router = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e VueRouter(ROUTER_SETTING);\n\nrouter\n    .beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e })\n    .afterEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eOK，这样总好了吧。然而，并没有...console 中报出无法从 \x3ccode\x3eundefined\x3c\/code\x3e 中读取 \x3ccode\x3eafterEach\x3c\/code\x3e，好吧，我猜这应该是 \x3ccode\x3ebeforeEach\x3c\/code\x3e 中没有像之前一样返回路由对象，所以不能链式调用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class VueRouter {\n    \/\/ 省略...\n    beforeEach (fn: Function) {\n        this.beforeHooks.push(fn)\n    }\n    \n    afterEach (fn: Function) {\n        this.afterHooks.push(fn)\n    }\n    \/\/ 省略...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eVueRouter\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n    beforeEach (fn: \x3cspan class=\x22hljs-built_in\x22\x3eFunction\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.beforeHooks.push(fn)\n    }\n    \n    afterEach (fn: \x3cspan class=\x22hljs-built_in\x22\x3eFunction\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.afterHooks.push(fn)\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看一眼源码，果然如此。\x3c\/p\x3e\n\x3cp\x3e那再将之前的代码稍作修改就可以了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const router = new VueRouter(ROUTER_SETTING);\n\nrouter.beforeEach(() =\x3e { \/* some function *\/ });\nrouter.afterEach(() =\x3e { \/* some function *\/ });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e router = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e VueRouter(ROUTER_SETTING);\n\nrouter.beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e });\nrouter.afterEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/* some function *\/\x3c\/span\x3e });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不过，不能链式调用似乎没之前的优雅了哪~\x3c\/p\x3e\n\x3cp\x3e最后，提一下 vue-router 2.0 里所有的 hook（就像之前的 \x3ccode\x3ebeforeEach\x3c\/code\x3e, \x3ccode\x3eafterEach\x3c\/code\x3e，以及每个路由状态中的 \x3ccode\x3ebeforeEnter\x3c\/code\x3e, \x3ccode\x3ebeforeRouteLeave\x3c\/code\x3e等）都具有相同的参数签名，这在 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/releases\/tag\/v2.0.0-beta.1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRelease Note\x3c\/a\x3e 中也有提到。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fn (toRoute, redirect, next) {\n    \/\/ toRoute: {Object} 当前路由对象\n    \/\/ redirect: {Function} 调用跳转至另一路由\n    \/\/ next: {Function} 调用继续当前路由跳转\n    \/\/ 什么都不做，则取消当前跳转\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3efn (toRoute, redirect, next) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ toRoute: {Object} 当前路由对象\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ redirect: {Function} 调用跳转至另一路由\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ next: {Function} 调用继续当前路由跳转\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 什么都不做，则取消当前跳转\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e路由升级完成后，如果控制台没有什么报错，那么，路由可以相互切换了，那些不依赖数据读取的组件已经可以正常显示了。\x3c\/p\x3e\n\x3cp\x3e那些依赖数据读取的组件哪？\x3c\/p\x3e\n\x3cp\x3e这就要提到组件的\x3cstrong\x3e生命周期钩子（即 lifecycle hooks）\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eLifecycle hooks\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e生命周期钩子\x3c\/strong\x3e应该算 vue 这次升级中 broken changes 最多的一部分了，对照 1.0 的\x3ca href=\x22https:\/\/vuejs.org\/api\/#Options-Lifecycle-Hooks\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e和 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/issues\/2873\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3erelease note\x3c\/a\x3e，作了下面这张表\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22left\x22\x3evue 1.0\x2b\x3c\/th\x3e\n\x3cth align=\x22left\x22\x3evue 2.0\x3c\/th\x3e\n\x3cth\x3eDescription\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3einit\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3ebeforeCreate\x3c\/td\x3e\n\x3ctd\x3e组件实例刚被创建，组件属性计算之前，如 data 属性等\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3ecreated\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3ecreated\x3c\/td\x3e\n\x3ctd\x3e组件实例创建完成，属性已绑定，但 DOM 还未生成，\x3ccode\x3e$el\x3c\/code\x3e 属性还不存在\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3ebeforeCompile\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3ebeforeMount\x3c\/td\x3e\n\x3ctd\x3e模板编译\/挂载之前\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3ecompiled\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3emounted\x3c\/td\x3e\n\x3ctd\x3e模板编译\/挂载之后\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3eready\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3emounted\x3c\/td\x3e\n\x3ctd\x3e模板编译\/挂载之后（不保证组件已在 document 中）\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3ebeforeUpdate\x3c\/td\x3e\n\x3ctd\x3e组件更新之前\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3eupdated\x3c\/td\x3e\n\x3ctd\x3e组件更新之后\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3eactivated\x3c\/td\x3e\n\x3ctd\x3efor \x3ccode\x3ekeep-alive\x3c\/code\x3e，组件被激活时调用\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3edeactivated\x3c\/td\x3e\n\x3ctd\x3efor \x3ccode\x3ekeep-alive\x3c\/code\x3e，组件被移除时调用\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3eattached\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd\x3e不用了还说啥哪...\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3edetached\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e-\x3c\/td\x3e\n\x3ctd\x3e那就不说了吧...\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3ebeforeDestory\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3ebeforeDestory\x3c\/td\x3e\n\x3ctd\x3e组件销毁前调用\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3edestoryed\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3edestoryed\x3c\/td\x3e\n\x3ctd\x3e组件销毁后调用\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e知道了 hooks 升级前后的对应关系，那么升级起来就轻而易举了，改改组件的属性名就可以了。\x3c\/p\x3e\n\x3cp\x3e那么，改完属性名是不是就完成了？然而并没有。\x3c\/p\x3e\n\x3cp\x3e因为，在 vue 1.0\x2b 中，如果一个组件和路由相关，那么，它就可能不单单有自己组件的 lifecycle hooks，它还会有基于 vue-router 的 lifecycle hooks。\x3c\/p\x3e\n\x3cp\x3e而在 vue 2.0 中，\x3cstrong\x3erouter lifecycle hooks 全部被移除了\x3c\/strong\x3e，因为，这些 hooks 可以通过其他的方式来代替，这样不但简化了配置，还不用在组件中去处理路由相关的业务，降低了耦合。那这些 hooks 该如何替换，我们接下来就来看一下。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eactivate\x3c\/code\x3e \x26amp; \x3ccode\x3edeactivate\x3c\/code\x3e：使用组件自身的 lifecycle hook 替代\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edata\x3c\/code\x3e：通过组件 \x3ccode\x3ewatch\x3c\/code\x3e 属性来监听当前路由 \x3ccode\x3e$route\x3c\/code\x3e 的变化\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecanActivate\x3c\/code\x3e：由路由属性 \x3ccode\x3ebeforeEnter\x3c\/code\x3e 来代替\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecanDeactivate\x3c\/code\x3e：由路由属性 \x3ccode\x3ebeforeRouteLeave\x3c\/code\x3e 来代替\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecanReuse\x3c\/code\x3e：去除\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e那个这个是不是也直接改改属性名就好了哪？\x3c\/p\x3e\n\x3cp\x3e恩，差不多。不过需要注意的是，如果原先 hooks 中使用了有关路由信息的 \x3ccode\x3etransition\x3c\/code\x3e 参数是肯定不能用了。比如，根据路由参数来进行查询，原先通过 \x3ccode\x3etransition.to.params\x3c\/code\x3e 获取路由参数，现在就要通过刚刚提到的\x3cstrong\x3e当前路由对象\x3c\/strong\x3e \x3ccode\x3ethis.$route.params\x3c\/code\x3e 来获取。\x3c\/p\x3e\n\x3cp\x3e在升级这里的过程中，还遇到一个问题：当用户输入的 URL 满足路由匹配，但根据路由参数无法获得正确的文章时，我想让路由直接跳转到首页。\x3c\/p\x3e\n\x3cp\x3e在 1.0 版本中，我通过 \x3ccode\x3etransition.redirect(\x27\/\x27);\x3c\/code\x3e 就轻松的回到了首页，由于 2.0 中没有 \x3ccode\x3etransition\x3c\/code\x3e 参数，而 \x3ccode\x3e$route\x3c\/code\x3e 只包含当前路由的信息，并不包换路由切换的操作。那该怎么做哪？再一次谷哥和查阅文档，然而一无所获。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006435901\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006435901\x22 alt=\x22i choose death\x22 title=\x22i choose death\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e最后在 vue-router 的例子中找到了解决问题的钥匙——\x3ccode\x3e$router\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e$router\x3c\/code\x3e 返回的是整个项目路由的实例，它是只读的。于是，刚刚那个问题就可以通过 \x3ccode\x3ethis.$router.replace(\x27\/\x27);\x3c\/code\x3e 来解决。\x3c\/p\x3e\n\x3cp\x3e这里还有一点，在 1.0 版本中组件配置 route 属性时还可以设置一个叫 \x3ccode\x3ewaitForData\x3c\/code\x3e 的属性。这个在 2.0 中，我还没有找到直接的替换方式，不过，我在整个组件上添加 \x3ccode\x3ev-if\x3c\/code\x3e 来处理。从理论和效果的角度上讲，\x3ccode\x3ev-if\x3c\/code\x3e 是可以替代原先的 \x3ccode\x3ewaitForData\x3c\/code\x3e 属性，就似乎不那么优雅。\x3c\/p\x3e\n\x3cp\x3e剩余其他小点，看控制台报错信息，然后查查 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue-router\/releases\/tag\/v2.0.0-beta.1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRelease Note\x3c\/a\x3e 都能轻松处理啦~\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e至此，我的整个 \x3ca href=\x22http:\/\/discipled.me\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBlog\x3c\/a\x3e 也升级完成了，欢迎来访。（查看源码戳\x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e）\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e如果现在再让我选一个技术来搭博客的话，我会选 React。为啥？\x3c\/p\x3e\n\x3cp\x3e因为 vue 我已经玩过啦，哈哈哈~\x3c\/p\x3e\n\x3cp\x3e最后，借用外国网友的一句话：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eI\x27m constantly rewriting \/ refactoring this silly little blog using the latest and buzziest tech, so that I can stay up to date on these libraries and frameworks.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这也是我自己搭博客，而不是直接使用博客系统的主要原因。\x3c\/p\x3e\n\x3cp\x3e最后的最后，安利下自己的 \x3ca href=\x22http:\/\/discipled.me\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBlog\x3c\/a\x3e，以及 \x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSource Code\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e欢迎交流，喷子绕道。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Vue 2.0 升（cai）级（keng）之旅</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006435886">https://segmentfault.com/a/1190000006435886</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qh7bmnrf0h/" target="_blank">https://alili.tech/archive/qh7bmnrf0h/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>