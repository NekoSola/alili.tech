<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Ember.js如何与后端服务交互？adapter、store、ember data关系揭秘"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Ember.js如何与后端服务交互？adapter、store、ember data关系揭秘 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/i3jfsn7q3un/",
				"appid": "1613049289050283", 
				"title": "Ember.js如何与后端服务交互？adapter、store、ember data关系揭秘 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-06T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7fkqbme5y3/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qzalzfno9v/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&text=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&text=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&title=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&is_video=false&description=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&title=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&title=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&title=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi3jfsn7q3un%2f&title=Ember.js%e5%a6%82%e4%bd%95%e4%b8%8e%e5%90%8e%e7%ab%af%e6%9c%8d%e5%8a%a1%e4%ba%a4%e4%ba%92%ef%bc%9fadapter%e3%80%81store%e3%80%81ember%20data%e5%85%b3%e7%b3%bb%e6%8f%ad%e7%a7%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Ember.js如何与后端服务交互？adapter、store、ember data关系揭秘</h1><div class="meta"><div class="postdate"><time datetime="2019-02-06" itemprop="datePublished">2019-02-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e文章来源：\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/07\/23\/user-adapter-emberdata-databse-in-ember-project\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEmber Teach\x3c\/a\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e本项目讲解如何使用adapter、EmberData以及怎么连接到本地数据库。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e项目简介\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e主要内容\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e适配器使用\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何持久化数据到本地数据库\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e简单的后端服务\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e最近经常有初学的开发者请教有关\x3ccode\x3eAdapter\x3c\/code\x3e或者\x3ccode\x3eEmber Data\x3c\/code\x3e的问题。官方教程中讲到这两个内容的是\x3ca href=\x22https:\/\/guides.emberjs.com\/v2.6.0\/models\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eModel\x3c\/a\x3e这一章节。本文中介绍到的内容大部分是由这一章来的，如果有不妥请看原文或者给我留言。\x3c\/p\x3e\n\x3cp\x3e注意：\x3cem\x3e本文是基于v2.6.0讲解。\x3c\/em\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e软件需求\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.mysql.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMySQL\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:nodejs.org\x22\x3enodejs,express\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/expressjs\/body-parser\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebody-parser\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/mysqljs\/mysql\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emysql-node\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eEmber项目常规运行软件\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/git-scm.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGit\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/nodejs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNode.js\x3c\/a\x3e (with NPM)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/bower.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBower\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/ember-cli.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEmber CLI\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/phantomjs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePhantomJS\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e用到的软件、插件都是有关后端服务的，\x3ccode\x3emysql-node\x3c\/code\x3e用于连接、操作MySQL数据库。后端服务是用node写的所以也用node项目的插件连接、操作数据库了，有关如何使用node操作MySQL的信息请看这篇文章[nodejs连接MySQL，做简单的CRUD\x3cbr\x3e](\x3ca href=\x22http:\/\/blog.ddlisting.com\/2015\/11\/24\/nodejs-dowith-database\/)\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.ddlisting.com\/201...\x3c\/a\x3e。如果你的后端是其他语言写只需要保证你后端返回的数据格式或者我的后端返回的数据格式一致就行了。目前打算本项目使用2种数据交互方式：一种是jsonapi，一种是restapi。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/jsonapi.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejsonapi\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.restapitutorial.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3erest api\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e项目搭建\x3c\/h3\x3e\n\x3cp\x3e项目的搭建就不再费口舌了，\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/07\/20\/make-emberjs-dev-env\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEmber Teach\x3c\/a\x3e已经有很多博文介绍过了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e运行项目\x3c\/h3\x3e\n\x3cp\x3e如果你想运行本项目请按照下面的步骤操作：\x3c\/p\x3e\n\x3ch4\x3e安装\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e下载代码到本地 \x3ccode\x3egit clone https:\/\/github.com\/ubuntuvim\/emberData-adapter-database\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e进入项目目录 \x3ccode\x3ecd emberData-adapter-database\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e安装npm依赖包 \x3ccode\x3enpm install\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e安装bower依赖包 \x3ccode\x3ebower install\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e运行\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e在项目目录下执行命令 \x3ccode\x3eember server\x3c\/code\x3e 运行项目。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e待项目启动完毕，在浏览器打开\x3ca href=\x22http:\/\/localhost:4200\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\x3c\/a\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e发布到服务器\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e执行命令编译、打包项目 \x3ccode\x3eember build --environment production\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e命令执行完毕会在\x3ccode\x3edist\x3c\/code\x3e目录下得到项目打包后的文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e把打包后的\x3ccode\x3edist\x3c\/code\x3e目录下的所有文件复制到服务器应用目录下运行即可（比如tomcat服务器则放到\x3ccode\x3ewebapps\x3c\/code\x3e目录下）。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e项目结构\x3c\/h3\x3e\n\x3cp\x3e简单起见我就做一个页面就行了，我希望做出的效果是使用自定义的适配器获取到本地MySQL数据库的数据并分页展示。\x3c\/p\x3e\n\x3ch4\x3e创建文件\x3c\/h4\x3e\n\x3cp\x3e使用\x3ca href=\x22http:\/\/ember-cli.com\/user-guide\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eember-cli\x3c\/a\x3e命令创建文件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ember g route users\nember g model user username:string email:string\nember g adapter application\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3eember g route users\nember g model \x3cspan class=\x22hljs-keyword\x22\x3euser\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eusername\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3estring\x3c\/span\x3e email:\x3cspan class=\x22hljs-keyword\x22\x3estring\x3c\/span\x3e\nember g adapter application\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e目前暂时只用到这几个文件，后续可能还有其他的用到在创建。\x3cbr\x3e\x3ccode\x3eember g model user username:string email:string\x3c\/code\x3e的作用是创建模型的同时创建2个属性，并且属性都指定为\x3ccode\x3estring\x3c\/code\x3e类型。\x3c\/p\x3e\n\x3cp\x3e说了一大堆废话下面开始正题。要理解\x3ccode\x3eadapter\x3c\/code\x3e、\x3ccode\x3eember data\x3c\/code\x3e、后端服务的关系我们从他们各自的概念入手。首先我们先理清楚他们之间的关系然后在动手实践。理论总是繁琐的但是也是最重要的。\x3c\/p\x3e\n\x3cp\x3e========================= 华丽的分割线 =========================\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e体系结构概述\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006771466\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006771466\x22 alt=\x22体系结构图\x22 title=\x22体系结构图\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e注：图片来自官方文档\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e注意观察上图的结构。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eAPP（一般是从\x3ccode\x3eroute\x3c\/code\x3e、\x3ccode\x3econtroller\x3c\/code\x3e或者\x3ccode\x3ecomponent\x3c\/code\x3e发请求）请求数据。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e请求并没有直接发送到后端服务而是先在\x3ccode\x3estore\x3c\/code\x3e(ember data其实就是一个\x3ccode\x3estore\x3c\/code\x3e)缓存中查找，ember之所以能实现动态更新模板数据也是因为有了\x3ccode\x3estore\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果请求的数据存在在\x3ccode\x3estore\x3c\/code\x3e中，则直接返回到\x3ccode\x3eroute\x3c\/code\x3e、\x3ccode\x3econtroller\x3c\/code\x3e或者\x3ccode\x3ecomponent\x3c\/code\x3e；如果在\x3ccode\x3estore\x3c\/code\x3e中没有发现请求的数据，所以请求的数据是首次，数据还未缓存到\x3ccode\x3estore\x3c\/code\x3e中，则请求继续往下到了\x3ccode\x3eapdater\x3c\/code\x3e层。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在\x3ccode\x3eadapter\x3c\/code\x3e中，\x3ccode\x3eadapter\x3c\/code\x3e会根据请求的调用方法构建出对应的URL。比如在\x3ccode\x3eroute\x3c\/code\x3e、\x3ccode\x3econtroller\x3c\/code\x3e或者\x3ccode\x3ecomponent\x3c\/code\x3e中执行方法\x3ccode\x3efindRecord(\x27user\x27, 1)\x3c\/code\x3e，此方法作用是查询id为1的user数据。适配器构建出来的URL为: \x3ca href=\x22http:\/\/domain\/user\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/domain\/user\/1\x3c\/a\x3e，然后发请求到后端。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e适配器会对比后端接受的数据格式与ember data发送的数据格式，如果不一致需要在适配器的``方法中格式化发送的数据格式。请求经过适配器构建得到URL后发送到后端服务，后端服务根据URL请求查询数据库然后格式化数据格式返回到适配器。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e适配器根据得到的数据和ember data所接受的数据格式匹配，如果格式不一致需要在适配器的``方法中格式化后端返回的数据。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e经过适配器之后数据转到ember data（\x3ccode\x3estore\x3c\/code\x3e）中，首先缓存到\x3ccode\x3estore\x3c\/code\x3e中，然后返回到调用处（\x3ccode\x3eroute\x3c\/code\x3e、\x3ccode\x3econtroller\x3c\/code\x3e、\x3ccode\x3ecomponent\x3c\/code\x3e）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e数据请求完毕\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e注意：\x3ccode\x3efindRecord(\x27user\x27, 1)\x3c\/code\x3e方法执行过程，请求的\x3ccode\x3efindRecord(\x27user\x27, 1)\x3c\/code\x3e方法会在Ember Data内部解析为\x3ccode\x3efind\x3c\/code\x3e方法，\x3ccode\x3efind\x3c\/code\x3e方法会首先在\x3ccode\x3estore\x3c\/code\x3e缓存中查数据，如果没有则会流转到\x3ccode\x3eadapter\x3c\/code\x3e中组装URL并格式化请求数据，然后发送到后端服务。\x3c\/p\x3e\n\x3cp\x3e从图中看到从适配器返回的数据是\x3ca href=\x22http:\/\/liubin.github.io\/promises-book\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epromise\x3c\/a\x3e所以调用\x3ccode\x3efindRecord\x3c\/code\x3e方法获取数据的时候需要\x3ccode\x3ethen()\x3c\/code\x3e。同时可见这是个移步请求，只有promises执行成功才能得到数据。也就是说如果考虑周全的话还需要在\x3ccode\x3efindRecord\x3c\/code\x3e的时候处理promises执行失败的情况。\x3c\/p\x3e\n\x3cp\x3e另外如果你想跳过\x3ccode\x3estore\x3c\/code\x3e不需要这层缓存也是可以的。会可以这样做：\x3ccode\x3estore.findRecord(type, id, { reload: true })\x3c\/code\x3e使用\x3ccode\x3ereload\x3c\/code\x3e属性设置为\x3ccode\x3etrue\x3c\/code\x3e让每次请求都跳过\x3ccode\x3estore\x3c\/code\x3e直接发送请求到后端，对于实时性要求高的APP则需要这样处理。\x3c\/p\x3e\n\x3cp\x3e介绍完架构之后将追个介绍其中的每个主要的功能特性。\x3cbr\x3e需要说明的是：\x3ccode\x3eModels\x3c\/code\x3e, \x3ccode\x3erecords\x3c\/code\x3e, \x3ccode\x3eadapters\x3c\/code\x3e以及\x3ccode\x3estore\x3c\/code\x3e都是Ember Data最核心的东西，他们是包含的关系，只要使用了Ember Data才能使用\x3ccode\x3emodel\x3c\/code\x3e、\x3ccode\x3estore\x3c\/code\x3e功能。有些初学者老是问这几个东西的关联，希望看到这里的同学不要在提这样的问题了！！=^=\x3c\/p\x3e\n\x3cp\x3eEmber Data是Ember.js非常重要的一块，提供了几乎所有操作数据的API，详细请看\x3ca href=\x22http:\/\/emberjs.com\/api\/data\/modules\/ember-data.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEMBER-DATA MODULE\x3c\/a\x3e。当然，如果你不想使用Ember Data也是可以的，那么你的程序直接使用Ajax与后台交互也是可以的，或者说你使用其他类似Ember Data的插件也行。Ember Data在MVC模式中属于M层的东西，没有这层也并不影响到整个APP！\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e补充一下下\x3c\/h3\x3e\n\x3cp\x3e如果你不使用Ember Data，在这里提供一个简单的方案供参考。\x3cbr\x3e如果你想获取后端数据并显示数据到组件上（模板调用组件），你可以像下面的代码这样处理：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/components\/list-of-drafts.js\nexport default Ember.Component.extend({\n  willRender() {\n    $.getJSON(\x27\/drafts\x27).then(data =\x3e {\n      this.set(\x27drafts\x27, data);\n    });\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/components\/list-of-drafts.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Ember.Component.extend({\n  willRender() {\n    $.getJSON(\x3cspan class=\x22hljs-string\x22\x3e\x27\/drafts\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27drafts\x27\x3c\/span\x3e, data);\n    });\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里不同过Ember Data，自然也就没有调用Ember Data提供的方法（比如，findAll、findRecord），而是直接发Ajax请求，得到数据到设置到对象\x3ccode\x3edrafts\x3c\/code\x3e中，然后在模板上显示数据。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- app\/templates\/components\/list-of-drafts.hbs --\x3e\n\x3cul\x3e\n  \x22{{\x22#each drafts key=\x26quot;id\x26quot; as |draft|\x22}}\x22\n    \x3cli\x3e\x22{{\x22draft.title\x22}}\x22\x3c\/li\x3e\n  \x22{{\x22\/each\x22}}\x22\n\x3c\/ul\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- app\/templates\/components\/list-of-drafts.hbs --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x22{{\x22#each drafts key=\x22id\x22 as |draft|\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22draft.title\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x22{{\x22\/each\x22}}\x22\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样处理是没问题的，但是当数据改变的可能不能立即在模板上更新，因为这里无法使用\x3ccode\x3estore\x3c\/code\x3e自然也就无法像计算属性那样当数据有变就立即更新模板。另一个问题是当你的请求很多的时候你需要写很多这样的方法，代码复用性也比较差。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eModels\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eIn Ember Data, each model is represented by a subclass of Model that defines the attributes, relationships, and behavior of the data that you present to the user.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e从使用上讲，model其实就是与后端数据表对应的实体类（借用java中的说法），通常我们的model类的定义是与后端数据表对应的，最常见的就是model属性的定义，建议属性名和数据表字段名一致并且使用驼峰式命名规范。\x3c\/p\x3e\n\x3cp\x3emodel之间还可以定义单向或者双向的一对一、一对多和多对多关系，这个与数据表之间的关系定义是相似的。比如下面的model：\x3c\/p\x3e\n\x3ch4\x3e简单model定义\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/app\/models\/person.js\nimport Model from \x27ember-data\/model\x27;\nimport attr from \x27ember-data\/attr\x27;\n\nexport default Model.extend({\n  firstName: attr(\x27string\x27),\n  birthday:  attr(\x27date\x27)\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/app\/models\/person.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Model \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\/model\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e attr \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\/attr\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Model.extend({\n  \x3cspan class=\x22hljs-attr\x22\x3efirstName\x3c\/span\x3e: attr(\x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-attr\x22\x3ebirthday\x3c\/span\x3e:  attr(\x3cspan class=\x22hljs-string\x22\x3e\x27date\x27\x3c\/span\x3e)\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3emodel类可以直接使用ember-cli命令创建：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ember g model person\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ebnf\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eember g model person\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码创建了一个简单的model，并且包含了3个属性，一个是\x3ccode\x3estring\x3c\/code\x3e类型一个是\x3ccode\x3edate\x3c\/code\x3e类型，那么第三个属性是什么了？？是\x3ccode\x3eid\x3c\/code\x3e，Ember会默认为每个model增加一个属性\x3ccode\x3eid\x3c\/code\x3e，开发者不需要手动去定义这个属性，并且如果你是手动在model类中定义这个属性会报错的！！那么对应后端的服务也应该有一个person表，并且表里也有三个字段，它们是\x3ccode\x3efirstName\x3c\/code\x3e、\x3ccode\x3ebirthday\x3c\/code\x3e以及\x3ccode\x3eid\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e更多有关model之间关系的介绍不行本文的重点，请看\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/04\/07\/modeljian-jie\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第六章 模型\x3c\/a\x3e的详细介绍。\x3c\/p\x3e\n\x3cp\x3e有了model之后程序要使用model类必须要实例化，实例化的model称为\x3ccode\x3erecords\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3eRecords\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eA record is an instance of a model that contains data loaded from a server. Your application can also create new records and save them back to the server. A record is uniquely identified by its model \x3ccode\x3etype\x3c\/code\x3e and \x3ccode\x3eID\x3c\/code\x3e.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e简单讲record就是一个包含数据的model实例。说白了就是一个JSON对象（虽然这样的说法不是很正确，但是可以反映出这是一个什么样的对象结构）。\x3c\/p\x3e\n\x3cp\x3e比如下面的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.get(\x27store\x27).findRecord(\x27person\x27, 1); \/\/ =\x3e { id: 1, name: \x27steve-buscemi\x27 }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27store\x27\x3c\/span\x3e).findRecord(\x3cspan class=\x22hljs-string\x22\x3e\x27person\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; { id: 1, name: \x27steve-buscemi\x27 }\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行完方法\x3ccode\x3efindRecord\x3c\/code\x3e后返回的就是一个model实例也就是一个record。这个record包含了数据\x3ccode\x3e{ id: 1, name: \x27steve-buscemi\x27 }\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3eAdapter\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eAn adapter is an object that translates requests from Ember (such as \x22find the user with an ID of 123\x22) into requests to a server.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e适配器，顾名思义！作用就是做适配工作的，保存转换数据格式、定义交互的URL前缀、构建URL等等。在前面体系结构已经详细介绍过，不在赘述。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3eCaching\x3c\/h3\x3e\n\x3cp\x3e缓存在Ember中是非常重要的，但是有一点需要注意的是不要把太多数据缓存到store中，数据量太大浏览器受不了！缓存的作用是非常明显的，前面也介绍了他的作用，特别是在请求数据的时候，如果能在缓存中获取的则立即返回到调用处，只有在缓存中查不到的数据才发请求到服务端，通常是第一次获取的数据的时候缓存没有则需要发请求到服务端。也正是有了缓存Ember才能快速把数据的变化响应到模板上。\x3c\/p\x3e\n\x3cp\x3e到此主要核心的概念介绍完毕了，不算多，但是认真看下来还是很有益的！！\x3c\/p\x3e\n\x3cp\x3e下面接着是如何实践了……\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e创建数据库\x3c\/h2\x3e\n\x3cp\x3e本例子使用的是MySQL数据库，有关数据库的安装以及使用不在本文讲解范围，请自行学习！\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e建表\x3c\/h3\x3e\n\x3cp\x3e怎么建表我也不说了，下面直接贴建表的SQL。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22DROP TABLE IF EXISTS `user`;\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `username` varchar(100) DEFAULT NULL,\n  `email` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22sql hljs\x22\x3e\x3ccode class=\x22sql\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eDROP\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eTABLE\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eIF\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eEXISTS\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e`user`\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eCREATE\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eTABLE\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e`user`\x3c\/span\x3e (\n  \x3cspan class=\x22hljs-string\x22\x3e`id`\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eint\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3eNOT\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eNULL\x3c\/span\x3e AUTO_INCREMENT,\n  \x3cspan class=\x22hljs-string\x22\x3e`username`\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3evarchar\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3eDEFAULT\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eNULL\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e`email`\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3evarchar\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3eDEFAULT\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eNULL\x3c\/span\x3e,\n  PRIMARY \x3cspan class=\x22hljs-keyword\x22\x3eKEY\x3c\/span\x3e (\x3cspan class=\x22hljs-string\x22\x3e`id`\x3c\/span\x3e)\n) \x3cspan class=\x22hljs-keyword\x22\x3eENGINE\x3c\/span\x3e=\x3cspan class=\x22hljs-keyword\x22\x3eInnoDB\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eDEFAULT\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eCHARSET\x3c\/span\x3e=utf8;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e创建一个名为\x3ccode\x3euser\x3c\/code\x3e的数据表。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e创建服务端\x3c\/h2\x3e\n\x3cp\x3e如何在ember项目中创建服务端程序呢？ember提供了创建的命令。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ember g server\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eember g server\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e创建完毕之后再按照开始介绍的依赖插件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install mysql-node\nnpm install body-parser\nnpm install supervisor\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3enpm install mysql-node\nnpm install body-parser\nnpm install supervisor\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e创建的是一个node服务端程序，运行的端口也是\x3ccode\x3e4200\x3c\/code\x3e，不需要另外手动去启动node服务，只要ember项目运行了会自动运行起来的。\x3c\/p\x3e\n\x3cp\x3e到此所有的原料都准备好了，下面验证一下项目是否还能正常运行。启动项目，然后在浏览器打开\x3ca href=\x22http:\/\/localhost:4200\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\x3c\/a\x3e。还能看到\x3cstrong\x3eWelcome to Ember\x3c\/strong\x3e说明是成功的！\x3c\/p\x3e\n\x3cp\x3e有了原料开始做菜吧！！！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e编写user模块\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e更改URL方式\x3c\/h3\x3e\n\x3cp\x3e为了不使服务端和Ember请求URL冲突修改了URL的默认方式，修改\x3ccode\x3econfig\/environment.js\x3c\/code\x3e的第8行代码为如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22locationType: \x27hash\x27,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3elocationType: \x3cspan class=\x22hljs-string\x22\x3e\x27hash\x27\x3c\/span\x3e,\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eauto\x3c\/code\x3e改为\x3ccode\x3ehash\x3c\/code\x3e。访问Ember项目的URL则需要注意：\x3ca href=\x22http:\/\/localhost:4200\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/users\x3c\/a\x3e改为\x3ca href=\x22http:\/\/localhost:4200\/#\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/#\/users\x3c\/a\x3e。增加一个\x3ccode\x3e#\x3c\/code\x3e号。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3e获取数据、显示数据\x3c\/h3\x3e\n\x3cp\x3e首先简单列出数据库数据。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- app\/templates\/users.hbs --\x3e\n\x3ch1\x3e用户列表\x3c\/h1\x3e\n\n\x3ctable class=\x26quot;table table-striped table-hover\x26quot;\x3e\n  \x3cthead\x3e\n    \x3ctr\x3e\n      \x3cth\x3e\n        #\n      \x3c\/th\x3e\n      \x3cth\x3e\n        用户名\n      \x3c\/th\x3e\n      \x3cth\x3e\n        邮箱\n      \x3c\/th\x3e\n    \x3c\/tr\x3e\n  \x3c\/thead\x3e\n\n  \x3ctbody\x3e\n    \x22{{\x22#each model as |user|\x22}}\x22\n    \x3ctr\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.id\x22}}\x22\n      \x3c\/td\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.username\x22}}\x22\n      \x3c\/td\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.email\x22}}\x22\n      \x3c\/td\x3e\n    \x3c\/tr\x3e\n    \x22{{\x22\/each\x22}}\x22\n  \x3c\/tbody\x3e\n\n\x3c\/table\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- app\/templates\/users.hbs --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e用户列表\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22table table-striped table-hover\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        #\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        用户名\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        邮箱\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x22{{\x22#each model as |user|\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.id\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.username\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.email\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x22{{\x22\/each\x22}}\x22\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/routes\/users.js\nimport Ember from \x27ember\x27;\n\nexport default Ember.Route.extend({\n  model() {\n    return this.store.findAll(\x27user\x27);\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/routes\/users.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Ember \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Ember.Route.extend({\n  model() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.findAll(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e);\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e目前项目还没连接到任何数据库，也没有使用自定义的适配器，如果直接执行\x3ca href=\x22http:\/\/localhost:4200\/#\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/#\/users\x3c\/a\x3e可以在控制台看到是会报错的。那么下一步该如何处理呢？？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e加入适配器\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3e使用\x3ccode\x3eRESTAdapter\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e先从适配器下手！在前面已经创建好了适配器，如果是2.0之后的项目默认会创建\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e这个适配器所接收、发送的数据格式都必须符合jsonapi规范，否则会报错，无法正常完成数据的交互。不过为了简便我们先不使用这个适配器，改用另一个简单的适配器\x3ccode\x3eRESTAdapter\x3c\/code\x3e，这个适配器不是需要遵循jsonapi规范，只要自己约定好前后端的数据格式即可。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/adapters\/application.js\n\n\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\nimport DS from \x27ember-data\x27;\n\nexport default DS.RESTAdapter.extend({\n\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/adapters\/application.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e DS \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e DS.RESTAdapter.extend({\n\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e手动修改好之后的适配器还不能起作用，这个适配器并没有连接到任何的后端服务，如果你想连接到你的服务上需要使用属性\x3ccode\x3ehost\x3c\/code\x3e指定。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/adapters\/application.js\n\n\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\nimport DS from \x27ember-data\x27;\n\nexport default DS.RESTAdapter.extend({\n  host: \x27http:\/\/localhost:4200\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/adapters\/application.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e DS \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e DS.RESTAdapter.extend({\n  \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:4200\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e等待项目重启完毕，仍然是访问\x3ca href=\x22http:\/\/localhost:4200\/#\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/#\/user\x3c\/a\x3e，在控制台仍然看到前面的错误，截图如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150893\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150893\x22 alt=\x22无后端服务\x22 title=\x22无后端服务\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e为何还是错误呢？如果能看到错误说明你的程序是正确，到目前为止还没提供任何的后端服务，虽然前面使用\x3ccode\x3eember g server\x3c\/code\x3e创建了node后端服务，但是并没有针对每个请求做处理。当你访问路由\x3ccode\x3euser\x3c\/code\x3e在进入回到\x3ccode\x3emodel\x3c\/code\x3e时候会发送请求获取所有模型\x3ccode\x3euser\x3c\/code\x3e数据，请求首选转到Ember Data（store)，但是在store中并没有，然后请求继续转到适配器\x3ccode\x3eRESTAdapter\x3c\/code\x3e，适配器会构建URL得到\x3ccode\x3eGET\x3c\/code\x3e请求\x3ccode\x3ehttp:\/\/localhost:4200\/users\x3c\/code\x3e，至于是如何构建URL的请看\x3ca href=\x22https:\/\/github.com\/emberjs\/data\/blob\/master\/addon\/-private\/adapters\/build-url-mixin.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebuild url method\x3c\/a\x3e。这个请求可以在报错的信息中看到。但是为何会报错呢？很正常，因为我的后端服务并没响应这个请求。下面针对这个请求做处理。\x3c\/p\x3e\n\x3cp\x3e修改\x3ccode\x3eserver\/index.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*jshint node:true*\/\n\n\/\/ To use it create some files under `mocks\/`\n\/\/ e.g. `server\/mocks\/ember-hamsters.js`\n\/\/\n\/\/ module.exports = function(app) {\n\/\/   app.get(\x27\/ember-hamsters\x27, function(req, res) {\n\/\/     res.send(\x27hello\x27);\n\/\/   });\n\/\/ };\n\nmodule.exports = function(app) {\n  var globSync   = require(\x27glob\x27).sync;\n  var mocks      = globSync(\x27.\/mocks\/**\/*.js\x27, { cwd: __dirname }).map(require);\n  var proxies    = globSync(\x27.\/proxies\/**\/*.js\x27, { cwd: __dirname }).map(require);\n\n  \/\/ Log proxy requests\n  var morgan  = require(\x27morgan\x27);\n  app.use(morgan(\x27dev\x27));\n\n  \/\/ 对象转json\n  \/\/  const serialise = require(\x27object-tojson\x27)\n  const bodyParser = require(\x27body-parser\x27);\n\n  mocks.forEach(function(route) { route(app); });\n  proxies.forEach(function(route) { route(app); });\n\n  app.use(bodyParser.urlencoded({ extended: true }));\n\n\n  \/\/ 处理请求 http:\/\/localhost:4200\/user\n  app.get(\x27\/users\x27, function(req, res) {\n    \/\/ 返回三个对象\n    res.status(200).send({\n        users: [\n          {\n            id: 1,\n            username: \x27ubuntuvim\x27,\n            email: \x27123@qq.com\x27\n          },\n          {\n            id: 2,\n            username: \x27ddlisting.com\x27,\n            email: \x273333@qq.com\x27\n          },\n          {\n            id: 3,\n            username: \x27www.ddlising.com\x27,\n            email: \x271527254027@qq.com\x27\n          }\n        ]\n    });\n  });\n\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*jshint node:true*\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ To use it create some files under `mocks\/`\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ e.g. `server\/mocks\/ember-hamsters.js`\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ module.exports = function(app) {\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/   app.get(\x27\/ember-hamsters\x27, function(req, res) {\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     res.send(\x27hello\x27);\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/   });\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ };\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eapp\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globSync   = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27glob\x27\x3c\/span\x3e).sync;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mocks      = globSync(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/mocks\/**\/*.js\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3ecwd\x3c\/span\x3e: __dirname }).map(\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxies    = globSync(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/proxies\/**\/*.js\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3ecwd\x3c\/span\x3e: __dirname }).map(\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Log proxy requests\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e morgan  = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27morgan\x27\x3c\/span\x3e);\n  app.use(morgan(\x3cspan class=\x22hljs-string\x22\x3e\x27dev\x27\x3c\/span\x3e));\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对象转json\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/  const serialise = require(\x27object-tojson\x27)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e);\n\n  mocks.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eroute\x3c\/span\x3e) \x3c\/span\x3e{ route(app); });\n  proxies.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eroute\x3c\/span\x3e) \x3c\/span\x3e{ route(app); });\n\n  app.use(bodyParser.urlencoded({ \x3cspan class=\x22hljs-attr\x22\x3eextended\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }));\n\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 http:\/\/localhost:4200\/user\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回三个对象\x3c\/span\x3e\n    res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n        \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: [\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ubuntuvim\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27123@qq.com\x27\x3c\/span\x3e\n          },\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ddlisting.com\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x273333@qq.com\x27\x3c\/span\x3e\n          },\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27www.ddlising.com\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271527254027@qq.com\x27\x3c\/span\x3e\n          }\n        ]\n    });\n  });\n\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在服务端增加了一个node请求处理，拦截\x3ccode\x3e\/users\x3c\/code\x3e这个请求。对于express不是本文的重点，请自行学习，网址\x3ca href=\x22http:\/\/expressjs.com\/zh-cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexpressjs.com\x3c\/a\x3e。如果你使用的是其他语言的服务端程序，那么你只需要返回的json格式为：\x3ccode\x3e{\x22modelName\x22:[{\x22id\x22:1,\x22属性名\x22:\x22属性值\x22,\x22属性名2\x22:\x22属性值2\x22},{\x22id\x22:2,\x22属性名3\x22:\x22属性值3\x22,\x22属性名4\x22:\x22属性4\x22}]}\x3c\/code\x3e，只需要格式正确适配器就能正确解析返回的数据。\x3c\/p\x3e\n\x3cp\x3e另外再多介绍一个属性\x3ccode\x3enamespace\x3c\/code\x3e，这个属性是用于定义URL前缀的，比如下面的适配器定义：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/adapters\/application.js\n\n\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\nimport DS from \x27ember-data\x27;\n\nexport default DS.RESTAdapter.extend({\n  namespace: \x27api\/v1\x27,\n  host: \x27http:\/\/localhost:4200\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/adapters\/application.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ import JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e DS \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e DS.RESTAdapter.extend({\n  \x3cspan class=\x22hljs-attr\x22\x3enamespace\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27api\/v1\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:4200\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果是这样定义那么后端处理的URL也需要做相应的处理，需要在拦截的请求上加前缀，比如下面的代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 处理请求 http:\/\/localhost:4200\/api\/v1\/user\n  app.get(\x27\/api\/v1\/users\x27, function(req, res) {\n    \/\/ 返回三个对象\n    res.status(200).send({\n        users: [\n          {\n            id: 1,\n            username: \x27ubuntuvim\x27,\n            email: \x27123@qq.com\x27\n          },\n          {\n            id: 2,\n            username: \x27ddlisting.com\x27,\n            email: \x273333@qq.com\x27\n          },\n          {\n            id: 3,\n            username: \x27www.ddlising.com\x27,\n            email: \x271527254027@qq.com\x27\n          }\n        ]\n    });\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 http:\/\/localhost:4200\/api\/v1\/user\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回三个对象\x3c\/span\x3e\n    res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n        \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: [\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ubuntuvim\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27123@qq.com\x27\x3c\/span\x3e\n          },\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ddlisting.com\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x273333@qq.com\x27\x3c\/span\x3e\n          },\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27www.ddlising.com\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271527254027@qq.com\x27\x3c\/span\x3e\n          }\n        ]\n    });\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之前面唯一不同的就是请求的URL不一样了，原来是\x3ca href=\x22http:\/\/localhost:4200\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/users\x3c\/a\x3e改为\x3ca href=\x22http:\/\/localhost:4200\/api\/v1\/users\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:4200\/api\/v1\/users\x3c\/a\x3e。那么这样做的好处是什么呢？当你的后端的API更新的时候这个设置是非常有用的，只需要设置命名前缀就能适应不用版本的API。\x3c\/p\x3e\n\x3cp\x3e项目重启之后，再次进入到路由\x3ccode\x3eusers\x3c\/code\x3e可以看到返回的3条数据。如下截图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150895\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150895\x22 alt=\x22结果列表\x22 title=\x22结果列表\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e到此，我想你应该知道个大概了吧！！更多有关适配器的介绍请看下面的2篇博文：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/06\/06\/adapter-serializer\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eadapter与serializer使用示例一\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/06\/07\/adapter-serializershi2\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eadapter与serializer使用示例二\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader21\x22\x3e使用\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e\n\x3c\/h3\x3e\n\x3cp\x3e使用\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e适配器和使用\x3ccode\x3eRESTAdapter\x3c\/code\x3e适配器有何不同呢？我觉得最重要的一点是：数据规范。\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e适配器要求交互的数据格式必须遵循\x3ca href=\x22http:\/\/jsonapi.org\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejsonapi\x3c\/a\x3e规范，否则是不能完成数据交互的。要求高了相应的你的处理代码也相应的要复杂。下面我们改用\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/adapters\/application.js\n\nimport JSONAPIAdapter from \x27ember-data\/adapters\/json-api\x27;\nimport DS from \x27ember-data\x27;\n\n\/\/ export default DS.RESTAdapter.extend({\nexport default JSONAPIAdapter.extend({\n  namespace: \x27api\/v1\x27,\n  host: \x27http:\/\/localhost:4200\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/adapters\/application.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e JSONAPIAdapter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\/adapters\/json-api\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e DS \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember-data\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ export default DS.RESTAdapter.extend({\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e JSONAPIAdapter.extend({\n  \x3cspan class=\x22hljs-attr\x22\x3enamespace\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27api\/v1\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:4200\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改适配器为\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e。如果你不修改后端的服务那么控制台可以看到报错信息。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150897\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150897\x22 alt=\x22JSONAPIAdapter报错信息\x22 title=\x22JSONAPIAdapter报错信息\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从截图当中可以清楚地看到报错出来的错误，\x3ccode\x3emust return a valid JSON API document\x3c\/code\x3e必须是一个有效jsonapi文档。要修复好这个错误也很简单，只需要滚吧后端服务返回的数据格式改成jsonapi的就行了。请看下面的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 处理请求 http:\/\/localhost:4200\/user\n  app.get(\x27\/api\/v1\/users\x27, function(req, res) {\n    \/\/ 返回三个对象\n    \/\/ res.status(200).send({\n    \/\/     users: [\n    \/\/       {\n    \/\/         id: 1,\n    \/\/         username: \x27ubuntuvim\x27,\n    \/\/         email: \x27123@qq.com\x27\n    \/\/       },\n    \/\/       {\n    \/\/         id: 2,\n    \/\/         username: \x27ddlisting.com\x27,\n    \/\/         email: \x273333@qq.com\x27\n    \/\/       },\n    \/\/       {\n    \/\/         id: 3,\n    \/\/         username: \x27www.ddlising.com\x27,\n    \/\/         email: \x271527254027@qq.com\x27\n    \/\/       }\n    \/\/     ]\n    \/\/ });\n  \n    \/\/ 构建jsonapi对象\n    var input = {\n        data: [\n            {\n                id: \x271\x27,\n                type: \x27user\x27,  \/\/对应前端程序中模型的名字\n                attributes: {   \/\/ 模型中的属性键值对\n                    username: \x27ubuntuvim\x27, property: true,\n                    email: \x27123@qq.com\x27, property: true\n                }\n            },\n            {\n                id: \x272\x27,\n                type: \x27user\x27,  \/\/对应前端程序中模型的名字\n                attributes: {   \/\/ 模型中的属性键值对\n                    username: \x27ddlisting.com\x27, property: true,\n                    email: \x273333@qq.com\x27, property: true\n                }\n            },\n            {\n                id: \x273\x27,\n                type: \x27user\x27,  \/\/对应前端程序中模型的名字\n                attributes: {   \/\/ 模型中的属性键值对\n                    username: \x27www.ddlising.com\x27, property: true,\n                    email: \x271527254027@qq.com\x27, property: true\n                }\n            }\n        ]\n    };\n\n    res.status(200).send(JSON.stringify(input));\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 http:\/\/localhost:4200\/user\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回三个对象\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ res.status(200).send({\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     users: [\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         id: 1,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         username: \x27ubuntuvim\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         email: \x27123@qq.com\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       },\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         id: 2,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         username: \x27ddlisting.com\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         email: \x273333@qq.com\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       },\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         id: 3,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         username: \x27www.ddlising.com\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/         email: \x271527254027@qq.com\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/       }\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     ]\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ });\x3c\/span\x3e\n  \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建jsonapi对象\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e input = {\n        \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: [\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/对应前端程序中模型的名字\x3c\/span\x3e\n                attributes: {   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模型中的属性键值对\x3c\/span\x3e\n                    username: \x3cspan class=\x22hljs-string\x22\x3e\x27ubuntuvim\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27123@qq.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n                }\n            },\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x272\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/对应前端程序中模型的名字\x3c\/span\x3e\n                attributes: {   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模型中的属性键值对\x3c\/span\x3e\n                    username: \x3cspan class=\x22hljs-string\x22\x3e\x27ddlisting.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x273333@qq.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n                }\n            },\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x273\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/对应前端程序中模型的名字\x3c\/span\x3e\n                attributes: {   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模型中的属性键值对\x3c\/span\x3e\n                    username: \x3cspan class=\x22hljs-string\x22\x3e\x27www.ddlising.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271527254027@qq.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eproperty\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n                }\n            }\n        ]\n    };\n\n    res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send(\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(input));\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注：为了构建jsonapi对象更加简便另外在安装一个插件： \x3ccode\x3enpm install jsonapi-parse\x3c\/code\x3e。安装完毕后手动关闭再重启项目。然后再次进入路由\x3ccode\x3eusers\x3c\/code\x3e可以看到与前面的结果一样，正确了显示后端返回的数据。\x3c\/p\x3e\n\x3cp\x3e到此，我相信读者应该能明白这两个适配器之间的差别了！\x3cstrong\x3e需要注意的是Ember.js\x3ccode\x3e2.0\x3c\/code\x3e版本之后\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e作为默认的适配器，也就是说平常如果你没有自定义任何适配器那么Ember Data会默认使用的是\x3ccode\x3eJSONAPIAdapter\x3c\/code\x3e适配器。所以如果你没有使用其他的适配器那么你的后端返回的数据格式必须是遵循jsonapi规范的。另外在路由\x3ccode\x3eusers.js\x3c\/code\x3e中使用到Ember Data提供的方法\x3ccode\x3efindAll(\x27modelName\x27)\x3c\/code\x3e，我想从中你也应该明白了Ember Data是何等重要了吧\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e看到这里不知道读者是否已经明白适配器和后端服务的关联关系？如果有疑问请给我留言。\x3cbr\x3e文中所说的后端就是我的node程序（放在\x3ccode\x3eserver\x3c\/code\x3e目录下），前端就是我的Ember.js项目。\x3c\/p\x3e\n\x3cp\x3e下面就是再结合数据库。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader22\x22\x3e加入数据库\x3c\/h2\x3e\n\x3cp\x3e其实到这步加不加数据库已经不那么重要了！重要把服务端返回的数据改成从数据库读取就完了。我就简单讲解了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3e连接MySQL\x3c\/h3\x3e\n\x3cp\x3e连接MySQL的工作交给前面已经安装好的\x3ccode\x3enode-mysql\x3c\/code\x3e，如果还没安装请执行命令\x3ccode\x3enpm install mysqljs\/mysql\x3c\/code\x3e进行安装。继续修改后端服务代码\x3ccode\x3eserver\/index.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nmodule.exports = function(app) {\n  \/\/ 与之前的内容不变 \n  \/\/ \n  \/\/ 引入MySQL模块\n  var mysql = require(\x27mysql\x27);\n  \/\/ 获取连接对象\n  var conn = mysql.createConnection({\n      host: \x27localhost\x27,\n      user: \x27root\x27,\n      password: \x27\x27,\n      \/\/ 开启debug，可以在启动ember项目的终端看到更多详细的信息\n      database: \x27test\x27\n  });\n\n  \/\/ 处理请求 http:\/\/localhost:4200\/user\n  app.get(\x27\/api\/v1\/users\x27, function(req, res) {\n\n    var jsonArr = new Array();\n\n    \/\/ 打开数据库连接\n    conn.connect();\n    \/\/查询数据\n    conn.query(\x27select * from user\x27, function(err, rows, fields) {\n        if (err) throw err;\n\n        \/\/遍历返回的数据并设置到返回的json对象中\n        for (var i = 0; i \x3c rows.length; i\x2b\x2b) {\n            \n            jsonArr.push({\n                id: rows[i].id,\n                username: rows[i].username,\n                email: rows[i].email\n            });\n        }\n\n        \/\/ 返回前端\n        res.status(200).send({\n            users: jsonArr\n        });\n\n    });\n    \/\/ 关闭数据库连接\n    conn.end();\n  });\n\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eapp\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 与之前的内容不变 \x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入MySQL模块\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mysql = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mysql\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取连接对象\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e conn = mysql.createConnection({\n      \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27localhost\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3euser\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3epassword\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开启debug，可以在启动ember项目的终端看到更多详细的信息\x3c\/span\x3e\n      database: \x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e\n  });\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 http:\/\/localhost:4200\/user\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e jsonArr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打开数据库连接\x3c\/span\x3e\n    conn.connect();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/查询数据\x3c\/span\x3e\n    conn.query(\x3cspan class=\x22hljs-string\x22\x3e\x27select * from user\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, rows, fields\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历返回的数据并设置到返回的json对象中\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; rows.length; i\x2b\x2b) {\n            \n            jsonArr.push({\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: rows[i].id,\n                \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: rows[i].username,\n                \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: rows[i].email\n            });\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回前端\x3c\/span\x3e\n        res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n            \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: jsonArr\n        });\n\n    });\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭数据库连接\x3c\/span\x3e\n    conn.end();\n  });\n\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e相比之前的代码只是引入了mysql，增加连接对象声明，然后在请求处理方法里查询数据，默认在数据库初始化了3条数据，如下截图，另外 \x3cstrong\x3e为了简单起见我仍然使用的是\x3ccode\x3eRESTAdapter\x3c\/code\x3e适配器，这样处理也相对简单。\x3c\/strong\x3e 获取连接对象的代码应该不用过多解释了，就是填写你本地连接数据库的对应配置信息就行了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150899\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150899\x22 alt=\x22数据库数据\x22 title=\x22数据库数据\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e记得修改适配器为\x3ccode\x3eRESTAdapter\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e重启项目。进入路由\x3ccode\x3eusers\x3c\/code\x3e可以看到数据库的数据正确显示出来了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150901\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150901\x22 alt=\x22显示数据库数据\x22 title=\x22显示数据库数据\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader24\x22\x3eCRUD操作\x3c\/h2\x3e\n\x3cp\x3e对于CRUD操作都举一个例子，由于前面已经介绍过\x3ccode\x3efindAll\x3c\/code\x3e查询就不在此介绍CRUD中的R了。下面就对另外三个做一个例子：\x3cbr\x3e更多有关数据的操作请看\x3ca href=\x22http:\/\/blog.ddlisting.com\/2016\/04\/16\/xin-jian-geng-xin-shan-chu-ji-lu\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEmber.js 入门指南——新建、更新、删除记录\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e为了方便演示再增加几个路由和模板。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ember g template users\/index\nember g route users\/new\nember g route users\/edit\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3eember g template users\/index\nember g route users\/new\nember g route users\/edit\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述3个命令创建了三个\x3ccode\x3eusers\x3c\/code\x3e的子路由和子模板。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader25\x22\x3e新增、更新\x3c\/h3\x3e\n\x3cp\x3e由于项目使用的是Ember Data，增加数据也是很简单的，直接调用\x3ccode\x3ecreateRecord()\x3c\/code\x3e创建一个\x3ccode\x3erecord\x3c\/code\x3e之后再调用\x3ccode\x3esave()\x3c\/code\x3e方法保存到服务器。\x3cbr\x3e另外新增和更新的处理方式相似，就直接写在一个方法内。\x3c\/p\x3e\n\x3ch4\x3eEmber前端处理代码\x3c\/h4\x3e\n\x3ch5\x3ecomponent:user-form.js\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/components\/user-form.js\n\/\/ 新增，修改user\nimport Ember from \x27ember\x27;\n\nexport default Ember.Component.extend({\n  tipInfo: null,\n\n  actions: {\n    saveOrUpdate(id, user) {\n      if (id) {  \/\/更新\n        let username = this.get(\x27model.username\x27);\n        let email = this.get(\x27model.email\x27);\n        if (username \x26amp;\x26amp; email) {\n          this.store.findRecord(\x27user\x27, id).then((u) =\x3e {\n            \n            u.set(\x27username\x27, username);\n            u.set(\x27email\x27, email);\n\n            u.save().then(() =\x3e {\n              this.set(\x27tipInfo\x27, \x26quot;更新成功\x26quot;);\n              \/\/ this.set(\x27model.username\x27, \x27\x27);\n              \/\/ this.set(\x27model.email\x27, \x27\x27);\n            }); \n          });\n        } else {\n          this.set(\x27tipInfo\x27, \x26quot;请输入username和email！\x26quot;);\n        }\n\n      } else {  \/\/新增\n\n        let username = this.get(\x27model.username\x27);\n        let email = this.get(\x27model.email\x27);\n        if (username \x26amp;\x26amp; email) {\n          this.get(\x27store\x27).createRecord(\x27user\x27, {\n            username: username,\n            email: email\n          }).save().then(() =\x3e {\n            this.set(\x27tipInfo\x27, \x26quot;保存成功\x26quot;);\n            this.set(\x27model.username\x27, \x27\x27);\n            this.set(\x27model.email\x27, \x27\x27);\n          }, (err) =\x3e {\n            this.set(\x27tipInfo\x27, \x26quot;保存失败\x26quot;\x2berr);\n          }); \n        } else {\n          this.set(\x27tipInfo\x27, \x26quot;请输入username和email！\x26quot;);\n        }\n    \n      }\n    }\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/components\/user-form.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 新增，修改user\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Ember \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Ember.Component.extend({\n  \x3cspan class=\x22hljs-attr\x22\x3etipInfo\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n\n  \x3cspan class=\x22hljs-attr\x22\x3eactions\x3c\/span\x3e: {\n    saveOrUpdate(id, user) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (id) {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e username = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27model.username\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e email = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27model.email\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (username \x26amp;\x26amp; email) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.findRecord(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e, id).then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eu\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \n            u.set(\x3cspan class=\x22hljs-string\x22\x3e\x27username\x27\x3c\/span\x3e, username);\n            u.set(\x3cspan class=\x22hljs-string\x22\x3e\x27email\x27\x3c\/span\x3e, email);\n\n            u.save().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27tipInfo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22更新成功\x22\x3c\/span\x3e);\n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.set(\x27model.username\x27, \x27\x27);\x3c\/span\x3e\n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.set(\x27model.email\x27, \x27\x27);\x3c\/span\x3e\n            }); \n          });\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27tipInfo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22请输入username和email！\x22\x3c\/span\x3e);\n        }\n\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/新增\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e username = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27model.username\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e email = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27model.email\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (username \x26amp;\x26amp; email) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27store\x27\x3c\/span\x3e).createRecord(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: username,\n            \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: email\n          }).save().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27tipInfo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22保存成功\x22\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27model.username\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27model.email\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n          }, (err) =\x26gt; {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27tipInfo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22保存失败\x22\x3c\/span\x3e\x2berr);\n          }); \n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.set(\x3cspan class=\x22hljs-string\x22\x3e\x27tipInfo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22请输入username和email！\x22\x3c\/span\x3e);\n        }\n    \n      }\n    }\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新增和修改处理是相似的，根据\x3ccode\x3eid\x3c\/code\x3e是否为空判断是否是新增还是更新。\x3c\/p\x3e\n\x3ch4\x3ehbs:user-form.hbs\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x22{{\x22! 新增、修改都用到的表单，提出为公共部分\x22}}\x22\n\x3cdiv class=\x26quot;container\x26quot;\x3e\n  \x3ch1\x3e\x22{{\x22title\x22}}\x22\x3c\/h1\x3e\n\n  \x3cdiv class=\x26quot;row bg-info\x26quot; style=\x26quot;padding: 10px 20px 0 0;\x26quot;\x3e\n    \x3cp class=\x26quot;pull-right\x26quot; style=\x26quot;margin-right: 20px;\x26quot;\x3e\n      \x22{{\x22#link-to \x27users\x27 class=\x26quot;btn btn-primary\x26quot;\x22}}\x22返回\x22{{\x22\/link-to\x22}}\x22\n    \x3c\/p\x3e\n  \x3c\/div\x3e\n\n  \n  \x3c!-- \x3cform \x22{{\x22action \x27add\x27 on=\x27submit\x27\x22}}\x22\x3e --\x3e\n  \x3cform\x3e\n    \x3cdiv class=\x26quot;form-group\x26quot;\x3e\n      \x3clabel for=\x26quot;exampleInputPassword1\x26quot;\x3eusername\x3c\/label\x3e\n      \x22{{\x22input type=\x26quot;text\x26quot; class=\x26quot;form-control\x26quot; id=\x26quot;usernameId\x26quot; name=\x27username\x27 placeholder=\x26quot;username\x26quot; value=model.username\x22}}\x22\n    \x3c\/div\x3e\n\n    \x3cdiv class=\x26quot;form-group\x26quot;\x3e\n      \x3clabel for=\x26quot;exampleInputEmail1\x26quot;\x3eEmail address\x3c\/label\x3e\n      \x22{{\x22input type=\x26quot;text\x26quot; class=\x26quot;form-control\x26quot; id=\x26quot;exampleInputEmail1\x26quot; placeholder=\x26quot;Email\x26quot; value=model.email\x22}}\x22\n    \x3c\/div\x3e\n    \x3cbutton type=\x26quot;submit\x26quot; class=\x26quot;btn btn-primary\x26quot; \x22{{\x22action \x27saveOrUpdate\x27 model.id model\x22}}\x22\x3e保存\x3c\/button\x3e\n  \x3c\/form\x3e\n\n  \x22{{\x22#if tipInfo\x22}}\x22\n    \x3cdiv class=\x26quot;alert alert-success alert-dismissible\x26quot; role=\x26quot;alert\x26quot;\x3e\n      \x3cbutton type=\x26quot;button\x26quot; class=\x26quot;close\x26quot; data-dismiss=\x26quot;alert\x26quot; aria-label=\x26quot;Close\x26quot;\x3e\x3cspan aria-hidden=\x26quot;true\x26quot;\x3e\x26amp;times;\x3c\/span\x3e\x3c\/button\x3e\n      \x22{{\x22tipInfo\x22}}\x22\n    \x3c\/div\x3e\n  \x22{{\x22\/if\x22}}\x22\n\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x22{{\x22! 新增、修改都用到的表单，提出为公共部分\x22}}\x22\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22title\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22row bg-info\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22padding: 10px 20px 0 0;\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22pull-right\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22margin-right: 20px;\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x22{{\x22#link-to \x27users\x27 class=\x22btn btn-primary\x22\x22}}\x22返回\x22{{\x22\/link-to\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- \x26lt;form \x22{{\x22action \x27add\x27 on=\x27submit\x27\x22}}\x22\x26gt; --\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form-group\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22exampleInputPassword1\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eusername\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x22{{\x22input type=\x22text\x22 class=\x22form-control\x22 id=\x22usernameId\x22 name=\x27username\x27 placeholder=\x22username\x22 value=model.username\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form-group\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22exampleInputEmail1\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eEmail address\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x22{{\x22input type=\x22text\x22 class=\x22form-control\x22 id=\x22exampleInputEmail1\x22 placeholder=\x22Email\x22 value=model.email\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22submit\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn btn-primary\x22\x3c\/span\x3e \x22{{\x22\x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e \x27\x3cspan class=\x22hljs-attr\x22\x3esaveOrUpdate\x3c\/span\x3e\x27 \x3cspan class=\x22hljs-attr\x22\x3emodel.id\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3emodel\x3c\/span\x3e\x22}}\x22\x26gt;\x3c\/span\x3e保存\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x22{{\x22#if tipInfo\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22alert alert-success alert-dismissible\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erole\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22alert\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22button\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22close\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-dismiss\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22alert\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3earia-label\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Close\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3earia-hidden\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x26amp;times;\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x22{{\x22tipInfo\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x22{{\x22\/if\x22}}\x22\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3eroute:edit.js\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/routes\/users\/edit.js\nimport Ember from \x27ember\x27;\n\nexport default Ember.Route.extend({\n  \/\/ 根据id获取某个记录\n  model(params) {\n    return this.store.findRecord(\x27user\x27, params.user_id);\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/routes\/users\/edit.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Ember \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Ember.Route.extend({\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据id获取某个记录\x3c\/span\x3e\n  model(params) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.findRecord(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e, params.user_id);\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e点击“编辑”的时候需要根据被点击记录的\x3ccode\x3eid\x3c\/code\x3e查询数据详情，并返回到编辑页面。\x3c\/p\x3e\n\x3ch5\x3enew.hbs\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x22{{\x22! 增加数据的表单\x22}}\x22\n\x22{{\x22user-form title=\x27新增user\x27 store=store model=model\x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x22{{\x22! 增加数据的表单\x22}}\x22\n\x22{{\x22user-form title=\x27新增user\x27 store=store model=model\x22}}\x22\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3eedit.hbs\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x22{{\x22! 修改数据的表单\x22}}\x22\n\x22{{\x22user-form title=\x27修改user\x27 store=store model=model\x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x22{{\x22! 修改数据的表单\x22}}\x22\n\x22{{\x22user-form title=\x27修改user\x27 store=store model=model\x22}}\x22\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e提取新增和修改这两个模板的相同代码为一个组件，两个模板都调用组件。\x3c\/p\x3e\n\x3ch4\x3e后端处理代码\x3c\/h4\x3e\n\x3cp\x3e与前端对应的要有相应的后端处理服务，增加2个路由监听，一个是监听\x3ccode\x3epost\x3c\/code\x3e提交（新增），一个是\x3ccode\x3eput\x3c\/code\x3e提交（更新）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 处理请求 POST http:\/\/localhost:4200\/users\n  app.post(\x27\/api\/v1\/users\x27, function(req, res) {\n    \n    var username = req.body.user.username;\n    console.log(\x26quot;req.body.user.username = \x26quot; \x2b username);\n    var email = req.body.user.email;\n    console.log(\x26quot;req.body.user.email = \x26quot; \x2b email);\n\n    \/\/ 打开数据库连接\n    pool.getConnection(function(err, conn) {  \n      var queryParams = { username: username, email: email };  \n      var query = conn.query(\x27insert into user SET ?\x27, queryParams, function(err, result) {  \n          if (err) throw err;\n          \n          console.log(\x27result = \x27 \x2b result);\n          \/\/ 返回前端\n          if (result) {\n            res.status(200).send({\n                users: {\n                  id: result.insertId,\n                  username: username,\n                  email: email\n                }\n            });\n          } else {  \/\/没有数据返回一个空的\n            \/\/ 返回前端\n            res.status(200).send({\n                users: {\n                  id: \x27\x27,\n                  username: \x27\x27,\n                  email: \x27\x27\n                }\n            });\n          } \n          \n      });\n      console.log(\x27sql: \x27 \x2b query.sql);\n      conn.release();  \/\/释放连接，放回到连接池\n    });\n  });\n    \n\n\n    \/\/ 处理请求 POST http:\/\/localhost:4200\/users\/id  根据id更新某个数据\n  app.put(\x27\/api\/v1\/users\/:id\x27, function(req, res) {\n\n    console.log(\x27更新 POST \/api\/v1\/users\/:id\x27);\n    console.log(\x27req.params.id = \x27 \x2b req.params.id);\n    console.log(\x27req.body.user.username = \x27 \x2b req.body.user.username);\n    var jsonArr = new Array();\n    \/\/ 打开数据库连接\n    pool.getConnection(function(err, conn) {  \n      \/\/ 参数的次序要与SQL语句的参数次序一致\n      var queryParams = [ req.body.user.username, req.body.user.email, req.params.id ];\n      \n      var query = conn.query(\x27UPDATE user SET username = ?, email = ? where id = ?\x27, queryParams, function(err, results, fields) {  \n          if (err) {\n            console.log(\x27更新出错：\x27\x2berr);\n            throw err;\n          } \n\n        \/\/遍历返回的数据并设置到返回的json对象中，通常情况下只有一个数据，直接取第一个数据返回\n        if (results \x26amp;\x26amp; results.length \x3e 0) {\n          jsonArr.push({\n              id: results[0].id,\n              username: results[0].username,\n              email: results[0].email\n          });\n\n          \/\/ 返回前端\n          res.status(200).send({\n              users: jsonArr\n          });\n        }\n        \/\/  else {  \/\/没有数据返回一个空的\n        \/\/   \/\/ 返回前端\n        \/\/   res.status(200).send({\n        \/\/       users: {\n        \/\/         id: \x27\x27,\n        \/\/         username: \x27\x27,\n        \/\/         email: \x27\x27\n        \/\/       }\n        \/\/   });\n        \/\/ } \n        console.log(\x27SQL: \x27 \x2b query.sql);\n\n      });\n      conn.release();  \/\/释放连接，放回到连接池\n    });\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 POST http:\/\/localhost:4200\/users\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e username = req.body.user.username;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22req.body.user.username = \x22\x3c\/span\x3e \x2b username);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e email = req.body.user.email;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22req.body.user.email = \x22\x3c\/span\x3e \x2b email);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打开数据库连接\x3c\/span\x3e\n    pool.getConnection(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, conn\x3c\/span\x3e) \x3c\/span\x3e{  \n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e queryParams = { \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: username, \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: email };  \n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e query = conn.query(\x3cspan class=\x22hljs-string\x22\x3e\x27insert into user SET ?\x27\x3c\/span\x3e, queryParams, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, result\x3c\/span\x3e) \x3c\/span\x3e{  \n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err;\n          \n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27result = \x27\x3c\/span\x3e \x2b result);\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回前端\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (result) {\n            res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n                \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: {\n                  \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: result.insertId,\n                  \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: username,\n                  \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: email\n                }\n            });\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/没有数据返回一个空的\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回前端\x3c\/span\x3e\n            res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n                \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: {\n                  \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n                  \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n                  \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n                }\n            });\n          } \n          \n      });\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27sql: \x27\x3c\/span\x3e \x2b query.sql);\n      conn.release();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/释放连接，放回到连接池\x3c\/span\x3e\n    });\n  });\n    \n\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 POST http:\/\/localhost:4200\/users\/id  根据id更新某个数据\x3c\/span\x3e\n  app.put(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\/:id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27更新 POST \/api\/v1\/users\/:id\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27req.params.id = \x27\x3c\/span\x3e \x2b req.params.id);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27req.body.user.username = \x27\x3c\/span\x3e \x2b req.body.user.username);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e jsonArr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打开数据库连接\x3c\/span\x3e\n    pool.getConnection(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, conn\x3c\/span\x3e) \x3c\/span\x3e{  \n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 参数的次序要与SQL语句的参数次序一致\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e queryParams = [ req.body.user.username, req.body.user.email, req.params.id ];\n      \n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e query = conn.query(\x3cspan class=\x22hljs-string\x22\x3e\x27UPDATE user SET username = ?, email = ? where id = ?\x27\x3c\/span\x3e, queryParams, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, results, fields\x3c\/span\x3e) \x3c\/span\x3e{  \n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27更新出错：\x27\x3c\/span\x3e\x2berr);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err;\n          } \n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/遍历返回的数据并设置到返回的json对象中，通常情况下只有一个数据，直接取第一个数据返回\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (results \x26amp;\x26amp; results.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n          jsonArr.push({\n              \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: results[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].id,\n              \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: results[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].username,\n              \x3cspan class=\x22hljs-attr\x22\x3eemail\x3c\/span\x3e: results[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].email\n          });\n\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回前端\x3c\/span\x3e\n          res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({\n              \x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: jsonArr\n          });\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/  else {  \/\/没有数据返回一个空的\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 返回前端\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/   res.status(200).send({\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/       users: {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/         id: \x27\x27,\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/         username: \x27\x27,\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/         email: \x27\x27\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/       }\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/   });\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ } \x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27SQL: \x27\x3c\/span\x3e \x2b query.sql);\n\n      });\n      conn.release();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/释放连接，放回到连接池\x3c\/span\x3e\n    });\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为何新增对应的是\x3ccode\x3epost\x3c\/code\x3e方法，更新对应的是\x3ccode\x3eput\x3c\/code\x3e方法，请看\x3ca href=\x22https:\/\/guides.emberjs.com\/v1.13.0\/models\/the-rest-adapter\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ethe rest adapter\x3c\/a\x3e的详细介绍（主要是第一个表格的内容）。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader26\x22\x3e简单测试\x3c\/h3\x3e\n\x3cp\x3e点击右上角的新增按钮进入新增界面。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150903\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150903\x22 alt=\x22新增按钮\x22 title=\x22新增按钮\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e进入新增界面后输入相应信息（我就不做数据的格式校验了，有需要自己校验数据格式）。然后点击“保存”，保存成功会有提示信息。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150905\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150905\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150907\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150907\x22 alt=\x22保存成功提示信息\x22 title=\x22保存成功提示信息\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击右上角的“返回”回到主列表页面，查看新增的数据是否保存成功。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150909\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150909\x22 alt=\x22主列表数据\x22 title=\x22主列表数据\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到刚刚新增的数据已经显示在列表上，为了进一步验证数据已经保存成功，直接查看数据库。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150911\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150911\x22 alt=\x22数据库数据\x22 title=\x22数据库数据\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到数据库也已经成功保存了刚刚新增的数据。\x3c\/p\x3e\n\x3cp\x3e修改的测试方式我就不啰嗦了，点击列表上的修改按钮进入修改页面，修改后保存既可以，请自行测试。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader27\x22\x3e删除\x3c\/h3\x3e\n\x3cp\x3e删除处理相比新增更加简单，直接发送一个\x3ccode\x3edelete\x3c\/code\x3e请求即可。\x3c\/p\x3e\n\x3ch4\x3eEmber前端处理\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app\/routes\/user.js\nimport Ember from \x27ember\x27;\n\nexport default Ember.Route.extend({\n  model() {\n    return this.store.findAll(\x27user\x27);\n  },\n  actions: {\n    \/\/ 删除记录\n    del(id) {\n      console.log(\x27删除记录：\x27 \x2b id);\n      this.get(\x27store\x27).findRecord(\x27user\x27, id).then((u) =\x3e {\n          u.destroyRecord(); \/\/ =\x3e DELETE to \/users\/2\n      });\n    }\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app\/routes\/user.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Ember \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ember\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Ember.Route.extend({\n  model() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.findAll(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e);\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eactions\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除记录\x3c\/span\x3e\n    del(id) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27删除记录：\x27\x3c\/span\x3e \x2b id);\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.get(\x3cspan class=\x22hljs-string\x22\x3e\x27store\x27\x3c\/span\x3e).findRecord(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e, id).then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eu\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n          u.destroyRecord(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; DELETE to \/users\/2\x3c\/span\x3e\n      });\n    }\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- app\/templates\/index.hbs --\x3e\n\n\x3ch1\x3e用户列表\x3c\/h1\x3e\n\n\x3cdiv class=\x26quot;row bg-info\x26quot; style=\x26quot;padding: 10px 20px 0 0;\x26quot;\x3e\n  \x3cp class=\x26quot;pull-right\x26quot; style=\x26quot;margin-right: 20px;\x26quot;\x3e\n    \x22{{\x22#link-to \x27users.new\x27 class=\x26quot;btn btn-primary\x26quot;\x22}}\x22新增\x22{{\x22\/link-to\x22}}\x22\n  \x3c\/p\x3e\n\x3c\/div\x3e\n\n\n\x3ctable class=\x26quot;table table-striped table-hover\x26quot;\x3e\n  \x3cthead\x3e\n    \x3ctr\x3e\n      \x3cth\x3e\n        #\n      \x3c\/th\x3e\n      \x3cth\x3e\n        用户名\n      \x3c\/th\x3e\n      \x3cth\x3e\n        邮箱\n      \x3c\/th\x3e\n      \x3cth\x3e\n      操作\n      \x3c\/th\x3e\n    \x3c\/tr\x3e\n  \x3c\/thead\x3e\n\n  \x3ctbody\x3e\n    \x22{{\x22#each model as |user|\x22}}\x22\n    \x3ctr\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.id\x22}}\x22\n      \x3c\/td\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.username\x22}}\x22\n      \x3c\/td\x3e\n      \x3ctd\x3e\n        \x22{{\x22user.email\x22}}\x22\n      \x3c\/td\x3e\n      \x3ctd\x3e\n      \x22{{\x22#link-to \x27users.edit\x27 user.id\x22}}\x22修改\x22{{\x22\/link-to\x22}}\x22 | \n      \x3cspan \x22{{\x22action \x27del\x27 user.id\x22}}\x22 style=\x26quot;cursor: pointer; color: #337ab7;\x26quot;\x3e删除\x3c\/span\x3e\n      \x3c\/td\x3e\n    \x3c\/tr\x3e\n    \x22{{\x22\/each\x22}}\x22\n  \x3c\/tbody\x3e\n\n\x3c\/table\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- app\/templates\/index.hbs --\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e用户列表\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22row bg-info\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22padding: 10px 20px 0 0;\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22pull-right\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22margin-right: 20px;\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x22{{\x22#link-to \x27users.new\x27 class=\x22btn btn-primary\x22\x22}}\x22新增\x22{{\x22\/link-to\x22}}\x22\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22table table-striped table-hover\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        #\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        用户名\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        邮箱\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      操作\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x22{{\x22#each model as |user|\x22}}\x22\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.id\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.username\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22user.email\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x22{{\x22#link-to \x27users.edit\x27 user.id\x22}}\x22修改\x22{{\x22\/link-to\x22}}\x22 | \n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x22{{\x22\x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e \x27\x3cspan class=\x22hljs-attr\x22\x3edel\x3c\/span\x3e\x27 \x3cspan class=\x22hljs-attr\x22\x3euser.id\x3c\/span\x3e\x22}}\x22 \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22cursor: pointer; color: #337ab7;\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e删除\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x22{{\x22\/each\x22}}\x22\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码的与前面的代码基本一致，就是增加了删除。\x3c\/p\x3e\n\x3ch4\x3e后端处理\x3c\/h4\x3e\n\x3cp\x3e在后端增加一个监听删除的路由。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 处理请求 DELETE http:\/\/localhost:4200\/users\/id 删除记录\n  app.delete(\x27\/api\/v1\/users\/:id\x27, function(req, res) {\n\n    var jsonArr = new Array();\n    var id = req.params.id;\n    console.log(\x26quot;删除 req.params.id = \x26quot; \x2b id);\n\n    \/\/ 打开数据库连接\n    pool.getConnection(function(err, conn) {  \n      var queryParams = [ id ];  \n      var query = conn.query(\x27delete from user where id = ?\x27, queryParams, function(err, result) {  \n          if (err) throw err;\n\n          \/\/ 返回前端\n          res.status(200).send({});\n      });\n\n      console.log(\x27sql: \x27 \x2b query.sql);\n      conn.release();  \/\/释放连接，放回到连接池\n    });\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理请求 DELETE http:\/\/localhost:4200\/users\/id 删除记录\x3c\/span\x3e\n  app.delete(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/v1\/users\/:id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e jsonArr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e id = req.params.id;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22删除 req.params.id = \x22\x3c\/span\x3e \x2b id);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打开数据库连接\x3c\/span\x3e\n    pool.getConnection(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, conn\x3c\/span\x3e) \x3c\/span\x3e{  \n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e queryParams = [ id ];  \n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e query = conn.query(\x3cspan class=\x22hljs-string\x22\x3e\x27delete from user where id = ?\x27\x3c\/span\x3e, queryParams, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, result\x3c\/span\x3e) \x3c\/span\x3e{  \n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err;\n\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回前端\x3c\/span\x3e\n          res.status(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e).send({});\n      });\n\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27sql: \x27\x3c\/span\x3e \x2b query.sql);\n      conn.release();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/释放连接，放回到连接池\x3c\/span\x3e\n    });\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e测试删除\x3c\/h4\x3e\n\x3cp\x3e测试删除很简单，直接在列表上点击“删除”按钮即可删除一条记录。界面和数据库的截图我就不贴出来了，自己动手测试就知道了！！\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e数据可以正确删除，但是，删除之后控制台会报如下错误：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006150913\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006150913\x22 alt=\x22删除报错\x22 title=\x22删除报错\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e找了官网文档\x3ca href=\x22https:\/\/guides.emberjs.com\/v1.13.0\/models\/the-rest-adapter\/#toc_json-root\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ethe rest adapter delete record\x3c\/a\x3e按照官网的文档处理仍然报错！目前还没找到好的处理方法，不知道是哪里出了问题，如果读者知道请告诉我，谢谢。\x3c\/p\x3e\n\x3cp\x3e到此CRUD操作也完成了，不足的就是在处理删除的时候还是有点问题，目前还没找到觉得办法！但是总的来说对于CRUD的操作都是这么处理的，调用的方法也都是上述代码所使用的方法。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e未完待续……还差分页没完成。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader28\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e文章写到这里已经把我所想的内容介绍完毕了，不知道读者是否看明白了。其中主要理解的知识点是：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eEmber Data和adapter、record、model的关系\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何自定义适配器\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何根据Ember前端请求编写后端处理\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCRUD操作\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e分页处理（目前还没整合进来）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e明白了上述几点，本文的目的也达到了！如何有疑问欢迎给我留言，也期待着读者能给我解答删除报错的问题！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader29\x22\x3e文章源码\x3c\/h2\x3e\n\x3cp\x3e如果有需要欢迎star或者fork学习。下面是源码地址：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/ubuntuvim\/emberData-adapter-database\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ubuntuvim\/emberData-adapter-database\x3c\/a\x3e，欢迎follow我，一起学习交流！我在全球最大的\x3ca href=\x22https:\/\/github.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e同性交友网站\x3c\/a\x3e等你哦！！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader30\x22\x3e参考网址\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/emberjs.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eember.js\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/ember-cli.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eember-cli\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Ember.js如何与后端服务交互？adapter、store、ember data关系揭秘</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006150887">https://segmentfault.com/a/1190000006150887</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/i3jfsn7q3un/" target="_blank">https://alili.tech/archive/i3jfsn7q3un/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>