<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 最佳实践——那些 React 没告诉你但很重要的事"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 最佳实践——那些 React 没告诉你但很重要的事 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/86zg7e14m3y/",
				"appid": "1613049289050283", 
				"title": "React 最佳实践——那些 React 没告诉你但很重要的事 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lvrgddxh4l/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2fcqedn8m95/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&text=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&text=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&title=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&is_video=false&description=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&title=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&title=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&title=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f86zg7e14m3y%2f&title=React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e2%80%94%e2%80%94%e9%82%a3%e4%ba%9b%20React%20%e6%b2%a1%e5%91%8a%e8%af%89%e4%bd%a0%e4%bd%86%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%ba%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 最佳实践——那些 React 没告诉你但很重要的事</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前言：对很多 react 新手来说，网上能找到的资源大都是些简单的 tutorial ，它们能教会你如何使用 react ，但并不会告诉你怎么在实际项目中优雅的组织和编写 react 代码。用谷歌搜中文“ React 最佳实践”发现前两页几乎全都是同一篇国外文章的译文...所以我总结了下自己过去那个项目使用 React 踩过的一些坑，也整理了一些别人的观点，希望对部分 react 使用者有帮助。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eReact 与 AJAX\x3c\/h2\x3e\n\x3cp\x3eReact只负责处理View这一层，它本身不涉及网络请求\/AJAX，所以这里我们需求考虑两个问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e第一，用什么技术从服务端获取数据；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第二，获取到的数据应该放在react组件的什么位置。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eReact官方提供了一种解决方案：\x3ca href=\x22https:\/\/facebook.github.io\/react\/tips\/initial-ajax.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eLoad Initial Data via AJAX\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e使用jQuery的Ajax方法，在一个组件的\x3ccode\x3ecomponentDidMount()\x3c\/code\x3e中发ajax请求，拿到的数据存在组件自己的\x3ccode\x3estate\x3c\/code\x3e中，并调用\x3ccode\x3esetState\x3c\/code\x3e方法去更新UI。如果是异步获取数据，则在\x3ccode\x3ecomponentWillUnmount\x3c\/code\x3e中取消发送请求。\x3c\/p\x3e\n\x3cp\x3e如果只是为了使用jQuery的Ajax方法就引入整个jQuery库，既是一种浪费又加大了整个应用的体积。那我们还有什么其他的选择吗？事实上是有很多的：\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/GlobalFetch\/fetch\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efetch()\x3c\/a\x3e、\x3ca href=\x22https:\/\/github.com\/github\/fetch\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efetch polyfill\x3c\/a\x3e、\x3ca href=\x22https:\/\/github.com\/mzabriskie\/axios\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eaxios\x3c\/a\x3e...其中最需要我们关注的是\x3ccode\x3ewindow.fetch()\x3c\/code\x3e,它是一个简洁、标准化的javascript的Ajax API。在Chrome和Firefox中已经可以使用，如果需要兼容其他浏览器，可以使用fetch polyfill。\x3c\/p\x3e\n\x3cp\x3eReact官方文档只告诉了我们在一个单一组件中如何通过ajax从服务器端获取数据，但并没有告诉我们在一个完整的实际项目中到底应该把数据存在哪些组件中，这部分如果缺乏规范的话，会导致整个项目变得混乱、难以维护。下面给出三种比较好的实践：\x3c\/p\x3e\n\x3ch5\x3e1. 所有的数据请求和管理都存放在唯一的一个根组件\x3c\/h5\x3e\n\x3cp\x3e让父组件\/根组件集中发送所有的ajax请求，把从服务端获取的数据统一存放在这个组件的state中，再通过props把数据传给子组件。这种方法主要是针对组件树不是很复杂的小型应用。缺点就是当组件树的层级变多了以后，需要把数据一层一层地传给子组件，写起来麻烦，性能也不好。\x3c\/p\x3e\n\x3ch5\x3e2. 设置多个容器组件专门处理数据请求和管理\x3c\/h5\x3e\n\x3cp\x3e其实跟第一种方法类似，只不过设置多个容器组件来负责数据请求和状态管理。这里我们需要区分两种不同类型的组件，一种是展示性组件（presentational component），另一种是容器性组件（container component）。展示性组件本身不拥有任何状态，所有的数据都从容器组件中获得，在容器组件中发送ajax请求。两者更详细的描述，可以阅读下这篇文章：\x3ca href=\x22https:\/\/medium.com\/@dan_abramov\/smart-and-dumb-components-7ca2f9a7c7d0#.ch9xqg6s4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePresentational and Container Components\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e一个具体的例子：\x3c\/p\x3e\n\x3cp\x3e假设我们需要展示用户的姓名和头像，首先创建一个展示性组件\x3ccode\x3e\x26lt;UserProfile \/\x26gt;\x3c\/code\x3e,它接受两个Props：\x3ccode\x3ename\x3c\/code\x3e和\x3ccode\x3eprofileImage\x3c\/code\x3e。这个组件内部没有任何关于Ajax的代码。\x3c\/p\x3e\n\x3cp\x3e然后创建一个容器组件\x3ccode\x3e\x26lt;UserProfileContainer \/\x26gt;\x3c\/code\x3e，它接受一个\x3ccode\x3euserId\x3c\/code\x3e的参数，发送Ajax请求从服务器获取数据存在\x3ccode\x3estate\x3c\/code\x3e中，再通过\x3ccode\x3eprops\x3c\/code\x3e传给\x3ccode\x3e\x26lt;UserProfile \/\x26gt;\x3c\/code\x3e组件。\x3c\/p\x3e\n\x3ch5\x3e3. 使用Redux或Relay的情况\x3c\/h5\x3e\n\x3cp\x3eRedux管理状态和数据，Ajax从服务器端获取数据，所以很显然当我们使用了Redux时，应该把所有的网络请求都交给redux来解决。具体来说，应该是放在\x3ca href=\x22http:\/\/redux.js.org\/docs\/advanced\/AsyncActions.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAsync Actions\x3c\/a\x3e。如果用其他类Flux库的话，解决方式都差不多，都是在actions中发送网络请求。\x3c\/p\x3e\n\x3cp\x3eRelay是Facebook官方推出的一个库。如果用它的话，我们只需要通过GraphQL来声明组件需要的数据，Relay会自动地把下载数据并通过props往下传递。不过想要用Relay，你得先有一个GraphQL的服务器...\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e一个标准组件的组织结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221 class definition\n    1.1 constructor\n        1.1.1 event handlers\n    1.2 \x27component\x27 lifecycle events\n    1.3 getters\n    1.4 render\n2 defaultProps\n3 proptypes\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e definition\n    \x3cspan class=\x22hljs-number\x22\x3e1.1\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e\n        1.1.1 \x3cspan class=\x22hljs-title\x22\x3eevent\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehandlers\x3c\/span\x3e\n    1.2 \x27\x3cspan class=\x22hljs-title\x22\x3ecomponent\x3c\/span\x3e\x27 \x3cspan class=\x22hljs-title\x22\x3elifecycle\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eevents\x3c\/span\x3e\n    1.3 \x3cspan class=\x22hljs-title\x22\x3egetters\x3c\/span\x3e\n    1.4 \x3cspan class=\x22hljs-title\x22\x3erender\x3c\/span\x3e\n2 \x3cspan class=\x22hljs-title\x22\x3edefaultProps\x3c\/span\x3e\n3 \x3cspan class=\x22hljs-title\x22\x3eproptypes\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Person extends React.Component {\n  constructor (props) {\n    super(props);\n\n    this.state = { smiling: false };\n\n    this.handleClick = () =\x3e {\n      this.setState({smiling: !this.state.smiling});\n    };\n  }\n\n  componentWillMount () {\n    \/\/ add event listeners (Flux Store, WebSocket, document, etc.)\n  },\n\n  componentDidMount () {\n    \/\/ React.getDOMNode()\n  },\n\n  componentWillUnmount () {\n    \/\/ remove event listeners (Flux Store, WebSocket, document, etc.)\n  },\n\n  get smilingMessage () {\n    return (this.state.smiling) ? \x26quot;is smiling\x26quot; : \x26quot;\x26quot;;\n  }\n\n  render () {\n    return (\n      \x3cdiv onClick={this.handleClick}\x3e\n        {this.props.name} {this.smilingMessage}\n      \x3c\/div\x3e\n    );\n  },\n}\n\nPerson.defaultProps = {\n  name: \x27Guest\x27\n};\n\nPerson.propTypes = {\n  name: React.PropTypes.string\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePerson\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = { smiling: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleClick = () =\x26gt; {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({smiling: !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.smiling});\n    };\n  }\n\n  componentWillMount () {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ add event listeners (Flux Store, WebSocket, document, etc.)\x3c\/span\x3e\n  },\n\n  componentDidMount () {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ React.getDOMNode()\x3c\/span\x3e\n  },\n\n  componentWillUnmount () {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ remove event listeners (Flux Store, WebSocket, document, etc.)\x3c\/span\x3e\n  },\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e smilingMessage () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.smiling) ? \x3cspan class=\x22hljs-string\x22\x3e\x22is smiling\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e;\n  }\n\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div onClick={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleClick}\x26gt;\n        {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.name} {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.smilingMessage}\n      \x26lt;\/div\x26gt;\n    );\n  },\n}\n\nPerson.defaultProps = {\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27Guest\x27\x3c\/span\x3e\n};\n\nPerson.propTypes = {\n  name: React.PropTypes.string\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上示例代码的来源：\x3ca href=\x22https:\/\/github.com\/planningcenter\/react-patterns#component-organization\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/planningcenter\/react-patterns#component-organization\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e使用 PropTypes 和 getDefaultProps()\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e一定要写PropTypes，切莫为了省事而不写\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e如果一个Props不是requied，一定在getDefaultProps中设置它\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eReact.PropTypes\x3c\/code\x3e主要用来验证组件接收到的props是否为正确的数据类型，如果不正确，console中就会出现对应的warning。出于性能方面的考虑，这个API只在开发环境下使用。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e基本使用方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22propTypes: {\n    myArray: React.PropTypes.array,\n    myBool: React.PropTypes.bool,\n    myFunc: React.PropTypes.func,\n    myNumber: React.PropTypes.number,\n    myString: React.PropTypes.string，\n     \n     \/\/ You can chain any of the above with `isRequired` to make sure a warning\n    \/\/ is shown if the prop isn\x27t provided.\n    requiredFunc: React.PropTypes.func.isRequired\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3epropTypes: {\n    myArray: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.array\x3c\/span\x3e,\n    myBool: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.bool\x3c\/span\x3e,\n    myFunc: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.func\x3c\/span\x3e,\n    myNumber: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.number\x3c\/span\x3e,\n    myString: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.string\x3c\/span\x3e，\n     \n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ You can chain any of the above with `isRequired` to make sure a warning\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ is shown if the prop isn\x27t provided.\x3c\/span\x3e\n    requiredFunc: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.func\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.isRequired\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e假如我们props不是以上类型，而是拥有复杂结构的对象怎么办？比如下面这个：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  text: \x27hello world\x27,\n  numbers: [5, 2, 7, 9],\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-attribute\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e,\n  numbers: [\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e],\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然，我们可以直接用\x3ccode\x3eReact.PropTypes.object\x3c\/code\x3e,但是对象内部的数据我们却无法验证。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22propTypes: {\n  myObject: React.PropTypes.object,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3epropTypes\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-attribute\x22\x3emyObject\x3c\/span\x3e: React.PropTypes.object,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e进阶使用方法：\x3ccode\x3eshape()\x3c\/code\x3e 和 \x3ccode\x3earrayOf()\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22propTypes: {\n  myObject: React.PropTypes.shape({\n    text: React.PropTypes.string,\n    numbers: React.PropTypes.arrayOf(React.PropTypes.number),\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3epropTypes: {\n  myObject: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.shape\x3c\/span\x3e({\n    text: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.string\x3c\/span\x3e,\n    numbers: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.arrayOf\x3c\/span\x3e(React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.number\x3c\/span\x3e),\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是一个更复杂的Props：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n  {\n    name: \x27Zachary He\x27,\n    age: 13,\n    married: true,\n  },\n  {\n    name: \x27Alice Yo\x27,\n    name: 17,\n  },\n  {\n    name: \x27Jonyu Me\x27,\n    age: 20,\n    married: false,\n  }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e[\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Zachary He\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    age:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    married:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Alice Yo\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    name:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e17\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Jonyu Me\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    age:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    married:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e综合上面，写起来应该就不难了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22propTypes: {\n    myArray: React.PropTypes.arrayOf(\n        React.propTypes.shape({\n            name: React.propTypes.string.isRequired,\n            age: React.propTypes.number.isRequired,\n            married: React.propTypes.bool\n        })\n    )\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3epropTypes: {\n    myArray: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.arrayOf\x3c\/span\x3e(\n        React\x3cspan class=\x22hljs-selector-class\x22\x3e.propTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.shape\x3c\/span\x3e({\n            name: React\x3cspan class=\x22hljs-selector-class\x22\x3e.propTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.string\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.isRequired\x3c\/span\x3e,\n            age: React\x3cspan class=\x22hljs-selector-class\x22\x3e.propTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.number\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.isRequired\x3c\/span\x3e,\n            married: React\x3cspan class=\x22hljs-selector-class\x22\x3e.propTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.bool\x3c\/span\x3e\n        })\n    )\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e把计算和条件判断都交给 \x3ccode\x3erender()\x3c\/code\x3e 方法吧\x3c\/h2\x3e\n\x3ch5\x3e1. 组件的state中不能出现props\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \/\/ BAD:\n  constructor (props) {\n    this.state = {\n      fullName: `${props.firstName} ${props.lastName}`\n    };\n  }\n\n  render () {\n    var fullName = this.state.fullName;\n    return (\n      \x3cdiv\x3e\n        \x3ch2\x3e{fullName}\x3c\/h2\x3e\n      \x3c\/div\x3e\n    );\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ BAD:\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3efullName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${props.firstName}\x3c\/span\x3e \x3cspan class=\x22hljs-subst\x22\x3e${props.lastName}\x3c\/span\x3e`\x3c\/span\x3e\n    };\n  }\n\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fullName = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.fullName;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e{fullName}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ GOOD: \nrender () {\n  var fullName = `${this.props.firstName} ${this.props.lastName}`;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ GOOD: \x3c\/span\x3e\nrender () {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fullName = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.firstName}\x3c\/span\x3e \x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.lastName}\x3c\/span\x3e`\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然，复杂的display logic也应该避免全堆放在render()中，因为那样可能导致整个render()方法变得臃肿，不优雅。我们可以把一些复杂的逻辑通过helper function移出去。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ GOOD: helper function\nrenderFullName () {\n  return `${this.props.firstName} ${this.props.lastName}`;\n}\n\nrender () {\n  var fullName = this.renderFullName();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ GOOD: helper function\x3c\/span\x3e\nrenderFullName () {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e `${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.firstName} ${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.lastName}`;\n}\n\nrender () {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fullName = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.renderFullName();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e2. 保持state的简洁，不要出现计算得来的state\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ WRONG:\n  constructor (props) {\n    this.state = {\n      listItems: [1, 2, 3, 4, 5, 6],\n      itemsNum: this.state.listItems.length\n    };\n  }\n  render() {\n      return (\n          \x3cdiv\x3e\n              \x3cspan\x3e{this.state.itemsNum}\x3c\/span\x3e\n          \x3c\/div\x3e\n      )\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ WRONG:\n  constructor (props) {\n    this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = {\n      listItems: [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e],\n      itemsNum: this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.listItems.length\n    };\n  }\n  render() {\n      return (\n          \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;div\x26gt;\x3c\/span\x3e\n              \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;span\x26gt;\x3c\/span\x3e{this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.itemsNum}\x26lt;\/span\x26gt;\n          \x26lt;\/div\x26gt;\n      )\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Right:\nrender () {\n  var itemsNum = this.state.listItems.length;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ Right:\nrender () {\n  var itemsNum = this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.listItems.length;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e3. 能用三元判断符，就不用If，直接放在render()里\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ BAD: \nrenderSmilingStatement () {\n    if (this.state.isSmiling) {\n        return \x3cspan\x3eis smiling\x3c\/span\x3e;\n    }else {\n        return \x27\x27;\n    }\n},\n\nrender () {\n  return \x3cdiv\x3e{this.props.name}{this.renderSmilingStatement()}\x3c\/div\x3e;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ BAD: \x3c\/span\x3e\nrenderSmilingStatement () {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isSmiling) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;span\x26gt;\x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e smiling\x26lt;\/span\x26gt;;\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    }\n},\n\nrender () {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;div\x26gt;{\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.name}{\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.renderSmilingStatement()}\x26lt;\/div\x26gt;;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ GOOD: \nrender () {\n  return (\n    \x3cdiv\x3e\n      {this.props.name}\n      {(this.state.smiling)\n        ? \x3cspan\x3eis smiling\x3c\/span\x3e\n        : null\n      }\n    \x3c\/div\x3e\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ GOOD: \x3c\/span\x3e\nrender () {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    \x26lt;div\x26gt;\n      {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.name}\n      {(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.smiling)\n        ? \x26lt;span\x26gt;\x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e smiling\x26lt;\/span\x26gt;\n        : \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n      }\n    \x26lt;\/div\x26gt;\n  );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e4. 布尔值都不能搞定的，交给IIFE吧\x3c\/h5\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Immediately-invoked_function_expression\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImmediately-invoked function expression\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22return (\n  \x3csection\x3e\n    \x3ch1\x3eColor\x3c\/h1\x3e\n    \x3ch3\x3eName\x3c\/h3\x3e\n    \x3cp\x3e{this.state.color || \x26quot;white\x26quot;}\x3c\/p\x3e\n    \x3ch3\x3eHex\x3c\/h3\x3e\n    \x3cp\x3e\n      {(() =\x3e {\n        switch (this.state.color) {\n          case \x26quot;red\x26quot;:   return \x26quot;#FF0000\x26quot;;\n          case \x26quot;green\x26quot;: return \x26quot;#00FF00\x26quot;;\n          case \x26quot;blue\x26quot;:  return \x26quot;#0000FF\x26quot;;\n          default:      return \x26quot;#FFFFFF\x26quot;;\n        }\n      })()}\n    \x3c\/p\x3e\n  \x3c\/section\x3e\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3ereturn (\n  \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;section\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;h1\x26gt;\x3c\/span\x3eColor\x26lt;\/h1\x26gt;\n    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;h3\x26gt;\x3c\/span\x3eName\x26lt;\/h3\x26gt;\n    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;p\x26gt;\x3c\/span\x3e{this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.color || \x3cspan class=\x22hljs-string\x22\x3e\x22white\x22\x3c\/span\x3e}\x26lt;\/p\x26gt;\n    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;h3\x26gt;\x3c\/span\x3eHex\x26lt;\/h3\x26gt;\n    \x3cspan class=\x22hljs-variable\x22\x3e\x26lt;p\x26gt;\x3c\/span\x3e\n      {(() =\x26gt; {\n        switch (this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.color) {\n          case \x3cspan class=\x22hljs-string\x22\x3e\x22red\x22\x3c\/span\x3e:   return \x3cspan class=\x22hljs-string\x22\x3e\x22#FF0000\x22\x3c\/span\x3e;\n          case \x3cspan class=\x22hljs-string\x22\x3e\x22green\x22\x3c\/span\x3e: return \x3cspan class=\x22hljs-string\x22\x3e\x22#00FF00\x22\x3c\/span\x3e;\n          case \x3cspan class=\x22hljs-string\x22\x3e\x22blue\x22\x3c\/span\x3e:  return \x3cspan class=\x22hljs-string\x22\x3e\x22#0000FF\x22\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:      return \x3cspan class=\x22hljs-string\x22\x3e\x22#FFFFFF\x22\x3c\/span\x3e;\n        }\n      })()}\n    \x26lt;\/p\x26gt;\n  \x26lt;\/section\x26gt;\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e5. 不要把display logic写在\x3ccode\x3ecomponentWillReceiveProps\x3c\/code\x3e或\x3ccode\x3ecomponentWillMount\x3c\/code\x3e中，把它们都移到render()中去。\x3c\/h5\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e如何动态处理 classNames\x3c\/h2\x3e\n\x3ch5\x3e1. 使用布尔值\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ BAD:\nconstructor () {\n    this.state = {\n      classes: []\n    };\n  }\n\n  handleClick () {\n    var classes = this.state.classes;\n    var index = classes.indexOf(\x27active\x27);\n\n    if (index != -1) {\n      classes.splice(index, 1);\n    } else {\n      classes.push(\x27active\x27);\n    }\n\n    this.setState({ classes: classes });\n  }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ BAD:\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\n    this.state = {\n      classes: []\n    }\x3c\/span\x3e;\x3c\/span\x3e\n  }\n\n  handleClick () \x3cspan class=\x22hljs-comment\x22\x3e{\n    var classes = this.state.classes;\n    var index = classes.indexOf(\x27active\x27);\n\n    if (index != -1) {\n      classes.splice(index, 1);\n    }\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\n      classes.push(\x27active\x27);\n    }\x3c\/span\x3e\n\n    this.setState(\x3cspan class=\x22hljs-comment\x22\x3e{ classes: classes }\x3c\/span\x3e);\n  }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ GOOD:\n  constructor () {\n    this.state = {\n      isActive: false\n    };\n  }\n\n  handleClick () {\n    this.setState({ isActive: !this.state.isActive });\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ GOOD:\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\n    this.state = {\n      isActive: false\n    }\x3c\/span\x3e;\x3c\/span\x3e\n  }\n\n  handleClick () \x3cspan class=\x22hljs-comment\x22\x3e{\n    this.setState({ isActive: !this.state.isActive }\x3c\/span\x3e);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e2. 使用\x3ca href=\x22https:\/\/github.com\/JedWatson\/classnames\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eclassnames\x3c\/a\x3e这个小工具来拼接classNames：\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ BEFORE:\nvar Button = React.createClass({\n  render () {\n    var btnClass = \x27btn\x27;\n    if (this.state.isPressed) btnClass \x2b= \x27 btn-pressed\x27;\n    else if (this.state.isHovered) btnClass \x2b= \x27 btn-over\x27;\n    return \x3cbutton className={btnClass}\x3e{this.props.label}\x3c\/button\x3e;\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ BEFORE:\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Button = React.createClass({\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e btnClass = \x3cspan class=\x22hljs-string\x22\x3e\x27btn\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isPressed) btnClass \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x27 btn-pressed\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isHovered) btnClass \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x27 btn-over\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;button className={btnClass}\x26gt;{\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.label}\x26lt;\/button\x26gt;;\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ AFTER：\nvar classNames = require(\x27classnames\x27);\n\nvar Button = React.createClass({\n  render () {\n    var btnClass = classNames({\n      \x27btn\x27: true,\n      \x27btn-pressed\x27: this.state.isPressed,\n      \x27btn-over\x27: !this.state.isPressed \x26amp;\x26amp; this.state.isHovered\n    });\n    return \x3cbutton className={btnClass}\x3e{this.props.label}\x3c\/button\x3e;\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ AFTER：\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e classNames = require(\x3cspan class=\x22hljs-string\x22\x3e\x27classnames\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Button = React.createClass({\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e btnClass = classNames({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27btn\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27btn-pressed\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isPressed,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27btn-over\x27\x3c\/span\x3e: !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isPressed \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isHovered\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;button className={btnClass}\x26gt;{\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.label}\x26lt;\/button\x26gt;;\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e未完待续...\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React 最佳实践——那些 React 没告诉你但很重要的事</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005013207">https://segmentfault.com/a/1190000005013207</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/86zg7e14m3y/" target="_blank">https://alili.tech/archive/86zg7e14m3y/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>