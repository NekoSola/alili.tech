<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="(2/2)Vue构建单页应用最佳实战"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>(2/2)Vue构建单页应用最佳实战 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ll6wu6kojv/",
				"appid": "1613049289050283", 
				"title": "(2/2)Vue构建单页应用最佳实战 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:59"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/b0r5gml8zvg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/0pylb6j21log/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&text=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&text=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&title=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&is_video=false&description=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&title=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&title=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&title=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fll6wu6kojv%2f&title=%282%2f2%29Vue%e6%9e%84%e5%bb%ba%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9c%80%e4%bd%b3%e5%ae%9e%e6%88%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">(2/2)Vue构建单页应用最佳实战</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e本章节，将会把所有的请求全写为跨域请求。不知道为什么，很多人一用了框架就会不知所措。给大家一个忠告，享受框架带来的便利，别忘了时刻提醒自己学好基础知识。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e先把一些不必要的代码删了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/TimeEntries.vue 的模拟数据代码\ndata () {\n  \/\/ 模拟下初始化数据\n  \/*let existingEntry = {\n    comment: \x27我的第一个任务\x27,\n    totalTime: 1.5,\n    date: \x272016-05-01\x27\n  }*\/\n  return {\n    timeEntries: []\n  }\n},\n\/\/头像和昵称暂时写死\n\x3cdiv class=\x26quot;col-sm-2 user-details\x26quot;\x3e\n  \x3cimg src=\x26quot;https:\/\/avatars1.githubusercontent.com\/u\/10184444?v=3\x26amp;s=460\x26quot; class=\x26quot;avatar img-circle img-responsive\x26quot; \/\x3e\n  \x3cp class=\x26quot;text-center\x26quot;\x3e\n    \x3cstrong\x3e\n      二哲\n    \x3c\/strong\x3e\n  \x3c\/p\x3e\n\x3c\/div\x3e\n\n\n\/\/LogTime.vue里的模拟数据代码\ndata () {\n    return {\n      timeEntry: {\n        \/*user: {\n          name: \x27二哲\x27,\n          email: \x27kodo@forchange.cn\x27,\n          image: \x27https:\/\/sfault-avatar.b0.upaiyun.com\/888\/223\/888223038-5646dbc28d530_huge256\x27\n        },*\/\n      }\n    }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/TimeEntries.vue 的模拟数据代码\x3c\/span\x3e\ndata () {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模拟下初始化数据\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*let existingEntry = {\n    comment: \x27我的第一个任务\x27,\n    totalTime: 1.5,\n    date: \x272016-05-01\x27\n  }*\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3etimeEntries\x3c\/span\x3e: []\n  }\n},\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/头像和昵称暂时写死\x3c\/span\x3e\n\x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22col-sm-2 user-details\x22\x3c\/span\x3e\x26gt;\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/avatars1.githubusercontent.com\/u\/10184444?v=3\x26amp;s=460\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22avatar img-circle img-responsive\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text-center\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estrong\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      二哲\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estrong\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/LogTime.vue里的模拟数据代码\x3c\/span\x3e\ndata () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3etimeEntry\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*user: {\n          name: \x27二哲\x27,\n          email: \x27kodo@forchange.cn\x27,\n          image: \x27https:\/\/sfault-avatar.b0.upaiyun.com\/888\/223\/888223038-5646dbc28d530_huge256\x27\n        },*\/\x3c\/span\x3e\n      }\n    }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们将专注3个字段的增删改查，任务时间，持续时间，备注。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e正文\x3c\/h2\x3e\n\x3cp\x3e我们的数据交互其实很简单，所以我在这选择使用大家最熟悉的\x3ccode\x3eexpress\x3c\/code\x3e和\x3ccode\x3emongodb\x3c\/code\x3e，在一个\x3ccode\x3eapp.js\x3c\/code\x3e 文件里完成所有的\x3ccode\x3econtroller\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e首先，安装几个必要的包\x3ccode\x3enpm i express mongodb morgan body-parser --save-dev;\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e简单解释下Morgan和body-parser，其实就是一个log美化和解析参数。具体大家可以google下。\x3c\/p\x3e\n\x3cp\x3e在我们的根目录下，创建\x3ccode\x3eapp.js\x3c\/code\x3e初始化以下代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/app.js\nvar express = require(\x27express\x27);\nvar app = express();\nvar bodyParser = require(\x27body-parser\x27);\nvar morgan = require(\x27morgan\x27);\n\nvar MongoClient = require(\x27mongodb\x27).MongoClient;\nvar mongoUrl = \x27mongodb:\/\/localhost:27017\/mission\x27;\nvar _db;\n\napp.use(morgan(\x27dev\x27));\napp.use(bodyParser.json());\napp.use(express.static(\x27dist\x27));\n\nMongoClient.connect(mongoUrl, function (err, db) {\n  if(err) {\n    console.error(err);\n    return;\n  }\n\n  console.log(\x27connected to mongo\x27);\n  _db = db;\n  app.listen(8888, function () {\n    console.log(\x27server is running...\x27);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e morgan = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27morgan\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e MongoClient = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongodb\x27\x3c\/span\x3e).MongoClient;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27mongodb:\/\/localhost:27017\/mission\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _db;\n\napp.use(morgan(\x3cspan class=\x22hljs-string\x22\x3e\x27dev\x27\x3c\/span\x3e));\napp.use(bodyParser.json());\napp.use(express.static(\x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e));\n\nMongoClient.connect(mongoUrl, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, db\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27connected to mongo\x27\x3c\/span\x3e);\n  _db = db;\n  app.listen(\x3cspan class=\x22hljs-number\x22\x3e8888\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27server is running...\x27\x3c\/span\x3e);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e解释下mongoUrl这行\x3ccode\x3emongodb:\/\/localhost:27017\/mission\x3c\/code\x3e 连接相应的端口，并且使用mission表。此时你是没有\x3ccode\x3emission\x3c\/code\x3e数据库的，这不用在意。在我们后续操作中，它将会自动创建一个mission数据库。\x3c\/p\x3e\n\x3cp\x3e上面代码的意思是，我们创建我们的一个mongo连接，当数据库连接上了后再启动我们的服务器。\x3c\/p\x3e\n\x3cp\x3e接着先启动我们的mongo服务。在命令行里 \x3ccode\x3esudo mongo\x3c\/code\x3e 。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006769733\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006769733\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如果你用得是webstrom编辑器，可以直接运行\x3ccode\x3eapp.js\x3c\/code\x3e，如果是命令行，那就使用 \x3ccode\x3enode app.js\x3c\/code\x3e \x3c\/p\x3e\n\x3cp\x3e如果看见命令行输出了 \x3ccode\x3econnected to mongo\x3c\/code\x3e \x3ccode\x3eserver is running...\x3c\/code\x3e 就可以在\x3ccode\x3e8888\x3c\/code\x3e端口访问我们的应用了。（在这之前别忘了build你的代码）\x3c\/p\x3e\n\x3cp\x3e由于我们讲得是跨域，所以我们讲在我们的dev环境下完成所有的请求。\x3ccode\x3enpm run dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e关闭我们的8888端口页面，进入8080端口的开发环境。\x3c\/p\x3e\n\x3cp\x3e写下我们第一个创建任务的请求。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/app.js\n\n\/\/使用post方法\napp.post(\x27\/create\x27, function(req, res, next) {\n    \/\/接收前端发送的字段\n  var mission = req.body;\n  \/\/选择一个表my_mission 此时没有没关系，也会自动创建\n  var collection = _db.collection(\x27my_mission\x27);\n    \/\/如果我们需要的字段不存在，返回前端信息\n  if(!mission.comment || !mission.totalTime || !mission.date) {\n    res.send({errcode:-1,errmsg:\x26quot;params missed\x26quot;});\n    return;\n  }\n    \/\/如果存在就插入数据库，返回OK\n  collection.insert({comment: mission.comment, totalTime: mission.totalTime,date:mission.date}, function (err, ret) {\n    if(err) {\n      console.error(err);\n      res.status(500).end();\n    } else {\n      res.send({errcode:0,errmsg:\x26quot;ok\x26quot;});\n    }\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/app.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/使用post方法\x3c\/span\x3e\napp.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/create\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/接收前端发送的字段\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mission = req.body;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/选择一个表my_mission 此时没有没关系，也会自动创建\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e collection = _db.collection(\x3cspan class=\x22hljs-string\x22\x3e\x27my_mission\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果我们需要的字段不存在，返回前端信息\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!mission.comment || !mission.totalTime || !mission.date) {\n    res.send({\x3cspan class=\x22hljs-attr\x22\x3eerrcode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3eerrmsg\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22params missed\x22\x3c\/span\x3e});\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n  }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果存在就插入数据库，返回OK\x3c\/span\x3e\n  collection.insert({\x3cspan class=\x22hljs-attr\x22\x3ecomment\x3c\/span\x3e: mission.comment, \x3cspan class=\x22hljs-attr\x22\x3etotalTime\x3c\/span\x3e: mission.totalTime,\x3cspan class=\x22hljs-attr\x22\x3edate\x3c\/span\x3e:mission.date}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, ret\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n      res.status(\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e).end();\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      res.send({\x3cspan class=\x22hljs-attr\x22\x3eerrcode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3eerrmsg\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22ok\x22\x3c\/span\x3e});\n    }\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改下我们的\x3ccode\x3eLogTime.vue\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/LogTime.vue\n\x3cbutton class=\x26quot;btn btn-primary\x26quot; @click=\x26quot;save()\x26quot;\x3e保存\x3c\/button\x3e\n\nmethods: {\n    save () {\n      this.$http.post(\x27http:\/\/localhost:8888\/create\x27,{\n        comment : this.timeEntry.comment,\n        totalTime : this.timeEntry.totalTime,\n        date : this.timeEntry.date\n      }).then(function(ret) {\n        console.log(ret);\n        let timeEntry = this.timeEntry\n        console.log(timeEntry);\n        this.$dispatch(\x27timeUpdate\x27, timeEntry)\n        this.timeEntry = {}\n      })\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/LogTime.vue\x3c\/span\x3e\n\x26lt;button \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn btn-primary\x22\x3c\/span\x3e @click=\x3cspan class=\x22hljs-string\x22\x3e\x22save()\x22\x3c\/span\x3e\x26gt;保存\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/button\x26gt;\n\nmethods: {\n    save () {\n      this.$http.post(\x27http:\/\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/localhost:8888\/\x3c\/span\x3ecreate\x3cspan class=\x22hljs-string\x22\x3e\x27,{\n        comment : this.timeEntry.comment,\n        totalTime : this.timeEntry.totalTime,\n        date : this.timeEntry.date\n      }).then(function(ret) {\n        console.log(ret);\n        let timeEntry = this.timeEntry\n        console.log(timeEntry);\n        this.$dispatch(\x27\x3c\/span\x3etimeUpdate\x3cspan class=\x22hljs-string\x22\x3e\x27, timeEntry)\n        this.timeEntry = {}\n      })\n    }\n}\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输入好内容，点击保存按钮，会发现报了个错。这其实就是最常见的跨域请求错误。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000005268232\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000005268232\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000005268234\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000005268234\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e但是我们明明写得是\x3ccode\x3epost\x3c\/code\x3e请求为什么显示得是\x3ccode\x3eoptions\x3c\/code\x3e呢？\x3c\/p\x3e\n\x3cp\x3e这其实是跨域请求前会先发起的一个\x3ccode\x3eoptions\x3c\/code\x3e请求，需要先问问服务端，我需要一些操作可以吗？如果服务端那里是允许的，才会继续让你发送\x3ccode\x3epost\x3c\/code\x3e请求。\x3c\/p\x3e\n\x3cp\x3e我不知道那些使用\x3ccode\x3evue-resource\x3c\/code\x3e各种姿势也想满足跨域请求的人是怎么想的。你想上天吗？\x3c\/p\x3e\n\x3cp\x3e所以我们需要服务端配置，而不是前端。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/app.js\napp.all(\x26quot;*\x26quot;, function (req, res, next) {\n  res.header(\x27Access-Control-Allow-Origin\x27, \x27*\x27);\n  res.header(\x26quot;Access-Control-Allow-Headers\x26quot;, \x26quot;Content-Type,Content-Length, Authorization, Accept,X-Requested-With\x26quot;);\n  res.header(\x26quot;Access-Control-Allow-Methods\x26quot;,\x26quot;PUT,POST,GET,DELETE,OPTIONS\x26quot;);\n  if (req.method == \x27OPTIONS\x27) {\n    res.send(200);\n  } else {\n    next();\n  }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/app.js\x3c\/span\x3e\napp.all(\x3cspan class=\x22hljs-string\x22\x3e\x22*\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x27Access-Control-Allow-Origin\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e);\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x22Access-Control-Allow-Headers\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22Content-Type,Content-Length, Authorization, Accept,X-Requested-With\x22\x3c\/span\x3e);\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x22Access-Control-Allow-Methods\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22PUT,POST,GET,DELETE,OPTIONS\x22\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (req.method == \x3cspan class=\x22hljs-string\x22\x3e\x27OPTIONS\x27\x3c\/span\x3e) {\n    res.send(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    next();\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eAccess-Control-Allow-Origin\x3c\/code\x3e是设置你的来源域名，写\x3ccode\x3e*\x3c\/code\x3e是很危险的操作。所以我们可以直接写成我们所需的域名和端口，别人就没法请求了。\x3c\/p\x3e\n\x3cp\x3e另外几行就不解释了，一看就懂。\x3c\/p\x3e\n\x3cp\x3e不出意外，可以发现发送了options后，马上发送了post，然后就创建成功了。看下mongo的表，也多了一条记录。\x3c\/p\x3e\n\x3cp\x3e接着来让我们一口气写完剩下的三个请求。列表渲染，删除计划，获取总时长。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/app.js\nvar ObjectID = require(\x27mongodb\x27).ObjectID \n\n\/\/获取总时长\napp.get(\x27\/time\x27, function(req, res, next) {\n    \/\/获取数据表\n  var collection = _db.collection(\x27my_mission\x27);\n  var time = 0;\n  \/\/查询出所有计划\n  collection.find({}).toArray(function (err, ret) {\n    if(err) {\n      console.error(err);\n      return;\n    }\n    \/\/所有计划累加时长\n    ret.forEach(function (item, index) {\n      time \x2b= \x2bitem.totalTime;\n    });\n    \/\/返回时长\n    res.json({errcode:0,errmsg:\x26quot;ok\x26quot;,time:time});\n  });\n});\n\n\/\/获取列表\napp.get(\x27\/time-entries\x27, function(req, res, next) {\n  var collection = _db.collection(\x27my_mission\x27);\n  collection.find({}).toArray(function (err, ret) {\n    if(err) {\n      console.error(err);\n      return;\n    }\n    res.json(ret);\n  });\n});\n\n\/\/删除计划\napp.delete(\x27\/delete\/:id\x27, function (req, res, next) {\n  var _id = req.params.id;\n  var collection = _db.collection(\x27my_mission\x27);\n  console.log(_id)\n  \/\/使用mongodb的唯一ObjectId字段查找出对应id删除记录\n  collection.remove({_id: new ObjectID(_id)} ,function (err, result) {\n    if(err) {\n      console.error(err);\n      res.status(500).end();\n    } else {\n      res.send({errcode:0,errmsg:\x26quot;ok\x26quot;});\n    }\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ObjectID = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongodb\x27\x3c\/span\x3e).ObjectID \n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取总时长\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/time\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取数据表\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e collection = _db.collection(\x3cspan class=\x22hljs-string\x22\x3e\x27my_mission\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e time = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/查询出所有计划\x3c\/span\x3e\n  collection.find({}).toArray(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, ret\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/所有计划累加时长\x3c\/span\x3e\n    ret.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eitem, index\x3c\/span\x3e) \x3c\/span\x3e{\n      time \x2b= \x2bitem.totalTime;\n    });\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/返回时长\x3c\/span\x3e\n    res.json({\x3cspan class=\x22hljs-attr\x22\x3eerrcode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3eerrmsg\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22ok\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etime\x3c\/span\x3e:time});\n  });\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取列表\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/time-entries\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e collection = _db.collection(\x3cspan class=\x22hljs-string\x22\x3e\x27my_mission\x27\x3c\/span\x3e);\n  collection.find({}).toArray(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, ret\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    res.json(ret);\n  });\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/删除计划\x3c\/span\x3e\napp.delete(\x3cspan class=\x22hljs-string\x22\x3e\x27\/delete\/:id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _id = req.params.id;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e collection = _db.collection(\x3cspan class=\x22hljs-string\x22\x3e\x27my_mission\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(_id)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用mongodb的唯一ObjectId字段查找出对应id删除记录\x3c\/span\x3e\n  collection.remove({\x3cspan class=\x22hljs-attr\x22\x3e_id\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ObjectID(_id)} ,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, result\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n      res.status(\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e).end();\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      res.send({\x3cspan class=\x22hljs-attr\x22\x3eerrcode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3eerrmsg\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22ok\x22\x3c\/span\x3e});\n    }\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e前端部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/App.vue\nready() {\n    this.$http.get(\x27http:\/\/localhost:8888\/time\x27)\n      .then(function(ret) {\n        this.totalTime = ret.data.time;\n      })\n      .then(function(err) {\n        console.log(err);\n      })\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/App.vue\x3c\/span\x3e\nready() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:8888\/time\x27\x3c\/span\x3e)\n      .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eret\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalTime = ret.data.time;\n      })\n      .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err);\n      })\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/TimeEntries.vue \nroute : {\n  data(){\n    this.$http.get(\x27http:\/\/localhost:8888\/time-entries\x27)\n      .then(function(ret) {\n        this.timeEntries = ret.data;\n      })\n      .then(function(err) {\n        console.log(err);\n      })\n  }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/TimeEntries.vue \x3c\/span\x3e\nroute : {\n  data(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:8888\/time-entries\x27\x3c\/span\x3e)\n      .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eret\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timeEntries = ret.data;\n      })\n      .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err);\n      })\n  }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/TimeEntries.vue\n\x3cdiv class=\x26quot;col-sm-1\x26quot;\x3e\n  \x3cbutton\n    class=\x26quot;btn btn-xs btn-danger delete-button\x26quot;\n    @click=\x26quot;deleteTimeEntry(timeEntry)\x26quot;\x3e\n    X\n  \x3c\/button\x3e\n\x3c\/div\x3e\n\ndeleteTimeEntry (timeEntry) {\n    \/\/ 删除\n    let index = this.timeEntries.indexOf(timeEntry)\n    let _id = this.timeEntries[index]._id\n    if (window.confirm(\x27确认删除?\x27)) {\n      this.$http.delete(\x27http:\/\/localhost:8888\/delete\/\x27 \x2b _id)\n        .then(function(ret) {\n          console.log(ret);\n        })\n        .then(function(err) {\n          console.log(err)\n        });\n      this.timeEntries.splice(index, 1)\n      this.$dispatch(\x27deleteTime\x27, timeEntry)\n    }\n}\n  \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/TimeEntries.vue\x3c\/span\x3e\n\x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22col-sm-1\x22\x3c\/span\x3e\x26gt;\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn btn-xs btn-danger delete-button\x22\x3c\/span\x3e\n    @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22deleteTimeEntry(timeEntry)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    X\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/div\x26gt;\n\ndeleteTimeEntry (timeEntry) {\n    \/\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/ 删除\n    let index = this.timeEntries.indexOf(timeEntry)\n    let _id = this.timeEntries[index]._id\n    if (window.confirm(\x27确认删除?\x27)) {\n      this.$http.delete(\x27http:\/\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/localhost:8888\/\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e\/\x3cspan class=\x22hljs-string\x22\x3e\x27 \x2b _id)\n        .then(function(ret) {\n          console.log(ret);\n        })\n        .then(function(err) {\n          console.log(err)\n        });\n      this.timeEntries.splice(index, 1)\n      this.$dispatch(\x27\x3c\/span\x3edeleteTime\x3cspan class=\x22hljs-string\x22\x3e\x27, timeEntry)\n    }\n}\n  \x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e完结\x3c\/h2\x3e\n\x3cp\x3e到此，我们就将我们整个应用完成了。新增创建删除都可用了。\x3c\/p\x3e\n\x3cp\x3e本来还想有上传头像等，那样觉得更多的是偏后端教学。既然我们是vue的简单入门教程就不过多介绍。\x3c\/p\x3e\n\x3cp\x3e本系列让大家轻松的了解学习了 vue, vue-router, vue-resource, express, mongodb 的运用。\x3c\/p\x3e\n\x3cp\x3e还是那句话，享受框架带来便利的同时，别忘了加强基础的训练。基本功才是真正的王道啊。玩电竞的玩家一定深有体会。\x3c\/p\x3e\n\x3cp\x3e最后给有兴趣的同学留下两个简单的作业\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e完成头像昵称的字段\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e完成修改操作\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e\x3cp\x3e源码地址：\x3ca href=\x22https:\/\/github.com\/MeCKodo\/vue-tutorial\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/MeCKodo\/vue-tutorial\x3c\/a\x3e\x3cbr\x3e(1\/2)Vue构建单页应用最佳实战\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005009052\x22\x3ehttps:\/\/segmentfault.com\/a\/1190000005009052\x3c\/a\x3e\x3cbr\x3e国内最优秀的vue群：364912432\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>(<sup>2</sup>&frasl;<sub>2</sub>)Vue构建单页应用最佳实战</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005268225">https://segmentfault.com/a/1190000005268225</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ll6wu6kojv/" target="_blank">https://alili.tech/archive/ll6wu6kojv/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>