<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端数据模型Model;适用于多人团队协作的开发模式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端数据模型Model;适用于多人团队协作的开发模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bpp4oyftvs/",
				"appid": "1613049289050283", 
				"title": "前端数据模型Model;适用于多人团队协作的开发模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-14T02:30:37"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/78nm4r07k5v/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/miu30tb31vn/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&text=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&text=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&title=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&title=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&title=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&title=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbpp4oyftvs%2f&title=%e5%89%8d%e7%ab%af%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8bModel%3b%e9%80%82%e7%94%a8%e4%ba%8e%e5%a4%9a%e4%ba%ba%e5%9b%a2%e9%98%9f%e5%8d%8f%e4%bd%9c%e7%9a%84%e5%bc%80%e5%8f%91%e6%a8%a1%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端数据模型Model;适用于多人团队协作的开发模式</h1><div class="meta"><div class="postdate"><time datetime="2019-02-14" itemprop="datePublished">2019-02-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e本文讲述的数据模型并不是一个库，也不是需要npm的包，仅仅只是一种在多人团队协作开发的时候拟定的规则。至少目前为止，我们的开发团队再也没用过mock（虽然一开始也没用），也不用担心后台数据的字段或结构发生变动，真正实现前后台并行开发的愉快模式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22本文技术栈有 Typescript、Rxjs、AngularX\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e本文技术栈有 Typescript、Rxjs、AngularX\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e定义Model\x3c\/h2\x3e\n\x3cp\x3e类比于java里的类，我们的Model也是一个类，是TS的类，我们根据需求和设计图或原型图规划好某一个具体的模块的基类Model，并自行定义一些字段和枚举类型，方法属性等，并不需要强行和后台的字段一致，要保证百分百纯的前后端分离，举个例子\x3c\/p\x3e\n\x3cp\x3e比如开发某一个后台管理项目，里边有产品（Product）模块、用户（User）模块等\x3c\/p\x3e\n\x3cp\x3e那么我们会在model文件夹里定义BaseProduct的基类\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export class BaseProductModel {\n    constructor() {}\n    \/\/ 必有id 和 name\n    public id: number = null;\n    public name: string = \x27\x27;\n    \/...more...\/\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e BaseProductModel {\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) {}\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 必有id 和 name\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e id: \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e name: \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-regexp\x22\x3e\/...more...\/\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e基类的定义是必要的，可以节省很多不必要的代码，并不需要写一个页面或组件就重新定义新的model，如果某一个组件里面需要对这个产品的内容进行拓展的大可直接继承，并不会影响其他有了这个基类的文件\x3c\/p\x3e\n\x3cblockquote\x3e我们推崇一切基类都必须继承，不可直接构造\x3c\/blockquote\x3e\n\x3cp\x3e真实的项目中产品的字段和属性肯定不止只有id和name，可能还包含版本、缩略图地址、唯一标识、产品、对应规格的价格、状态、创建时间等等；这些属性完全可以放在基类里，因为所有产品都有这些属性，说到类型和状态的定义，请注意\x3c\/p\x3e\n\x3cblockquote\x3e绝对不能将可枚举性质的属性直接使用后台或第三方返回的对应属性\x3c\/blockquote\x3e\n\x3cp\x3e比如，产品模块里最基础的状态（status）属性，假设后台定义的对应状态有\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x220: 禁用\n1: 启用\n2: 隐藏\n3: 不可购买\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-attribute\x22\x3e0\x3c\/span\x3e: 禁用\n\x3cspan class=\x22hljs-attribute\x22\x3e1\x3c\/span\x3e: 启用\n\x3cspan class=\x22hljs-attribute\x22\x3e2\x3c\/span\x3e: 隐藏\n\x3cspan class=\x22hljs-attribute\x22\x3e3\x3c\/span\x3e: 不可购买\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这四种，倘若我们在项目当中直接使用这些对应状态的数字去判断或进行逻辑处理，分不分的清另谈，如果中途或以后状态的数字变了，GG。可能大家觉得这样的情况很少，但也不是没有，一旦出现改起来BUG就一堆。\x3c\/p\x3e\n\x3cp\x3e所以对于这种可枚举性质的属性我们会定义一个枚举类（Enum）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export enum EStatus {\n    BAN = 0,\n    OPEN = 1,\n    HIDE = 2,\n    NOTBUY = 3\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crystal\x22\x3e\x3ccode\x3eexport \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eenum\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eEStatus\x3c\/span\x3e {\x3c\/span\x3e\n    BAN = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    OPEN = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    HIDE = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n    NOTBUY = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在model里这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export class BaseProductModel {\n    \/\/ ......\n    public status: string = EStatus[1] \/\/ 默认启用\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cpp\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e BaseProductModel {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ......\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e status: \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e = EStatus[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认启用\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e美滋滋，而且在进行逻辑判断的时候我们也不用去关心每个状态对应的数字是什么，我们只关心它是BAN还是OPEN，简洁明了不含糊\x3c\/p\x3e\n\x3cp\x3e而且我们还可以给model增加一个只读属性，用来返回这个状态对应的中文提示（这种需求很常见）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22public get conversionStatusHint() : string {\n    const _ = { BAN: \x27禁用\x27, OPEN: \x27启用\x27, HIDE: \x27隐藏\x27, NOTBUY: \x27买不得呀\x27 }\n    return _[this.status] ? _[this.status] : \x27\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econversionStatusHint\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) : \x3cspan class=\x22hljs-keyword\x22\x3estring\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = { BAN: \x3cspan class=\x22hljs-string\x22\x3e\x27禁用\x27\x3c\/span\x3e, OPEN: \x3cspan class=\x22hljs-string\x22\x3e\x27启用\x27\x3c\/span\x3e, HIDE: \x3cspan class=\x22hljs-string\x22\x3e\x27隐藏\x27\x3c\/span\x3e, NOTBUY: \x3cspan class=\x22hljs-string\x22\x3e\x27买不得呀\x27\x3c\/span\x3e }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.status] ? _[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.status] : \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样就不用在每一个组件里面写一个方法来传参数返回中文名称了\x3c\/p\x3e\n\x3cp\x3e到了这里，我们的BaseProductModel已经算是定义好了，下面我们就需要给这个model定义一个方法\x3c\/p\x3e\n\x3cblockquote\x3e目的是把后台返回的字段和数据结构转化为我们自己定义的字段和数据结构\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e转化后台数据\x3c\/h2\x3e\n\x3cp\x3e可能到了这里很多人会觉得这是多此一举，后台都直接返回数据了还转化什么，返回什么用什么就得了。\x3cbr\x3e但在大型的团队开发项目当中，谁也不能保证一个字段也不修改，一个字段也不删除或增加或缺失，牵一发动全身。人生苦短。而且还有一种情况就是，可能这个项目是前端先进行，后台还未介入，需要前端这边先把整体的功能和样式都先根据设计图规划开发。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export class BaseProductModel {\n    \/\/ ......\n    \/\/ 转化后台数据\n    public setData( data: BaseProductModel ): void {\n        if (data) {\n            for (let e in this) {\n                if ((\x3cObject\x3edata).hasOwnProperty(e)) {\n                    if( e == \x27status\x27 ) {\n                        this.status = EStatus[(\x3cany\x3edata)[e]]\n                    } else {\n                        this[e] = (\x3cany\x3edata)[e];\n                    }\n                }\n            }\n        }\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3eexport \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBaseProductModel\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ......\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 转化后台数据\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e setData( \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e: BaseProductModel ): void {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (let e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ((\x26lt;Object\x26gt;\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e).hasOwnProperty(e)) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e( e == \x3cspan class=\x22hljs-string\x22\x3e\x27status\x27\x3c\/span\x3e ) {\n                        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.status = EStatus[(\x26lt;any\x26gt;\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)[e]]\n                    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[e] = (\x26lt;any\x26gt;\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)[e];\n                    }\n                }\n            }\n        }\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在调用的时候\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/** 假设ProductModel类继承了BaseProductModel类 *\/\npublic productModel: ProductModel = new ProductModel()；\n\/...more...\/\nthis.productModel.setData(\x3cBaseProductModel\x3e{\n    \/\/ 假设后台定义的创建时间字段是create_at，model里定的创建时间是createTime\n    createTime: data.create_at\n});\n\/\/ 即使数据结构不一致也可在这里进行统一转化\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/** 假设ProductModel类继承了BaseProductModel类 *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e productModel: ProductModel = \x3cspan class=\x22hljs-literal\x22\x3enew\x3c\/span\x3e ProductModel()；\n\/\x3cspan class=\x22hljs-params\x22\x3e...\x3c\/span\x3emore\x3cspan class=\x22hljs-params\x22\x3e...\x3c\/span\x3e\/\nthis.productModel.setData(\x26lt;BaseProductModel\x26gt;{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 假设后台定义的创建时间字段是create_at，model里定的创建时间是createTime\x3c\/span\x3e\n    createTime: \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.create_at\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 即使数据结构不一致也可在这里进行统一转化\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e做好了转化这一步，所有的数据变动和数据结构的变化都在这同一个地方修改即搞定，这个时候随便后台怎么改，欢乐改，都不影响我们后续的逻辑处理和字段的变动。同理，在post数据给后台的时候转化就显得容易多了，后台需要什么数据和字段再转化一次不就得了。\x3c\/p\x3e\n\x3cblockquote\x3e以上的数据模型可以很好的降低前后台掐架的概率，mock？不需要\x3c\/blockquote\x3e\n\x3cp\x3e下面是一个我们抽离出来的常用的表格数据模型基类\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { BehaviorSubject } from \x27rxjs\x27\n\n\/\/分页配置\nexport interface PaginationConfig {\n    \/\/ 当前的页码\n    pageIndex: number;\n    \/\/ 总数\n    total: number;\n    \/\/ 当前选中的一页显示多少个的数量\n    rows: number;\n    \/\/ 可选择的每页显示多少个数量\n    rowsOptions?: Array\x3cnumber\x3e;\n}\n\n\/\/分页配置初始数据\nexport let PaginationInitConfig: PaginationConfig = {\n    pageIndex: 1,\n    total: 0,\n    rows: 10,\n    rowsOptions: [10, 20, 50]\n}\n\n\/\/表格配置\nexport interface TableConfig extends PaginationConfig {\n    \/\/ 是否显示loading效果\n    isLoading?: boolean;\n    \/\/ 是否处于半选状态\n    isCheckIndeterminate?: boolean;\n    \/\/ 是否全选状态\n    isCheckAll?: boolean;\n    \/\/ 是否禁用选中\n    isCheckDisable?: boolean;\n    \/\/没有数据的提示\n    noResult?: string;\n\n}\n\n\/\/表头\nexport interface TableHead {\n    titles: string[];\n    widths?: string[];\n    \/\/样式类  src\/styles\/ 中有公用的表格样式类\n    classes?: string[];\n    sorts?: (boolean | string)[];\n}\n\n\/\/分页参数\nexport interface PageParam {\n    page: number;\n    rows: number;\n}\n\n\/\/排序类型\nexport type orderType = \x27desc\x27 | \x27asc\x27 | null | \x27\x27\n\n\/\/排序参数\nexport interface SortParam {\n    orderBy?: string;\n    order?: orderType\n}\n\n\/\/ 所有表格的基类\nexport class BaseTableModel\x3cT\x3e {\n    \/\/表格配置\n    tableConfig: TableConfig\n    \/\/表格头部配置\n    tableHead: TableHead\n    \/\/表格数据流\n    tableData$: BehaviorSubject\x3cT[]\x3e\n\n    \/\/排序类型\n    orderType: orderType\n    \/\/当前排序的标示\n    currentSortBy: string\n\n    constructor(\n        \/\/选中的 key\n        private checkKey: string = \x27isChecked\x27,\n        \/\/禁用的 key\n        private disabledKey: string = \x27isDisabled\x27\n    ) {\n        this.initData()\n    }\n\n    \/\/ 重置数据\n    public initData(): void {\n        this.tableHead = {\n            titles: []\n        }\n        this.tableConfig = {\n            pageIndex: 1,\n            total: 0,\n            rows: 10,\n            rowsOptions: [10, 20, 50],\n            isLoading: false,\n            isCheckIndeterminate: false,\n            isCheckAll: false,\n            isCheckDisable: false,\n            noResult: \x27暂无数据\x27\n        }\n        this.tableData$ = new BehaviorSubject([])\n    }\n\n    \/**\n     * 设置表格配置\n     * @author GR-05\n     * @param conf\n     *\/\n    setConfig(conf: TableConfig): void {\n        this.tableConfig = Object.assign(this.tableConfig, conf)\n    }\n\n    \/**\n     * 设置表格头部标题\n     * @author GR-05\n     * @param titles\n     *\/\n    setHeadTitles(titles: string[]): void {\n        this.tableHead.titles = titles\n    }\n\n    \/**\n     * 设置表格头部宽度\n     * @author GR-05\n     * @param widths\n     *\/\n    setHeadWidths(widths: string[]): void {\n        this.tableHead.widths = widths\n    }\n\n    \/**\n     * 设置表格头部样式类\n     * @author GR-05\n     * @param classes\n     *\/\n    setHeadClasses(classes: string[]): void {\n        this.tableHead.classes = classes\n    }\n\n    \/**\n     * 设置表格排序功能\n     * @author GR-05\n     * @param sorts\n     *\/\n    setHeadSorts(sorts: (boolean | string)[]): void {\n        this.tableHead.sorts = sorts\n    }\n\n    \/**\n     * 设置当前排序类型\n     * @param ot\n     *\/\n    setSortType(ot: orderType) {\n        this.orderType = ot\n    }\n\n    \/**\n     * 设置当前排序标识\n     * @param orderBy\n     *\/\n    setSortBy(orderBy: string) {\n        this.currentSortBy = orderBy\n    }\n\n    \/**\n     * 设置当前被点击的排序标示\n     * @param i 排序数组索引\n     *\/\n    sortByClick(i: number) {\n        if (this.tableHead.sorts \x26amp;\x26amp; this.tableHead.sorts[i]) {\n            if (!this.orderType) {\n                this.orderType = \x27desc\x27\n            } else {\n                this.orderType == \x27desc\x27 ? this.orderType = \x27asc\x27 : this.orderType = \x27desc\x27\n            }\n            this.currentSortBy = this.tableHead.sorts[i] as string\n        }\n    }\n\n    \/**\n     * 获取当前的排序参数\n     *\/\n    getCurrentSort(): SortParam {\n        return {\n            order: this.orderType,\n            orderBy: this.currentSortBy\n        }\n    }\n\n    \/**\n     * 设置表格loading\n     * @author GR-05\n     * @param flag\n     *\/\n    setLoading(flag: boolean = true): void {\n        this.tableConfig.isLoading = flag\n    }\n\n    \/**\n     * 设置当前表格数据总数\n     * @author GR-05\n     * @param total\n     *\/\n    setTotal(total: number): void {\n        this.tableConfig.total = total\n    }\n\n    setPageAndRows(pageIndex: number, rows: number = 10) {\n        this.tableConfig.pageIndex = pageIndex\n        this.tableConfig.rows = rows\n    }\n\n    \/**\n     * 更新表格数据（新数据、单选、多选）\n     * @author GR-05\n     * @param dataList\n     *\/\n    setDataList(dataList: T[]): void {\n        this.tableConfig.isCheckAll = false\n        this.tableConfig.isCheckIndeterminate = dataList.filter(item =\x3e !item[this.disabledKey]).some(item =\x3e item[this.checkKey] == true)\n        this.tableConfig.isCheckAll = dataList.filter(item =\x3e !item[this.disabledKey]).every(item =\x3e item[this.checkKey] == true)\n        this.tableConfig.isCheckAll ? this.tableConfig.isCheckIndeterminate = false : {}\n        this.tableData$.next(dataList);\n        if (dataList.length == 0) {\n            this.tableConfig.isCheckAll = false\n        }\n    }\n\n    \/**\n     * 获取已选的项\n     * @author GR-05\n     *\/\n    getCheckItem(): T[] {\n        return this.tableData$.value.filter(item =\x3e item[this.checkKey] == true \x26amp;\x26amp; !item[this.disabledKey])\n    }\n\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { BehaviorSubject } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27rxjs\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/分页配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e interface PaginationConfig {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前的页码\x3c\/span\x3e\n    pageIndex: number;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 总数\x3c\/span\x3e\n    total: number;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前选中的一页显示多少个的数量\x3c\/span\x3e\n    rows: number;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可选择的每页显示多少个数量\x3c\/span\x3e\n    rowsOptions?: \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e\x26lt;number\x26gt;;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/分页配置初始数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e PaginationInitConfig: PaginationConfig = {\n    \x3cspan class=\x22hljs-attr\x22\x3epageIndex\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etotal\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3erows\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3erowsOptions\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e]\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/表格配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e interface TableConfig extends PaginationConfig {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否显示loading效果\x3c\/span\x3e\n    isLoading?: boolean;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否处于半选状态\x3c\/span\x3e\n    isCheckIndeterminate?: boolean;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否全选状态\x3c\/span\x3e\n    isCheckAll?: boolean;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否禁用选中\x3c\/span\x3e\n    isCheckDisable?: boolean;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/没有数据的提示\x3c\/span\x3e\n    noResult?: string;\n\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/表头\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e interface TableHead {\n    \x3cspan class=\x22hljs-attr\x22\x3etitles\x3c\/span\x3e: string[];\n    widths?: string[];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/样式类  src\/styles\/ 中有公用的表格样式类\x3c\/span\x3e\n    classes?: string[];\n    sorts?: (boolean | string)[];\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/分页参数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e interface PageParam {\n    \x3cspan class=\x22hljs-attr\x22\x3epage\x3c\/span\x3e: number;\n    rows: number;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/排序类型\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e type orderType = \x3cspan class=\x22hljs-string\x22\x3e\x27desc\x27\x3c\/span\x3e | \x3cspan class=\x22hljs-string\x22\x3e\x27asc\x27\x3c\/span\x3e | \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e | \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/排序参数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e interface SortParam {\n    orderBy?: string;\n    order?: orderType\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所有表格的基类\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBaseTableModel\x3c\/span\x3e\x26lt;\x3cspan class=\x22hljs-title\x22\x3eT\x3c\/span\x3e\x26gt; \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/表格配置\x3c\/span\x3e\n    tableConfig: TableConfig\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/表格头部配置\x3c\/span\x3e\n    tableHead: TableHead\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/表格数据流\x3c\/span\x3e\n    tableData$: BehaviorSubject\x26lt;T[]\x26gt;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/排序类型\x3c\/span\x3e\n    orderType: orderType\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/当前排序的标示\x3c\/span\x3e\n    currentSortBy: string\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(\n        \/\/选中的 key\n        private checkKey: string = \x27isChecked\x27,\n        \/\/禁用的 key\n        private disabledKey: string = \x27isDisabled\x27\n    ) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initData()\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重置数据\x3c\/span\x3e\n    public initData(): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead = {\n            \x3cspan class=\x22hljs-attr\x22\x3etitles\x3c\/span\x3e: []\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig = {\n            \x3cspan class=\x22hljs-attr\x22\x3epageIndex\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3etotal\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3erows\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3erowsOptions\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e],\n            \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eisCheckIndeterminate\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eisCheckAll\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eisCheckDisable\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3enoResult\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27暂无数据\x27\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableData$ = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BehaviorSubject([])\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格配置\n     * @author GR-05\n     * @param conf\n     *\/\x3c\/span\x3e\n    setConfig(conf: TableConfig): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig, conf)\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格头部标题\n     * @author GR-05\n     * @param titles\n     *\/\x3c\/span\x3e\n    setHeadTitles(titles: string[]): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.titles = titles\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格头部宽度\n     * @author GR-05\n     * @param widths\n     *\/\x3c\/span\x3e\n    setHeadWidths(widths: string[]): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.widths = widths\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格头部样式类\n     * @author GR-05\n     * @param classes\n     *\/\x3c\/span\x3e\n    setHeadClasses(classes: string[]): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.classes = classes\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格排序功能\n     * @author GR-05\n     * @param sorts\n     *\/\x3c\/span\x3e\n    setHeadSorts(sorts: (boolean | string)[]): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.sorts = sorts\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置当前排序类型\n     * @param ot\n     *\/\x3c\/span\x3e\n    setSortType(ot: orderType) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType = ot\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置当前排序标识\n     * @param orderBy\n     *\/\x3c\/span\x3e\n    setSortBy(orderBy: string) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentSortBy = orderBy\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置当前被点击的排序标示\n     * @param i 排序数组索引\n     *\/\x3c\/span\x3e\n    sortByClick(i: number) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.sorts \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.sorts[i]) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType = \x3cspan class=\x22hljs-string\x22\x3e\x27desc\x27\x3c\/span\x3e\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType == \x3cspan class=\x22hljs-string\x22\x3e\x27desc\x27\x3c\/span\x3e ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType = \x3cspan class=\x22hljs-string\x22\x3e\x27asc\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType = \x3cspan class=\x22hljs-string\x22\x3e\x27desc\x27\x3c\/span\x3e\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentSortBy = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableHead.sorts[i] \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e string\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 获取当前的排序参数\n     *\/\x3c\/span\x3e\n    getCurrentSort(): SortParam {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3eorder\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.orderType,\n            \x3cspan class=\x22hljs-attr\x22\x3eorderBy\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentSortBy\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置表格loading\n     * @author GR-05\n     * @param flag\n     *\/\x3c\/span\x3e\n    setLoading(flag: boolean = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isLoading = flag\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 设置当前表格数据总数\n     * @author GR-05\n     * @param total\n     *\/\x3c\/span\x3e\n    setTotal(total: number): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.total = total\n    }\n\n    setPageAndRows(pageIndex: number, \x3cspan class=\x22hljs-attr\x22\x3erows\x3c\/span\x3e: number = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.pageIndex = pageIndex\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.rows = rows\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 更新表格数据（新数据、单选、多选）\n     * @author GR-05\n     * @param dataList\n     *\/\x3c\/span\x3e\n    setDataList(dataList: T[]): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckAll = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckIndeterminate = dataList.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.disabledKey]).some(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.checkKey] == \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckAll = dataList.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.disabledKey]).every(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.checkKey] == \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckAll ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckIndeterminate = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e : {}\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableData$.next(dataList);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (dataList.length == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableConfig.isCheckAll = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 获取已选的项\n     * @author GR-05\n     *\/\x3c\/span\x3e\n    getCheckItem(): T[] {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tableData$.value.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.checkKey] == \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e \x26amp;\x26amp; !item[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.disabledKey])\n    }\n\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们为什么没有抽离成组件而是数据模型这么一个类上，主要是因为，组件的样式我们是不确定唯一性的，但数据和处理逻辑确是类似的，哪里地方要用到，就在哪个组件里new一个就好了；\x3c\/p\x3e\n\x3cp\x3e其中BaseTableModel后面的T可以是所有你想在表格上渲染的任何一个model类，比如之前的ProductModel，页面需求需要展示产品的表格列表，则\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export class TableModel extends BaseTableModel\x3cProductModel\x3e {\n\n    constructor() {\n        super();\n    }\n\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3eexport \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTableModel\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBaseTableModel\x26lt;ProductModel\x26gt;\x3c\/span\x3e \x3c\/span\x3e{\n\n    constructor() {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e();\n    }\n\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么最后你只需要将BaseTableModel里的tableData$数据next成处理好的ProdcuModel数组就好了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端数据模型Model;适用于多人团队协作的开发模式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016837712">https://segmentfault.com/a/1190000016837712</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bpp4oyftvs/" target="_blank">https://alili.tech/archive/bpp4oyftvs/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>