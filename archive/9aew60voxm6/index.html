<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【React源码解读】- 组件的实现"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【React源码解读】- 组件的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9aew60voxm6/",
				"appid": "1613049289050283", 
				"title": "【React源码解读】- 组件的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-14T02:30:37"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v1d15c4rahh/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/vjzydjcscsb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&text=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&text=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&title=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&is_video=false&description=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&title=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&title=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&title=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aew60voxm6%2f&title=%e3%80%90React%e6%ba%90%e7%a0%81%e8%a7%a3%e8%af%bb%e3%80%91-%20%e7%bb%84%e4%bb%b6%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【React源码解读】- 组件的实现</h1><div class="meta"><div class="postdate"><time datetime="2019-02-14" itemprop="datePublished">2019-02-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e前言\x3c\/h3\x3e\n\x3cp\x3ereact使用也有一段时间了，大家对这个框架褒奖有加，但是它究竟好在哪里呢？\x3cbr\x3e让我们结合它的源码，探究一二！（当前源码为react16，读者要对react有一定的了解）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862184\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862184\x22 alt=\x2215397566862932\x22 title=\x2215397566862932\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e回到最初\x3c\/h3\x3e\n\x3cp\x3e根据react官网上的例子，快速构建react项目\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npx create-react-app my-app\n\ncd my-app\n\nnpm start\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3enpx create-react-app my-app\n\ncd my-app\n\nnpm start\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打开项目并跑起来以后，暂不关心项目结构及语法糖，看到\x3ccode\x3eApp.js\x3c\/code\x3e里，这是一个基本的react组件\x26lt;App\/\x26gt; 我们console一下，看看有什么结果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\nimport logo from \x27.\/logo.svg\x27;\nimport \x27.\/App.css\x27;\n\nclass App extends Component {\n\n  render() {\n    return (\n      \x3cdiv className=\x26quot;App\x26quot;\x3e\n        \x3cheader className=\x26quot;App-header\x26quot;\x3e\n          \x3cimg src={logo} className=\x26quot;App-logo\x26quot; alt=\x26quot;logo\x26quot; \/\x3e\n          \x3cp\x3e\n            Edit \x3ccode\x3esrc\/App.js\x3c\/code\x3e and save to reload.\n          \x3c\/p\x3e\n        \x3c\/header\x3e\n      \x3c\/div\x3e\n    );\n  }\n}\n\nexport default App;\n\nconsole.log(\x3cApp\/\x3e)\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e logo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/logo.svg\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/App.css\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App-header\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{logo}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22App-logo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22logo\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            Edit \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3esrc\/App.js\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3e and save to reload.\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n}\n\nexport default App;\n\nconsole.log(\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e)\n\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862185\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862185\x22 alt=\x2215397572879758\x22 title=\x2215397572879758\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，\x3ccode\x3e\x26lt;App\/\x26gt;\x3c\/code\x3e组件其实是一个JS对象，并不是一个真实的dom。\x3c\/p\x3e\n\x3cblockquote\x3eES6 引入了一种新的原始数据类型Symbol，表示独一无二的值。有兴趣的同学可以去阮一峰老师的ES6入门详细了解一下\x3c\/blockquote\x3e\n\x3cp\x3e上面有我们很熟悉的\x3ccode\x3eprops\x3c\/code\x3e,\x3ccode\x3eref\x3c\/code\x3e,\x3ccode\x3ekey\x3c\/code\x3e,我们稍微修改一下console，看看有什么变化。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(\x3cApp key={1} abc={2}\x3e\x3cdiv\x3e你好，这里是App组件\x3c\/div\x3e\x3c\/App\x3e)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eabc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e你好，这里是App组件\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862186?w=799\x26amp;h=305\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862186?w=799\x26amp;h=305\x22 alt=\x2215397577334580\x22 title=\x2215397577334580\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，\x3ccode\x3eprops\x3c\/code\x3e,\x3ccode\x3ekey\x3c\/code\x3e都发生了变化，值就是我们赋予的值，\x3ccode\x3eprops\x3c\/code\x3e中嵌套了children属性。可是为什么我们嵌入的是div，实际上却是一个对象呢？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e打开源码\x3c\/h3\x3e\n\x3cblockquote\x3e\/node_modules\/react\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862187?w=322\x26amp;h=230\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862187?w=322\x26amp;h=230\x22 alt=\x2215397580720896\x22 title=\x2215397580720896\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e首先打开\x3ccode\x3eindex.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27;\n\nif (process.env.NODE_ENV === \x27production\x27) {\n  module.exports = require(\x27.\/cjs\/react.production.min.js\x27);\n} else {\n  module.exports = require(\x27.\/cjs\/react.development.js\x27);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e) {\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/cjs\/react.production.min.js\x27\x3c\/span\x3e);\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/cjs\/react.development.js\x27\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以知道目前用上的是\x3ccode\x3e.\/cjs\/react.development.js\x3c\/code\x3e,直接打开文件。\x3cbr\x3e根据最初的代码，我们组件\x3ccode\x3e\x26lt;App\/\x26gt;\x3c\/code\x3e用到了\x3cstrong\x3eReact.Component\x3c\/strong\x3e。找到React暴露的接口:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862188?w=842\x26amp;h=650\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862188?w=842\x26amp;h=650\x22 alt=\x2215397617558881\x22 title=\x2215397617558881\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e接着找到\x3ccode\x3eComponent: Component\x3c\/code\x3e方法，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  \/\/ If a component has string refs, we will assign a different object later.\n  this.refs = emptyObject;\n  \/\/ We initialize the default updater but the real one gets injected by the\n  \/\/ renderer.\n  this.updater = updater || ReactNoopUpdateQueue;\n}\n\nComponent.prototype.isReactComponent = {};\n\nComponent.prototype.setState = function (partialState, callback) {\n  !(typeof partialState === \x27object\x27 || typeof partialState === \x27function\x27 || partialState == null) ? invariant(false, \x27setState(...): takes an object of state variables to update or a function which returns an object of state variables.\x27) : void 0;\n  this.updater.enqueueSetState(this, partialState, callback, \x27setState\x27);\n};\n\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \x27forceUpdate\x27);\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eprops, context, updater\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props = props;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.context = context;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If a component has string refs, we will assign a different object later.\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refs = emptyObject;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ We initialize the default updater but the real one gets injected by the\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ renderer.\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.updater = updater || ReactNoopUpdateQueue;\n}\n\nComponent.prototype.isReactComponent = {};\n\nComponent.prototype.setState = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3epartialState, callback\x3c\/span\x3e) \x3c\/span\x3e{\n  !(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e partialState === \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e partialState === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e || partialState == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) ? invariant(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27setState(...): takes an object of state variables to update or a function which returns an object of state variables.\x27\x3c\/span\x3e) : \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.updater.enqueueSetState(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, partialState, callback, \x3cspan class=\x22hljs-string\x22\x3e\x27setState\x27\x3c\/span\x3e);\n};\n\nComponent.prototype.forceUpdate = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecallback\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.updater.enqueueForceUpdate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, callback, \x3cspan class=\x22hljs-string\x22\x3e\x27forceUpdate\x27\x3c\/span\x3e);\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面就是一些简单的构造函数，也可以看到，我们常用的setState是定义在原型上的2个方法。\x3c\/p\x3e\n\x3cp\x3e至此，一个\x3ccode\x3e\x26lt;App\/\x26gt;\x3c\/code\x3e组件已经有一个大概的雏形：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862189\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862189\x22 alt=\x2215397595217487\x22 title=\x2215397595217487\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e到此为止了吗？这看了等于没看啊，究竟组件是怎么变成div的？render吗？\x3cbr\x3e可是全局搜索，也没有一个function是render啊。\x3c\/p\x3e\n\x3cp\x3e原来，我们的jsx语法会被\x3ccode\x3ebabel\x3c\/code\x3e编译的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862190\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862190\x22 alt=\x2215397600724075\x22 title=\x2215397600724075\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这下清楚了，还用到了\x3ccode\x3eReact.createElement\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22createElement: createElementWithValidation,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ecreateElement: createElementWithValidation,\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过\x3ccode\x3ecreateElementWithValidation\x3c\/code\x3e,\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createElementWithValidation(type, props, children) {\n······\n\n  var element = createElement.apply(this, arguments);\n\n\n  return element;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateElementWithValidation\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etype, props, children\x3c\/span\x3e) \x3c\/span\x3e{\n······\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e element = createElement.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\n\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e element;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，return了一个element，这个element又是继承自\x3ccode\x3ecreateElement\x3c\/code\x3e，接着往下找：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createElement(type, config, children) {\n  var propName = void 0;\n\n  \/\/ Reserved names are extracted\n  var props = {};\n\n  var key = null;\n  var ref = null;\n  var self = null;\n  var source = null;\n······\n  return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateElement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etype, config, children\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e propName = \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Reserved names are extracted\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e props = {};\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ref = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e self = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e source = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n······\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里又返回了一个\x3ccode\x3eReactElement\x3c\/code\x3e方法，再顺着往下找：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    \/\/ This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n\n    \/\/ Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n\n    \/\/ Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n······\n  return element;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etype, key, ref, self, source, owner, props\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e element = {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This tag allows us to uniquely identify this as a React Element\x3c\/span\x3e\n    $$\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e: REACT_ELEMENT_TYPE,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Built-in properties that belong on the element\x3c\/span\x3e\n    type: type,\n    \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e: key,\n    \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e: ref,\n    \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: props,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Record the component responsible for creating this element.\x3c\/span\x3e\n    _owner: owner\n  };\n\n······\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e element;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e诶，这里好像返回的就是\x3ccode\x3eelement\x3c\/code\x3e对象，再看我们最初的\x3ccode\x3e\x26lt;App\/\x26gt;\x3c\/code\x3e的结构，是不是很像\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862191\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862191\x22 alt=\x2215397606651880\x22 title=\x2215397606651880\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e验证一下我们的探索究竟对不对，再每一个方法上我们都打上console,(注意，将App里的子元素全部删空，利于我们观察)\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862192\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862192\x22 alt=\x2215397611759810\x22 title=\x2215397611759810\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eReact.createElement 、 createElementWithValidation 、 createElement 、 ReactElement，通过这些方法，我们用class声明的React组件在变成真实dom之前都是\x3ccode\x3eReactElement\x3c\/code\x3e类型的js对象\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ecreateElementWithValidation\x3c\/code\x3e:\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e首先校验type是否是合法的\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862193\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862193\x22 alt=\x2215397657382603\x22 title=\x2215397657382603\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e校验了props是否符合设置的proptypes\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862194\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862194\x22 alt=\x2215397667118968\x22 title=\x2215397667118968\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e校验了子节点的key，确保每个数组中的元素都有唯一的key\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862195\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862195\x22 alt=\x2215397667422295\x22 title=\x2215397667422295\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ecreateElement\x3c\/code\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3etype是你要创建的元素的类型，可以是html的div或者span，也可以是其他的react组件，注意大小写\x3c\/li\x3e\n\x3cli\x3econfig中包含了props、key、ref、self、source等\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862196\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862196\x22 alt=\x2215397667913454\x22 title=\x2215397667913454\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e向props加入children，如果是一个就放一个对象，如果是多个就放入一个数组。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862197?w=645\x26amp;h=413\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862197?w=645\x26amp;h=413\x22 alt=\x2215397668352993\x22 title=\x2215397668352993\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e那如果type.defaultProps有默认的props时，并且对应的props里面的值是undefined，把默认值赋值到props中\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862198\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862198\x22 alt=\x2215397668766904\x22 title=\x2215397668766904\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e也会对key和ref进行校验\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862199\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862199\x22 alt=\x2215397669476655\x22 title=\x2215397669476655\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eReactElement\x3c\/code\x3e：\x3c\/p\x3e\n\x3cp\x3eReactElement就比较简单了，创建一个element对象，参数里的type、key、ref、props、等放进去，然后return了。最后调用Object.freeze使对象不可再改变。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e组件的挂载\x3c\/h3\x3e\n\x3cp\x3e我们上面只是简单的探究了\x3ccode\x3e\x26lt;App\/\x26gt;\x3c\/code\x3e的结构和原理，那它究竟是怎么变成真实dom的呢\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862200\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862200\x22 alt=\x2215397616989193\x22 title=\x2215397616989193\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ReactDOM.render(\x3cApp \/\x3e, document.getElementById(\x27root\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eReactDOM.render(\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e, document.getElementById(\x27root\x27));\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们接着用babel编译一下:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862201\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862201\x22 alt=\x2215397619877496\x22 title=\x2215397619877496\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e原来\x3ccode\x3eReactDOM.render\x3c\/code\x3e调用的是render方法，一样，找暴露出来的接口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nvar ReactDOM = {\n······\n  render: function (element, container, callback) {\n    return legacyRenderSubtreeIntoContainer(null, element, container, false, callback);\n  },\n······\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactDOM = {\n······\n  render: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eelement, container, callback\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e legacyRenderSubtreeIntoContainer(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, element, container, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, callback);\n  },\n······\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它返回的是一个\x3ccode\x3elegacyRenderSubtreeIntoContainer\x3c\/code\x3e方法，这次我们直接打上console.log \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862202\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862202\x22 alt=\x2215397629379495\x22 title=\x2215397629379495\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是打印出来的结果,\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862203\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862203\x22 alt=\x2215397633591876\x22 title=\x2215397633591876\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3elegacyRenderSubtreeIntoContainer\x3cbr\x3e这个方法除主要做了两件事：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e清除dom容器元素的子元素\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22while (rootSibling = container.lastChild) {\n      {\n        if (!warned \x26amp;\x26amp; rootSibling.nodeType === ELEMENT_NODE \x26amp;\x26amp; rootSibling.hasAttribute(ROOT_ATTRIBUTE_NAME)) {\n          warned = true;\n        }\n      }\n      container.removeChild(rootSibling);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (rootSibling = container.lastChild) {\n      {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!warned \x26amp;\x26amp; rootSibling.nodeType === ELEMENT_NODE \x26amp;\x26amp; rootSibling.hasAttribute(ROOT_ATTRIBUTE_NAME)) {\n          warned = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        }\n      }\n      container.removeChild(rootSibling);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e创建ReactRoot对象\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016862204\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016862204\x22 alt=\x2215397648731115\x22 title=\x2215397648731115\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e源码暂时只读到了这里，关于React16.1~3的新功能，以及新的生命周期的使用和原理、\x3ccode\x3eFiber\x3c\/code\x3e究竟是什么，我们将在后续文章接着介绍。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e广而告之\x3c\/h2\x3e\n\x3cp\x3e本文发布于\x3ca href=\x22https:\/\/github.com\/BooheeFE\/weekly\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e薄荷前端周刊\x3c\/a\x3e，欢迎Watch \x26amp; Star ★，转载请注明出处。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e欢迎讨论，点个赞再走吧  ｡◕‿◕｡ ～\x3c\/h3\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【React源码解读】- 组件的实现</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016862181">https://segmentfault.com/a/1190000016862181</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9aew60voxm6/" target="_blank">https://alili.tech/archive/9aew60voxm6/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>