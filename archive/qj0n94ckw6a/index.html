<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端单元测试之Karma环境搭建"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端单元测试之Karma环境搭建 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qj0n94ckw6a/",
				"appid": "1613049289050283", 
				"title": "前端单元测试之Karma环境搭建 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:57"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xpx0syv3mnf/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5jj87x62wfr/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&text=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&text=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&title=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&title=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&title=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&title=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqj0n94ckw6a%2f&title=%e5%89%8d%e7%ab%af%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95%e4%b9%8bKarma%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端单元测试之Karma环境搭建</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在前端开发中，测试常常是被忽略的一环。因此最近在研究前端自动化测试框架Karma，把个人的学习过程分享出来，希望对大家有帮助。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e什么是Karma？\x3c\/h2\x3e\n\x3cp\x3eKarma是由Google团队开发的一套前端测试运行框架。它不同于测试框架（例如jasmine，mocha等），运行在这些测试框架之上。主要完成一下工作：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eKarma启动一个web服务器，生成包含js源代码和js测试脚本的页面；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e运行浏览器加载页面，并显示测试的结果；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果开启检测，则当文件有修改时，执行继续执行以上过程。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3eKarma的安装配置\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e初始项目结构\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22karma-example\n    ├── src\n         ├── index.js\n    ├── test\n    ├── package.json\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3ekarma-example\n    ├── src\n         ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n    ├── test\n    ├── package\x3cspan class=\x22hljs-selector-class\x22\x3e.json\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eindex.js的内容如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function isNum(num) {\n  if (typeof num === \x27number\x27) {\n    return true\n  } else {\n    return false\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisNum\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enum\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e num === \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e安装Karma环境\x3c\/h3\x3e\n\x3cp\x3e为了方便搭建Karma环境，我们可以全局安装\x3ccode\x3ekarma-cli\x3c\/code\x3e来帮我们初始化测试环境：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i -g karma-cli\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3enpm \x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e -g karma-cli\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在项目中安装karma包\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save-dev karma\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode\x3enpm i --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e karma\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来在工程目录中运行\x3ccode\x3ekarma init\x3c\/code\x3e来进行测试环境初始化，并按照指示一步步完成。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVC39F?w=763\x26amp;h=561\x22 src=\x22https:\/\/static.alili.tech\/img\/bVC39F?w=763\x26amp;h=561\x22 alt=\x22Karma Config Example\x22 title=\x22Karma Config Example\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e上图是选项的示例，这里使用jasmine测试框架，PhantomJS作为代码运行的环境（也可以选择其他浏览器作为运行环境，比如Chrome，IE等）。最后在项目中生成karma.conf.js文件。\x3c\/p\x3e\n\x3cp\x3e至此就搭建好了基本的Karma运行环境。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e运行Karma\x3c\/h3\x3e\n\x3cp\x3e在test目录里编写一个简单的测试脚本，我们使用的是jasmine测试框架，具体的api可以参考\x3ca href=\x22http:\/\/jasmine.github.io\/2.5\/introduction.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejasmine api\x3c\/a\x3e，内容如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27index.js: \x27, function() {\n  it(\x27isNum() should work fine.\x27, function() {\n    expect(isNum(1)).toBe(true)\n    expect(isNum(\x271\x27)).toBe(false)\n  })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode class=\x22javascritp\x22\x3edescribe(\x27index.js: \x27, function() {\n  it(\x27isNum() should work fine.\x27, function() {\n    expect(\x3cspan class=\x22hljs-name\x22\x3eisNum\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)).toBe(\x3cspan class=\x22hljs-name\x22\x3etrue\x3c\/span\x3e)\n    expect(\x3cspan class=\x22hljs-name\x22\x3eisNum\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x27)).toBe(\x3cspan class=\x22hljs-name\x22\x3efalse\x3c\/span\x3e)\n  })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在项目根目录下运行\x3ccode\x3ekarma start\x3c\/code\x3e命令,我们可以看到运行的结果如下\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVC4bB?w=768\x26amp;h=140\x22 src=\x22https:\/\/static.alili.tech\/img\/bVC4bB?w=768\x26amp;h=140\x22 alt=\x22Karma Running Result\x22 title=\x22Karma Running Result\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，运行的结果显示测试成功。\x3c\/p\x3e\n\x3cp\x3e同时，因为我们之前设置了监控文件的修改，所以当我们修改源文件或者测试脚本的时候，Karma会自动帮我们再次运行，无需我们手动操作。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eCoverage\x3c\/h3\x3e\n\x3cp\x3e如何衡量测试脚本的质量呢？其中一个参考指标就是代码覆盖率（coverage）。\x3c\/p\x3e\n\x3cp\x3e什么是代码覆盖率？简而言之就是测试中运行到的代码占所有代码的比率。其中又可以分为行数覆盖率，分支覆盖率等。具体的含义不再细说，有兴趣的可以自行查阅资料。\x3c\/p\x3e\n\x3cp\x3e虽然并不是说代码覆盖率越高，测试的脚本写得越好（可以看看参考文献4），但是代码覆盖率对撰写测试脚本还是有一定的指导意义的。因此接下来我们在Karma环境中添加Coverage。\x3c\/p\x3e\n\x3cp\x3e首先安装好Karma覆盖率工具\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save-dev karma-coverage\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode\x3enpm i --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e karma-coverage\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后修改配置文件karma.conf.js，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nmodule.exports = function(config) {\n  config.set({\n    basePath: \x27\x27,\n    frameworks: [\x27jasmine\x27],\n    files: [\n      \x27src\/**\/*.js\x27,\n      \x27test\/**\/*.js\x27\n    ],\n    exclude: [],\n\n    \/\/ modified\n    preprocessors: {\n        \x27src\/**\/*.js\x27: [\x27coverage\x27]\n    },\n\n    \/\/modified\n    reporters: [\x27progress\x27, \x27coverage\x27],\n\n    \/\/ add\n    coverageReporter: {\n      type : \x27html\x27,\n      dir : \x27coverage\/\x27\n    },\n\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: [\x27PhantomJS\x27],\n    singleRun: false,\n    concurrency: Infinity\n  })\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\nmodule.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(config)\x3c\/span\x3e {\x3c\/span\x3e\n  config.\x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e({\n    basePath: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n    framework\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27jasmine\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\n      \x3cspan class=\x22hljs-string\x22\x3e\x27src\/**\/*.js\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27test\/**\/*.js\x27\x3c\/span\x3e\n    ],\n    exclude: [],\n\n    \/\/ modified\n    preprocessor\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27src\/**\/*.js\x27\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27coverage\x27\x3c\/span\x3e]\n    },\n\n    \/\/modified\n    reporter\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27progress\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\x27\x3c\/span\x3e],\n\n    \/\/ \x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e\n    coverageReporter: {\n      \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27html\x27\x3c\/span\x3e,\n      dir : \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\/\x27\x3c\/span\x3e\n    },\n\n    por\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e9876\x3c\/span\x3e,\n    color\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e true,\n    logLeve\x3cspan class=\x22hljs-variable\x22\x3el:\x3c\/span\x3e config.LOG_INFO,\n    autoWatch: true,\n    browser\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27PhantomJS\x27\x3c\/span\x3e],\n    singleRun: false,\n    concurrency: Infinity\n  })\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再运行\x3ccode\x3ekarma start\x3c\/code\x3e后，会在目录下生成coverage目录，里面有本次测试的覆盖报告。打开后的结果如下\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVC4eR?w=923\x26amp;h=563\x22 src=\x22https:\/\/static.alili.tech\/img\/bVC4eR?w=923\x26amp;h=563\x22 alt=\x22Coverage\x22 title=\x22Coverage\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e使用Webpack\x2bBabel\x3c\/h3\x3e\n\x3cp\x3e在实际项目中，有事会需要用到Webpack和ES6，所以接下来将Webpack和Babel集成进Karma环境中。\x3c\/p\x3e\n\x3cp\x3e安装karma-webpack\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save-dev karma-webpack\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode\x3enpm i --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e karma-webpack\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e安装babel\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save-dev babel-loader babel-core babel-preset-es2015\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs armasm\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-symbol\x22\x3enpm\x3c\/span\x3e i --save-dev \x3cspan class=\x22hljs-keyword\x22\x3ebabel-loader \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-core \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-preset-es2015\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后文件进行改造，\x3ccode\x3esrc\/index.js\x3c\/code\x3e文件修改为\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function isNum(num) {\n  if (typeof num === \x27number\x27) {\n    return true\n  } else {\n    return false\n  }\n}\n\nexports.isNum = isNum\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisNum\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(num)\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e num === \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  }\n}\n\nexports.isNum = isNum\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3etext\/index.js\x3c\/code\x3e文件修改为\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const Util = require(\x27..\/src\/index\x27)\n\ndescribe(\x27index.js: \x27, () =\x3e {\n  it(\x27isNum() should work fine.\x27, () =\x3e {\n    expect(Util.isNum(1)).toBe(true)\n    expect(Util.isNum(\x271\x27)).toBe(false)\n  })\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode\x3econst Util = require(\x27..\/src\/index\x27)\n\ndescribe(\x27index.js: \x27, () =\x26gt; {\n  it(\x27isNum() should work fine.\x27, () =\x26gt; {\n    expect(\x3cspan class=\x22hljs-name\x22\x3eUtil\x3c\/span\x3e.isNum(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)).toBe(\x3cspan class=\x22hljs-name\x22\x3etrue\x3c\/span\x3e)\n    expect(\x3cspan class=\x22hljs-name\x22\x3eUtil\x3c\/span\x3e.isNum(\x27\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x27)).toBe(\x3cspan class=\x22hljs-name\x22\x3efalse\x3c\/span\x3e)\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来修改配置文件karma.conf.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = function(config) {\n  config.set({\n    basePath: \x27\x27,\n    frameworks: [\x27jasmine\x27],\n    files: [\n      \x27test\/**\/*.js\x27\n    ],\n    exclude: [],\n    preprocessors: {\n      \x27test\/**\/*.js\x27: [\x27webpack\x27, \x27coverage\x27]\n    },\n    reporters: [\x27progress\x27, \x27coverage\x27],\n    coverageReporter: {\n      type: \x27html\x27,\n      dir: \x27coverage\/\x27\n    },\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: [\x27PhantomJS\x27],\n    singleRun: false,\n    concurrency: Infinity,\n    webpack: {\n      module: {\n        loaders: [{\n          test: \/\\.js$\/,\n          loader: \x27babel\x27,\n          exclude: \/node_modules\/,\n          query: {\n            presets: [\x27es2015\x27]\n          }\n        }]\n      }\n    }\n  })\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3emodule.exports\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3efunction(config)\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3econfig.set({\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    basePath:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    frameworks:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x27jasmine\x27],\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    files:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x27test\/**\/*.js\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e],\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    exclude:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[],\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    preprocessors:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x27test\/**\/*.js\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x27webpack\x27,\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e]\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    reporters:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x27progress\x27,\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e],\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    coverageReporter:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      type:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27html\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      dir:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\/\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    port:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e9876\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    colors:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    logLevel:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3econfig.LOG_INFO,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    autoWatch:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    browsers:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x27PhantomJS\x27],\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    singleRun:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    concurrency:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eInfinity,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    webpack:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      module:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e        loaders:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e          test:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\/\\.js$\/,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e          loader:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e          exclude:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\/node_modules\/,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e          query:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e            presets:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e[\x27es2015\x27]\x3c\/span\x3e\n          \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e}]\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e})\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意这里的修改：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3efiles只留下test文件。因为webpack会自动把需要的其它文件都打包进来，所以只需要留下入口文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3epreprocessors也修改为test文件，并加入webpack域处理器\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e加入webpack配置选项。可以自己定制配置项，但是不需要entry和output。这里加上babel-loader来编译ES6代码\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e运行\x3ccode\x3ekarma start\x3c\/code\x3e，成功了~\x3c\/p\x3e\n\x3cp\x3e再看看Coverage，卧槽。。居然不是百分之百了。。。\x3c\/p\x3e\n\x3cp\x3e原因很简单，webpack会加入一些代码，影响了代码的Coverage。如果我们引入了一些其它的库，比如jquery之类的，将源代码和库代码打包在一起后，覆盖率会更难看。。这样的Coverage就没有了参考的价值。\x3c\/p\x3e\n\x3cp\x3e还好有大神给我们提供了解决方案，需要安装插件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save-dev babel-plugin-istanbul\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode\x3enpm i --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e babel-plugin-istanbul\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改webpack中babel-loader的配置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  test: \/\\.js$\/,\n  loader: \x27babel\x27,\n  exclude: \/node_modules\/,\n  query: {\n    presets: [\x27es2015\x27],\n    plugins: [\x27istanbul\x27]\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-attribute\x22\x3etest\x3c\/span\x3e: \/\\.js$\/,\n  loader: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e,\n  exclude: \/node_modules\/,\n  query: {\n    presets: [\x3cspan class=\x22hljs-string\x22\x3e\x27es2015\x27\x3c\/span\x3e],\n    plugins: [\x3cspan class=\x22hljs-string\x22\x3e\x27istanbul\x27\x3c\/span\x3e]\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为这里引入了istanbul插件来检测Coverage，所以要把preprocessors里的\x3ccode\x3ecoverage\x3c\/code\x3e去掉。\x3c\/p\x3e\n\x3cp\x3e搞定以后，运行\x3ccode\x3ekarma start\x3c\/code\x3e。当当当当~一切OK啦，尽情编写测试脚本把~\x3c\/p\x3e\n\x3cp\x3e最后附上示例项目地址:\x3ca href=\x22https:\/\/github.com\/xiaojimao18\/karma-example\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ekarma-example\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3eReferences\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/karma-runner.github.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eKarma\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.syntaxsuccess.com\/viewarticle\/writing-jasmine-unit-tests-in-es6\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eKarma using ES6\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/jasmine.github.io\/2.5\/introduction.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJasmine API\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.infoq.com\/cn\/articles\/test-coverage-rate-role\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e测试覆盖（率）到底有什么用？\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/testing.googleblog.com\/2015\/04\/just-say-no-to-more-end-to-end-tests.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJust Say No to More End-to-End Tests\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端单元测试之Karma环境搭建</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006895064">https://segmentfault.com/a/1190000006895064</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qj0n94ckw6a/" target="_blank">https://alili.tech/archive/qj0n94ckw6a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>