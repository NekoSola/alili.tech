<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="electron实现qq快捷登录!"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>electron实现qq快捷登录! | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jczs4kd3b3a/",
				"appid": "1613049289050283", 
				"title": "electron实现qq快捷登录! | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-13T02:31:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/5onhrlhtb3s/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/v3dxks3larh/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&text=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&text=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&title=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&is_video=false&description=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&title=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&title=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&title=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjczs4kd3b3a%2f&title=electron%e5%ae%9e%e7%8e%b0qq%e5%bf%ab%e6%8d%b7%e7%99%bb%e5%bd%95%21"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">electron实现qq快捷登录!</h1><div class="meta"><div class="postdate"><time datetime="2019-02-13" itemprop="datePublished">2019-02-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e之前本来想不写这个功能的,结果客户死活要qq登录! 实在没办法就写了,顺便写个文章!\x3cbr\x3e在写之前有两个问题:\x3cbr\x3e1: 打开qq授权页面点击页面中的链接会又打开一个页面! .....\x3cbr\x3e2: 授权之后是否成功很难去判断 \x3c\/p\x3e\n\x3cp\x3e不过脑海中有一个想法就是,electron就是一个类似于浏览器一样,既然是浏览器那肯定可以阻止链接的点击 也可以判断状态!\x3cbr\x3e就去啃文档了!!!\x3c\/p\x3e\n\x3cp\x3e推荐大家去w3c去看文档 比较全 而且速度较快 文档也比较新: \x3ca href=\x22https:\/\/www.w3cschool.cn\/electronmanual\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.w3cschool.cn\/elec...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/electronjs.org\/docs\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/electronjs.org\/docs\x3c\/a\x3e 这里面的响应速度比较慢 里面很多文档都很久了 参数也有失效的!!!\x3c\/p\x3e\n\x3cp\x3e言归正传 说qq登录!\x3c\/p\x3e\n\x3cp\x3e后端是使用PHP实现的 没什么难度,主要的就是客户端的一些处理!\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e演示\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbisUs?w=1021\x26amp;h=619\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbisUs?w=1021\x26amp;h=619\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e放置qq登录按钮\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv\x3e\n\n        \x3cbutton @click=\x26quot;qqLogin\x26quot;\x3eqq登录\x3c\/button\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\n    export default {\n        name: \x26quot;home\x26quot;,\n        mounted() {\n            this.$electron.ipcRenderer.on(\x27reply\x27, (e, data) =\x3e {\n                console.log(data)\n                let httpCode = data.request_code[0];\n                if (httpCode === \x271\x27) {\n                    alert(data.token[0])\n                }\n            })\n        },\n        methods: {\n            qqLogin() {\n            \/\/请求服务器获取授权页面和参数\n                this.$http.get(\x27xxxxx\x27)\n                    .then((result) =\x3e {\n                        if (result.data.status === 1) {\n                            this.$electron.ipcRenderer.send(\x27qqLogin\x27, {url: result.data.data});\n                        }\n                    })\n                    .catch()\n            },\n        }\n    }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22qqLogin\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eqq登录\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22home\x22\x3c\/span\x3e,\n        mounted() {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$electron.ipcRenderer.on(\x3cspan class=\x22hljs-string\x22\x3e\x27reply\x27\x3c\/span\x3e, (e, data) =\x26gt; {\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data)\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e httpCode = data.request_code[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (httpCode === \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e) {\n                    alert(data.token[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e])\n                }\n            })\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n            qqLogin() {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/请求服务器获取授权页面和参数\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27xxxxx\x27\x3c\/span\x3e)\n                    .then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresult\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (result.data.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$electron.ipcRenderer.send(\x3cspan class=\x22hljs-string\x22\x3e\x27qqLogin\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: result.data.data});\n                        }\n                    })\n                    .catch()\n            },\n        }\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e问题解决\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e点击a链接会打开一个新窗口\x3c\/h3\x3e\n\x3cp\x3e解决打开qq授权页面点击页面中的链接会又打开一个窗口的问题 使用webContents 的 new-window 事件  组织默认事件 调用Shell利用默认浏览器打开就行了!\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   loginWindow.webContents.on(\x27new-window\x27, (event, url) =\x3e {\n        event.preventDefault();\n        shell.openExternal(url);\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e   loginWindow.webContents.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27new-window\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(event, url)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        event.preventDefault();\n        shell.openExternal(url);\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e授权后是否成功很难去判断\x3c\/h3\x3e\n\x3cp\x3e到这个问题后我就想到一个词 那就是 Response 和 code 然后就去搜索了嘛  结果在 webContents找到了! \x3ccode\x3edid-get-redirect-request\x3c\/code\x3e 事件 ! \x3cbr\x3e但是我们不能直接使用他 要在点击授权之后再去使用他\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22     loginWindow.webContents.on(\x27will-navigate\x27, (e, url,) =\x3e {\n        content.on(\x27did-get-response-details\x27, (e, status, url, originalURL, httpResponseCode, requestMethod, referrer, header) =\x3e {\n            if (httpResponseCode === 200) {\n                event.sender.send(\x27reply\x27, header);\n                \/\/ loginWindow.close();\n            }\n        })\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e     loginWindow.webContents.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27will-navigate\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e, url,)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        content.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27did-get-response-details\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e, status, url, originalURL, httpResponseCode, requestMethod, referrer, header)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (httpResponseCode === \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e) {\n                event.sender.send(\x3cspan class=\x22hljs-string\x22\x3e\x27reply\x27\x3c\/span\x3e, header);\n                \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e loginWindow.close();\n            }\n        })\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ewill-navigate事件解释:\x3cbr\x3e当用户或 page 想要开始导航的时候发出事件.它可在当 window.location 对象改变或用户点击 page 中的链接的时候发生.\x3cbr\x3e当使用 api(如 webContents.loadURL 和 webContents.back) 以编程方式来启动导航的时候，这个事件将不会发出.\x3cbr\x3e它也不会在页内跳转发生， 例如点击锚链接或更新 window.location.hash.使用 did-navigate-in-page 事件可以达到目的\x3c\/p\x3e\n\x3cp\x3edid-get-response-details 事件解释:\x3cbr\x3e当有关请求资源的详细信息可用的时候发出事件. status 标识了 socket链接来下载资源.\x3c\/p\x3e\n\x3cp\x3e拿到这两个之后我们就可以写代码啦!\x3cbr\x3e在点击授权之后授权页面会跳转到我们服务器的一个回调地址 在里面做一个操作 比如获取用户\x3ccode\x3etoken\x3c\/code\x3e乱七八糟的! 之后将生成的\x3ccode\x3etoken\x3c\/code\x3e返回给客户端!\x3c\/p\x3e\n\x3cp\x3e但是要注意这里服务端返回的数据客户端不能解析 大家可以使用:\x3ccode\x3efindInPage\x3c\/code\x3e 去查询返回的内容!\x3cbr\x3e但是我没去这么做 \x3c\/p\x3e\n\x3cp\x3e因为 \x3ccode\x3edid-get-response-details\x3c\/code\x3e 事件返回了:\x3cbr\x3e\x3ccode\x3estatus\x3c\/code\x3e,\x3ccode\x3enewURL\x3c\/code\x3e,\x3ccode\x3eoriginalURL\x3c\/code\x3e,\x3ccode\x3ehttpResponseCode\x3c\/code\x3e,\x3ccode\x3erequestMethod\x3c\/code\x3e,\x3ccode\x3ereferrer\x3c\/code\x3e,\x3ccode\x3eheaders\x3c\/code\x3e 八个参数 \x3cbr\x3e最后我们只需要判断\x3ccode\x3ehttpResponseCode\x3c\/code\x3e 是200的时候 将\x3ccode\x3eheader\x3c\/code\x3e里面的参数从主进程返回给渲染进程\x3cbr\x3e大概的数据是这样的:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22access-control-allow-credentials:[\x26quot;true\x26quot;]\naccess-control-allow-headers:[\x26quot;token,Origin, X-Requested-With, Content-Type, Accept\x26quot;]\naccess-control-allow-methods:[\x26quot;POST,GET,DELETE,PUT\x26quot;]\ncache-control:[\x26quot;no-store, no-cache, must-revalidate\x26quot;]\nconnection:[\x26quot;Keep-Alive\x26quot;]\ncontent-type:[\x26quot;application\/json; charset=utf-8\x26quot;]\ndate:[\x26quot;Sun, 21 Oct 2018 14:02:20 GMT\x26quot;]\nexpires:[\x26quot;Thu, 19 Nov 1981 08:52:00 GMT\x26quot;]\nkeep-alive:[\x26quot;timeout=5, max=100\x26quot;]\nrequest_code:[\x26quot;1\x26quot;]\nmsg:[\x26quot;登录成功\x26quot;]\ntoken:[\x26quot;xxxxxxxx\x26quot;]\npragma:[\x26quot;no-cache\x26quot;]\nserver:[\x26quot;Apache\/2.4.23 (Win32) OpenSSL\/1.0.2j mod_fcgid\/2.3.9\x26quot;]\nset-cookie:[\x26quot;PHPSESSID=6b0esq5jd8vloess2c96ove86s; path=\/; HttpOnly\x26quot;]\ntransfer-encoding:[\x26quot;chunked\x26quot;]\nx-powered-by:[\x26quot;PHP\/7.2.1\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3eaccess-control-allow-\x3cspan class=\x22hljs-string\x22\x3ecredentials:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e]\naccess-control-allow-\x3cspan class=\x22hljs-string\x22\x3eheaders:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22token,Origin, X-Requested-With, Content-Type, Accept\x22\x3c\/span\x3e]\naccess-control-allow-\x3cspan class=\x22hljs-string\x22\x3emethods:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22POST,GET,DELETE,PUT\x22\x3c\/span\x3e]\ncache-\x3cspan class=\x22hljs-string\x22\x3econtrol:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22no-store, no-cache, must-revalidate\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3econnection:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22Keep-Alive\x22\x3c\/span\x3e]\ncontent-\x3cspan class=\x22hljs-string\x22\x3etype:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22application\/json; charset=utf-8\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3edate:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22Sun, 21 Oct 2018 14:02:20 GMT\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3eexpires:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22Thu, 19 Nov 1981 08:52:00 GMT\x22\x3c\/span\x3e]\nkeep-\x3cspan class=\x22hljs-string\x22\x3ealive:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22timeout=5, max=100\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3erequest_code:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3emsg:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22登录成功\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3etoken:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22xxxxxxxx\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3epragma:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22no-cache\x22\x3c\/span\x3e]\n\x3cspan class=\x22hljs-string\x22\x3eserver:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22Apache\/2.4.23 (Win32) OpenSSL\/1.0.2j mod_fcgid\/2.3.9\x22\x3c\/span\x3e]\nset-\x3cspan class=\x22hljs-string\x22\x3ecookie:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22PHPSESSID=6b0esq5jd8vloess2c96ove86s; path=\/; HttpOnly\x22\x3c\/span\x3e]\ntransfer-\x3cspan class=\x22hljs-string\x22\x3eencoding:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22chunked\x22\x3c\/span\x3e]\nx-powered-\x3cspan class=\x22hljs-string\x22\x3eby:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22PHP\/7.2.1\x22\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上参数中 \x3ccode\x3emsg\x3c\/code\x3e \x3ccode\x3erequest_code\x3c\/code\x3e  \x3ccode\x3etoken\x3c\/code\x3e为自定义参数 是服务器代码生成的!\x3c\/p\x3e\n\x3cp\x3e能得到这些就好办了!\x3c\/p\x3e\n\x3cp\x3e渲染进程拿到\x3ccode\x3eheader\x3c\/code\x3e中的\x3ccode\x3etoken\x3c\/code\x3e根据 \x3ccode\x3etoken\x3c\/code\x3e获取用户信息这之后就简单的很了!!!\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e主进程代码:\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {ipcMain, BrowserWindow, shell} from \x27electron\x27\n\nipcMain.on(\x27qqLogin\x27, (event, data) =\x3e {\n    const loginWindow = new BrowserWindow({\n        width: 750,\n        height: 450,\n        resizable: false,\n        minimizable: false,\n        maximizable: false,\n        webPreferences: {\n            devTools: false,\n        }\n    });\n\n    loginWindow.setMenu(null);\n\n    loginWindow.loadURL(data.url);\n    \n    loginWindow.webContents.on(\x27new-window\x27, (event, url) =\x3e {\n        event.preventDefault();\n        shell.openExternal(url);\n    });\n    const content = loginWindow.webContents;\n\n    content.on(\x27will-navigate\x27, (e, status, url,) =\x3e {\n        content.on(\x27did-get-response-details\x27, (e, status, url, originalURL, httpResponseCode, requestMethod, referrer, header) =\x3e {\n            if (httpResponseCode === 200) {\n                event.sender.send(\x27reply\x27, header);\n                loginWindow.close();\n            }\n        })\n    });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {ipcMain, BrowserWindow, shell} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e\n\nipcMain.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27qqLogin\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(event, data)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    const loginWindow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BrowserWindow({\n        width: \x3cspan class=\x22hljs-number\x22\x3e750\x3c\/span\x3e,\n        height: \x3cspan class=\x22hljs-number\x22\x3e450\x3c\/span\x3e,\n        resizable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        minimizable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        maximizable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        webPreferences: {\n            devTools: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        }\n    });\n\n    loginWindow.setMenu(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\n\n    loginWindow.loadURL(data.url);\n    \n    loginWindow.webContents.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27new-window\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(event, url)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        event.preventDefault();\n        shell.openExternal(url);\n    });\n    const content = loginWindow.webContents;\n\n    content.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27will-navigate\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e, status, url,)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        content.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27did-get-response-details\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e, status, url, originalURL, httpResponseCode, requestMethod, referrer, header)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (httpResponseCode === \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e) {\n                event.sender.send(\x3cspan class=\x22hljs-string\x22\x3e\x27reply\x27\x3c\/span\x3e, header);\n                loginWindow.close();\n            }\n        })\n    });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e注意点\x3c\/h2\x3e\n\x3cp\x3e返回的header里面是一个数组 这种写法真是坑爹啊! 还要去写一个 \x3ccode\x3eheader.token[0]\x3c\/code\x3e 这种写法有点不喜欢 但是没法子!\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>electron实现qq快捷登录!</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016754668">https://segmentfault.com/a/1190000016754668</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jczs4kd3b3a/" target="_blank">https://alili.tech/archive/jczs4kd3b3a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>