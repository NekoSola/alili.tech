<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="浏览器存储"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>浏览器存储 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ih3uz00lojq/",
				"appid": "1613049289050283", 
				"title": "浏览器存储 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-14T02:30:37"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tijiyk3ot0o/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/irsx05cvpw/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&text=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&text=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&is_video=false&description=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fih3uz00lojq%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%ad%98%e5%82%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">浏览器存储</h1><div class="meta"><div class="postdate"><time datetime="2019-02-14" itemprop="datePublished">2019-02-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e一、前言\x3c\/h3\x3e\n\x3cp\x3eweb前端技术日新月异，对于浏览器的存储来说，cookie存储数据的功能已经很难满足开发所需，逐渐被WebStorage所取代，本文主要介绍Cookie,WebStorage和IndexDB之间差异。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e二、Cookie\x3c\/h3\x3e\n\x3ch4\x3e1.Cookie的来源\x3c\/h4\x3e\n\x3cp\x3e因为\x3cstrong\x3eHTTP协议是无状态的，HTTP 协议自身不对请求和响应之间的通信状态进行保存，\x3c\/strong\x3e通俗来说，服务器不知道用户上一次做了什么，这严重阻碍了交互式Web应用程序的实现。在典型的网上购物场景中，用户浏览了几个页面，买了一盒饼干和两瓶饮料。最后结帐时，由于HTTP的无状态性，不通过额外的手段，服务器并不知道用户到底买了什么，于是就诞生了Cookie。它就是用来绕开HTTP的无状态性的“额外手段”之一。服务器可以设置或读取Cookies中包含信息，借此维护用户跟服务器会话中的状态。\x3cbr\x3e在刚才的购物场景中，当用户选购了第一项商品，服务器在向用户发送网页的同时，还发送了一段Cookie，记录着那项商品的信息。当用户访问另一个页面，浏览器会把Cookie发送给服务器，于是服务器知道他之前选购了什么。用户继续选购饮料，服务器就在原来那段Cookie里追加新的商品信息。结帐时，服务器读取发送来的Cookie就行了。\x3c\/p\x3e\n\x3ch4\x3e2.什么是Cookie\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3eCookie指某些网站为了辨别用户身份而储存在用户本地终端上的数据(通常经过加密)。 cookie是服务端生成，客户端进行维护和存储。\x3c\/strong\x3e通过cookie,可以让服务器知道请求是来源哪个客户端，就可以进行客户端状态的维护，比如登陆后刷新，请求头就会携带登陆时response header中的set-cookie,Web服务器接到请求时也能读出cookie的值，根据cookie值的内容就可以判断和恢复一些用户的信息状态。\x3c\/p\x3e\n\x3ch4\x3e3.Cookie的特点\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e可以用于浏览器端和服务器端之间的交互\x3c\/strong\x3e，cookie的数据会自动的传递到服务器，服务器端也可以写cookie到客户端。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e客户端自身数据的存储\x3c\/strong\x3e，需要设置过期时间expire。设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭。若不设置过期时间，则表示这个cookie的生命期为浏览器会话期间，关闭浏览器窗口，cookie就消失。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e4.Cookie的生成方式\x3c\/h4\x3e\n\x3cblockquote\x3e生成方式一：http response header中的set-cookie\x3cp\x3e生成方式二：js中可以通过document.cookie可以读写cookie\/\/以键值对的形式展示\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e例如我们在简书控制台输入，以下两句代码，便可以在\x22Application\x22查看生成的cookie\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\ndocument.cookie=\x26quot;userName=hello\x26quot;\ndocument.cookie=\x26quot;gender=male\x26quot;\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.cookie=\x3cspan class=\x22hljs-string\x22\x3e\x22userName=hello\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.cookie=\x3cspan class=\x22hljs-string\x22\x3e\x22gender=male\x22\x3c\/span\x3e\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016883328\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016883328\x22 alt=\x22Cookie\x22 title=\x22Cookie\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e5.Cookie的缺陷\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3ecookie会被附加在每个HTTP请求中，在HttpRequest 和HttpResponse的header中都是要被传输的，所以无形中增加了一些不必要的流量损失。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3ecookie是用来维护用户信息的，而域名(domain)下所有请求都会携带cookie，但对于静态文件的请求，携带cookie信息根本没有用，此时可以通过cdn（存储静态文件的）的域名和主站的域名分开来解决。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题，除非用HTTPS。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e可以使用HttpOnly提升Cookie安全性。httponly 不支持读写，浏览器不允许脚本操作document.cookie去更改cookie，一般情况下都应该设置这个为true，这样可以避免被XSS攻击拿到cookie。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3eCookie的大小限制在4KB左右，对于复杂的存储需求来说是不够用的。很多浏览器都限制一个站点的cookie个数也是有限制的。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e这里需注意：各浏览器的cookie每一个name=value的value值大概在4k，所以4k并不是一个域名下所有的cookie共享的,而是一个name的大小。\x3c\/p\x3e\n\x3cp\x3e基于Cookie存储数据功能有所欠缺，\x3cstrong\x3eHTML5中新增了本地存储的解决方案----WebStorage，它分成两类：sessionStorage和localStorage。\x3c\/strong\x3e这样有了WebStorage后，cookie能只做它应该做的事情了——作为客户端与服务器交互的通道，保持客户端状态。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e三、LocalStorage\x3c\/h3\x3e\n\x3ch4\x3e1.LocalStorage的特点\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e保存的数据长期存在，下一次访问该网站的时候，网页可以直接读取以前保存的数据。\x3c\/li\x3e\n\x3cli\x3e大小为5M左右\x3c\/li\x3e\n\x3cli\x3e仅在客户端使用，不和服务端进行通信\x3c\/li\x3e\n\x3cli\x3e接口封装较好\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e基于上面的特点，LocalStorage可以作为浏览器本地缓存方案，用来提升网页首屏渲染速度(根据第一请求返回时，将一些不变信息直接存储在本地)。\x3c\/p\x3e\n\x3ch4\x3e2.存入\/读取数据\x3c\/h4\x3e\n\x3cp\x3elocalStorage保存的数据，以“键值对”的形式存在。也就是说，每一项数据都有一个键名和对应的值。所有的数据都是以文本格式保存。\x3cbr\x3e存入数据使用setItem方法。它接受两个参数，第一个是键名，第二个是保存的数据。\x3cbr\x3e\x3ccode\x3elocalStorage.setItem(\x22key\x22,\x22value\x22);\x3c\/code\x3e\x3cbr\x3e读取数据使用getItem方法。它只有一个参数，就是键名。\x3cbr\x3e\x3ccode\x3evar valueLocal = localStorage.getItem(\x22key\x22);\x3c\/code\x3e\x3cbr\x3e具体步骤，请看下面的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\nif(window.localStorage){\n  localStorage.setItem（\x27name\x27,\x27world\x27）\n  localStorage.setItem（“gender\x27,\x27famale\x27）\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.localStorage)\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{\n  localStorage.setItem（\x27name\x27,\x27world\x27）\n  localStorage.setItem（“gender\x27,\x27famale\x27）\n}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbody\x3e\n\x3cdiv id=\x26quot;name\x26quot;\x3e\x3c\/div\x3e\n\x3cdiv id=\x26quot;gender\x26quot;\x3e\x3c\/div\x3e\n\x3cscript\x3e\nvar name=localStorage.getItem（\x27name\x27）\nvar gender=localStorage.getItem（\x27gender\x27）\ndocument.getElementById（\x27name\x27）.innerHTML=name\ndocument.getElementById（\x27gender\x27）.innerHTML=gender\n\x3c\/script\x3e\n\x3c\/body\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22gender\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name=localStorage.getItem（\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e）\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gender=localStorage.getItem（\x3cspan class=\x22hljs-string\x22\x3e\x27gender\x27\x3c\/span\x3e）\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById（\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e）.innerHTML=name\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById（\x3cspan class=\x22hljs-string\x22\x3e\x27gender\x27\x3c\/span\x3e）.innerHTML=gender\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e四、SessionStorage\x3c\/h3\x3e\n\x3cp\x3esessionStorage保存的数据用于浏览器的一次会话，当会话结束（通常是该窗口关闭），数据被清空；\x3cstrong\x3esessionStorage不在不同的浏览器窗口中共享，即使是同一个页面；localStorage 在所有同源窗口中都是共享的；cookie也是在所有同源窗口中都是共享的。\x3c\/strong\x3e除了保存期限的长短不同，SessionStorage的属性和方法与LocalStorage完全一样。\x3c\/p\x3e\n\x3ch4\x3e1.SessionStorage的特点\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e会话级别的浏览器存储\x3c\/li\x3e\n\x3cli\x3e大小为5M左右\x3c\/li\x3e\n\x3cli\x3e仅在客户端使用，不和服务端进行通信\x3c\/li\x3e\n\x3cli\x3e接口封装较好\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e基于上面的特点，SessionStorage 可以有效对表单信息进行维护，比如刷新时，表单信息不丢失。\x3c\/p\x3e\n\x3ch4\x3e2.sessionStorage 、localStorage 和 cookie 之间的区别\x3c\/h4\x3e\n\x3ch5\x3e共同点：都是保存在浏览器端，且同源的。\x3c\/h5\x3e\n\x3cp\x3e\x3cstrong\x3e不同点如下：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016883329\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016883329\x22 alt=\x22三者区别\x22 title=\x22三者区别\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e五、IndexedDB\x3c\/h3\x3e\n\x3cp\x3eWeb Storage使用简单字符串键值对在本地存储数据，方便灵活，但是对于大量结构化数据存储力不从心，\x3cstrong\x3eIndexedDB是为了能够在客户端存储大量的结构化数据，并且使用索引高效检索的API。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch4\x3e1.IndexedDB的特点\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3eIndexedDB是一种低级API，用于客户端存储大量结构化数据。该API使用索引来实现对该数据的高性能搜索。\x3c\/li\x3e\n\x3cli\x3e为应用创建离线版本\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e2.IndexedDB的常见操作\x3c\/h4\x3e\n\x3cp\x3e在IndexedDB大部分操作并不是我们常用的调用方法，返回结果的模式，而是请求——响应的模式\x3cbr\x3e\x3cstrong\x3e①建立打开indexdb\x3c\/strong\x3e ----\x3ccode\x3ewindow.indexedDB.open(\x22testDB\x22)\x3c\/code\x3e\x3cbr\x3e这条指令并不会返回一个DB对象的句柄，我们得到的是一个IDBOpenDBRequest对象，而我们希望得到的DB对象在其result属性中\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016883330\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016883330\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e除了result，IDBOpenDBRequest接口定义了几个重要属性\x3cbr\x3eonerror: 请求失败的回调函数句柄\x3cbr\x3eonsuccess:请求成功的回调函数句柄\x3cbr\x3eonupgradeneeded:请求数据库版本变化句柄\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\nfunction openDB(name){\nvar request=window.indexedDB.open(name)\/\/建立打开indexdb \nrequest.onerror=function (e){\nconsole.log（\x27open indexdb error\x27）\n}\nrequest.onsuccess=function (e){\nmyDB.db=e.target.result\/\/这是一个 IDBDatabase对象，这就是IndexedDB对象\nconsole.log(myDB.db)\n}\n}\nvar myDB={\nname：\x27testDB\x27，\nversion：\x271\x27，\ndb:null\n}\nopenDB(myDB.name)\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eopenDB\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request=\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(name)\x3cspan class=\x22hljs-comment\x22\x3e\/\/建立打开indexdb \x3c\/span\x3e\nrequest.onerror=\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log（\x3cspan class=\x22hljs-string\x22\x3e\x27open indexdb error\x27\x3c\/span\x3e）\n}\nrequest.onsuccess=\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\nmyDB.db=e.target.result\x3cspan class=\x22hljs-comment\x22\x3e\/\/这是一个 IDBDatabase对象，这就是IndexedDB对象\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(myDB.db)\n}\n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myDB={\nname：\x3cspan class=\x22hljs-string\x22\x3e\x27testDB\x27\x3c\/span\x3e，\nversion：\x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e，\ndb:\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n}\nopenDB(myDB.name)\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e控制台得到一个 IDBDatabase对象，这就是IndexedDB对象\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016883331\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016883331\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e②关闭indexdb\x3c\/strong\x3e----\x3ccode\x3eindexdb.close()\x3c\/code\x3e\x3cbr\x3e\x3cstrong\x3e③删除indexdb\x3c\/strong\x3e----\x3ccode\x3ewindow.indexedDB.deleteDatabase(indexdb)\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\nfunction openDB(name){\nvar request=window.indexedDB.open(name)\nrequest.onerror=function(e){\nconsole.log（\x27open indexdb error\x27)\n}\nrequest.onsuccess=function(e){\nmyDB.db=e.target.result\ncallback \x26amp;\x26amp; callback()\n  }\n}\nvar myDB={\nname：\x26quot;testDB\x26quot;，\nversion：\x26quot;1\x26quot;，\ndb:null\n}\nopenDB(myDB.name,function(){\/\/回调函数\nmyDB.db.close()\/\/关闭indexdb\nwindow.indexedDB.deleteDatabase(myDB.db)\/\/删除indexdb\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eopenDB\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request=\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(name)\nrequest.onerror=\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log（\x3cspan class=\x22hljs-string\x22\x3e\x27open indexdb error\x27\x3c\/span\x3e)\n}\nrequest.onsuccess=\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\nmyDB.db=e.target.result\ncallback \x26amp;\x26amp; callback()\n  }\n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myDB={\nname：\x3cspan class=\x22hljs-string\x22\x3e\x22testDB\x22\x3c\/span\x3e，\nversion：\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e，\ndb:\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n}\nopenDB(myDB.name,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/\/回调函数\x3c\/span\x3e\nmyDB.db.close()\x3cspan class=\x22hljs-comment\x22\x3e\/\/关闭indexdb\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.deleteDatabase(myDB.db)\x3cspan class=\x22hljs-comment\x22\x3e\/\/删除indexdb\x3c\/span\x3e\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e如果觉得文章对你有些许帮助，欢迎在\x3ca href=\x22https:\/\/github.com\/ljianshu\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e我的GitHub博客\x3c\/a\x3e点赞和关注，感激不尽！\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e六、参考\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/dolphinX\/p\/3415761.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHTML5本地存储——IndexedDB（一：基本使用）\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/jerryzou.com\/posts\/cookie-and-web-storage\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e详说 Cookie, LocalStorage 与 SessionStorage\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>浏览器存储</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016883325">https://segmentfault.com/a/1190000016883325</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ih3uz00lojq/" target="_blank">https://alili.tech/archive/ih3uz00lojq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>