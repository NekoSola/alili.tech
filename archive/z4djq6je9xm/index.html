<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="javascript模块化（二）--RequireJS初探"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>javascript模块化（二）--RequireJS初探 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/z4djq6je9xm/",
				"appid": "1613049289050283", 
				"title": "javascript模块化（二）--RequireJS初探 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-07T02:30:15"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/vjb93r8w8k/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/berwgkwh2b6/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&text=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&text=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&title=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&is_video=false&description=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&title=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&title=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&title=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz4djq6je9xm%2f&title=javascript%e6%a8%a1%e5%9d%97%e5%8c%96%ef%bc%88%e4%ba%8c%ef%bc%89--RequireJS%e5%88%9d%e6%8e%a2"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">javascript模块化（二）--RequireJS初探</h1><div class="meta"><div class="postdate"><time datetime="2019-02-07" itemprop="datePublished">2019-02-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前言：在慕课网上跟着视频《侧边工具栏开发》做了一遍，用到了jquery操作DOM，其中，用requirejs管理模块依赖，然后自定义了两个模块它们都依赖jquery，并且其中一个自定义模块依赖另一个，所以要暴露出接口。看完视频初步认识了一下requirejs，以及模块化开发的概念，在此做一下总结。感谢慕课网上的老师。\x3c\/p\x3e\n\x3cp\x3e使用模块化开发的好处：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e有效的防止命名冲突\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e声明不同的js文件之间的依赖\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e可以让我们写出模块化的代码，便于复用\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e1.需求与目标\x3c\/h2\x3e\n\x3cp\x3e这个视频《侧边工具栏开发》的需求很简单，就是做一个侧边工具条，\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e固定定位在页面的某个位置，\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在没有把页面向下滚动时，显示三个按钮，\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当页面向下滚动一定距离之后，第四个按钮出现。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e点击这个按钮，页面会回到顶部。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e鼠标hover到每个按钮上都有一些相应的动画（CSS3完成这里不写）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznRD\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznRD\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznQn\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznQn\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e2.HTML结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22       \x3cdiv class=\x26quot;toolbar\x26quot;\x3e\n            \x3c!--第一个微信按钮--\x3e\n            \x3ca href=\x26quot;javascript:;\x26quot; class=\x26quot;toolbar-item toolbar-item-weixin\x26quot;\x3e\n                \x3cspan class=\x26quot;toolbar-layer\x26quot;\x3e\x3c\/span\x3e\n            \x3c\/a\x3e\n    \n            \x3c!--第二个意见反馈按钮--\x3e\n            \x3ca href=\x26quot;javascript:;\x26quot; class=\x26quot;toolbar-item toolbar-feedback\x26quot;\x3e\x3c\/a\x3e\n    \n            \x3c!--第三个app下载按钮--\x3e\n            \x3ca href=\x26quot;javascript:;\x26quot; class=\x26quot;toolbar-item toolbar-item-app\x26quot;\x3e\n                \x3cspan class=\x26quot;toolbar-layer\x26quot;\x3e\x3c\/span\x3e\n            \x3c\/a\x3e\n    \n            \x3c!--第四个回到顶部按钮--\x3e\n            \x3ca id=\x26quot;backTop\x26quot; href=\x26quot;javascript:;\x26quot; class=\x26quot;toolbar-item toolbar-item-top\x26quot;\x3e\x3c\/a\x3e\n        \x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e       \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--第一个微信按钮--\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript:;\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-item toolbar-item-weixin\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-layer\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n            \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--第二个意见反馈按钮--\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript:;\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-item toolbar-feedback\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n            \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--第三个app下载按钮--\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript:;\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-item toolbar-item-app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-layer\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n            \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--第四个回到顶部按钮--\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22backTop\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript:;\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22toolbar-item toolbar-item-top\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一些说明：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e为了让页面显示滚动条，需要在这个上述代码下面加很多行\x3ccode\x3e\x26lt;p\x26gt;\x26lt;\/p\x26gt;\x3c\/code\x3e标签以便撑开页面显示滚动条。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCSS部分视频中老师讲了三种方法，并且用到了SASS，感兴趣的同学可以去看一下，这里不再赘述。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e3.requirejs入门\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e（1）项目目录结构\x3c\/h3\x3e\n\x3cp\x3e其中jquery-3.1.0.js和require.js是在各自官网下载的资源文件。main.js是自定义的入口文件。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznRY\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznRY\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e（2）加载初始化requirejs\x3c\/h3\x3e\n\x3cp\x3e在未引入模块化编写代码以前引入js文件是在\x3ccode\x3e\x26lt;body\x26gt;\x3c\/code\x3e标签之前写多个\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e标签，根据js文件加载的顺序，添加js文件。现在根据\x3ccode\x3erequirejs\x3c\/code\x3e的异步加载的特性，可以设定一个主入口文件，只用一个\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e实现其余js文件的加载。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e首先是引入requirejs：在\x3ccode\x3eHTML\x3c\/code\x3e文件的\x3ccode\x3e\x26lt;body\x26gt;\x3c\/code\x3e标签的之前添加script标签，\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e然后引入\x3ccode\x3erequirejs\x3c\/code\x3e文件，然后用\x3ccode\x3edata-main\x3c\/code\x3e这个属性来引入入口文件。（当用requirejs引用文件时，可以省略js文件的js后缀名，所以此处引入的就是项目目录中的\x3ccode\x3emain.js\x3c\/code\x3e）\x3cbr\x3e如下：\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3cscript src=\x26quot;js\/require.js\x26quot; data-main=\x26quot;js\/main\x26quot;\x3e\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x26lt;script src=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/require.js\x22\x3c\/span\x3e data-main=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/main\x22\x3c\/span\x3e\x26gt;\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e（3）requirejs的常用方法\x3c\/h3\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3erequirejs.config\x3c\/code\x3e（\x3ccode\x3e为模块指定别名，方便模块的引入\x3c\/code\x3e），\x3cstrong\x3e\x3ccode\x3e在入口文件中定义\x3c\/code\x3e\x3c\/strong\x3e\x3cbr\x3e如这个demo要引入多次\x3ccode\x3ejquery-3.1.0.js\x3c\/code\x3e，但是这个名字很长所以可以在入口文件\x3ccode\x3emain.js\x3c\/code\x3e中为它定义一个别名，如下：\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/为jquery模块定义别名\n    requirejs.config({\n        paths:{\n            jquery:\x27jquery-3.1.0.js\x27\n        }\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/为jquery模块定义别名\x3c\/span\x3e\n    requirejs.config({\n        \x3cspan class=\x22hljs-attr\x22\x3epaths\x3c\/span\x3e:{\n            \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27jquery-3.1.0.js\x27\x3c\/span\x3e\n        }\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3erequirejs()\x3c\/code\x3e方法（\x3ccode\x3e将写好的模块进行引入\x3c\/code\x3e）\x3cbr\x3erequirejs()接收两个参数，第一个参数是一个数组，写入要引入的模块的名字。第二个参数是一个回调函数，需要传递一个参数，来代替前面所引入的模块。如：引入jquery模块\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    requirejs([\x27jquery\x27],function($){\n        \/\/写一段代码验证jquery是否被正确引入\n        \/\/将body背景颜色变为红色\n        $(\x27body\x27).css(\x27background-color\x27,\x27red\x27);\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    requirejs([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/写一段代码验证jquery是否被正确引入\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/将body背景颜色变为红色\x3c\/span\x3e\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).css(\x3cspan class=\x22hljs-string\x22\x3e\x27background-color\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e);\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3edefine()\x3c\/code\x3e(\x3ccode\x3e利用它定义编写模块，然后在相应的地方进行引入。\x3c\/code\x3e)\x3cbr\x3e\x3ccode\x3edefine()\x3c\/code\x3e接收三个参数，第一个参数是为本模块命名的值，可以不写，第二个参数表示需要引入的模块，第三个参数是各依赖项成功加载后所运行的函数，传入的参数与各个依赖项形成对应的关系。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    define(\n        moduleName,  \/\/可选，如果此参数不写，则默认使用本模块所在文件的文件名\n        dependencies,    \/\/一个数组，此数组包含着此文件所需的各个依赖项目，这个数组中各项对应的是所依赖文件相对于requirejs库所形成的相对路径文件名。\n        function(parameters){  \n            \/\/各依赖项成功加载后所运行的函数\n            \/\/传入的参数与dependencies数组中的各个依赖项形成对应关系\n        }\n    );\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    define(\n        moduleName,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/可选，如果此参数不写，则默认使用本模块所在文件的文件名\x3c\/span\x3e\n        dependencies,    \x3cspan class=\x22hljs-comment\x22\x3e\/\/一个数组，此数组包含着此文件所需的各个依赖项目，这个数组中各项对应的是所依赖文件相对于requirejs库所形成的相对路径文件名。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eparameters\x3c\/span\x3e)\x3c\/span\x3e{  \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/各依赖项成功加载后所运行的函数\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/传入的参数与dependencies数组中的各个依赖项形成对应关系\x3c\/span\x3e\n        }\n    );\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e（4）demo的基本功能实现\x3c\/h3\x3e\n\x3cp\x3e现在先对demo中的基本功能进行实现：\x3c\/p\x3e\n\x3cp\x3e目前的目录结构如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznRY\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznRY\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e首先在HTML中初始化\x3ccode\x3erequirejs\x3c\/code\x3e：在\x3ccode\x3e\x26lt;\/body\x26gt;\x3c\/code\x3e标签之前:\x3cbr\x3e\x3ccode\x3e\x26lt;script src=\x22js\/require.js\x22 data-main=\x22js\/main\x22\x26gt;\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在入口文件main.js中实现基本功能\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n    \/\/1.首先为jquery模块定义别名\n    requirejs.config({\n        paths: {\n            jquery: \x27jquery-3.1.0\x27\n        }\n    });\n        \n    \/\/2.然后用requirejs()方法引入jquery模块实现demo中需求\n    requirejs([\x27jquery\x27],function($){\n    \n        \/\/为id值为backTop的第四个按钮添加点击回到顶部事件,当点击时执行move函数回到顶部\n        $(\x27#backTop\x27).on(\x27click\x27,move);\n        \n        \/\/监听一下windows对象的滚动事件，\n        \/\/每次滚动都执行函数checkPosition确定一下位置,是否到达设定的临界点，以显示和隐藏第四个按钮\n        $(window).on(\x27scroll\x27,function(){\n            checkPosition($(window).height());\n        });\n        \n        \/\/解决bug：在刷新页面时也出现第四个按钮，即页面加载时就检查一下滚动位置\n        checkPosition($(window).height());\n\n\/\/------------------------------分割线------------------------------------------\n        \/\/move函数的具体实现，加动画效果\n        function move(){\n            $(\x27html, body\x27).animate({\n                scrollTop:0\n            },800);\n        }\n        \/\/go函数可以立即移动到顶部\n        function go(){\n            $(\x27html, body\x27).scrollTop(0);\n        }\n\n        \/\/checkPosition函数的具体实现\n        function checkPosition(pos){\n            if($(window).scrollTop() \x3e pos){\n                $(\x27#backTop\x27).fadeIn();\n            }else{\n                $(\x27#backTop\x27).fadeOut();\n            }\n        }\n    });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/1.首先为jquery模块定义别名\x3c\/span\x3e\n    requirejs.config({\n        \x3cspan class=\x22hljs-attr\x22\x3epaths\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery-3.1.0\x27\x3c\/span\x3e\n        }\n    });\n        \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/2.然后用requirejs()方法引入jquery模块实现demo中需求\x3c\/span\x3e\n    requirejs([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$\x3c\/span\x3e)\x3c\/span\x3e{\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/为id值为backTop的第四个按钮添加点击回到顶部事件,当点击时执行move函数回到顶部\x3c\/span\x3e\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27#backTop\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e,move);\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听一下windows对象的滚动事件，\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/每次滚动都执行函数checkPosition确定一下位置,是否到达设定的临界点，以显示和隐藏第四个按钮\x3c\/span\x3e\n        $(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27scroll\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            checkPosition($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).height());\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/解决bug：在刷新页面时也出现第四个按钮，即页面加载时就检查一下滚动位置\x3c\/span\x3e\n        checkPosition($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).height());\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/------------------------------分割线------------------------------------------\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/move函数的具体实现，加动画效果\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emove\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27html, body\x27\x3c\/span\x3e).animate({\n                \x3cspan class=\x22hljs-attr\x22\x3escrollTop\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n            },\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e);\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/go函数可以立即移动到顶部\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ego\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27html, body\x27\x3c\/span\x3e).scrollTop(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/checkPosition函数的具体实现\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3echeckPosition\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3epos\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).scrollTop() \x26gt; pos){\n                $(\x3cspan class=\x22hljs-string\x22\x3e\x27#backTop\x27\x3c\/span\x3e).fadeIn();\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                $(\x3cspan class=\x22hljs-string\x22\x3e\x27#backTop\x27\x3c\/span\x3e).fadeOut();\n            }\n        }\n    });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e分割线以上是执行的代码，分割线以下是写的被调用的函数。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e（5）将功能抽象成模块\x3c\/h3\x3e\n\x3cp\x3e上述代码虽然实现了功能，但是存在以下问题：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3emove和go函数都是到达顶部的功能，实现的功能很相似，作用如果想在其它地方使用这个功能，就要再进行代码的复制，不方便功能的复用。所以应该将功能抽象成模块。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e实现功能的功能单一：两个函数都是到达顶部，这样即便抽象成模块也会受到很大的限制，所以可以进一步将问题抽象成移动滚动条到指定位置。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e第一步\x3c\/strong\x3e：创建一个新模块，用\x3ccode\x3escrollto.js\x3c\/code\x3e表示，目前这个demo的目录结构如图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznRZ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznRZ\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e第二步：将功能抽象成模块，写入\x3ccode\x3escrollto.js\x3c\/code\x3e中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/1.先定义这个模块，因为要用到jquery，所以还要引入jquery\n    define([\x27jquery\x27],function($){\n        \/\/定义构造函数\n        function ScrollTo(opts){\n            this.opts = $.extend({},ScrollTo.DEFAULTS,opts);   \/\/实现传参覆盖\n            this.$el = $(\x27html, body\x27);\n        }\n    \n        \/\/原型添加方法\n        ScrollTo.prototype.move = function (){\n            var opts = this.opts;\n            this.$el.animate({\n                scrollTop:opts.dest\n            },opts.speed);\n        };\n        ScrollTo.prototype.go = function(){\n            this.$el.scrollTop(opts.dest);\n        };\n    \n        \/\/定义默认的参数\n        ScrollTo.DEFAULTS = {\n            dest:0,\n            speed:800\n        };\n        \n        \/\/定义接口\n        return {\n            ScrollTo:ScrollTo\n        };\n        \n    });\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/1.先定义这个模块，因为要用到jquery，所以还要引入jquery\x3c\/span\x3e\n    define([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义构造函数\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eScrollTo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eopts\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts = $.extend({},ScrollTo.DEFAULTS,opts);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/实现传参覆盖\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el = $(\x3cspan class=\x22hljs-string\x22\x3e\x27html, body\x27\x3c\/span\x3e);\n        }\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/原型添加方法\x3c\/span\x3e\n        ScrollTo.prototype.move = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opts = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.animate({\n                \x3cspan class=\x22hljs-attr\x22\x3escrollTop\x3c\/span\x3e:opts.dest\n            },opts.speed);\n        };\n        ScrollTo.prototype.go = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.scrollTop(opts.dest);\n        };\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义默认的参数\x3c\/span\x3e\n        ScrollTo.DEFAULTS = {\n            \x3cspan class=\x22hljs-attr\x22\x3edest\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e\n        };\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义接口\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3eScrollTo\x3c\/span\x3e:ScrollTo\n        };\n        \n    });\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e代码详解：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e传递的参数为一个对象，用opts表示\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用户没有传递参数时，使用默认的参数，默认参数直接写在ScrollTo构造函数上，相当于形成一个静态属性，然后通过jquery的extend()方法进行原型的扩展\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e实现用户传递参数用之，不传递参数用默认值。jquery的\x3ccode\x3eextend()\x3c\/code\x3e方法\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在原型上添加move和go方法\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e第三步：在入口文件main.js中引入这个\x3ccode\x3escrollto.js\x3c\/code\x3e的模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n    requirejs([\x27jquery\x27,\x27scrollto\x27], function($,scrollto){\n    \n        \/\/为了使用scrollto模块，需要实例化一下\n        var scroll = new scrollto.ScrollTo({\n            dest:0,\n            speed:2000\n        });\n        \/\/点击回到顶部按钮回到指定位置功能\n        $(\x27#backTop\x27).on(\x27click\x27, $.proxy(scroll.move, scroll));\n    \n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n    requirejs([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27scrollto\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$,scrollto\x3c\/span\x3e)\x3c\/span\x3e{\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/为了使用scrollto模块，需要实例化一下\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scroll = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e scrollto.ScrollTo({\n            \x3cspan class=\x22hljs-attr\x22\x3edest\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e\n        });\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/点击回到顶部按钮回到指定位置功能\x3c\/span\x3e\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27#backTop\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, $.proxy(scroll.move, scroll));\n    \n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码中有一点需要注意：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e在第6行中，如果添加点击按钮回到指定位置事件时，这么写：\x3cbr\x3e\x3ccode\x3e$(\x27#backTop\x27).on(\x27click\x27, scroll.move)\x3c\/code\x3e;\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e此时浏览器控制台会报错：\x3ccode\x3eUncaught TypeError: Cannot read property \x27ScrollTo\x27 of undefined\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e分析原因是因为，在main.js中调用\x3ccode\x3escrollto.js\x3c\/code\x3e模块中在\x3ccode\x3eScrollTo.prototype.move\x3c\/code\x3e原型方法move时，main.js中this指的是ScrollTo的实例，即scrollto，而在语句\x3ccode\x3e$(\x27#backTop\x27).on(\x27click\x27, scroll.move)\x3c\/code\x3e;中，这个this指代的是id为backTop的这个按钮。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e解决办法：用jquery提供的方法，直接将this指向scroll对象。\x3cbr\x3e\x3ccode\x3e$(\x27#backTop\x27).on(\x27click\x27, $.proxy(scroll.move, scroll))\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e第四步：一个bug\x3c\/strong\x3e\x3cbr\x3e这时基本功能虽然实现了，点击底部那个按钮，传入设定的返回位置和返回的速度，页面可以再次返回顶部指定位置，\x3cstrong\x3e但是目前还存在一个bug\x3c\/strong\x3e：在点击底部按钮回到顶部指定位置时，假如连续多次点击这个按钮，则页面回到顶部后就无法再次向下滚动页面。\x3c\/p\x3e\n\x3cp\x3ebug分析：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e假如执行的函数如上面第三步中代码，速度设置成较慢的速度2000，那么在返回顶部指定位置时可以多次点击这个按钮，\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e这样每次点击按钮事件都要调用move方法执行里面的动画，点击多少次，这个动画就要执行多少次。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e因此在页面返回顶部后，再次滚动页面向下会立即执行返回顶部动画，所以在执行完点击次数的动画之前，用户都无法向下滚动。（并且非常耗性能）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e解决办法，在滚动条正在运动或者已经到达目的地，就不应该执行动画。添加判断。\x3cbr\x3e所以\x3ccode\x3escrollto.js\x3c\/code\x3e的代码可以改成如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    define([\x27jquery\x27],function($){\n        \/\/定义构造函数\n        function ScrollTo(opts){\n            this.opts = $.extend({},ScrollTo.DEFAULTS,opts);   \/\/实现传参覆盖\n            this.$el = $(\x27html, body\x27);\n        }\n    \n        \/\/原型添加方法\n        ScrollTo.prototype.move = function (){\n            var opts = this.opts;\n            if ($(window).scrollTop() != opts.dest){  \/\/判断是否到达指定位置\n                if(!this.$el.is(\x27:animated\x27)){    \/\/判断是否在运动\n                    this.$el.animate({\n                        scrollTop:opts.dest\n                    },opts.speed);\n                }\n            }\n        };\n        ScrollTo.prototype.go = function(){\n            var dest = this.opts.dest;\n            if($(window).scrollTop() != dest){\n                this.$el.scrollTop(dest);\n            }\n        };\n    \n        \/\/定义默认的参数\n        ScrollTo.DEFAULTS = {\n            dest:0,\n            speed:800\n        };\n        \n        \/\/定义接口\n        return {\n            ScrollTo:ScrollTo\n        };\n              \n    });\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    define([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义构造函数\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eScrollTo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eopts\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts = $.extend({},ScrollTo.DEFAULTS,opts);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/实现传参覆盖\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el = $(\x3cspan class=\x22hljs-string\x22\x3e\x27html, body\x27\x3c\/span\x3e);\n        }\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/原型添加方法\x3c\/span\x3e\n        ScrollTo.prototype.move = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opts = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).scrollTop() != opts.dest){  \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否到达指定位置\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.is(\x3cspan class=\x22hljs-string\x22\x3e\x27:animated\x27\x3c\/span\x3e)){    \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否在运动\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.animate({\n                        \x3cspan class=\x22hljs-attr\x22\x3escrollTop\x3c\/span\x3e:opts.dest\n                    },opts.speed);\n                }\n            }\n        };\n        ScrollTo.prototype.go = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dest = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.dest;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).scrollTop() != dest){\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.scrollTop(dest);\n            }\n        };\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义默认的参数\x3c\/span\x3e\n        ScrollTo.DEFAULTS = {\n            \x3cspan class=\x22hljs-attr\x22\x3edest\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e\n        };\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义接口\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3eScrollTo\x3c\/span\x3e:ScrollTo\n        };\n              \n    });\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e（6）将返回顶部整体抽象成模块\x3c\/h3\x3e\n\x3cp\x3e我们把返回的功能函数move和go都抽象在了\x3ccode\x3escrollto.js\x3c\/code\x3e模块中，现在还可以直接把整个返回顶部的功能（包括滚动一定距离后隐藏的按钮出现，和点击按钮之后回到顶部指定位置）\x3cbr\x3e然后在入口文件中只需要引入这个模块（取名叫\x3ccode\x3ebacktop.js\x3c\/code\x3e），这个\x3ccode\x3eback.js\x3c\/code\x3e需要依赖上面定义的\x3ccode\x3escrollto.js\x3c\/code\x3e模块。\x3c\/p\x3e\n\x3cp\x3e所以目前的项目目录如下图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVznSV\x22 src=\x22https:\/\/static.alili.tech\/img\/bVznSV\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e第一步：现在来写\x3ccode\x3ebacktop.js\x3c\/code\x3e模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    define([\x27jquery\x27, \x27scrollto\x27], function($, scrollto){\n        \/\/执行函数部分\n        function BackTop(el, opts){\n            this.opts = $.extend({}, BackTop.DEFAULTS, opts);\n            this.$el = $(el);   \/\/el是节点\n            this.scroll = new scrollto.ScrollTo({\n                dest: 0,\n                speed: this.opts.speed     \n            });\n            \n            this._checkPosition();   \/\/加载时就检查位置，解决bug\n            \n            if(this.opts.mode == \x27move\x27){  \/\/是move才执行move函数，其他执行go\n                this.$el.on(\x27click\x27, $.proxy(this._move, this));\n            }else{\n                this.$el.on(\x27click\x27, $.proxy(this._go, this));\n            }\n            \n            $(window).on(\x27scroll\x27, $.proxy(this._checkPOsition, this));\n \n        }\n    \n        \/\/定义默认属性部分\n        BackTop.DEFAULTS = {\n            mode: \x27move\x27,\n            pos: $(window).height(),\n            speed: 800\n        };\n    \n    \n        \/\/定义功能函数部分\n        BackTop.prototype._move = function(){\n            this.scroll.move();\n        };\n    \n        BackTop.prototype._go = function(){\n            this.scroll.go();\n        };\n    \n        BackTop.prototype._checkPosition = function(){\n            if($(window).scrollTop() \x3e this.opts.pos){\n                this.$el.fadeIn();\n            }else{\n                this.$el.fadeOut();\n            }\n        };\n    \n        \/\/暴露模块接口，返回整个对象\n        return{\n            BackTop: BackTop\n        };\n    \n    \n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    define([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27scrollto\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$, scrollto\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/执行函数部分\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBackTop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eel, opts\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts = $.extend({}, BackTop.DEFAULTS, opts);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el = $(el);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/el是节点\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroll = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e scrollto.ScrollTo({\n                \x3cspan class=\x22hljs-attr\x22\x3edest\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.speed     \n            });\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._checkPosition();   \x3cspan class=\x22hljs-comment\x22\x3e\/\/加载时就检查位置，解决bug\x3c\/span\x3e\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.mode == \x3cspan class=\x22hljs-string\x22\x3e\x27move\x27\x3c\/span\x3e){  \x3cspan class=\x22hljs-comment\x22\x3e\/\/是move才执行move函数，其他执行go\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, $.proxy(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._move, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, $.proxy(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._go, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n            }\n            \n            $(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27scroll\x27\x3c\/span\x3e, $.proxy(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._checkPOsition, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n \n        }\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义默认属性部分\x3c\/span\x3e\n        BackTop.DEFAULTS = {\n            \x3cspan class=\x22hljs-attr\x22\x3emode\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27move\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3epos\x3c\/span\x3e: $(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).height(),\n            \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e\n        };\n    \n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义功能函数部分\x3c\/span\x3e\n        BackTop.prototype._move = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroll.move();\n        };\n    \n        BackTop.prototype._go = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroll.go();\n        };\n    \n        BackTop.prototype._checkPosition = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).scrollTop() \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.pos){\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.fadeIn();\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.fadeOut();\n            }\n        };\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/暴露模块接口，返回整个对象\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attr\x22\x3eBackTop\x3c\/span\x3e: BackTop\n        };\n    \n    \n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第二步：scrollto.js保持不变\x3c\/p\x3e\n\x3cp\x3e第三步：写main.js入口文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/定义别名\n    requirejs.config({\n        paths: {\n            jquery: \x27jquery-3.1.0\x27\n        }\n    });\n    \n    \/\/调用backtop.js模块\n    requirejs([\x27jquery\x27, \x27backtop\x27], function($, backtop){\n        \/\/实例化BackTop\n        new backtop.BackTop($(\x27#backtop\x27),{\n            mode: \x27move\x27,\n            pos:100,\n            speed: 2000\n        });\n\n    });\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义别名\x3c\/span\x3e\n    requirejs.config({\n        \x3cspan class=\x22hljs-attr\x22\x3epaths\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery-3.1.0\x27\x3c\/span\x3e\n        }\n    });\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/调用backtop.js模块\x3c\/span\x3e\n    requirejs([\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27backtop\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$, backtop\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化BackTop\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e backtop.BackTop($(\x3cspan class=\x22hljs-string\x22\x3e\x27#backtop\x27\x3c\/span\x3e),{\n            \x3cspan class=\x22hljs-attr\x22\x3emode\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27move\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3epos\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e\n        });\n\n    });\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e4.总结\x3c\/h2\x3e\n\x3cp\x3e这个demo中的模块化是这样一种思想：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e首先把功能函数放在一个模块中（move和go）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e把整个实现功能也抽象成一个模块，依赖上一个功能函数模块\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e最后只需要在入口文件中实例化一下这个最外层的模块，即可完成一系列功能的调用。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e每个模块都用面向对象的思想，定义模块并且暴露接口\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e默认值的用法可以让调用者拿起就用，可以不用考虑传参数。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>javascript模块化（二）&ndash;RequireJS初探</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006011186">https://segmentfault.com/a/1190000006011186</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/z4djq6je9xm/" target="_blank">https://alili.tech/archive/z4djq6je9xm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>