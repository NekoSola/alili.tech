<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="搭建自己的前端自动化测试脚手架（三）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>搭建自己的前端自动化测试脚手架（三） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/8rqeqi4tz1/",
				"appid": "1613049289050283", 
				"title": "搭建自己的前端自动化测试脚手架（三） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-06T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2evyxtqqvce/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/x5e323tgxcf/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&text=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&text=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&is_video=false&description=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8rqeqi4tz1%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84%e5%89%8d%e7%ab%af%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95%e8%84%9a%e6%89%8b%e6%9e%b6%ef%bc%88%e4%b8%89%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">搭建自己的前端自动化测试脚手架（三）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-06" itemprop="datePublished">2019-02-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006001008\x22\x3e上一篇：搭建自己的前端自动化测试脚手架（二）\x3c\/a\x3e\x3cbr\x3eBy LancerComet at 23:47, 2016.07.22. 欢迎转载，转载时还请保留作者署名。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这是最后一章了！(･∀･)\x3cbr\x3e之前我们配置好了我们的脚手架工具，现在可以编写测试用例了！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e开始编写测试用例\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e创建目录存放测试用例\x3c\/h3\x3e\n\x3cp\x3e在项目根目录新建一个名为 \x22\x3cstrong\x3etests\x3c\/strong\x3e\x22 的目录，然后这里就用来存放我们即将编写的测试用例文件。\x3cbr\x3e那么这个文件夹能不能指向到其他地方去呢？当然可以，不过要修改一个小地方。\x3c\/p\x3e\n\x3cp\x3e还记得 \x22\x3cstrong\x3e nightwatch.json \x3c\/strong\x3e\x22 文件么？打开看看，第一项是不是叫 \x3ccode\x3esrc_folders\x3c\/code\x3e，然后值为 \x3ccode\x3e[\x22tests\x22]\x3c\/code\x3e？\x3cbr\x3e我相信您已经懂了，这里就是定义测试用例存放目录的地方，然后改成自己想要的目录吧！\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e您可以在目录中存放多个测试用例文件，且命名随意，Nightwatch 将读取目录中所有的 JS 文件，如果符合测试用例格式，将会自动执行。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e编写一个简单的测试用例\x3c\/h3\x3e\n\x3cp\x3e在 \x22\x3cstrong\x3etests\x3c\/strong\x3e\x22 目录中建立一个测试用例文件 \x22\x3cstrong\x3edemo.js\x3c\/strong\x3e\x22，然后我们来写一个没什么用的小 demo！\x3c\/p\x3e\n\x3cp\x3e这个 Demo 将打开 \x3ca href=\x22http:\/\/bing.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBing\x3c\/a\x3e，搜索 \x22what is microsoft\x22，然后保存成截图后退出。\x3c\/p\x3e\n\x3cp\x3eOK，打开 \x22\x3cstrong\x3edemo.js\x3c\/strong\x3e\x22，添加以下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  \x27Find the answer.\x27: function (client) {\n    \/\/ TODO...\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-string\x22\x3e\x27Find the answer.\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eclient\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ TODO...\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3emodule.exports 导出一个对象，对象的 Key 即为测试用例名称，您可以编写多个测试用例，Nightwatch 将依次执行。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e您可以在测试用例中导入其他模块并直接使用在测试逻辑中，这也是比 Phantom.JS 优秀的地方。\x3c\/p\x3e\n\x3cp\x3e先写到这里，您可能会对 \x3ccode\x3ecilent\x3c\/code\x3e 感到陌生，所以还是要简单介绍一下。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eclient\x3c\/code\x3e 是代码运行时 Nightwatch 提供的对象，所有对浏览器进行的操作都将使用此对象调取，比如 \x3ccode\x3eclient.click(\x22CSS Selector\x22)\x3c\/code\x3e、\x3ccode\x3eclient.getCookie(function () {...})\x3c\/code\x3e，我们第一章说过的 \x22可以简单理解为 Selenium 的控制软件\x22 就是通过它体现的喔！\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eclient 的所有 API 详情见 \x3ca href=\x22http:\/\/nightwatchjs.org\/api#commands\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e大致了解这东西的意思之后，就可以接着完善测试逻辑了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  \x27Find the answer.\x27: function (client) {\n    \/\/ 定义 Bing 页面中的节点.\n    const searchInput = \x27#sb_form_q\x27\n    const searchBtn = \x27#sb_form_go\x27\n    const question = \x27what is microsoft\x27\n\n    \/\/ 启动浏览器并打开 bing.com.\n    client.url(\x27http:\/\/bing.com\x27).maximizeWindow()\n\n    \/\/ 确保 \x26quot;body\x26quot; 和输入框可以使用.\n    client.expect.element(\x27body\x27).to.be.present\n    client.expect.element(searchInput).to.be.visible\n    client.pause(2000)  \/\/ 稍等两秒.\n\n    \/\/ 输入 \x26quot;what is microsoft\x26quot; 然后搜索.\n    client.setValue(searchInput, question)\n    client.click(searchBtn)\n    client.pause(2000)\n\n    \/\/ 截一张图然后保存到 \x26quot;reports\/answer.png\x26quot;. \n    client.expect.element(\x27body\x27).to.be.present\n    client.saveScreenshot(\x27reports\/answers.png\x27)\n    client.end()\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs roboconf\x22\x3e\x3ccode\x3emodule.exports = {\n  \x27\x3cspan class=\x22hljs-attribute\x22\x3eFind the answer.\x27\x3c\/span\x3e: function (client) {\n    \/\/ 定义 Bing 页面中的节点.\n    const searchInput = \x27#sb_form_q\x27\n    const searchBtn = \x27#sb_form_go\x27\n    const question = \x27what is microsoft\x27\n\n    \/\/ 启动浏览器并打开 bing\x3cspan class=\x22hljs-variable\x22\x3e.com\x3c\/span\x3e.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.url\x3c\/span\x3e(\x27http:\/\/bing\x3cspan class=\x22hljs-variable\x22\x3e.com\x3c\/span\x3e\x27)\x3cspan class=\x22hljs-variable\x22\x3e.maximizeWindow\x3c\/span\x3e()\n\n    \/\/ 确保 \x22body\x22 和输入框可以使用.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27body\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.present\x3c\/span\x3e\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(searchInput)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.visible\x3c\/span\x3e\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(2000)  \/\/ 稍等两秒.\n\n    \/\/ 输入 \x22what is microsoft\x22 然后搜索.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.setValue\x3c\/span\x3e(searchInput, question)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.click\x3c\/span\x3e(searchBtn)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(2000)\n\n    \/\/ 截一张图然后保存到 \x22reports\/answer\x3cspan class=\x22hljs-variable\x22\x3e.png\x3c\/span\x3e\x22. \n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27body\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.present\x3c\/span\x3e\n    client\x3cspan class=\x22hljs-variable\x22\x3e.saveScreenshot\x3c\/span\x3e(\x27reports\/answers\x3cspan class=\x22hljs-variable\x22\x3e.png\x3c\/span\x3e\x27)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.end\x3c\/span\x3e()\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e来关注一下 \x3ccode\x3eexpect\x3c\/code\x3e ，是不是看起来很像自然语言？这些语句就是测试结果的验证语句，就是我们希望得到的结果。比如 \x3ccode\x3eclient.expect.element(\x27body\x27).to.be.present.before(3000)\x3c\/code\x3e，意思就是 \x22希望 body 元素能在 3000 毫秒内初始化完毕\x22。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eNightwatch 支持 BDD-Style 与 Assert 断言两种风格，文档可见 \x3ca href=\x22http:\/\/nightwatchjs.org\/api#expect-api\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e关于 Assert、BDD、TDD 的更多内容请参照其他文章。\x3c\/p\x3e\n\x3cp\x3e是不是确实没什么用？毕竟是个简单的 Demo 而已，哈哈。\x3cbr\x3e那么添加一个稍微复杂点的测试用例。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e编写另一个简单的测试用例\x3c\/h3\x3e\n\x3cp\x3e这个 demo 将打开 \x3ca href=\x22http:\/\/live.bilibili.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBilibili 直播\x3c\/a\x3e ，然后执行：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e打开首页并等待加载完毕；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e检查登陆按钮是否存在；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e点击登陆按钮；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e填写用户名与密码；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e点击登陆；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e等待页面加载；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过 Cookie 检查是否已登陆；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e确保登陆后的用户导航面板存在；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e鼠标移至头像处打开导航面板；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e点击退出登陆；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e等待页面刷新后检查 Cookie 是否已退出登陆；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e结束测试。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e其实就是第一章的那个 Demo 图干的事情了 (･∀･)\x3cbr\x3e这个 demo 不再啰嗦，直接放出代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Account setting.\nconst accountConfig = {\n  username: \x27USERNAME\x27,\n  password: \x27PASSWORD\x27,\n  uid: \x2710000\x27\n}\n\nmodule.exports = {\n  \x27Bilibili Live Login Test\x27: function (client) {\n    client.url(\x27http:\/\/live.bilibili.com\x27).maximizeWindow()\n\n    \/\/ Page Init.\n    client.expect.element(\x27body\x27).to.be.present.before(3000)\n    client.expect.element(\x27.top-nav-login-btn.last\x27).to.be.visible\n\n    \/\/ Login.\n    client.click(\x27.top-nav-login-btn.last\x27)\n    client.waitForElementVisible(\x27#bilibili-quick-login\x27, 2000)\n    client.frame(0)\n    client.pause(2000)\n    client.setValue(\x27#login-username\x27, accountConfig.username)\n    client.setValue(\x27#login-passwd\x27, accountConfig.password)\n    client.click(\x27#login-submit\x27)\n\n    \/\/ Wait and check page has been reloaded.\n    client.frameParent()\n    client.pause(4000)\n    client.expect.element(\x27body\x27).to.be.present.before(3000)\n\n    \/\/ Check cookies to ensure we are signed in.\n    client.getCookies(function (result) {\n      result.value.forEach((value, index, array) =\x3e {\n        if (value.name === \x27DedeUserID\x27) client.assert.equal(parseInt(value.value, 10), accountConfig.uid)\n      })\n    })\n\n    \/\/ Move to User Avatar.\n    client.expect.element(\x27.user-avatar-link\x27).to.be.visible\n    client.moveToElement(\x27.user-avatar-link\x27, 5, 5)\n    client.pause(800)\n    client.expect.element(\x27#top-nav-user-panel\x27).to.be.visible\n\n    \/\/ Logout.\n    client.click(\x27#top-nav-logout-link\x27)\n    client.pause(5000)\n    client.expect.element(\x27body\x27).to.be.present.before(3000)\n\n    \/\/ Check cookies again to ensure we are off.\n    client.getCookies(function (result) {\n      var logout = true\n      result.value.forEach((value, index, array) =\x3e {\n        if (value.name === \x27LIVE_LOGIN_DATA\x27) logout = false\n      })\n      client.assert.equal(logout, true)\n    })\n\n    client.pause(1000)\n    client.end()\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs roboconf\x22\x3e\x3ccode\x3e\/\/ Account setting.\nconst accountConfig = {\n  \x3cspan class=\x22hljs-attribute\x22\x3eusername\x3c\/span\x3e: \x27USERNAME\x27,\n  password: \x27PASSWORD\x27,\n  uid: \x2710000\x27\n}\n\nmodule\x3cspan class=\x22hljs-variable\x22\x3e.exports\x3c\/span\x3e = {\n  \x27Bilibili Live Login Test\x27: function (client) {\n    client\x3cspan class=\x22hljs-variable\x22\x3e.url\x3c\/span\x3e(\x27http:\/\/live\x3cspan class=\x22hljs-variable\x22\x3e.bilibili\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.com\x3c\/span\x3e\x27)\x3cspan class=\x22hljs-variable\x22\x3e.maximizeWindow\x3c\/span\x3e()\n\n    \/\/ Page Init.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27body\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.present\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.before\x3c\/span\x3e(3000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-variable\x22\x3e.top-nav-login-btn\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.last\x3c\/span\x3e\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.visible\x3c\/span\x3e\n\n    \/\/ Login.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.click\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-variable\x22\x3e.top-nav-login-btn\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.last\x3c\/span\x3e\x27)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.waitForElementVisible\x3c\/span\x3e(\x27#bilibili-quick-login\x27, 2000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.frame\x3c\/span\x3e(0)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(2000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.setValue\x3c\/span\x3e(\x27#login-username\x27, accountConfig\x3cspan class=\x22hljs-variable\x22\x3e.username\x3c\/span\x3e)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.setValue\x3c\/span\x3e(\x27#login-passwd\x27, accountConfig\x3cspan class=\x22hljs-variable\x22\x3e.password\x3c\/span\x3e)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.click\x3c\/span\x3e(\x27#login-submit\x27)\n\n    \/\/ Wait and check page has been reloaded.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.frameParent\x3c\/span\x3e()\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(4000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27body\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.present\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.before\x3c\/span\x3e(3000)\n\n    \/\/ Check cookies to ensure we are signed in.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.getCookies\x3c\/span\x3e(function (result) {\n      result\x3cspan class=\x22hljs-variable\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.forEach\x3c\/span\x3e((value, index, array) =\x26gt; {\n        if (value\x3cspan class=\x22hljs-variable\x22\x3e.name\x3c\/span\x3e === \x27DedeUserID\x27) client\x3cspan class=\x22hljs-variable\x22\x3e.assert\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.equal\x3c\/span\x3e(parseInt(value\x3cspan class=\x22hljs-variable\x22\x3e.value\x3c\/span\x3e, 10), accountConfig\x3cspan class=\x22hljs-variable\x22\x3e.uid\x3c\/span\x3e)\n      })\n    })\n\n    \/\/ Move to User Avatar.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-variable\x22\x3e.user-avatar-link\x3c\/span\x3e\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.visible\x3c\/span\x3e\n    client\x3cspan class=\x22hljs-variable\x22\x3e.moveToElement\x3c\/span\x3e(\x27\x3cspan class=\x22hljs-variable\x22\x3e.user-avatar-link\x3c\/span\x3e\x27, 5, 5)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(800)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27#top-nav-user-panel\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.visible\x3c\/span\x3e\n\n    \/\/ Logout.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.click\x3c\/span\x3e(\x27#top-nav-logout-link\x27)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(5000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.expect\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e(\x27body\x27)\x3cspan class=\x22hljs-variable\x22\x3e.to\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.be\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.present\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.before\x3c\/span\x3e(3000)\n\n    \/\/ Check cookies again to ensure we are off.\n    client\x3cspan class=\x22hljs-variable\x22\x3e.getCookies\x3c\/span\x3e(function (result) {\n      var logout = true\n      result\x3cspan class=\x22hljs-variable\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.forEach\x3c\/span\x3e((value, index, array) =\x26gt; {\n        if (value\x3cspan class=\x22hljs-variable\x22\x3e.name\x3c\/span\x3e === \x27LIVE_LOGIN_DATA\x27) logout = false\n      })\n      client\x3cspan class=\x22hljs-variable\x22\x3e.assert\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.equal\x3c\/span\x3e(logout, true)\n    })\n\n    client\x3cspan class=\x22hljs-variable\x22\x3e.pause\x3c\/span\x3e(1000)\n    client\x3cspan class=\x22hljs-variable\x22\x3e.end\x3c\/span\x3e()\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e您可以新建一个文件，或者在之前的文件中继续编写。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e运行测试用例\x3c\/h3\x3e\n\x3cp\x3e回到项目根目录，执行 \x3ccode\x3enpm start\x3c\/code\x3e，然后就可以看到浏览器自己测试了！\x3cbr\x3e运行效果如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/7xi38k.com1.z0.glb.clouddn.com\/Nightwatch.gif\x22 src=\x22https:\/\/static.alili.techhttp:\/\/7xi38k.com1.z0.glb.clouddn.com\/Nightwatch.gif\x22 alt=\x22自动化测试\x22 title=\x22自动化测试\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e测试运行完毕之后，测试结果将打印在终端里，同时会生成到 \x3cstrong\x3ereports\x3c\/strong\x3e 文件夹中。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e您可以在 nightwatch.json 中修改 \x22output_folder\x22 来更换报告生成目录。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e需要注意的地方\x3c\/h2\x3e\n\x3cp\x3e您可能在使用中会遇到例如 “明明看到节点缺获取不到”、“鼠标功能好像时好时坏” 等问题，在此给您一些建议：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e由于现在很多网站使用诸如 Angular、Vue 等框架构建，其节点可能为组件动态渲染，所以 Selenium 在执行测试时可能获取的 Dom 树为旧数据从而导致找不到节点，因此您可以执行等待语句确保节点出现后再进行测试。不过可能不是 100% 成功，这也是这套测试系统的短板之一。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果您在进行模拟鼠标的测试，您的鼠标指针可能会干扰您的测试，因此建议运行测试后将您的指针移动至屏幕外部，以避免干扰到浏览器测试。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e测试很可能因为页面加载时间问题导致测试失败，不过这也是 E2E 测试的特征所在，您可以修改您的测试逻辑，或致力缩短加载时间。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e大功告成！\x3c\/h2\x3e\n\x3cp\x3e现在您已经拥有您自己的测试工具并且成功编写了两个测试用例！此处您应该为自己鼓掌！\x3cbr\x3e您现在已经可以将 E2E 测试纳入您的开发流程之中，在下相信这将对您的开发有不小的帮助。如果您有兴趣，您也可以考虑 \x3cstrong\x3e单元测试\x3c\/strong\x3e 的可能性。\x3c\/p\x3e\n\x3cp\x3e如果您没能成功构建您的项目，您可以从\x3ca href=\x22https:\/\/github.com\/LancerComet\/Aniber\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e获取代码。\x3c\/p\x3e\n\x3cp\x3e同时像之前提到的，如果您在使用 Vue 构建您的项目，您可以使用 Vue-cli 来生成已经包含 Selenium 与 Nightwatch 的 Vue 种子项目，您可以在 \x3ccode\x3etest\/e2e\x3c\/code\x3e 中编写您的测试用例。\x3c\/p\x3e\n\x3cp\x3e希望三篇简单的短文能给您带来帮助！⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>搭建自己的前端自动化测试脚手架（三）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006048066">https://segmentfault.com/a/1190000006048066</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/8rqeqi4tz1/" target="_blank">https://alili.tech/archive/8rqeqi4tz1/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>