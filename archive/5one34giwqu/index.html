<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Webpack的dll功能"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Webpack的dll功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/5one34giwqu/",
				"appid": "1613049289050283", 
				"title": "Webpack的dll功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-07T02:30:15"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/fli3bkvz4pr/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/df7p1q5uxhu/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&text=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&text=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&title=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&is_video=false&description=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&title=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&title=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&title=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5one34giwqu%2f&title=Webpack%e7%9a%84dll%e5%8a%9f%e8%83%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Webpack的dll功能</h1><div class="meta"><div class="postdate"><time datetime="2019-02-07" itemprop="datePublished">2019-02-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e最近使用Webpack遇到了一个坑。\x3c\/p\x3e\n\x3cp\x3e我们构建前端项目的时候，往往希望第三方库（vendors）和自己写的代码可以分开打包，因为第三方库往往不需要经常打包更新。对此Webpack的\x3ca href=\x22https:\/\/webpack.github.io\/docs\/list-of-plugins.html#2-explicit-vendor-chunk\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e建议用\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e来单独打包第三方库。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22entry: {\n  vendor: [\x26quot;jquery\x26quot;, \x26quot;other-lib\x26quot;],\n  app: \x26quot;.\/entry\x26quot;\n}\nnew CommonsChunkPlugin({\n  name: \x26quot;vendor\x26quot;,\n\n  \/\/ filename: \x26quot;vendor.js\x26quot;\n  \/\/ (Give the chunk a different name)\n\n  minChunks: Infinity,\n  \/\/ (with more entries, this ensures that no other module\n  \/\/  goes into the vendor chunk)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-symbol\x22\x3eentry:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e  vendor:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x22jquery\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22other-lib\x22\x3c\/span\x3e],\n\x3cspan class=\x22hljs-symbol\x22\x3e  app:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/entry\x22\x3c\/span\x3e\n}\nnew CommonsChunkPlugin({\n\x3cspan class=\x22hljs-symbol\x22\x3e  name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22vendor\x22\x3c\/span\x3e,\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ filename: \x22vendor.js\x22\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (Give the chunk a different name)\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e\n  minChunks:\x3c\/span\x3e Infinity,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (with more entries, this ensures that no other module\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/  goes into the vendor chunk)\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通常为了对抗缓存，我们会给售出文件的文件名中加入hash的后缀——但是——我们编辑了app部分的代码后，重新打包，发现vendor的hash也变化了！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVzc4Q\x22 src=\x22https:\/\/static.alili.tech\/img\/bVzc4Q\x22 alt=\x22两次打包，并没有修改vendor部分的代码，然而hash变化了\x22 title=\x22两次打包，并没有修改vendor部分的代码，然而hash变化了\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这么一来，意味着每次发布版本的时候，vendor代码都要刷新，即使我并没有修改其中的代码。这样并不符合我们分开打包的初衷。\x3c\/p\x3e\n\x3cp\x3e带着问题我浏览了Github上\x3ca href=\x22https:\/\/github.com\/webpack\/webpack\/issues\/1150\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e的讨论\x3c\/a\x3e，发现了一个神器：dll。\x3c\/p\x3e\n\x3cp\x3eDll是Webpack最近新加的功能，我在网上并没有找到什么中文的介绍，所以在这里我就简单介绍一下。\x3c\/p\x3e\n\x3cp\x3eDll这个概念应该是借鉴了Windows系统的dll。一个dll包，就是一个纯纯的依赖库，它本身不能运行，是用来给你的app引用的。\x3c\/p\x3e\n\x3cp\x3e打包dll的时候，Webpack会将所有包含的库做一个索引，写在一个manifest文件中，而引用dll的代码（dll user）在打包的时候，只需要读取这个manifest文件，就可以了。\x3c\/p\x3e\n\x3cp\x3e这么一来有几个好处：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eDll打包以后是独立存在的，只要其包含的库没有增减、升级，hash也不会变化，因此线上的dll代码不需要随着版本发布频繁更新。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eApp部分代码修改后，只需要编译app部分的代码，dll部分，只要包含的库没有增减、升级，就不需要重新打包。这样也大大提高了每次编译的速度。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e假设你有多个项目，使用了相同的一些依赖库，它们就可以共用一个dll。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e如何使用呢？\x3c\/p\x3e\n\x3cp\x3e首先要先建立一个dll的配置文件，\x3ccode\x3eentry\x3c\/code\x3e只包含第三方库：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x27webpack\x27);\n\nconst vendors = [\n  \x27antd\x27,\n  \x27isomorphic-fetch\x27,\n  \x27react\x27,\n  \x27react-dom\x27,\n  \x27react-redux\x27,\n  \x27react-router\x27,\n  \x27redux\x27,\n  \x27redux-promise-middleware\x27,\n  \x27redux-thunk\x27,\n  \x27superagent\x27,\n];\n\nmodule.exports = {\n  output: {\n    path: \x27build\x27,\n    filename: \x27[name].[chunkhash].js\x27,\n    library: \x27[name]_[chunkhash]\x27,\n  },\n  entry: {\n    vendor: vendors,\n  },\n  plugins: [\n    new webpack.DllPlugin({\n      path: \x27manifest.json\x27,\n      name: \x27[name]_[chunkhash]\x27,\n      context: __dirname,\n    }),\n  ],\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs java\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = require(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vendors = [\n  \x3cspan class=\x22hljs-string\x22\x3e\x27antd\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27isomorphic-fetch\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27redux-promise-middleware\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27redux-thunk\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27superagent\x27\x3c\/span\x3e,\n];\n\n\x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eexports\x3c\/span\x3e = {\n  output: {\n    path: \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e,\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n    library: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]_[chunkhash]\x27\x3c\/span\x3e,\n  },\n  entry: {\n    vendor: vendors,\n  },\n  plugins: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllPlugin({\n      path: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest.json\x27\x3c\/span\x3e,\n      name: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]_[chunkhash]\x27\x3c\/span\x3e,\n      context: __dirname,\n    }),\n  ],\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.DllPlugin\x3c\/code\x3e的选项中，\x3ccode\x3epath\x3c\/code\x3e是manifest文件的输出路径；\x3ccode\x3ename\x3c\/code\x3e是dll暴露的对象名，要跟\x3ccode\x3eoutput.library\x3c\/code\x3e保持一致；\x3ccode\x3econtext\x3c\/code\x3e是解析包路径的上下文，这个要跟接下来配置的dll user一致。\x3c\/p\x3e\n\x3cp\x3e运行Webpack，会输出两个文件一个是打包好的vendor.js，一个就是manifest.json，长这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;: \x26quot;vendor_ac51ba426d4f259b8b18\x26quot;,\n  \x26quot;content\x26quot;: {\n    \x26quot;.\/node_modules\/antd\/dist\/antd.js\x26quot;: 1,\n    \x26quot;.\/node_modules\/react\/react.js\x26quot;: 2,\n    \x26quot;.\/node_modules\/react\/lib\/React.js\x26quot;: 3,\n    \x26quot;.\/node_modules\/react\/node_modules\/object-assign\/index.js\x26quot;: 4,\n    \x26quot;.\/node_modules\/react\/lib\/ReactChildren.js\x26quot;: 5,\n    \x26quot;.\/node_modules\/react\/lib\/PooledClass.js\x26quot;: 6,\n    \x26quot;.\/node_modules\/react\/lib\/reactProdInvariant.js\x26quot;: 7,\n    \x26quot;.\/node_modules\/fbjs\/lib\/invariant.js\x26quot;: 8,\n    \x26quot;.\/node_modules\/react\/lib\/ReactElement.js\x26quot;: 9,\n    \n    ............\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vendor_ac51ba426d4f259b8b18\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/antd\/dist\/antd.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/react.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/lib\/React.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/node_modules\/object-assign\/index.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/lib\/ReactChildren.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/lib\/PooledClass.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/lib\/reactProdInvariant.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/fbjs\/lib\/invariant.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/node_modules\/react\/lib\/ReactElement.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e,\n    \n    ............\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eWebpack将每个库都进行了编号索引，之后的dll user可以读取这个文件，直接用id来引用。\x3c\/p\x3e\n\x3cp\x3eDll user的配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x27webpack\x27);\n\nmodule.exports = {\n  output: {\n    path: \x27build\x27,\n    filename: \x27[name].[chunkhash].js\x27,\n  },\n  entry: {\n    app: \x27.\/src\/index.js\x27,\n  },\n  plugins: [\n    new webpack.DllReferencePlugin({\n      context: __dirname,\n      manifest: require(\x27.\/manifest.json\x27),\n    }),\n  ],\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/index.js\x27\x3c\/span\x3e,\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllReferencePlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: __dirname,\n      \x3cspan class=\x22hljs-attr\x22\x3emanifest\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/manifest.json\x27\x3c\/span\x3e),\n    }),\n  ],\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e的选项中，\x3ccode\x3econtext\x3c\/code\x3e需要跟之前保持一致，这个用来指导Webpack匹配manifest中库的路径；\x3ccode\x3emanifest\x3c\/code\x3e用来引入刚才输出的manifest文件。\x3c\/p\x3e\n\x3cp\x3e运行Webpack之后，结果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVzc8h\x22 src=\x22https:\/\/static.alili.tech\/img\/bVzc8h\x22 alt=\x22分离出dll后打包\x22 title=\x22分离出dll后打包\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对比一下不做分离的情况下打包的结果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVzc8a\x22 src=\x22https:\/\/static.alili.tech\/img\/bVzc8a\x22 alt=\x22不分离的打包\x22 title=\x22不分离的打包\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e速度快了，文件也小了。\x3c\/p\x3e\n\x3cp\x3e平时开发的时候，修改代码后重新编译的速度会大大减少，节省时间。\x3c\/p\x3e\n\x3cp\x3e如果有多个项目，使用相同的一套库，你可以在打包的时候引用相同的manifest文件，这样就可以在项目之间共享了。\x3c\/p\x3e\n\x3cp\x3e参考：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/webpack.github.io\/docs\/list-of-plugins.html#dllplugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/webpack.github.io\/docs\/list-of-plugins.html#dllplugin\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/webpack\/webpack\/tree\/master\/examples\/dll\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/webpack\/webpack\/tree\/master\/examples\/dll\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Webpack的dll功能</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005969643">https://segmentfault.com/a/1190000005969643</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/5one34giwqu/" target="_blank">https://alili.tech/archive/5one34giwqu/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>