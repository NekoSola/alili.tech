<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="[React Native Android 安利系列]RN中使用js调用java代码"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>[React Native Android 安利系列]RN中使用js调用java代码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mtccujmdz8f/",
				"appid": "1613049289050283", 
				"title": "[React Native Android 安利系列]RN中使用js调用java代码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-06T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/rf33buccq57/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xfsng4f1ya/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&text=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&text=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&title=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&is_video=false&description=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&title=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&title=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&title=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtccujmdz8f%2f&title=%5bReact%20Native%20Android%20%e5%ae%89%e5%88%a9%e7%b3%bb%e5%88%97%5dRN%e4%b8%ad%e4%bd%bf%e7%94%a8js%e8%b0%83%e7%94%a8java%e4%bb%a3%e7%a0%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">[React Native Android 安利系列]RN中使用js调用java代码</h1><div class="meta"><div class="postdate"><time datetime="2019-02-06" itemprop="datePublished">2019-02-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e欢迎大家收看react-native-android系列教程，跟着本系列教程学习，可以熟练掌握react-native-android的开发，你值得拥有：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/blog\/frontenddriver\x22\x3ehttps:\/\/segmentfault.com\/blog...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e书接上节，我们上节说道，如何控制原生android的activity间跳转，这次，我们试着用js去操控这个过程。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e1. 为你的应用添加一个js可调用的java接口\x3c\/h2\x3e\n\x3cp\x3e既然要使用js去调用java，那我们的第一步，当然是提供一个js可以调用的java接口了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.1\x26nbsp;提供一个跳转的函数\x3c\/h3\x3e\n\x3cp\x3e首先，照着上节的思路，我们将activity之间的跳转，封装成一个函数，放在MainActivity里面。如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22public class MainActivity extends ReactActivity {\n\n    public void skip() {\n        Intent intent = new Intent(this, DetailActivity.class);\n        startActivity(intent);\n    }\n....\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3epublic \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMainActivity\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReactActivity\x3c\/span\x3e \x3c\/span\x3e{\n\n    public void skip() {\n        \x3cspan class=\x22hljs-type\x22\x3eIntent\x3c\/span\x3e intent = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eIntent\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-type\x22\x3eDetailActivity\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e);\n        startActivity(intent);\n    }\n....\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.2 新建一个类，来存放我们需要被调用的java代码\x3c\/h3\x3e\n\x3cp\x3e紧接着我们需要新建一个类(MyExtension)继承自ReactContextBaseJavaModule这个抽象类，之后我们新建的这个类，可以承载我们暴露给js的方法。让我们动手开始写这个类吧。\x3c\/p\x3e\n\x3ch4\x3e1.2.1 新建一个包---extension，如图1.2.1\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NB\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NB\x22 alt=\x22110823_v6iz_1177792.png\x22 title=\x22110823_v6iz_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.2.1\x3c\/p\x3e\n\x3ch4\x3e1.2.2 在包下，新建一个类---MyExtension，如图1.2.2\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NC\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NC\x22 alt=\x22111032_lTl5_1177792.png\x22 title=\x22111032_lTl5_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.2.2\x3c\/p\x3e\n\x3cp\x3e代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22package com.hellowreact.extension;\n\nimport android.content.Intent;\n\nimport com.facebook.react.bridge.ReactApplicationContext;\nimport com.facebook.react.bridge.ReactContextBaseJavaModule;\nimport com.facebook.react.bridge.ReactMethod;\nimport com.hellowreact.DetailActivity;\nimport com.hellowreact.MainActivity;\n\n\/**\n * Created by baidu on 16\/6\/12.\n *\/\npublic class MyExtension extends ReactContextBaseJavaModule {\n    public MyExtension(ReactApplicationContext reactContext) {\n        super(reactContext);\n    }\n\n    @ReactMethod\n    public void open() {\n        MainActivity activity = (MainActivity) getCurrentActivity();\n        activity.skip();\n    }\n\n    @Override\n    public String getName() {\n        return \x26quot;MyExtension\x26quot;;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3epackage\x3c\/span\x3e com.hellowreact.extension;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e android.content.\x3cspan class=\x22hljs-type\x22\x3eIntent\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.\x3cspan class=\x22hljs-type\x22\x3eReactApplicationContext\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.\x3cspan class=\x22hljs-type\x22\x3eReactContextBaseJavaModule\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.\x3cspan class=\x22hljs-type\x22\x3eReactMethod\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.hellowreact.\x3cspan class=\x22hljs-type\x22\x3eDetailActivity\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.hellowreact.\x3cspan class=\x22hljs-type\x22\x3eMainActivity\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * Created by baidu on 16\/6\/12.\n *\/\x3c\/span\x3e\npublic \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMyExtension\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReactContextBaseJavaModule\x3c\/span\x3e \x3c\/span\x3e{\n    public \x3cspan class=\x22hljs-type\x22\x3eMyExtension\x3c\/span\x3e(\x3cspan class=\x22hljs-type\x22\x3eReactApplicationContext\x3c\/span\x3e reactContext) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(reactContext);\n    }\n\n    \x3cspan class=\x22hljs-meta\x22\x3e@ReactMethod\x3c\/span\x3e\n    public void open() {\n        \x3cspan class=\x22hljs-type\x22\x3eMainActivity\x3c\/span\x3e activity = (\x3cspan class=\x22hljs-type\x22\x3eMainActivity\x3c\/span\x3e) getCurrentActivity();\n        activity.skip();\n    }\n\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    public \x3cspan class=\x22hljs-type\x22\x3eString\x3c\/span\x3e getName() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22MyExtension\x22\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里有几个事项，注意一下：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 我们继承自ReactContextBaseJavaModule这个抽象类\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2. 我们需要重写getName方法，命名一下我们的扩展。以后我们可以在js里面按照名字找到这个扩展。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e3. 我们写了一个open方法，这个方法是未来会导出到我们的js中，并可以被js调用的方法。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e1.3 书写注册接口待用\x3c\/h3\x3e\n\x3cp\x3e我们写好了方法，接着我们就要注册了，我们还在extension的包里面，新建一个类(ExtensionPackage)，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22package com.hellowreact.extension;\n\nimport com.facebook.react.ReactPackage;\nimport com.facebook.react.bridge.JavaScriptModule;\nimport com.facebook.react.bridge.NativeModule;\nimport com.facebook.react.bridge.ReactApplicationContext;\nimport com.facebook.react.uimanager.ViewManager;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n\/**\n * Created by baidu on 16\/6\/12.\n *\/\npublic class ExtensionPackage implements ReactPackage {\n    @Override\n    public List\x3cNativeModule\x3e createNativeModules(ReactApplicationContext reactContext) {\n        List\x3cNativeModule\x3e modules = new ArrayList\x3c\x3e();\n        modules.add(new MyExtension(reactContext));\n        return modules;\n    }\n\n    @Override\n    public List\x3cClass\x3c? extends JavaScriptModule\x3e\x3e createJSModules() {\n        return Collections.emptyList();\n    }\n\n    @Override\n    public List\x3cViewManager\x3e createViewManagers(ReactApplicationContext reactContext) {\n        return Collections.emptyList();\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs aspectj\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3epackage\x3c\/span\x3e com.hellowreact.extension;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.ReactPackage;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.JavaScriptModule;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.NativeModule;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.bridge.ReactApplicationContext;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e com.facebook.react.uimanager.ViewManager;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e java.util.ArrayList;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e java.util.Collections;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e java.util.List;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * Created by baidu on 16\/6\/12.\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eExtensionPackage\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimplements\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReactPackage\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e List\x26lt;NativeModule\x26gt; createNativeModules(ReactApplicationContext reactContext) {\n        List\x26lt;NativeModule\x26gt; modules = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ArrayList\x26lt;\x26gt;();\n        modules.add(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e MyExtension(reactContext));\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e modules;\n    }\n\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e List\x26lt;Class\x26lt;? \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e JavaScriptModule\x26gt;\x26gt; createJSModules() {\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Collections.\x3cspan class=\x22hljs-title\x22\x3eemptyList\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e List\x26lt;ViewManager\x26gt; createViewManagers(ReactApplicationContext reactContext) {\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Collections.\x3cspan class=\x22hljs-title\x22\x3eemptyList\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时，我们的目录结构看起来应该是这样的，如图1.3.1\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NG\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NG\x22 alt=\x22111430_ggmk_1177792.png\x22 title=\x22111430_ggmk_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.3.1\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e1.4 将写好的接口注册到MainActivity中去\x3c\/h3\x3e\n\x3cp\x3e接着，我们要在MainActivity中去注册我们写好的这个接口。\x3cbr\x3e打开我们的MainActivity，其中有一个已经写好的方法 ---\x26nbsp;getPackages，如图1.4.1\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NH\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NH\x22 alt=\x22111639_MrBw_1177792.png\x22 title=\x22111639_MrBw_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.4.1\x3cbr\x3e我们在其中，加入我们写好的接口(ExtensionPackage)\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e2 重新运行app，并在js中查看接口是否已经存在与js中\x3c\/h2\x3e\n\x3cp\x3e上述步骤完成之后，就意味着我们的接口已经导出了，接下来我们首先要验证一下。我们打开index.android.js并在require的模块中，增加一个NativeModules(如图2.1)\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NK\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NK\x22 alt=\x22111942_5pb0_1177792.png\x22 title=\x22111942_5pb0_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.1\x3c\/p\x3e\n\x3cp\x3eNativeModules中存放着我们可以调用的native模块，还记得当时定义我们的扩展时，起的名字是什么吗？\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NL\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NL\x22 alt=\x22112207_1Ffr_1177792.png\x22 title=\x22112207_1Ffr_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.2\x3c\/p\x3e\n\x3cp\x3e对！就是\x22MyExtension\x22，既然已经注册好了，那么我们就在js中看看，是否已经有了呢？我们挑一个地方（本例中使用的是在constructor里）打印一下，看看是否已经有了呢(如图2.3)。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NP\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NP\x22 alt=\x22112102_geIu_1177792.png\x22 title=\x22112102_geIu_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.3\x3c\/p\x3e\n\x3cp\x3e我们使用debug js，在chrome中调起调试界面（如果还不会使用，我们接下来的章节里会详细讲解，跟着我看看变量即可，如图2.4）:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NR\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NR\x22 alt=\x22112532_kLo8_1177792.png\x22 title=\x22112532_kLo8_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.4\x3c\/p\x3e\n\x3cp\x3e可以看下图2.5，我们成功的看到了当时我们导出的open函数：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NS\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NS\x22 alt=\x22112733_BcpG_1177792.png\x22 title=\x22112733_BcpG_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.5\x3c\/p\x3e\n\x3cp\x3egood！！！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e3 尝试调用我们导出的open方法\x3c\/h2\x3e\n\x3cp\x3e上一步中，我们惊喜的看到我们在java中定义的open方法已经能在控制台看到了。接下来，我们在点击list的时候，去调用一下open方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class hellowReact extends Component {\n  constructor(props) {\n    console.log(NativeModules.MyExtension);\n    super(props);\n    var list = new ListView.DataSource({rowHasChanged: (r1, r2) =\x3e r1 !== r2});\n    this.state = { \n      list: list.cloneWithRows([\x27hello\x27, \x27react\x27, \x27this\x27, \x27is\x27, \x27my\x27, \x27listView\x27])\n    };  \n  }\n  oneRow(oneItem) {\n    return \x3cText\x3e{oneItem}\x3c\/Text\x3e;\n  }\n  seeDetail() {\n    NativeModules.MyExtension.open();\n  }\n  render() {\n    return (\n      \x3cView style={styles.container}\x3e\n        \x3cListView\n          dataSource={this.state.list}\n          renderRow={this.oneRow}\n          onTouchEnd={this.seeDetail}\n        \/\x3e  \n      \x3c\/View\x3e\n    );  \n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehellowReact\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(NativeModules.MyExtension);\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e list = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ListView.DataSource({\x3cspan class=\x22hljs-attr\x22\x3erowHasChanged\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3er1, r2\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e r1 !== r2});\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = { \n      \x3cspan class=\x22hljs-attr\x22\x3elist\x3c\/span\x3e: list.cloneWithRows([\x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27this\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27is\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27my\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27listView\x27\x3c\/span\x3e])\n    };  \n  }\n  oneRow(oneItem) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eText\x3c\/span\x3e\x26gt;\x3c\/span\x3e{oneItem}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eText\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n  seeDetail() {\n    NativeModules.MyExtension.open();\n  }\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eView\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.container}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eListView\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3edataSource\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.state.list}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3erenderRow\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.oneRow}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eonTouchEnd\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.seeDetail}\x3c\/span\x3e\n        \/\x26gt;\x3c\/span\x3e  \n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eView\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );  \n  }\n}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接着，我们重新运行一下，效果如图3.1与图3.2\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NV\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NV\x22 alt=\x22114239_Yeqf_1177792.png\x22 title=\x22114239_Yeqf_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图3.1\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVz8NY\x22 src=\x22https:\/\/static.alili.tech\/img\/bVz8NY\x22 alt=\x22114304_ZQmn_1177792.png\x22 title=\x22114304_ZQmn_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图3.2\x3c\/p\x3e\n\x3cp\x3e于是乎，我们看到了运行的效果。下一章，我们会一起看看react-native中，js调用原生代码的原理。\x3c\/p\x3e\n\x3cp\x3e本文中所用的例子，可以在这里找到：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/houyu01\/react-native-android-tutorial\/tree\/master\/helloReactJsCall\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/houyu01\/re...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e下一节，我们将一起讨论一下，上述调用的RN底层原理，非常浅显易懂，不要错过：\x3c\/p\x3e\n\x3cp\x3e原创文章,版权所有,转载请注明出处\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>[React Native Android 安利系列]RN中使用js调用java代码</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006191310">https://segmentfault.com/a/1190000006191310</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mtccujmdz8f/" target="_blank">https://alili.tech/archive/mtccujmdz8f/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>