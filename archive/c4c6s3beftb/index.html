<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【PWA学习与实践】(4) 解决FireBase login验证失败问题"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【PWA学习与实践】(4) 解决FireBase login验证失败问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/c4c6s3beftb/",
				"appid": "1613049289050283", 
				"title": "【PWA学习与实践】(4) 解决FireBase login验证失败问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-15T02:30:44"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/a2rlb5a200l/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ayk02krko6o/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&text=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&text=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&title=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&is_video=false&description=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&title=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&title=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&title=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc4c6s3beftb%2f&title=%e3%80%90PWA%e5%ad%a6%e4%b9%a0%e4%b8%8e%e5%ae%9e%e8%b7%b5%e3%80%91%284%29%20%e8%a7%a3%e5%86%b3FireBase%20login%e9%aa%8c%e8%af%81%e5%a4%b1%e8%b4%a5%e9%97%ae%e9%a2%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【PWA学习与实践】(4) 解决FireBase login验证失败问题</h1><div class="meta"><div class="postdate"><time datetime="2019-02-15" itemprop="datePublished">2019-02-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e《PWA学习与实践》系列文章已整理至\x3ca href=\x22https:\/\/alienzhou.gitbook.io\/learning-pwa\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egitbook - PWA学习手册\x3c\/a\x3e，文字内容已同步至\x3ca href=\x22https:\/\/github.com\/alienzhou\/learning-pwa-ebook\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elearning-pwa-ebook\x3c\/a\x3e。转载请注明作者与出处。\x3c\/blockquote\x3e\n\x3cp\x3e本文是\x3ca href=\x22https:\/\/juejin.im\/user\/59ad5377518825244d206d2d\/posts\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《PWA学习与实践》\x3c\/a\x3e系列的第四篇。是我在测试其他demo时遇到的一个问题，算是一篇TroubleShooting。\x3c\/p\x3e\n\x3cp\x3ePWA作为时下最火热的技术概念之一，对提升Web应用的安全、性能和体验有着很大的意义，非常值得我们去了解与学习。对PWA感兴趣的朋友欢迎关注《PWA学习与实践》系列文章。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e引言\x3c\/h2\x3e\n\x3cp\x3e在前一篇文章\x3ca href=\x22https:\/\/juejin.im\/post\/5aca14b6f265da237c692e6f\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《让你的WebApp离线可用》\x3c\/a\x3e中，我们使用Service Worker来做缓存与离线支持。是有一个重要的问题：\x3cstrong\x3eService Worker必须要在HTTPS协议下才能运行（或者localhost）\x3c\/strong\x3e。当然，对于一些只有前端资源（不涉及后端服务）的demo，我们完全可以将这些前端（静态资源）托管在一个HTTPS服务下，使得Service Worker可以使用。我选择了google的\x3ca href=\x22https:\/\/firebase.google.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFireBase\x3c\/a\x3e来托管demo（其实github page也是个不错的选择）。\x3c\/p\x3e\n\x3cp\x3e使用FireBase非常简单，只需要\x3ccode\x3efirebase login\x3c\/code\x3e --\x26gt;\x3ccode\x3efirebase init\x3c\/code\x3e--\x26gt;\x3ccode\x3efirebase deploy\x3c\/code\x3e即可。但是在\x3ccode\x3efirebase login\x3c\/code\x3e的过程中，遇到了一些问题。这篇文章主要总结了我在\x3ccode\x3efirebase login\x3c\/code\x3e遇到的问题及解决方式：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e无法获取authorization code\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e Authentication Error: Your credentials are no longer valid.\x3c\/code\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e有需要的朋友可以继续看。\x3c\/p\x3e\n\x3cp\x3e首先，如果你对firebase完全不了解，下面会有一段非常简短的介绍。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e什么是FireBase\x3c\/h2\x3e\n\x3cp\x3e前段时间学习PWA，在跟着官方教程完成demo后，想要在手机上测试一下效果。然而，遇到的一个问题就是：PWA需要HTTPS协议（或者使用localhost）。\x3c\/p\x3e\n\x3cp\x3e这就需要我们有一个HTTPS的服务，并在其上面部署我们本地写好的demo。而官方demo的最后，推荐使用firebase来托管你的代码。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916593?w=700\x26amp;h=394\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916593?w=700\x26amp;h=394\x22 alt=\x22FireBase的各种功能与服务\x22 title=\x22FireBase的各种功能与服务\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在FireBase的众多使用场景中，Develop -\x26gt; Hosting（托管）就是我需要用到的了。然而，在执行\x3ccode\x3efirebase login\x3c\/code\x3e（账号登录）过程中，却遇到了一些问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e问题一：在浏览器登录账号后，无反应（无法获取authorization code）\x3c\/h2\x3e\n\x3cp\x3e最开始，我在CLI中输入\x3ccode\x3efirebase login\x3c\/code\x3e，选择\x3ccode\x3ey\x3c\/code\x3e后，CLI会需要一个authorization code；而浏览器会打开并提示你进行登录。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916594?w=1171\x26amp;h=158\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916594?w=1171\x26amp;h=158\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这里我用google账户进行授权登录。然而，在授权之后，却迟迟没有响应（无法得到authorization code）。这时候，我发现浏览器显示，似乎是在等待\x3ccode\x3elocalhost\x3c\/code\x3e进行响应。\x3c\/p\x3e\n\x3cp\x3e解决这个问题的方法就是：在登录时，使用\x3ccode\x3efirebase login --no-localhost\x3c\/code\x3e进行登录。\x3c\/p\x3e\n\x3cp\x3e重新使用\x3ccode\x3efirebase login --no-localhost\x3c\/code\x3e登录。这里我选择了google账号进行登录，重复上面的过程：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916594?w=1171\x26amp;h=158\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916594?w=1171\x26amp;h=158\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916595?w=508\x26amp;h=563\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916595?w=508\x26amp;h=563\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916596?w=484\x26amp;h=685\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916596?w=484\x26amp;h=685\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这次，你就会在浏览器中获得一串authorization code值：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916597?w=1240\x26amp;h=178\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916597?w=1240\x26amp;h=178\x22 alt=\x22authorization code\x22 title=\x22authorization code\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e将它粘贴到CLI中即可。【问题一】解决！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e问题二：Error: Authentication Error: Your credentials are no longer valid.\x3c\/h2\x3e\n\x3cp\x3e然而，在CLI中输入authorization code之后，在等待了较长时间的验证后，CLI中报出了如下错误：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916598?w=1240\x26amp;h=165\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916598?w=1240\x26amp;h=165\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是怎么回事呢？通过查阅一些资料发现，这很可能是你在电脑上使用“翻墙”工具所导致的。firebase-tool依赖的npm包（faye-websocket）中，未开启代理的相关设置，因此无法进行验证。\x3c\/p\x3e\n\x3cp\x3e解决这个问题的方法有两种：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e方法一：在路由器上设置代理，而非本机\x3c\/h3\x3e\n\x3cp\x3e有些文章指出，通过在路由器上设置代理，而非在本机开启代理，可以避免这个问题。不过由于一些原因，暂时还没有尝试这种方式，不过通过一些反馈来看，应该是一个有效的方法。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e方法二：(hack) 修改代码与相关环境变量\x3c\/h3\x3e\n\x3cp\x3e该方法较第一种方法来看，会稍微“硬”那么一些。具体的操作方式如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e设置环境变量\x3ccode\x3ehttp_proxy\x3c\/code\x3e，我本机的代理使用的是1087端口。\x3ccode\x3eexport http_proxy=http:\/\/localhost:1087\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e修改faye-websocket，开启代理配置。faye-websocket是firebase依赖的一个WebSocket库，需要为其client.js添加如下配置：\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Client = function(_url, protocols, options) {\n    options = options || {};\n    \/\/ 添加proxy配置\n    options.proxy = {\n        origin:  \x27http:\/\/localhost:1087\x27,\n    };\n    …\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Client = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_url, protocols, options\x3c\/span\x3e) \x3c\/span\x3e{\n    options = options || {};\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加proxy配置\x3c\/span\x3e\n    options.proxy = {\n        \x3cspan class=\x22hljs-attr\x22\x3eorigin\x3c\/span\x3e:  \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:1087\x27\x3c\/span\x3e,\n    };\n    …\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你是全局安装的firebase-tools，你可以通过如下方法找到client.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22NODE_PATH=`npm prefix -g`\n\/\/ client.js的位置\n$NODE_PATH\/lib\/node_modules\/firebase-tools\/node_modules\/firebase\/node_modules\/faye-websocket\/lib\/faye\/websocket\/client.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crystal\x22\x3e\x3ccode\x3eNODE_PATH=\x3cspan class=\x22hljs-string\x22\x3e`npm prefix -g`\x3c\/span\x3e\n\/\x3cspan class=\x22hljs-regexp\x22\x3e\/ client.js的位置\n$NODE_PATH\/lib\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/firebase\x3c\/span\x3e-tools\/node_modules\/firebase\/node_modules\/faye-websocket\/\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elib\x3c\/span\x3e\/\x3cspan class=\x22hljs-title\x22\x3efaye\x3c\/span\x3e\/\x3cspan class=\x22hljs-title\x22\x3ewebsocket\x3c\/span\x3e\/\x3cspan class=\x22hljs-title\x22\x3eclient\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3ejs\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\n\x3cli\x3e设置环境变量NODE_TLS_REJECT_UNAUTHORIZED。\x3ccode\x3eexport NODE_TLS_REJECT_UNAUTHORIZED=0\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e重新登录，\x3ccode\x3efirebase login --no-localhost\x3c\/code\x3e，重复之前的操作。你会发现，登录成功！\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016916599?w=1177\x26amp;h=219\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016916599?w=1177\x26amp;h=219\x22 alt=\x22image.png\x22 title=\x22image.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e【问题二】解决！\x3c\/p\x3e\n\x3cp\x3ep.s. 针对这个问题，github上也有一个issue：\x3ca href=\x22https:\/\/github.com\/firebase\/firebase-tools\/issues\/155\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUnable to deploy behind a proxy\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e此外，如果你使用了代理，推荐使用全局代理的方式，使你的CLI也使用代理。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e最后，还是回到我开发PWA时的需求。文章最开始提到了，我是为了在移动端测试PWA demo的效果，所以使用FireBase来托管资源。当然，除了FireBase，还有下面两个办法：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e使用github page。由于github全站都是运行在HTTPS下，因此在github page上托管的静态站点可以使用Service Worker；\x3c\/li\x3e\n\x3cli\x3e使用localhost\/127.0.0.1。了解PWA的话，你会知道除了HTTPS之外，也可以使用localhost（这一设计是为了方便本机调试）。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e本文是\x3ca href=\x22https:\/\/juejin.im\/user\/59ad5377518825244d206d2d\/posts\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《PWA学习与实践》\x3c\/a\x3e系列中的第四篇。这篇文章并没有探讨PWA中实际的技术，而是记录了我在开发、调试P过程与遇到的问题。可能有朋友也会遇到类似问题，因此记录下来和大家分享。\x3c\/p\x3e\n\x3cp\x3e在下一篇文章中，我们还是会回到PWA背后的技术，来了解一下，\x3cstrong\x3e如何使用Push API来实现后端服务向客户端进行消息推送\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e《PWA学习与实践》系列文章\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5ac8a89ef265da238440d60a\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第一篇：2018，开始你的PWA学习之旅\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5ac8a67c5188255c5668b0b8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第二篇：10分钟学会使用Manifest，让你的WebApp更“Native”\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5aca14b6f265da237c692e6f\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第三篇：从今天开始，让你的WebApp离线可用\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e第四篇：TroubleShooting: 解决FireBase login验证失败问题（本文）\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5accd1355188252b0b201fb9\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第五篇：与你的用户保持联系: Web Push功能\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5ae56f926fb9a07aca79edf6\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第六篇：How to Debug? 在chrome中调试你的PWA\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5ae7f7fd518825670960fe96\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第七篇：增强交互：使用Notification API来进行提醒\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5af80c336fb9a07aab29f19c\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第八篇：使用Service Worker进行后台数据同步\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5b02e5f1f265da0b767dc81d\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第九篇：PWA实践中的问题与解决方案\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/5b4b66f0f265da0f9155feb6\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e第十篇：Resource Hint - 提升页面加载性能与体验\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e第十一篇：从PWA离线工具集workbox中学习各类离线策略（写作中…）\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【PWA学习与实践】(4) 解决FireBase login验证失败问题</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016916590">https://segmentfault.com/a/1190000016916590</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/c4c6s3beftb/" target="_blank">https://alili.tech/archive/c4c6s3beftb/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>