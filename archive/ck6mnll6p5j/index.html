<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="写一个 Chrome 扩展之 Flat Weibo —— 简洁你的微博世界"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>写一个 Chrome 扩展之 Flat Weibo —— 简洁你的微博世界 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ck6mnll6p5j/",
				"appid": "1613049289050283", 
				"title": "写一个 Chrome 扩展之 Flat Weibo —— 简洁你的微博世界 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-12T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v0zwmlt9l0e/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/isbimzvk53f/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&text=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&text=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&title=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&is_video=false&description=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&title=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&title=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&title=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fck6mnll6p5j%2f&title=%e5%86%99%e4%b8%80%e4%b8%aa%20Chrome%20%e6%89%a9%e5%b1%95%e4%b9%8b%20Flat%20Weibo%20%e2%80%94%e2%80%94%20%e7%ae%80%e6%b4%81%e4%bd%a0%e7%9a%84%e5%be%ae%e5%8d%9a%e4%b8%96%e7%95%8c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">写一个 Chrome 扩展之 Flat Weibo —— 简洁你的微博世界</h1><div class="meta"><div class="postdate"><time datetime="2019-02-12" itemprop="datePublished">2019-02-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e0x00. 前言\x3c\/h2\x3e\n\x3cp\x3e微博现在也是变得越来越臃肿，广告越来越多，早已不再是“微”博了，这让微博深度用户的我感到十分焦灼。由于之前就尝试写过 Chrome 插件，于是便想到了这样的解决方案。Flat Weibo，简洁你的微博！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e0x01. 概览\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e去除两边的各种推荐\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e去除部分广告\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e重置顶部导航样式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e修改背景\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e修改微博流样式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e其他\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtUTu\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtUTu\x22 alt=\x22flat-weibo.png\x22 title=\x22flat-weibo.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e0x02. 下载 \x26amp; 安装\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e下载\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/chrome.google.com\/webstore\/detail\/flat-weibo\/plmimfmefmleomdhkjabaiphhfdnobop\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eChrome 应用商店\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/pan.baidu.com\/s\/1miEOqJe\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e百度云\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e安装\x3c\/h3\x3e\n\x3cp\x3e由于 Chrome 目前禁止第三方插件的安装，所以需在 Chrome 里依次点击 \x3cstrong\x3e菜单\x3c\/strong\x3e \x3cstrong\x3e更多工具\x3c\/strong\x3e \x3cstrong\x3e扩展程序\x3c\/strong\x3e 然后打开 \x3cstrong\x3e开发者模式\x3c\/strong\x3e，将插件拖进来然后会自动安装。\x3c\/p\x3e\n\x3cp\x3e安装成功后插件即生效，更多自定义功能稍后便来 ~\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e0x03. 写一个 Chrome 扩展\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e源码\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/PuYart\/flat-weibo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGitHub - Flat Weibo\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eChrome 扩展是什么？\x3c\/h3\x3e\n\x3cp\x3eChrome 扩展允许你在 Chrome 中使用 JavaScript 来对网页、浏览器、本地存储等内容进行访问和更改，对应的 Firefox 也有自己的扩展程序。本文章的扩展只针对 Chrome 而言。\x3c\/p\x3e\n\x3cp\x3eChrome 扩展是一系列文件的集合，这些文件包括 HTML 文件、CSS 样式文件、JavaScript 脚本文件、图片等静态文件以及 manifest.json（清单文件）。\x3c\/p\x3e\n\x3cp\x3e扩展被安装后，Chrome 就会读取扩展中的 manifest.json 文件。这个文件的文件名固定为 manifest.json，内容是按照一定格式描述的扩展相关信息，如扩展名称、版本、更新地址、请求的权限、扩展的 UI 界面入口等等。这样 Chrome 就可以知道在浏览器中如何呈现这个扩展，以及这个扩展如何同用户进行交互。\x3c\/p\x3e\n\x3cp\x3e一般而言，Chrome 扩展会对用户浏览的页面进行相应的 DOM 操作和一些数据传递，本案例 Flat Weibo 的本质是，当用户浏览网页版微博时，Chrome 扩展会向当前页面注入预先写好的 CSS，这样便对微博网页版进行了样式重构。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3emanifest.json（清单文件）\x3c\/h3\x3e\n\x3cp\x3e每个 Chrome 扩展都包含一个 manifest 文件，Chrome 会从该文件中读取本扩展的相关信息，是扩展的入口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;manifest_version\x26quot;: 2,                  \/\/ manifest 版本，当前只能为 2\n  \x26quot;name\x26quot;: \x26quot;Flat Weibo\x26quot;,                   \/\/ 扩展名\n  \x26quot;version\x26quot;: \x26quot;1.0.0\x26quot;,                     \/\/ 扩展版本号\n  \x26quot;description\x26quot;: \x26quot;简洁你的微博，去除烦人的微博推荐和广告，让微博更加扁平，更加简单明了\x26quot;,  \/\/ 扩展描述\n  \x26quot;icons\x26quot;: {                              \/\/ 扩展图标\n    \x26quot;16\x26quot;: \x26quot;img\/icon\/icon_16.png\x26quot;,\n    \x26quot;48\x26quot;: \x26quot;img\/icon\/icon_48.png\x26quot;,\n    \x26quot;128\x26quot;: \x26quot;img\/icon\/icon_128.png\x26quot;\n  },\n  \x26quot;browser_action\x26quot;: {                     \/\/ 添加图标按钮至 Chrome 工具条\n    \x26quot;default_icon\x26quot;: {                     \/\/ 图标\n      \x26quot;19\x26quot;: \x26quot;img\/icon\/icon_19.png\x26quot;,\n      \x26quot;38\x26quot;: \x26quot;img\/icon\/icon_38.png\x26quot;\n    },\n    \x26quot;default_title\x26quot;: \x26quot;开启简洁微博世界\x26quot;,     \/\/ 按钮标题，鼠标移动至按钮上会显示\n    \x26quot;default_popup\x26quot;: \x26quot;popup.html\x26quot;         \/\/ 点击按钮呈现的页面\n  },\n  \x26quot;content_scripts\x26quot;: [                    \/\/ 被注入的脚本\n    {\n      \x26quot;matches\x26quot;: [                        \/\/ 匹配被注入的条件\n        \x26quot;*:\/\/weibo.com\/*\x26quot;,\n        \x26quot;*:\/\/www.weibo.com\/*\x26quot;\n      ],\n      \x26quot;css\x26quot;: [                            \/\/ 被注入的 css\n        \x26quot;css\/flat-weibo.css\x26quot;\n      ]\n    }\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22manifest_version\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ manifest 版本，当前只能为 2\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Flat Weibo\x22\x3c\/span\x3e,                   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 扩展名\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22version\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x221.0.0\x22\x3c\/span\x3e,                     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 扩展版本号\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22description\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22简洁你的微博，去除烦人的微博推荐和广告，让微博更加扁平，更加简单明了\x22\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 扩展描述\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22icons\x22\x3c\/span\x3e: {                              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 扩展图标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x2216\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22img\/icon\/icon_16.png\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x2248\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22img\/icon\/icon_48.png\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22128\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22img\/icon\/icon_128.png\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-string\x22\x3e\x22browser_action\x22\x3c\/span\x3e: {                     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加图标按钮至 Chrome 工具条\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22default_icon\x22\x3c\/span\x3e: {                     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图标\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x2219\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22img\/icon\/icon_19.png\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x2238\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22img\/icon\/icon_38.png\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22default_title\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22开启简洁微博世界\x22\x3c\/span\x3e,     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 按钮标题，鼠标移动至按钮上会显示\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22default_popup\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22popup.html\x22\x3c\/span\x3e         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 点击按钮呈现的页面\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-string\x22\x3e\x22content_scripts\x22\x3c\/span\x3e: [                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 被注入的脚本\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22matches\x22\x3c\/span\x3e: [                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配被注入的条件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22*:\/\/weibo.com\/*\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22*:\/\/www.weibo.com\/*\x22\x3c\/span\x3e\n      ],\n      \x3cspan class=\x22hljs-string\x22\x3e\x22css\x22\x3c\/span\x3e: [                            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 被注入的 css\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22css\/flat-weibo.css\x22\x3c\/span\x3e\n      ]\n    }\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\n\x3cp\x3e更多关于清单文件的介绍请访问\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/open.chrome.360.cn\/extension_dev\/manifest.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/open.chrome.360.cn\/extension_dev\/...\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.ituring.com.cn\/article\/60136\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ituring.com.cn\/article\/60136\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3ecss\x3c\/h3\x3e\n\x3cp\x3e本扩展的核心部分便是被注入到页面中的 CSS，核心思想是分析页面 DOM 结构，编写新样式，进行注入。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtUR6\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtUR6\x22 alt=\x22weibo-home.png\x22 title=\x22weibo-home.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如上图所示，两个红框标出了一些我们不愿意看到的东西，我们先分析一下这两部分的 DOM 结构。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtUSj\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtUSj\x22 alt=\x22weibo-home-input-ad.png\x22 title=\x22weibo-home-input-ad.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以看到这个烦人的推荐位所对应的节点为 \x3ccode\x3e.send_weibo .key\x3c\/code\x3e，既然拿到了 DOM 节点，就可以这么写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.send_weibo .key {\n  display: none;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.send_weibo\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.key\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是不是很简单，很机智呢，直接让我们不想看到的东西隐藏就好了！\x3c\/p\x3e\n\x3cp\x3e同样的，我们审查一下右侧推荐位的 DOM 结构。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtUSI\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtUSI\x22 alt=\x22weibo-home-rightmod-ad.png\x22 title=\x22weibo-home-rightmod-ad.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e于是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#v6_pl_rightmod_rank {\n  display: none;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-id\x22\x3e#v6_pl_rightmod_rank\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e处理之后就是这个样子，我们看到 \x3ccode\x3e#v6_pl_rightmod_rank\x3c\/code\x3e 的 \x3ccode\x3eStyles\x3c\/code\x3e 中出现了一个标有 \x3cem\x3einjected stylesheet\x3c\/em\x3e 的样式（中间红框），这个便是我们在 Chrome 扩展中向页面注入的 CSS。同样的我们看到左边红框和 \x3ccode\x3e#v6_pl_rightmod_rank\x3c\/code\x3e 同级有许多 \x3ccode\x3ediv\x3c\/code\x3e 标签，采用同样的方法就可以让右侧只剩下个人信息了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtUSV\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtUSV\x22 alt=\x22weibo-home-rightmod-after.png\x22 title=\x22weibo-home-rightmod-after.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e采用这样的方法依次处理所有你不想看到的元素，你的微博便会简洁很多。由于需要更改的样式比较复杂，因此使用了 SASS 进行预处理 CSS，也因此使用了 gulp 来进行自动化构建。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/PuYart\/flat-weibo\/blob\/master\/src\/scss\/flat-weibo.scss\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e本例中的 scss 在这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eSASS 是一个 CSS 预处理器，它允许选择器嵌套、使用一些简单的逻辑运算进行编写 CSS，功能十分强大，但语法也很简单。\x3cbr\x3egulp 是一个前端自动化构建工具，有丰富的插件供你使用，本例中便使用 \x3ccode\x3egulp-sass\x3c\/code\x3e 来编译 scss，使用 \x3ccode\x3egulp-autoprefixer\x3c\/code\x3e 给 css 添加浏览器前缀\x3cbr\x3e\x3ca href=\x22http:\/\/www.w3cplus.com\/sassguide\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esass 入门\x3c\/a\x3e\/\x3ca href=\x22http:\/\/www.w3cplus.com\/sassguide\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egulp.js 入门\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e开发 \x26amp; 构建\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e安装依赖\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3enpm install\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e开发\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3enpm run dev\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e构建\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3enpm run build\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e0x04. TODO\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e添加自定义主题色\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e添加更改布局\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e添加模块显示\/隐藏选择\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e0x05. 学习参考资料\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.ituring.com.cn\/minibook\/950\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eChrome 扩展及应用开发\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/open.chrome.360.cn\/extension_dev\/overview.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eChrome 开发文档中文版\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>写一个 Chrome 扩展之 Flat Weibo —— 简洁你的微博世界</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004707879">https://segmentfault.com/a/1190000004707879</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ck6mnll6p5j/" target="_blank">https://alili.tech/archive/ck6mnll6p5j/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>