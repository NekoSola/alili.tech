<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="通过javascript进行UTF-8编码"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>通过javascript进行UTF-8编码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mircczubcwc/",
				"appid": "1613049289050283", 
				"title": "通过javascript进行UTF-8编码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-08T02:30:41"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6dor15awrdf/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/h6dbr4yrxkl/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&text=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&text=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&title=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&is_video=false&description=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&title=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&title=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&title=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmircczubcwc%2f&title=%e9%80%9a%e8%bf%87javascript%e8%bf%9b%e8%a1%8cUTF-8%e7%bc%96%e7%a0%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">通过javascript进行UTF-8编码</h1><div class="meta"><div class="postdate"><time datetime="2019-02-08" itemprop="datePublished">2019-02-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e通过javascript进行UTF-8编码\x3c\/h2\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3ejavascript的字符集：\x3c\/h3\x3e\n\x3cp\x3ejavascript程序是使用\x3ccode\x3eUnicode\x3c\/code\x3e字符集编写的。\x3ccode\x3eUnicode\x3c\/code\x3e是\x3ccode\x3eASCII\x3c\/code\x3e和\x3ccode\x3eLatin-1\x3c\/code\x3e的超集，并支持地球上几乎所有的语言。\x3ccode\x3eECMAScript3\x3c\/code\x3e要求JavaScript必须支持\x3ccode\x3eUnicode2.1\x3c\/code\x3e及后续版本，\x3ccode\x3eECMAScript5\x3c\/code\x3e则要求支持\x3ccode\x3eUnicode3\x3c\/code\x3e及后续版本。所以，我们编写出来的javascript程序，都是使用Unicode编码的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eUTF-8\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eUTF-8（UTF8-bit Unicode Transformation Format）\x3c\/code\x3e是一种针对Unicode的可变长度字符编码，也是一种前缀码。\x3c\/p\x3e\n\x3cp\x3e它可以用来表示Unicode标准中的任何字符，且其编码中的\x3ccode\x3e第一个字节仍与ASCII兼容\x3c\/code\x3e，这使得原来处理ASCII字符的软件无须或只须做少部分修改，即可继续使用。因此，\x3ccode\x3e它逐渐成为电子邮件、网页及其他存储或发送文字的应用中，优先采用的编码\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e目前大部分的网站，都是使用的UTF-8编码。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e将javascript生成的Unicode编码字符串转为UTF-8编码的字符串\x3c\/h3\x3e\n\x3cp\x3e如标题所说的应用场景十分常见，例如发送一段二进制到服务器时，服务器规定该二进制内容的编码必须为UTF-8。这种情况下，我们必须就要通过程序将javascript的Unicode字符串转为UTF-8编码的字符串。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e转换方法\x3c\/h3\x3e\n\x3cp\x3e转换之前我们必须了解Unicode的编码结构是固定的。\x3cbr\x3e\x3cem\x3e不信可以试一试 String 的 charCodeAt 这个方法，看看返回的 charCode 占几个字节。\x3c\/em\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\x3cli\x3e\x3cp\x3e英文占1个字符，汉字占2个字符\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3e然而，UTF-8的编码结构长度是\x3ccode\x3e根据某单个字符的大小\x3c\/code\x3e来决定长度有多少。\x3cbr\x3e下面为单个字符的大小占用几个字节。单个unicode字符编码之后的最大长度为6个字节。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3e1个字节：Unicode码为0 - 127\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2个字节：Unicode码为128 - 2047\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e3个字节：Unicode码为2048 - 0xFFFF\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e4个字节：Unicode码为65536 - 0x1FFFFF\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e5个字节：Unicode码为0x200000 - 0x3FFFFFF\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e6个字节：Unicode码为0x4000000 - 0x7FFFFFFF\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3e具体请看图片：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyttX\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyttX\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因为英文和英文字符的Unicode码为\x3ccode\x3e0 - 127\x3c\/code\x3e，所以英文在Unicode和UTF-8中的长度和字节都是一致的，只占用1个字节。这也就是为什么\x3ccode\x3eUTF8是Unicode的超集\x3c\/code\x3e！\x3c\/p\x3e\n\x3cp\x3e现在我们再来讨论汉字，因为汉字的unicode码区间为\x3ccode\x3e0x2e80 - 0x9fff\x3c\/code\x3e, 所以汉字在UTF8中的长度最长为3个字节。\x3c\/p\x3e\n\x3cp\x3e那么汉字是如何从Unicode的2个字节转换为UTF8的三个字节的哪？\x3c\/p\x3e\n\x3cp\x3e假设我需要把汉字\x22中\x22转为UTF-8的编码\x3c\/p\x3e\n\x3ch4\x3e1、获取汉字Unicode值大小\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var str = \x27中\x27;\nvar charCode = str.charCodeAt(0);\nconsole.log(charCode); \/\/ =\x3e 20013\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e str = \x3cspan class=\x22hljs-string\x22\x3e\x27中\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e charCode = str.charCodeAt(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(charCode); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 20013\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2、根据大小判断UTF8的长度\x3c\/h4\x3e\n\x3cp\x3e由上一步我们得到汉字\x22中\x22的charCode为20013.然后我们发现20013位于2048 - 0xFFFF这个区间里，所以汉字\x22中\x22应该在UTF8中占3个字节。\x3c\/p\x3e\n\x3ch4\x3e3、补码\x3c\/h4\x3e\n\x3cp\x3e既然知道汉字\x22中\x22需要占3个字节，那么这3个字节如何得到哪？\x3c\/p\x3e\n\x3cp\x3e这就需要设计到补码，具体补码逻辑如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVytBT\x22 src=\x22https:\/\/static.alili.tech\/img\/bVytBT\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e好吧，我知道这个图你们也看不明白，还是我来讲吧！\x3c\/p\x3e\n\x3cp\x3e具体的补位码如下,\x22x\x22表示空位，用来补位的。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e\x3cp\x3e0xxxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e110xxxxx 10xxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e1110xxxx 10xxxxxx 10xxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3ewarning:有没有发现？补位码第一个字节前面有几个1就表示整个UTF-8编码占多少个字节！UTF-8解码为Unicode就是利用的这个特点哦～\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e我们先举个简单的例子。把英文字母\x22A\x22转为UTF8编码。\x3cbr\x3e1、“A”的charCode为65\x3cbr\x3e2、65位于0-127的区间，所以“A”占一个字节\x3cbr\x3e3、UTF8中一个字节的补位为0xxxxxxx，x表示的是空位，是用来补位的。\x3cbr\x3e4、将65转为二进制得到1000001\x3cbr\x3e5、将1000001按照从前到后的顺序，依次补到1xxxxxxx的空位中，得到01000001\x3cbr\x3e6、将11000001转为字符串，得到\x22A\x22\x3cbr\x3e7、最终，\x22A\x22为UTF8编码之后“A”\x3c\/p\x3e\n\x3cp\x3e通过这个小例子，我们是否再次验证了\x3ccode\x3eUTF-8是Unicode的超集\x3c\/code\x3e！\x3c\/p\x3e\n\x3cp\x3e好了，我们现在再回到汉字\x22中\x22上，之前我们已经得到了\x22中\x22的charCode为20013，二进制为\x3ccode\x3e01001110 00101101\x3c\/code\x3e。具体如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var code = 20013;\ncode.toString(2); \n\/\/ =\x3e 100111000101101 等同于 01001110 00101101\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3evar \x3cspan class=\x22hljs-keyword\x22\x3ecode\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e20013\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3ecode\x3c\/span\x3e.toString(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e); \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 100111000101101 等同于 01001110 00101101\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，我们按照上面“A”补位的方法，来给\x22中\x22补位。\x3cbr\x3e将\x3ccode\x3e01001110 00101101\x3c\/code\x3e按照从前到后的顺序依此补位到\x3ccode\x3e1110xxxx 10xxxxxx 10xxxxxx\x3c\/code\x3e上.得到\x3ccode\x3e11100100 10111000 10101101\x3c\/code\x3e.\x3c\/p\x3e\n\x3ch4\x3e4、得到UTF8编码的内容\x3c\/h4\x3e\n\x3cp\x3e通过上面的步骤，我们得到了\x22中\x22的三个UTF8字节，\x3ccode\x3e11100100 10111000 10101101\x3c\/code\x3e。\x3cbr\x3e我们将每个字节转为16进制，得到\x3ccode\x3e0xE4 0xB8 0xAD\x3c\/code\x3e;\x3cbr\x3e那么这个\x3ccode\x3e0xE4 0xB8 0xAD\x3c\/code\x3e就是我们最终得到的UTF8编码了。\x3c\/p\x3e\n\x3cp\x3e我们使用nodejs的buffer来验证一下是否正确。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var buffer = new Buffer(\x27中\x27); \nconsole.log(buffer.length); \/\/ =\x3e 3\nconsole.log(buffer); \/\/ =\x3e \x3cBuffer e4 b8 ad\x3e\n\/\/ 最终得到三个字节 0xe4 0xb8 0xad\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs glsl\x22\x3e\x3ccode\x3evar \x3cspan class=\x22hljs-keyword\x22\x3ebuffer\x3c\/span\x3e = new Buffer(\x27中\x27); \nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ebuffer\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 3\x3c\/span\x3e\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ebuffer\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; \x26lt;Buffer e4 b8 ad\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 最终得到三个字节 0xe4 0xb8 0xad\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为16进制是不分大小写的，所以是不是跟我们算出来\x3ccode\x3e0xE4 0xB8 0xAD\x3c\/code\x3e一模一样。\x3c\/p\x3e\n\x3ch4\x3e将上面的编码逻辑写到一个函数中。\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 将字符串格式化为UTF8编码的字节\nvar writeUTF = function (str, isGetBytes) {\n      var back = [];\n      var byteSize = 0;\n      for (var i = 0; i \x3c str.length; i\x2b\x2b) {\n          var code = str.charCodeAt(i);\n          if (0x00 \x3c= code \x26amp;\x26amp; code \x3c= 0x7f) {\n                byteSize \x2b= 1;\n                back.push(code);\n          } else if (0x80 \x3c= code \x26amp;\x26amp; code \x3c= 0x7ff) {\n                byteSize \x2b= 2;\n                back.push((192 | (31 \x26amp; (code \x3e\x3e 6))));\n                back.push((128 | (63 \x26amp; code)))\n          } else if ((0x800 \x3c= code \x26amp;\x26amp; code \x3c= 0xd7ff) \n                  || (0xe000 \x3c= code \x26amp;\x26amp; code \x3c= 0xffff)) {\n                byteSize \x2b= 3;\n                back.push((224 | (15 \x26amp; (code \x3e\x3e 12))));\n                back.push((128 | (63 \x26amp; (code \x3e\x3e 6))));\n                back.push((128 | (63 \x26amp; code)))\n          }\n       }\n       for (i = 0; i \x3c back.length; i\x2b\x2b) {\n            back[i] \x26amp;= 0xff;\n       }\n       if (isGetBytes) {\n            return back\n       }\n       if (byteSize \x3c= 0xff) {\n            return [0, byteSize].concat(back);\n       } else {\n            return [byteSize \x3e\x3e 8, byteSize \x26amp; 0xff].concat(back);\n        }\n}\n\nwriteUTF(\x27中\x27); \/\/ =\x3e  [0, 3, 228, 184, 173] \n\/\/ 前两位表示后面utf8字节的长度。因为长度为3，所以前两个字节为`0，3`\n\/\/ 内容为`228, 184, 173`转成16进制就是`0xE4 0xB8 0xAD`\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gauss\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将字符串格式化为UTF8编码的字节\x3c\/span\x3e\nvar writeUTF = function (str, isGetBytes) {\n      var back = [];\n      var byteSize = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; str.length; i\x2b\x2b) {\n          var \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e = str.charCodeAt(i);\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e0x00\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0x7f\x3c\/span\x3e) {\n                byteSize \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e0x80\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0x7ff\x3c\/span\x3e) {\n                byteSize \x2b= \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e((\x3cspan class=\x22hljs-number\x22\x3e192\x3c\/span\x3e | (\x3cspan class=\x22hljs-number\x22\x3e31\x3c\/span\x3e \x26amp; (\x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e))));\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e((\x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e | (\x3cspan class=\x22hljs-number\x22\x3e63\x3c\/span\x3e \x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e)))\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ((\x3cspan class=\x22hljs-number\x22\x3e0x800\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0xd7ff\x3c\/span\x3e) \n                  || (\x3cspan class=\x22hljs-number\x22\x3e0xe000\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0xffff\x3c\/span\x3e)) {\n                byteSize \x2b= \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e((\x3cspan class=\x22hljs-number\x22\x3e224\x3c\/span\x3e | (\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e \x26amp; (\x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e))));\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e((\x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e | (\x3cspan class=\x22hljs-number\x22\x3e63\x3c\/span\x3e \x26amp; (\x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e))));\n                back.\x3cspan class=\x22hljs-keyword\x22\x3epush\x3c\/span\x3e((\x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e | (\x3cspan class=\x22hljs-number\x22\x3e63\x3c\/span\x3e \x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ecode\x3c\/span\x3e)))\n          }\n       }\n       \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; back.length; i\x2b\x2b) {\n            back[i] \x26amp;= \x3cspan class=\x22hljs-number\x22\x3e0xff\x3c\/span\x3e;\n       }\n       \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isGetBytes) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e back\n       }\n       \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (byteSize \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0xff\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, byteSize].concat(back);\n       } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [byteSize \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, byteSize \x26amp; \x3cspan class=\x22hljs-number\x22\x3e0xff\x3c\/span\x3e].concat(back);\n        }\n}\n\nwriteUTF(\x27中\x27); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt;  [0, 3, 228, 184, 173] \x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 前两位表示后面utf8字节的长度。因为长度为3，所以前两个字节为`0，3`\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 内容为`228, 184, 173`转成16进制就是`0xE4 0xB8 0xAD`\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 读取UTF8编码的字节，并专为Unicode的字符串\nvar readUTF = function (arr) {\n    if (typeof arr === \x27string\x27) {\n        return arr;\n    }\n    var UTF = \x27\x27, _arr = this.init(arr);\n    for (var i = 0; i \x3c _arr.length; i\x2b\x2b) {\n        var one = _arr[i].toString(2),\n                v = one.match(\/^1\x2b?(?=0)\/);\n        if (v \x26amp;\x26amp; one.length == 8) {\n            var bytesLength = v[0].length;\n            var store = _arr[i].toString(2).slice(7 - bytesLength);\n            for (var st = 1; st \x3c bytesLength; st\x2b\x2b) {\n                store \x2b= _arr[st \x2b i].toString(2).slice(2)\n            }\n            UTF \x2b= String.fromCharCode(parseInt(store, 2));\n            i \x2b= bytesLength - 1\n        } else {\n            UTF \x2b= String.fromCharCode(_arr[i])\n        }\n    }\n    return UTF\n}\n\nreadUTF([0, 3, 228, 184, 173]); =\x3e \x27中\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 读取UTF8编码的字节，并专为Unicode的字符串\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e readUTF = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e arr === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arr;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e UTF = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, _arr = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init(arr);\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; _arr.length; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e one = _arr[i].toString(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n                v = one.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/^1\x2b?(?=0)\/\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (v \x26amp;\x26amp; one.length == \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bytesLength = v[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].length;\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e store = _arr[i].toString(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e).slice(\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e - bytesLength);\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e st = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; st \x26lt; bytesLength; st\x2b\x2b) {\n                store \x2b= _arr[st \x2b i].toString(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e).slice(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\n            }\n            UTF \x2b= \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e.fromCharCode(\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(store, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e));\n            i \x2b= bytesLength - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            UTF \x2b= \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e.fromCharCode(_arr[i])\n        }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e UTF\n}\n\nreadUTF([\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e228\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e184\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e173\x3c\/span\x3e]); =\x26gt; \x3cspan class=\x22hljs-string\x22\x3e\x27中\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e另外一种将中文解析得到UTF8字节码的方法\x3c\/h3\x3e\n\x3cp\x3e另外一种比较简单的将中文转为UTF8字节码的方法比较简单，浏览器也提供了一个方法，而且这个方法大家都一直在用，是什么哪？就是\x3ccode\x3eencodeURI\x3c\/code\x3e。当然，\x3ccode\x3eencodeURIComponent\x3c\/code\x3e也是可以的。\x3cbr\x3e没错，就是这个方法。那么这个方法是怎么将一个Unicode编码的中文转为UTF8的字节码嘞？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var str = \x27中\x27;\n\nvar code = encodeURI(str);\n\nconsole.log(code); \/\/ =\x3e %E4%B8%AD\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e str = \x3cspan class=\x22hljs-string\x22\x3e\x27中\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = \x3cspan class=\x22hljs-built_in\x22\x3eencodeURI\x3c\/span\x3e(str);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(code); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; %E4%B8%AD\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有没有发现得到了一个转义后的字符串，而且这个字符串中的内容和我之前在上面得到的字节码是一样的～～～。\x3c\/p\x3e\n\x3cp\x3e下面我们将\x3ccode\x3e%E4%B8%AD\x3c\/code\x3e转为一个number数组。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var codeList = code.split(\x27%\x27);\n\ncodeList = codeList.map(item =\x3e parseInt(item,16));\n\nconsole.log(codeList); \/\/ =\x3e [228, 184, 173]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e codeList = code.split(\x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e);\n\ncodeList = codeList.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(item,\x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e));\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(codeList); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; [228, 184, 173]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如此简单，有木有～～～\x3c\/p\x3e\n\x3ch4\x3e这个简便方法的原理是什么？\x3c\/h4\x3e\n\x3cp\x3e这里就涉及到的\x3ccode\x3eURI\x3c\/code\x3e中的\x3ccode\x3equerystring\x3c\/code\x3e编码的问题了。因为按照规定，URI中的querystring必须按照UTF8的编码进行传输，而JavaScript是Unicode的，所以浏览器就给我们提供了一个方法，也就是\x3ccode\x3eencodeURI\x3c\/code\x3e\/\x3ccode\x3eencodeURIComponent\x3c\/code\x3e方法。这个方法会讲\x3ccode\x3e非英文字符\x3c\/code\x3e(\x3cem\x3e这里考虑下，为什么是非英文字符？\x3c\/em\x3e)先转为UTF8的字节码，然后前面加个%进行拼接，所以我们将汉字\x3ccode\x3e\x22中\x22\x3c\/code\x3e转义下便得到了\x3ccode\x3e\x22%E4%B8%AD\x22\x3c\/code\x3e.\x3cbr\x3e好吧，原理就这些，没有其他的了。\x3c\/p\x3e\n\x3cp\x3e不过，这种方法还有个缺点，那就是\x3ccode\x3e只会转义非英文字符\x3c\/code\x3e，所以当我们需要将英文字符也格式化为UTF8编码时，这个方法是达不到我们需求的，我们还需要额外的将英文字符也给转义下。\x3c\/p\x3e\n\x3cp\x3e那我想要解析回来应该怎么做哪？用\x3ccode\x3edecodeURI\x3c\/code\x3e\/\x3ccode\x3edecodeURIComponent\x3c\/code\x3e就可以了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var codeList = [228, 184, 173];\n\nvar code = codeList.map(item =\x3e \x27%\x27\x2bitem.toString(16)).join(\x27\x27);\n\ndecodeURI(code); \/\/ =\x3e 中\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e codeList = [\x3cspan class=\x22hljs-number\x22\x3e228\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e184\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e173\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = codeList.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e\x2bitem.toString(\x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e)).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3edecodeURI\x3c\/span\x3e(code); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 中\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好了，到这里本文也就介绍完UTF8的编码了。\x3cbr\x3e希望可以帮助大家了解到UTF-8编码的原理。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>通过javascript进行UTF-8编码</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005794963">https://segmentfault.com/a/1190000005794963</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mircczubcwc/" target="_blank">https://alili.tech/archive/mircczubcwc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>