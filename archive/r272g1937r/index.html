<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于热替换技术推想未来的 Web 开发技术"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于热替换技术推想未来的 Web 开发技术 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/r272g1937r/",
				"appid": "1613049289050283", 
				"title": "基于热替换技术推想未来的 Web 开发技术 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-10T02:30:42"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/f5r6lj4bdbh/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2lv97n68jey/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&text=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&text=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&title=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&is_video=false&description=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&title=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&title=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&title=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fr272g1937r%2f&title=%e5%9f%ba%e4%ba%8e%e7%83%ad%e6%9b%bf%e6%8d%a2%e6%8a%80%e6%9c%af%e6%8e%a8%e6%83%b3%e6%9c%aa%e6%9d%a5%e7%9a%84%20Web%20%e5%bc%80%e5%8f%91%e6%8a%80%e6%9c%af"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于热替换技术推想未来的 Web 开发技术</h1><div class="meta"><div class="postdate"><time datetime="2019-02-10" itemprop="datePublished">2019-02-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e微博上写了几段, 想想太长, 还是写成文章发出来, 这事对我还挺重要的\x3cbr\x3e原本是在反思自己为什么兴趣所在的前端项目居然蔓延得那么广\x3cbr\x3e甚至导致技术不专一, 很多细节做不好. 其中的原因何在? 我认为前端太广\x3cbr\x3e于是想到整体发展的趋势上, 于是认为背后还在更深层的事件\x3cbr\x3e按这点进行推想, 也就是站在热替换这点往前眺望, 有种可能性\x3cbr\x3e背后的想法已经挺长时间了, 临时想到整理成文章\x3c\/p\x3e\n\x3cp\x3e文章章节拆分:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e热替换技术的现状\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e后端热替换的能力\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e热替换的要求和限制\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e推想一种未来的开发方案\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e需要着手填补的短板\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e总结\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e热替换技术的现状\x3c\/h3\x3e\n\x3cp\x3e这是 Elm 和 Webpack 烧起来的很旺的一把火, 随着 React 烧得更远了\x3cbr\x3e很快大家看到对于前端 React 应用, 或者 React Native, 都有了\x3cbr\x3e这种情况下可以一边写代码, 并且预期在模拟器当中直接查看改变\x3cbr\x3e如果代码有错, 可能做到直接把静态检查的错误直接提示出来\x3cbr\x3e那么开发人员直接修复错误, 直到代码正确, 代码进行热替换\x3c\/p\x3e\n\x3cp\x3e目前热替换, 前端方面有 Browserify, Amok 之类, 而 Webpack 支持前端后端\x3cbr\x3e在 cljs 方面基于 boot-reload 能做前端, 基于 figwheel 做前端后端\x3cbr\x3eElm 能做前端, 只不过不像是前两者那么通用\x3cbr\x3e而 Webpack 和 cljs 我在过去几个月做了几次尝试, 效果是可以的\x3cbr\x3e我最多做到在阿里云跑开发环境, 远程编辑, 前端后端热替换, 直接加功能\x3c\/p\x3e\n\x3cp\x3e前端热替换主要基于 MVC 分离的思路, View 与 Model 分离, 能任意调用\x3cbr\x3e所有的界面数据, 要么作为 global Store, 要么抽象为组件 states\x3cbr\x3e只要保证 store 和 states 能在替换代码过程中能保持, 就有整个界面\x3cbr\x3e而 View 代码想要替换就替换掉好了, 替换完成重新运行就好了\x3cbr\x3e方案主要基于 React 和相关有 virtual DOM 框架. 其他 Vue 也可以\x3c\/p\x3e\n\x3cp\x3e另外 Time Travel Debugging 还有存储每个数据操作方便重演的机制\x3cbr\x3e相关的资料较多, 应该已经都注意到吧\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e后端代码\x3c\/h3\x3e\n\x3cp\x3e比如 Webpack 也能做后端代码的打包和热替换\x3cbr\x3e也就能做到在 WebSocket 不关闭而情况下直接替换代码\x3cbr\x3e因此结合两点之后, 实际上已经能做前后端同时热替换代码\x3cbr\x3e好处就是不需要整个重载程序, 重新连接 WebSocket, 更快更方便\x3c\/p\x3e\n\x3cp\x3e我后端经验不多, 前面试验的代码是用前端 MVC 的思路写的\x3cbr\x3e也就是抽象出内存中的一份 Database 作为我的 Model,\x3cbr\x3e同时把客户端对应的 Store 作为 View, 而 View 是容易替换的\x3cbr\x3e那么代码更新过程中, Model 不受影响, View 部分轻松替换\x3cbr\x3eWebpack 替换的代码是局部的, 所以说 WebSocket 不受干扰\x3c\/p\x3e\n\x3cp\x3e之前问过, 后端开发对热替换似乎兴趣不大, 毕竟本身就做了解耦\x3cbr\x3e数据都在 DB 当中, 不受程序的重启而影响, 所以整个重启就好\x3cbr\x3e所以说不受影响, 即便生成环境所有服务器进程进行重启, 也正常\x3cbr\x3e我觉得这种方式毕竟, 各种 IO 都要重新创建, 有点开销, 而且有点慢\x3cbr\x3e再者, 有 WebSocket 的话, 还是需要方案来保证 WebSocket 稳定\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e热替换的要求和限制\x3c\/h3\x3e\n\x3cp\x3e对于 React 来说, 热替换比较明显的问题在 states 处理上\x3cbr\x3e由于 React states 是私有状态, 不像 Store 管理起来方便\x3cbr\x3e不过这是个老问题, 我也明确了是有解决方案的, 比如设计全局组件状态\x3cbr\x3e能解决就不多讲了\x3c\/p\x3e\n\x3cp\x3e然后是热替换对程序状态的影响, React 中而错误代码会导致进程无法继续\x3cbr\x3e原因就是代码错误, 导致 React 内部记录的状态出错, 因而程序故障\x3cbr\x3e这也是已经有办法的, 主要是静态检查, 在程序执行之间做一次筛选\x3cbr\x3e做得好的比如 Elm, 能分析到具体的类型, 最终能编译通过就很难报错\x3cbr\x3e我没写大的 Elm 程序, 而是用 cljs, cljs 的变量检查已经比较实用了\x3cbr\x3e基本能明确类型设计得更舒服, 在这一点上会明显改善\x3c\/p\x3e\n\x3cp\x3e对抽象的影响, 这就涉及到编写程序时整个程序如何设计的问题了\x3cbr\x3eReact 带出的 pure render, stateless, 跟这个直接相关\x3cbr\x3e为了程序能更好地热替换, 其实要求了更严格的对副作用的限制\x3cbr\x3e比如渲染代码会在代码替换时被执行, 那么就不能随便插入数据操作在其中\x3cbr\x3e也就是限制副作用, 而让无状态所以可替换的代码能直接更新掉\x3cbr\x3e于是很多从前的开发习惯就需要转变思路\x3c\/p\x3e\n\x3cp\x3e性能方面, 热替换本身似乎问题不大, 毕竟 Erlang 用了也还是快的\x3cbr\x3e但是在 React 这样的方案观察下来, 由于用了函数式写法, 就可能有问题\x3cbr\x3e函数式编程首先通过不可变数据和高阶函数形成了对内存的压力\x3cbr\x3e而这在 virtual DOM 方案当中, 又是很难消除的因素\x3cbr\x3e性能问题和明了, 也是大家共同的问题, 不多讲\x3c\/p\x3e\n\x3cp\x3e一下子能想到的限制就这些, 估计还有不少琐碎的问题\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e推想一种未来的开发方案\x3c\/h3\x3e\n\x3cp\x3e在热替换基础上, 我尝试的开发方式已经和之前有不小的区别了\x3cbr\x3e除了前端的热替换, 我还把后端联系到了一起, 让后端控制 store\x3cbr\x3e所以我可以在改一段后端代码, 直接发送 diff 到前端, 界面直接更新\x3cbr\x3e也就是说能做到动态修改 View 代码, 而网络连接, 浏览器页面状态都不受影响\x3cbr\x3eController 代码也能更新, 但需要通过其他方式重新运行查看结果\x3cbr\x3eModel 由于存储了程序的状态, 处理起来会更复杂, 需要记录每个操作\x3cbr\x3e大体上是这样.. 相当于 React 的效果, 对多个客户端也生效\x3c\/p\x3e\n\x3cp\x3e我想说, 还能走得更远. 我希望是, 能做到很多人同时一起开发\x3cbr\x3e对, 多人同时开发同一个项目, 而不是每个人拷贝一份自己开发再 merge\x3cbr\x3e好处应该想得差不多, 新人来了开发环境不用单独配, 省很多时间\x3cbr\x3e一起做, 相互能熟悉工作内容, 相互也能监督, 降低交流成本\x3cbr\x3e当一个功能有多人同时做, 开发速度也能提高, 相比一个人做不同的细节\x3c\/p\x3e\n\x3cp\x3e想法很简单的, 但现在都没做起来, 显然难点有很多\x3cbr\x3e首先, 即便在服务器上用 Vim 或者在线工具编辑, 多人操作也不方便\x3cbr\x3e其次, 不同的人写的代码相互冲突了怎么办, 怎么开发下去?\x3cbr\x3e一个人写完了一部分, 重启服务测试, 影响到另一个人正在测试怎么办?\x3cbr\x3e虽然有其他问题, 但我认为影响最大是这些问题\x3c\/p\x3e\n\x3cp\x3e首先多人编辑, 印象里有看到新闻有在尝试, 估计不成熟, 待会再回头说\x3cbr\x3e但是代码冲突, 功能调试, 我想热替换已经给了不错的解决方案了\x3cbr\x3e代码冲突首先可以依靠类型静态分析干掉很多, 做到代码有问题不去运行\x3cbr\x3e热替换技术当中单个文件的类型分析很廉价, cljs 中也算成熟了\x3cbr\x3e而功能测试, 由于不需要重启服务器, 相互直接也就少了很多的影响\x3c\/p\x3e\n\x3cp\x3e另外有一点, 热替换要求程序严格控制副作用, 有另外的好处\x3cbr\x3e在 React 而言, 这要求应用的结构, 组件的模块化, 做得更加严格\x3cbr\x3e结果是大家写的 React 组件抽象出 state, 抽象出渲染方法, 其实类似\x3cbr\x3e而这有利于编程思路编程规范相互之间少一点分歧, 读代码更容易\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e需要着手填补的短板\x3c\/h3\x3e\n\x3cp\x3e现在热替换直接上, 做多人协同编程, 有些难度, 我只是觉得可以一试\x3cbr\x3e就 React 而言, 我认为对错误的容忍性太低, Flow 或者 TypeScript 应该更好\x3cbr\x3e我的话是 cljs, 虽然不能避免所有错误, 但变量检查已经能干掉好大一部分数量\x3cbr\x3e我觉得这些主要是加固吧, 为了让调试过程更加增量, 影响范围也更小\x3cbr\x3e多说一句, 我认为需要引入 Haskell 系的强大类型系统来帮忙, 山寨一个也好\x3cbr\x3eADT 完整的实现确实门槛高, 但是其中实用的地方拿过来总可以吧...\x3c\/p\x3e\n\x3cp\x3e编辑器的问题是大头, 首先就是前后端分离, 跑在服务器上, 浏览器端操作\x3cbr\x3e然后, 每个修改需要是增量的, 这样方便同步到大量的客户端\x3cbr\x3e并且, 操作合并应该只有极少甚至没有冲突, 否则实际操作会很繁琐\x3cbr\x3e在就是 UI 上要做很多的改进, 讲多个人的状态显示出来\x3cbr\x3e的以我目前在单页面的探索来看, 这个事情可能性是达成了的, 虽然难度不少\x3cbr\x3e我可以基于 Cirru 先搞出这样的方案来, 先试验一下效果如何\x3c\/p\x3e\n\x3cp\x3e另外类型检查, 也是个能改进的地方, 注意到吗, 类型检查都打 log\x3cbr\x3e为什么类型检查不能直接在编辑器上提示, 然后给个选项一键纠正?\x3cbr\x3e编辑器是基于文本的, 并不是基于图形界面的, 我估计这个事情麻烦了\x3cbr\x3e如果 IDE 都是像 CSS 这样用树形编辑器操作, 我想也许就好多了\x3cbr\x3e而这同时也是前面说的加强类型检查功能所遇到的问题...\x3cbr\x3e想法还不成熟, 以后再想想\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3e基于上边这些讨论, 我认为热替换带来了不小的突破的机会\x3cbr\x3e多人协同编程的某些障碍, 已经由热替换技术扫平了, 成了相对次要的问题\x3cbr\x3e如果能让编辑器支持多人开发, 距离多人协同编程就很近了\x3cbr\x3e我觉得可以在 Cirru 上继续探索一下...\x3cbr\x3e现在都已经能直播写代码加在线热替换了, 再开发出编辑功能如何?\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>基于热替换技术推想未来的 Web 开发技术</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005082320">https://segmentfault.com/a/1190000005082320</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/r272g1937r/" target="_blank">https://alili.tech/archive/r272g1937r/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>