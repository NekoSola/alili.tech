<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ES6 系列之 Babel 将 Generator 编译成了什么样子"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ES6 系列之 Babel 将 Generator 编译成了什么样子 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/cik25m3bh7m/",
				"appid": "1613049289050283", 
				"title": "ES6 系列之 Babel 将 Generator 编译成了什么样子 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-15T02:30:44"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/vwkme203i7/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dfejr0q89no/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&text=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&text=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&title=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&is_video=false&description=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&title=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&title=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&title=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcik25m3bh7m%2f&title=ES6%20%e7%b3%bb%e5%88%97%e4%b9%8b%20Babel%20%e5%b0%86%20Generator%20%e7%bc%96%e8%af%91%e6%88%90%e4%ba%86%e4%bb%80%e4%b9%88%e6%a0%b7%e5%ad%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ES6 系列之 Babel 将 Generator 编译成了什么样子</h1><div class="meta"><div class="postdate"><time datetime="2019-02-15" itemprop="datePublished">2019-02-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e本文就是简单介绍下 Generator 语法编译后的代码。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eGenerator\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function* helloWorldGenerator() {\n  yield \x27hello\x27;\n  yield \x27world\x27;\n  return \x27ending\x27;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e* \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27world\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ending\x27\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们打印下执行的结果：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var hw = helloWorldGenerator();\n\nconsole.log(hw.next()); \/\/ {value: \x26quot;hello\x26quot;, done: false}\nconsole.log(hw.next()); \/\/ {value: \x26quot;world\x26quot;, done: false}\nconsole.log(hw.next()); \/\/ {value: \x26quot;ending\x26quot;, done: true}\nconsole.log(hw.next()); \/\/ {value: undefined, done: true}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hw = helloWorldGenerator();\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ {value: \x22hello\x22, done: false}\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ {value: \x22world\x22, done: false}\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ {value: \x22ending\x22, done: true}\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ {value: undefined, done: true}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3eBabel\x3c\/h2\x3e\n\x3cp\x3e具体的执行过程就不说了，我们直接在 Babel 官网的 \x3ca href=\x22https:\/\/babeljs.io\/repl\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eTry it out\x3c\/a\x3e 粘贴上述代码，然后查看代码被编译成了什么样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 我们就称呼这个版本为简单编译版本吧\n *\/\nvar _marked = \/*#__PURE__*\/ regeneratorRuntime.mark(helloWorldGenerator);\n\nfunction helloWorldGenerator() {\n  return regeneratorRuntime.wrap(\n    function helloWorldGenerator$(_context) {\n      while (1) {\n        switch ((_context.prev = _context.next)) {\n          case 0:\n            _context.next = 2;\n            return \x26quot;hello\x26quot;;\n\n          case 2:\n            _context.next = 4;\n            return \x26quot;world\x26quot;;\n\n          case 4:\n            return _context.abrupt(\x26quot;return\x26quot;, \x26quot;ending\x26quot;);\n\n          case 5:\n          case \x26quot;end\x26quot;:\n            return _context.stop();\n        }\n      }\n    },\n    _marked,\n    this\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 我们就称呼这个版本为简单编译版本吧\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _marked = \x3cspan class=\x22hljs-comment\x22\x3e\/*#__PURE__*\/\x3c\/span\x3e regeneratorRuntime.mark(helloWorldGenerator);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e regeneratorRuntime.wrap(\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator$\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_context\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e ((_context.prev = _context.next)) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\n            _context.next = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22hello\x22\x3c\/span\x3e;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e:\n            _context.next = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22world\x22\x3c\/span\x3e;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.abrupt(\x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22ending\x22\x3c\/span\x3e);\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e:\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.stop();\n        }\n      }\n    },\n    _marked,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n  );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e猛一看，好像编译后的代码还蛮少的，但是细细一看，编译后的代码肯定是不能用的呀，\x3ccode\x3eregeneratorRuntime\x3c\/code\x3e 是个什么鬼？哪里有声明呀？\x3ccode\x3emark\x3c\/code\x3e 和 \x3ccode\x3ewrap\x3c\/code\x3e 方法又都做了什么？\x3c\/p\x3e\n\x3cp\x3e难道就不能编译一个完整可用的代码吗？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eregenerator\x3c\/h2\x3e\n\x3cp\x3e如果你想看到完整可用的代码，你可以使用 \x3ca href=\x22https:\/\/github.com\/facebook\/regenerator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregenerator\x3c\/a\x3e，这是 facebook 下的一个工具，用于编译 ES6 的 generator 函数。\x3c\/p\x3e\n\x3cp\x3e我们先安装一下 regenerator：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install -g regenerator\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install -g regenerator\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后新建一个 generator.js 文件，里面的代码就是文章最一开始的代码，我们执行命令：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22regenerator --include-runtime generator.js \x3e generator-es5.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eregenerator --include-runtime generator.js \x26gt; generator-es5.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们就可以在 generator-es5.js 文件看到编译后的完整可用的代码。\x3c\/p\x3e\n\x3cp\x3e而这一编译就编译了 700 多行…… 编译后的代码可以查看 \x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/blob\/master\/demos\/ES6\/generator\/generator-es5.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egenerator-es5.js\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e总之编译后的代码还蛮复杂，我们可以从中抽离出大致的逻辑，至少让简单编译的那段代码能够跑起来。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3emark 函数\x3c\/h2\x3e\n\x3cp\x3e简单编译后的代码第一段是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var _marked = \/*#__PURE__*\/ regeneratorRuntime.mark(helloWorldGenerator);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _marked = \x3cspan class=\x22hljs-comment\x22\x3e\/*#__PURE__*\/\x3c\/span\x3e regeneratorRuntime.mark(helloWorldGenerator);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们查看完整编译版本中 mark 函数的源码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22runtime.mark = function(genFun) {\n  genFun.__proto__ = GeneratorFunctionPrototype;\n  genFun.prototype = Object.create(Gp);\n  return genFun;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eruntime.mark = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3egenFun\x3c\/span\x3e) \x3c\/span\x3e{\n  genFun.__proto__ = GeneratorFunctionPrototype;\n  genFun.prototype = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(Gp);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e genFun;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这其中又涉及了 GeneratorFunctionPrototype 和 Gp 变量，我们也查看下对应的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Generator() {}\nfunction GeneratorFunction() {}\nfunction GeneratorFunctionPrototype() {}\n\n...\n\nvar Gp = GeneratorFunctionPrototype.prototype =\n  Generator.prototype = Object.create(IteratorPrototype);\n\nGeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n\nGeneratorFunctionPrototype.constructor = GeneratorFunction;\n\nGeneratorFunctionPrototype[toStringTagSymbol] =\n  GeneratorFunction.displayName = \x26quot;GeneratorFunction\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGenerator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGeneratorFunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGeneratorFunctionPrototype\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n\n...\n\nvar Gp = GeneratorFunctionPrototype.prototype =\n  Generator.prototype = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(IteratorPrototype);\n\nGeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n\nGeneratorFunctionPrototype.constructor = GeneratorFunction;\n\nGeneratorFunctionPrototype[toStringTagSymbol] =\n  GeneratorFunction.displayName = \x3cspan class=\x22hljs-string\x22\x3e\x22GeneratorFunction\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码构建了一堆看起来很复杂的关系链，其实这是参照着 \x3ca href=\x22https:\/\/www.ecma-international.org\/ecma-262\/6.0\/#sec-generatorfunction-constructor\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eES6 规范\x3c\/a\x3e构建的关系链:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016855710?w=1722\x26amp;h=1506\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016855710?w=1722\x26amp;h=1506\x22 alt=\x22regenerator\x22 title=\x22regenerator\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e图中 \x3ccode\x3e\x2b@@toStringTag:s = \x27Generator\x27\x3c\/code\x3e 的就是 Gp，\x3ccode\x3e\x2b@@toStringTag:s = \x27GeneratorFunction\x27\x3c\/code\x3e 的就是 GeneratorFunctionPrototype。\x3c\/p\x3e\n\x3cp\x3e构建关系链的目的在于判断关系的时候能够跟原生的保持一致，就比如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function* f() {}\nvar g = f();\nconsole.log(g.__proto__ === f.prototype); \/\/ true\nconsole.log(g.__proto__.__proto__ === f.__proto__.prototype); \/\/ true\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e* \x3cspan class=\x22hljs-title\x22\x3ef\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e g = f();\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(g.__proto__ === f.prototype); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ true\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(g.__proto__.__proto__ === f.__proto__.prototype); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ true\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了简化起见，我们可以把 Gp 先设置为一个空对象，不过正如你在上图中看到的，next()、 throw()、return() 函数都是挂载在 Gp 对象上，实际上，在完整的编译代码中，确实有为 Gp 添加这三个函数的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 117 行\nfunction defineIteratorMethods(prototype) {\n  [\x26quot;next\x26quot;, \x26quot;throw\x26quot;, \x26quot;return\x26quot;].forEach(function(method) {\n    prototype[method] = function(arg) {\n      return this._invoke(method, arg);\n    };\n  });\n}\n\n\/\/ 406 行\ndefineIteratorMethods(Gp);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 117 行\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefineIteratorMethods\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eprototype\x3c\/span\x3e) \x3c\/span\x3e{\n  [\x3cspan class=\x22hljs-string\x22\x3e\x22next\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22throw\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e].forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emethod\x3c\/span\x3e) \x3c\/span\x3e{\n    prototype[method] = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._invoke(method, arg);\n    };\n  });\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 406 行\x3c\/span\x3e\ndefineIteratorMethods(Gp);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了简单起见，我们将整个 mark 函数简化为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22runtime.mark = function(genFun) {\n  var generator = Object.create({\n    next: function(arg) {\n      return this._invoke(\x27next\x27, arg)\n    }\n  });\n  genFun.prototype = generator;\n  return genFun;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eruntime.mark = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3egenFun\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generator = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create({\n    \x3cspan class=\x22hljs-attr\x22\x3enext\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._invoke(\x3cspan class=\x22hljs-string\x22\x3e\x27next\x27\x3c\/span\x3e, arg)\n    }\n  });\n  genFun.prototype = generator;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e genFun;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3ewrap 函数\x3c\/h2\x3e\n\x3cp\x3e除了设置关系链之外，mark 函数的返回值 genFun 还作为了 wrap 函数的第二个参数传入：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function helloWorldGenerator() {\n  return regeneratorRuntime.wrap(\n    function helloWorldGenerator$(_context) {\n      ...\n    },\n    _marked,\n    this\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e regeneratorRuntime.wrap(\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator$\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_context\x3c\/span\x3e) \x3c\/span\x3e{\n      ...\n    },\n    _marked,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n  );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们再看下 wrap 函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function wrap(innerFn, outerFn, self) {\n  var generator = Object.create(outerFn.prototype);\n  var context = new Context([]);\n  generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n  return generator;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewrap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einnerFn, outerFn, self\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generator = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(outerFn.prototype);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e context = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Context([]);\n  generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e generator;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以当执行 \x3ccode\x3evar hw = helloWorldGenerator();\x3c\/code\x3e 的时候，其实执行的是 wrap 函数，wrap 函数返回了 generator，generator 是一个对象，原型是 \x3ccode\x3eouterFn.prototype\x3c\/code\x3e, \x3ccode\x3eouterFn.prototype\x3c\/code\x3e 其实就是 \x3ccode\x3egenFun.prototype\x3c\/code\x3e， \x3ccode\x3egenFun.prototype\x3c\/code\x3e 是一个空对象，原型上有 next() 方法。\x3c\/p\x3e\n\x3cp\x3e所以当你执行 \x3ccode\x3ehw.next()\x3c\/code\x3e 的时候，执行的其实是 hw 原型的原型上的 next 函数，next 函数执行的又是 hw 的 _invoke 函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22generator._invoke = makeInvokeMethod(innerFn, self, context);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3egenerator._invoke = makeInvokeMethod(innerFn, self, context);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3einnerFn 就是 wrap 包裹的那个函数，其实就是 helloWordGenerato$ 函数，呐，就是这个函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function helloWorldGenerator$(_context) {\n  while (1) {\n    switch ((_context.prev = _context.next)) {\n      case 0:\n        _context.next = 2;\n        return \x26quot;hello\x26quot;;\n\n      case 2:\n        _context.next = 4;\n        return \x26quot;world\x26quot;;\n\n      case 4:\n        return _context.abrupt(\x26quot;return\x26quot;, \x26quot;ending\x26quot;);\n\n      case 5:\n      case \x26quot;end\x26quot;:\n        return _context.stop();\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator$\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_context\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e ((_context.prev = _context.next)) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\n        _context.next = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22hello\x22\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e:\n        _context.next = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22world\x22\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.abrupt(\x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22ending\x22\x3c\/span\x3e);\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.stop();\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而 context 你可以直接理解为这样一个全局对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ContinueSentinel = {};\n\nvar context = {\n  done: false,\n  method: \x26quot;next\x26quot;,\n  next: 0,\n  prev: 0,\n  abrupt: function(type, arg) {\n    var record = {};\n    record.type = type;\n    record.arg = arg;\n\n    return this.complete(record);\n  },\n  complete: function(record, afterLoc) {\n    if (record.type === \x26quot;return\x26quot;) {\n      this.rval = this.arg = record.arg;\n      this.method = \x26quot;return\x26quot;;\n      this.next = \x26quot;end\x26quot;;\n    }\n\n    return ContinueSentinel;\n  },\n  stop: function() {\n    this.done = true;\n    return this.rval;\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ContinueSentinel = {};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e context = {\n  \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22next\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3enext\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eprev\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eabrupt\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etype, arg\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {};\n    record.type = type;\n    record.arg = arg;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.complete(record);\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3ecomplete\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3erecord, afterLoc\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.type === \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.arg = record.arg;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.method = \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.next = \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ContinueSentinel;\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3estop\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.done = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval;\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e每次 \x3ccode\x3ehw.next\x3c\/code\x3e 的时候，就会修改 next 和 prev 属性的值，当在 generator 函数中 return 的时候会执行 abrupt，abrupt 中又会执行 complete，执行完 complete，因为 \x3ccode\x3ethis.next = end\x3c\/code\x3e 的缘故，再执行就会执行 stop 函数。\x3c\/p\x3e\n\x3cp\x3e我们来看下 makeInvokeMethod 函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ContinueSentinel = {};\n\nfunction makeInvokeMethod(innerFn, self, context) {\n  var state = \x27start\x27;\n\n  return function invoke(method, arg) {\n\n    if (state === \x27completed\x27) {\n      return { value: undefined, done: true };\n    }\n\n    context.method = method;\n    context.arg = arg;\n\n    while (true) {\n\n      state = \x27executing\x27;\n\n      var record = {\n        type: \x27normal\x27,\n        arg: innerFn.call(self, context)\n      };\n      if (record.type === \x26quot;normal\x26quot;) {\n\n        state = context.done\n          ? \x27completed\x27\n          : \x27yield\x27;\n\n        if (record.arg === ContinueSentinel) {\n          continue;\n        }\n\n        return {\n          value: record.arg,\n          done: context.done\n        };\n\n      }\n    }\n  };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ContinueSentinel = {};\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeInvokeMethod\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einnerFn, self, context\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e state = \x3cspan class=\x22hljs-string\x22\x3e\x27start\x27\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einvoke\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emethod, arg\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (state === \x3cspan class=\x22hljs-string\x22\x3e\x27completed\x27\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e };\n    }\n\n    context.method = method;\n    context.arg = arg;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e) {\n\n      state = \x3cspan class=\x22hljs-string\x22\x3e\x27executing\x27\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27normal\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3earg\x3c\/span\x3e: innerFn.call(self, context)\n      };\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.type === \x3cspan class=\x22hljs-string\x22\x3e\x22normal\x22\x3c\/span\x3e) {\n\n        state = context.done\n          ? \x3cspan class=\x22hljs-string\x22\x3e\x27completed\x27\x3c\/span\x3e\n          : \x3cspan class=\x22hljs-string\x22\x3e\x27yield\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.arg === ContinueSentinel) {\n          \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: record.arg,\n          \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: context.done\n        };\n\n      }\n    }\n  };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e基本的执行过程就不分析了，我们重点看第三次执行 \x3ccode\x3ehw.next()\x3c\/code\x3e 的时候:\x3c\/p\x3e\n\x3cp\x3e第三次执行 \x3ccode\x3ehw.next()\x3c\/code\x3e 的时候，其实执行了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this._invoke(\x26quot;next\x26quot;, undefined);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._invoke(\x3cspan class=\x22hljs-string\x22\x3e\x22next\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在 invoke 函数中构建了一个 record 对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var record = {\n  type: \x26quot;normal\x26quot;,\n  arg: innerFn.call(self, context)\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22normal\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3earg\x3c\/span\x3e: innerFn.call(self, context)\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而在 \x3ccode\x3einnerFn.call(self, context)\x3c\/code\x3e 中，因为 _context.next 为 4 的缘故，其实执行了:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22_context.abrupt(\x26quot;return\x26quot;, \x27ending\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e_context.abrupt(\x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27ending\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而在 abrupt 中，我们又构建了一个 record 对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var record = {};\nrecord.type = \x27return\x27;\nrecord.arg = \x27ending\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {};\nrecord.type = \x3cspan class=\x22hljs-string\x22\x3e\x27return\x27\x3c\/span\x3e;\nrecord.arg = \x3cspan class=\x22hljs-string\x22\x3e\x27ending\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后执行了 \x3ccode\x3ethis.complete(record)\x3c\/code\x3e，\x3c\/p\x3e\n\x3cp\x3e在 complete 中，因为 \x3ccode\x3erecord.type === \x22return\x22\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.rval = \x27ending\x27;\nthis.method = \x26quot;return\x26quot;;\nthis.next = \x26quot;end\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval = \x3cspan class=\x22hljs-string\x22\x3e\x27ending\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.method = \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.next = \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后返回了全局对象 ContinueSentinel，其实就是一个全局空对象。\x3c\/p\x3e\n\x3cp\x3e然后在 invoke 函数中，因为 \x3ccode\x3erecord.arg === ContinueSentinel\x3c\/code\x3e 的缘故，没有执行后面的 return 语句，就直接进入下一个循环。\x3c\/p\x3e\n\x3cp\x3e于是又执行了一遍 \x3ccode\x3einnerFn.call(self, context)\x3c\/code\x3e，此时 \x3ccode\x3e_context.next\x3c\/code\x3e 为 end, 执行了 \x3ccode\x3e_context.stop()\x3c\/code\x3e, 在 stop 函数中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.done = true;\nreturn this.rval; \/\/ this.rval 其实就是 `ending`\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.done = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.rval 其实就是 `ending`\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以最终返回的值为:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  value: \x27ending\x27,\n  done: true\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ending\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之后，我们再执行 hw.next() 的时候，因为 state 已经是 \x27completed\x27 的缘故，直接就返回 \x3ccode\x3e{ value: undefined, done: true}\x3c\/code\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e不完整但可用的源码\x3c\/h2\x3e\n\x3cp\x3e当然这个过程，看文字理解起来可能有些难度，不完整但可用的代码如下，你可以断点调试查看具体的过程：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function() {\n  var ContinueSentinel = {};\n\n  var mark = function(genFun) {\n    var generator = Object.create({\n      next: function(arg) {\n        return this._invoke(\x26quot;next\x26quot;, arg);\n      }\n    });\n    genFun.prototype = generator;\n    return genFun;\n  };\n\n  function wrap(innerFn, outerFn, self) {\n    var generator = Object.create(outerFn.prototype);\n\n    var context = {\n      done: false,\n      method: \x26quot;next\x26quot;,\n      next: 0,\n      prev: 0,\n      abrupt: function(type, arg) {\n        var record = {};\n        record.type = type;\n        record.arg = arg;\n\n        return this.complete(record);\n      },\n      complete: function(record, afterLoc) {\n        if (record.type === \x26quot;return\x26quot;) {\n          this.rval = this.arg = record.arg;\n          this.method = \x26quot;return\x26quot;;\n          this.next = \x26quot;end\x26quot;;\n        }\n\n        return ContinueSentinel;\n      },\n      stop: function() {\n        this.done = true;\n        return this.rval;\n      }\n    };\n\n    generator._invoke = makeInvokeMethod(innerFn, context);\n\n    return generator;\n  }\n\n  function makeInvokeMethod(innerFn, context) {\n    var state = \x26quot;start\x26quot;;\n\n    return function invoke(method, arg) {\n      if (state === \x26quot;completed\x26quot;) {\n        return { value: undefined, done: true };\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        state = \x26quot;executing\x26quot;;\n\n        var record = {\n          type: \x26quot;normal\x26quot;,\n          arg: innerFn.call(self, context)\n        };\n\n        if (record.type === \x26quot;normal\x26quot;) {\n          state = context.done ? \x26quot;completed\x26quot; : \x26quot;yield\x26quot;;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n      }\n    };\n  }\n\n  window.regeneratorRuntime = {};\n\n  regeneratorRuntime.wrap = wrap;\n  regeneratorRuntime.mark = mark;\n})();\n\nvar _marked = regeneratorRuntime.mark(helloWorldGenerator);\n\nfunction helloWorldGenerator() {\n  return regeneratorRuntime.wrap(\n    function helloWorldGenerator$(_context) {\n      while (1) {\n        switch ((_context.prev = _context.next)) {\n          case 0:\n            _context.next = 2;\n            return \x26quot;hello\x26quot;;\n\n          case 2:\n            _context.next = 4;\n            return \x26quot;world\x26quot;;\n\n          case 4:\n            return _context.abrupt(\x26quot;return\x26quot;, \x26quot;ending\x26quot;);\n\n          case 5:\n          case \x26quot;end\x26quot;:\n            return _context.stop();\n        }\n      }\n    },\n    _marked,\n    this\n  );\n}\n\nvar hw = helloWorldGenerator();\n\nconsole.log(hw.next());\nconsole.log(hw.next());\nconsole.log(hw.next());\nconsole.log(hw.next());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ContinueSentinel = {};\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mark = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3egenFun\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generator = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create({\n      \x3cspan class=\x22hljs-attr\x22\x3enext\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._invoke(\x3cspan class=\x22hljs-string\x22\x3e\x22next\x22\x3c\/span\x3e, arg);\n      }\n    });\n    genFun.prototype = generator;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e genFun;\n  };\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewrap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einnerFn, outerFn, self\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generator = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(outerFn.prototype);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e context = {\n      \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22next\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3enext\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eprev\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eabrupt\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etype, arg\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {};\n        record.type = type;\n        record.arg = arg;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.complete(record);\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3ecomplete\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3erecord, afterLoc\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.type === \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.arg = record.arg;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.method = \x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.next = \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e;\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ContinueSentinel;\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3estop\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.done = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rval;\n      }\n    };\n\n    generator._invoke = makeInvokeMethod(innerFn, context);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e generator;\n  }\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeInvokeMethod\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einnerFn, context\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e state = \x3cspan class=\x22hljs-string\x22\x3e\x22start\x22\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einvoke\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emethod, arg\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (state === \x3cspan class=\x22hljs-string\x22\x3e\x22completed\x22\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e };\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e) {\n        state = \x3cspan class=\x22hljs-string\x22\x3e\x22executing\x22\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = {\n          \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22normal\x22\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3earg\x3c\/span\x3e: innerFn.call(self, context)\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.type === \x3cspan class=\x22hljs-string\x22\x3e\x22normal\x22\x3c\/span\x3e) {\n          state = context.done ? \x3cspan class=\x22hljs-string\x22\x3e\x22completed\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22yield\x22\x3c\/span\x3e;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.arg === ContinueSentinel) {\n            \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n          }\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: record.arg,\n            \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: context.done\n          };\n        }\n      }\n    };\n  }\n\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.regeneratorRuntime = {};\n\n  regeneratorRuntime.wrap = wrap;\n  regeneratorRuntime.mark = mark;\n})();\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _marked = regeneratorRuntime.mark(helloWorldGenerator);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e regeneratorRuntime.wrap(\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehelloWorldGenerator$\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_context\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e ((_context.prev = _context.next)) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\n            _context.next = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22hello\x22\x3c\/span\x3e;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e:\n            _context.next = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22world\x22\x3c\/span\x3e;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.abrupt(\x3cspan class=\x22hljs-string\x22\x3e\x22return\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22ending\x22\x3c\/span\x3e);\n\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e:\n          \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _context.stop();\n        }\n      }\n    },\n    _marked,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n  );\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hw = helloWorldGenerator();\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next());\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next());\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next());\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(hw.next());\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eES6 系列\x3c\/h2\x3e\n\x3cp\x3eES6 系列目录地址：\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/mqyqingfeng\/Blog\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eES6 系列预计写二十篇左右，旨在加深 ES6 部分知识点的理解，重点讲解块级作用域、标签模板、箭头函数、Symbol、Set、Map 以及 Promise 的模拟实现、模块加载方案、异步处理等内容。\x3c\/p\x3e\n\x3cp\x3e如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎 star，对作者也是一种鼓励。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ES6 系列之 Babel 将 Generator 编译成了什么样子</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016855707">https://segmentfault.com/a/1190000016855707</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/cik25m3bh7m/" target="_blank">https://alili.tech/archive/cik25m3bh7m/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/qpsy2j0ebq/">JavaScript: 什么是纯函数以及为什么要用纯函数?<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>