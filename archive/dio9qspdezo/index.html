<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="1625行，解开 underscore.js 的面纱 - 第四章"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>1625行，解开 underscore.js 的面纱 - 第四章 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/dio9qspdezo/",
				"appid": "1613049289050283", 
				"title": "1625行，解开 underscore.js 的面纱 - 第四章 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/89ze693tw53/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/23ackmd55ay/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&text=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&text=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&title=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&is_video=false&description=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&title=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&title=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&title=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdio9qspdezo%2f&title=1625%e8%a1%8c%ef%bc%8c%e8%a7%a3%e5%bc%80%20underscore.js%20%e7%9a%84%e9%9d%a2%e7%ba%b1%20-%20%e7%ac%ac%e5%9b%9b%e7%ab%a0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">1625行，解开 underscore.js 的面纱 - 第四章</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e继续前面的内容，前文我们提到了很多方法的讲解，其实到这里就已经差不多了，因为大部分代码其实都是套路，一些基础函数再灵活变化就可以组成很多实用的功能。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.sortBy = function(obj, iteratee, context) {\n    var index = 0;\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, key, list) {\n      return {\n        value: value,\n        index: index\x2b\x2b,\n        criteria: iteratee(value, key, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a \x3e b || a === void 0) return 1;\n        if (a \x3c b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), \x27value\x27);\n  };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fortran\x22\x3e\x3ccode\x3e  _.sortBy = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj, iteratee, context)\x3c\/span\x3e\x3c\/span\x3e {\n    var \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    iteratee = cb(iteratee, context);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _.pluck(_.map(obj, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(value, key, list)\x3c\/span\x3e\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e\x2b\x2b,\n        criteria: iteratee(\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, key, list)\n      };\n    }).sort(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(left, right)\x3c\/span\x3e\x3c\/span\x3e {\n      var a = left.criteria;\n      var b = right.criteria;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x3cspan class=\x22hljs-comment\x22\x3e!== b) {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x26gt; b || a === void \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x26lt; b || b === void \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e -\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e left.\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e - right.\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e;\n    }), \x3cspan class=\x22hljs-string\x22\x3e\x27value\x27\x3c\/span\x3e);\n  };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e_.sortBy\x3c\/code\x3e，顾名思义这是一个对数组进行排序处理的函数，在原生 JAVASCRIPT 中 sort() 的详情可参考 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Array\/sort\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray.prototype.sort()\x3c\/a\x3e、\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/TypedArray\/sort\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eTypedArray.prototype.sort()\x3c\/a\x3e。\x3ccode\x3e_.sortBy\x3c\/code\x3e 接收三个参数分别为 obj、iteratee 回调和 context，其中 iteratee 与 context 是可选参数。\x3cbr\x3e当传入值只有 obj 时，应该限定 obj 类型为数组且值为 Number，为什么呢，这里涉及到 JAVASCRIPT 对数字字符串的比较的问题了，JAVASCRIPT 在进行字符串比较的时候遵循的是二进制与运算，也就是说并不是数字 length 越长就会大于 length 小的。举个栗子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.sortBy([1, 2, 3, 4, 5, 6, 8, 7, 11, 13]);\n  [1, 2, 3, 4, 5, 6, 7, 8, 11, 13]\n  _.sortBy([\x271\x27, \x272\x27, \x273\x27, \x274\x27, \x275\x27, \x276\x27, \x278\x27, \x277\x27, \x2711\x27, \x2713\x27]);\n  [\x26quot;1\x26quot;, \x26quot;11\x26quot;, \x26quot;13\x26quot;, \x26quot;2\x26quot;, \x26quot;3\x26quot;, \x26quot;4\x26quot;, \x26quot;5\x26quot;, \x26quot;6\x26quot;, \x26quot;7\x26quot;, \x26quot;8\x26quot;]\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e  _.sortBy([\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e]);\n  [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e]\n  _.sortBy([\x27\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e\x27, \x27\x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e\x27]);\n  [\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x2211\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x2213\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x223\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x224\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x225\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x226\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x227\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x228\x22\x3c\/span\x3e]\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同学们都很聪明，不用我在说了，言归正传，当只有 obj 一个值且值为 Number，那么默认从左到右从小到大排序，为什么呢，我看下代码，在 \x3ccode\x3e_.pluck\x3c\/code\x3e 中代码只做了一件事，就是整理数据，当没有 iteratee 的时候执行 \x3ccode\x3ecb\x3c\/code\x3e 函数里的 \x3ccode\x3eif (value == null) return _.identity;\x3c\/code\x3e 也就是相当于默认 iteratee function 为 \x3ccode\x3e_.identity\x3c\/code\x3e 即 return obj，所以 \x3ccode\x3e_.map\x3c\/code\x3e 中回调的 criteria 值即 value。有点绕口，代码起开（假定只有 obj 一个参数）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   _.sortBy = function(obj) {\n     var index = 0;\n     return _.pluck(_.map(obj, function(value, key, list) {\n       return {\n         value: value,\n         index: index\x2b\x2b,\n         criteria: (function(value, key, list) {\n             return value;\n           })(value, key, list);\n       };\n     }).sort(function(left, right) {\n       var a = left.criteria;\n       var b = right.criteria;\n       if (a !== b) {\n         if (a \x3e b || a === void 0) return 1;\n         if (a \x3c b || b === void 0) return -1;\n       }\n       return left.index - right.index;\n     }), \x27value\x27);\n   };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fortran\x22\x3e\x3ccode\x3e   _.sortBy = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj)\x3c\/span\x3e\x3c\/span\x3e {\n     var \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n     \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _.pluck(_.map(obj, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(value, key, list)\x3c\/span\x3e\x3c\/span\x3e {\n       \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n         \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e,\n         \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e\x2b\x2b,\n         criteria: (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(value, key, list)\x3c\/span\x3e\x3c\/span\x3e {\n             \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e;\n           })(\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, key, list);\n       };\n     }).sort(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(left, right)\x3c\/span\x3e\x3c\/span\x3e {\n       var a = left.criteria;\n       var b = right.criteria;\n       \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x3cspan class=\x22hljs-comment\x22\x3e!== b) {\x3c\/span\x3e\n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x26gt; b || a === void \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (a \x26lt; b || b === void \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e -\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n       }\n       \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e left.\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e - right.\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e;\n     }), \x3cspan class=\x22hljs-string\x22\x3e\x27value\x27\x3c\/span\x3e);\n   };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样看上去就直白好多。整理完数据之后就是 \x3ccode\x3earr.sort([compareFunction])\x3c\/code\x3e 进行排序，这里不说了。当传入参数有 iteratee 回调的时候，依旧老套路优化回调，然后根据回调函数里面的设定决定 criteria 参数值，criteria 参数是 \x3ccode\x3earr.sort([compareFunction])\x3c\/code\x3e 进行排序的关键标识，so一定要是 Number才行。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  var group = function(behavior, partition) {\n    return function(obj, iteratee, context) {\n      var result = partition ? [[], []] : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lua\x22\x3e\x3ccode\x3e  var group = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(behavior, partition)\x3c\/span\x3e\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj, iteratee, context)\x3c\/span\x3e\x3c\/span\x3e {\n      var result = partition ? \x3cspan class=\x22hljs-string\x22\x3e[[], []]\x3c\/span\x3e : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(value, index)\x3c\/span\x3e\x3c\/span\x3e {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n    };\n  };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3egroup\x3c\/code\x3e 是一个内部函数，我觉得它最特别在于将回调称之为一个 behavior，为什么呢，因为虽然 behavior function 只能被动接受 \x3ccode\x3evalue, index, obj\x3c\/code\x3e 三个参数进行数值运算，但作者巧妙的用它结合 group 包装出 \x3ccode\x3e_.groupBy\x3c\/code\x3e、\x3ccode\x3e_.indexBy\x3c\/code\x3e、\x3ccode\x3e_.countBy\x3c\/code\x3e、\x3ccode\x3e_.partition\x3c\/code\x3e 四个函数，在实际开发中我们处理数据时可能需要各种适用场景的工具，那么把如何函数写好写活呢，group 给了我很大的启发，言归正传，group 的 behavior 回调是在外部定义，源码到这里并不知道 behavior 是什么东西，所以先一带而过。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.groupBy = group(function(result, value, \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.has(result, \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e)) result[\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e].\x3cspan class=\x22hljs-built_in\x22\x3epush\x3c\/span\x3e(value); \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e result[\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e] = [value];\n  });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e_.groupBy\x3c\/code\x3e 官网定义\x3ccode\x3e把一个集合分组为多个集合，通过 iterator 返回的结果进行分组. 如果 iterator 是一个字符串而不是函数, 那么将使用 iterator 作为各元素的属性名来对比进行分组.\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e———————— 颓废的分割线 ————————\x3c\/p\x3e\n\x3cp\x3e从昨天到今天状态不佳，昏天黑地的看了两天电影，看到最后都不知道自己在看什么，我需要吐槽一下小米路由器，由于我是 linux 系统，作为 \x3ca href=\x22https:\/\/www.debian.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edeiban\x3c\/a\x3e 死忠党来说一台不到两千元的台式机想要链接无线网络，折腾的时间和金钱都不如再填个路由器做中继划算，于是我买了这货 \x3ca href=\x22http:\/\/www.mi.com\/miwifimini\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e小米路由器\x3c\/a\x3e，它在路由器模式下还算可以，一但调整到中继模式，这完全就是一个入坑的神展开，啪啪啪的随时无间歇性断网没商量，莫名其妙的就连不上网了，即使连接上网络网速都不如无线的一般有木有，在过去的一段时间里我有 N 次想把这款路由器摔在地上（额，或者摔在墙上），希望大家不要吐槽我两千块都不到的台式主力机，价钱虽然 lower 了点，但性能绝对够用，对于 mac 党们我很希望大家转粉，虽然我也有 mac 但是我平均开机数目大约在 1\/（1~2个月）。\x3c\/p\x3e\n\x3cp\x3e写到这里目测大约水了一百多个文字，继续前天的讲解 ╮(╯Д╰)╭ 。\x3c\/p\x3e\n\x3cp\x3e———————— END ————————\x3c\/p\x3e\n\x3cp\x3e官网的意思是什么呢，假如我有一个 obj，那么我可以使用 \x3ccode\x3e_.groupBy\x3c\/code\x3e 函数将这个 obj 通过其内部值的某个属性进行分类，而这个属性值的判断也可以通过回调进行扩展断言。那么当 iteratee 为 null 时，\x3ccode\x3e_.groupBy\x3c\/code\x3e 默认使用前面的 \x3ccode\x3egroup\x3c\/code\x3e 函数中的 cb 函数的 \x3ccode\x3eif (value == null) return _.identity;\x3c\/code\x3e 处理 iteratee 为空的情况，我来简化一下 \x3ccode\x3e_.groupBy\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 _.groupBy = function(obj) {\n    var result = partition ? [[], []] : {};\n    _.each(obj, function(value, index) {\n         var key = value;\n        if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n    })\n    return result;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lua\x22\x3e\x3ccode\x3e _.groupBy = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj)\x3c\/span\x3e\x3c\/span\x3e {\n    var result = partition ? \x3cspan class=\x22hljs-string\x22\x3e[[], []]\x3c\/span\x3e : {};\n    _.each(obj, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(value, index)\x3c\/span\x3e\x3c\/span\x3e {\n         var key = value;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (_.has(result, key)) result[key].push(value); \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e result[key] = [value];\n    })\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样理解是不是浅显很多呢，设置 result 空数组，然后 \x3ccode\x3e_.each\x3c\/code\x3e 遍历 obj，满满的都是套路有木有，唯一亮点的地方就是 if 判断是根据 \x3ccode\x3e_.has\x3c\/code\x3e 函数确定 result 中是否已经存在 key-value。但是这里面还有一个更深的套路，那就是作者没有对 obj 作进一步处理，所以 \x3ccode\x3e_.groupBy\x3c\/code\x3e 函数只能适用于 Array，举个栗子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.groupBy([\x27one\x27, \x27two\x27, \x27three\x27]);\n  {\x26quot;one\x26quot;:[\x26quot;one\x26quot;],\x26quot;two\x26quot;:[\x26quot;two\x26quot;],\x26quot;three\x26quot;:[\x26quot;three\x26quot;]}\n  _.groupBy([{a:\x27one\x27}, {b:\x27two\x27}, {c:\x27three\x27}]);\n  {\x26quot;[object Object]\x26quot;:[{\x26quot;a\x26quot;:\x26quot;one\x26quot;},{\x26quot;b\x26quot;:\x26quot;two\x26quot;},{\x26quot;c\x26quot;:\x26quot;three\x26quot;}]}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e.groupBy([\x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27three\x27\x3c\/span\x3e]);\n  {\x3cspan class=\x22hljs-string\x22\x3e\x22one\x22\x3c\/span\x3e:[\x3cspan class=\x22hljs-string\x22\x3e\x22one\x22\x3c\/span\x3e],\x3cspan class=\x22hljs-string\x22\x3e\x22two\x22\x3c\/span\x3e:[\x3cspan class=\x22hljs-string\x22\x3e\x22two\x22\x3c\/span\x3e],\x3cspan class=\x22hljs-string\x22\x3e\x22three\x22\x3c\/span\x3e:[\x3cspan class=\x22hljs-string\x22\x3e\x22three\x22\x3c\/span\x3e]}\n  \x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e.groupBy([{a:\x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e}, {b:\x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e}, {c:\x3cspan class=\x22hljs-string\x22\x3e\x27three\x27\x3c\/span\x3e}]);\n  {\x3cspan class=\x22hljs-string\x22\x3e\x22[object Object]\x22\x3c\/span\x3e:[{\x3cspan class=\x22hljs-string\x22\x3e\x22a\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22one\x22\x3c\/span\x3e},{\x3cspan class=\x22hljs-string\x22\x3e\x22b\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22two\x22\x3c\/span\x3e},{\x3cspan class=\x22hljs-string\x22\x3e\x22c\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22three\x22\x3c\/span\x3e}]}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们再说一下 \x3ccode\x3e_.groupBy\x3c\/code\x3e 参数有第二个参数的情况，这里可以看出 cb 函数的重要性，它对 iteratee 的类型情况做了细致的判断和处理，我们前面可以知道 cb 函数除了 Null、Function、Object 意外的类型都用 \x3ccode\x3e_.property\x3c\/code\x3e 处理，即 生成获取属性值的函数，那么我们传参为数组呢，see ↓↓↓\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 _.groupBy([\x27one\x27, \x27two\x27, \x27three\x27],[1,2,3])\n {\x26quot;false\x26quot;:[\x26quot;one\x26quot;,\x26quot;two\x26quot;,\x26quot;three\x26quot;]}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs prolog\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.groupBy([\x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27three\x27\x3c\/span\x3e],[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e])\n {\x3cspan class=\x22hljs-string\x22\x3e\x22false\x22\x3c\/span\x3e:[\x3cspan class=\x22hljs-string\x22\x3e\x22one\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22two\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22three\x22\x3c\/span\x3e]}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也就是说作者虽然大才，但是并没有对超出范围的值类型做进一步的处理，也就是说 iteratee 的可选值类型只能为 Function 和 String。当然这并不是错，从工具的角度来讲我们应用函数应该遵守函数创造者设定的规则，超出规则后出现错误并不是说作者的函数一定有问题，也可能是我们太过于调皮了（比如番茄西红柿需要用平底锅来炒，但厨师非要用电饭煲，这是厨师的错还是平底锅生产商的错 ─=≡Σ((( つ•̀ω•́)つ）。\x3c\/p\x3e\n\x3cp\x3e言归正传当传入合理的 iteratee 值时，其实整个函数的重点还是 \x3ccode\x3egroup\x3c\/code\x3e 函数内部的 \x3ccode\x3ecb\x3c\/code\x3e 函数，因为我们可以看源码 \x3ccode\x3e_.groupBy\x3c\/code\x3e 上的回调最终是落实到 \x3ccode\x3ecb\x3c\/code\x3e 上，将一个函数比作一个公共房间，众多人就是传入传出的参数，那么 cb 就是门禁卡识别每个人的身份并发身份牌。如果 iteratee 是 String 则用 \x3ccode\x3e_.property\x3c\/code\x3e 处理恰到好处（生成获取属性值的函数），如果是 Function 也只是在 \x3ccode\x3eif (_.has(result, key)) result[key].push(value); else result[key] = [value];\x3c\/code\x3e 之前通过回调生成相应的 key 值。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs oxygene\x22\x3e\x3ccode\x3e  _.indexBy = \x3cspan class=\x22hljs-keyword\x22\x3egroup\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eresult\x3c\/span\x3e, value, key)\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\n    result[key] = value;\n  }\x3c\/span\x3e);\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e官网释义 \x3cem\x3e给定一个list，和 一个用来返回一个在列表中的每个元素键 的iterator 函数（或属性名），返回一个每一项索引的对象。\x3c\/em\x3e关键代码参考 \x3ccode\x3e_.groupBy\x3c\/code\x3e，二者的二区别也之有一行代码，理解起来并不难，我就不再水文字了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]\x2b\x2b; else result[key] = 1;\n  });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.countBy = group(function(result, value, \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.has(result, \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e)) result[\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e]\x2b\x2b; \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e result[\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e官网释义 \x3cem\x3e排序一个列表组成一个组，并且返回各组中的对象的数量的计数。类似groupBy，但是不是返回列表的值，而是返回在该组中值的数目。\x3c\/em\x3e其实就是对匹配成功的元素计数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  var reStrSymbol = \/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]\/g;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e  var reStrSymbol = \/[\x3cspan class=\x22hljs-string\x22\x3e^\\ud800-\\udfff\x3c\/span\x3e]|[\x3cspan class=\x22hljs-string\x22\x3e\\ud800-\\udbff\x3c\/span\x3e][\x3cspan class=\x22hljs-symbol\x22\x3e\\udc00-\\udfff\x3c\/span\x3e]|[\\ud800-\\udfff]\/g;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ereStrSymbol 用于正则函数，这一块我也不是很熟悉，但是我找到了两篇文章做了参考，\x3ca href=\x22http:\/\/unicode.org\/pipermail\/unicode\/2014-June\/000679.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUnicode Regular Expressions, Surrogate Points and UTF-8\x3c\/a\x3e、\x3cbr\x3e\x3ca href=\x22http:\/\/www.unicode.org\/mail-arch\/unicode-ml\/y2003-m10\/0216.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRe: Java char and Unicode 3.0\x2b (was:Canonical equivalence in rendering: mandatory or recommended?)\x3c\/a\x3e、\x3ca href=\x22http:\/\/unicode.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eunicode\x3c\/a\x3e。另外知乎上也有人对这句话做了判断：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 [^\\ud800-\\udfff] 普通的 BMP 字符，表示不包含代理对代码点的所有字符\n [\\ud800-\\udbff][\\udc00-\\udfff] 成对的代理项对，表示合法的代理对的所有字符\n [\\ud800-\\udfff] 未成对的代理项字，表示代理对的代码点（本身不是合法的Unicode字符）\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e [^\\ud800-\\udfff] 普通的 BMP 字符，表示不包含代理对代码点的所有字符\n [\x3cspan class=\x22hljs-string\x22\x3e\\ud800-\\udbff\x3c\/span\x3e][\x3cspan class=\x22hljs-symbol\x22\x3e\\udc00-\\udfff\x3c\/span\x3e] 成对的代理项对，表示合法的代理对的所有字符\n [\\ud800-\\udfff] 未成对的代理项字，表示代理对的代码点（本身不是合法的Unicode字符）\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上仅供参考，我也不是很清楚，等我做好这方面功课的时候再重新说这个话题。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (_.isString(obj)) {\n      return obj.match(reStrSymbol);\n    }\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.toArray = function(obj) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!obj) \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e [];\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.isArray(obj)) \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e slice.call(obj);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.isString(obj)) {\n      \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e obj.match(reStrSymbol);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isArrayLike(obj)) \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3emap\x3c\/span\x3e(obj, \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eidentity\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e_\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3evalues\x3c\/span\x3e(obj);\n  };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e官网说 \x3cem\x3e把list(任何可以迭代的对象)转换成一个数组，在转换 arguments 对象时非常有用\x3c\/em\x3e，并给出一个 \x3ccode\x3e(function(){ return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\x3c\/code\x3e，说心里话每当看到 arguments 的时候我第一个印象是 \x3ccode\x3eArray.prototype.slice.call(arguments, indexes);\x3c\/code\x3e，这里作者对待 Array 的原理同样是这个。\x3ccode\x3e_.toArray\x3c\/code\x3e 函数本身没有重点，无非就是根据字符串、数组、对象进行数组转换，需要注意的是当转换 Object 的时候会忽略 key-value 的 key，只单独把 value 放到数组中，另外就是 \x3ccode\x3eif (_.isArray(obj))\x3c\/code\x3e 和 \x3ccode\x3eif (isArrayLike(obj))\x3c\/code\x3e，顾名思义第一个是判断数组，第二个难道是考虑到 \x3ccode\x3e{\x27length\x27:[1,2,3,4]}\x3c\/code\x3e 这种数据结构的情况？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs matlab\x22\x3e\x3ccode\x3e  _.\x3cspan class=\x22hljs-built_in\x22\x3esize\x3c\/span\x3e = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj)\x3c\/span\x3e {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (obj == null) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e isArrayLike(obj) ? obj.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e : _.keys(obj).\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e;\n  };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e_.size\x3c\/code\x3e 用于返回传入参数的长度，包括但不限于 Object、Array 、 String 和 Function，Function 返回的是 Function 中传入参数的个数（arguments）。另外 Map 这里有个坑，Map返回值是12，众所周知 Map是一个大的对象，所以返回值是它的12个基本属性的个数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  _.partition = group(function(result, value, pass) {\n    result[pass ? 0 : 1].push(value);\n  }, true);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fortran\x22\x3e\x3ccode\x3e  _.partition = group(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(result, value, pass)\x3c\/span\x3e\x3c\/span\x3e {\n    result[\x3cspan class=\x22hljs-keyword\x22\x3epass\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].push(\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e);\n  }, true);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e_.partition\x3c\/code\x3e 是第四个用 group 函数包装的函数，用来对传入 obj 做判断时返回符合回调断言的结果集以及不符合的结果集，从 \x3ccode\x3eresult[pass ? 0 : 1].push(value)\x3c\/code\x3e 这里就可见一斑了，也就是说 group 的第三个传参 partition 也就是为了 \x3ccode\x3e_.partition\x3c\/code\x3e 而存在。partition 使 result 的设定为固定的 \x3ccode\x3e[[][]]\x3c\/code\x3e，这种写法我觉得并不是看上去最优雅地，理想情况是最好不存在第三个参数才对，但这一定是相对节约性能的，面对可节约的性能怎么取舍已经很清楚了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>1625行，解开 underscore.js 的面纱 - 第四章</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005678140">https://segmentfault.com/a/1190000005678140</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/dio9qspdezo/" target="_blank">https://alili.tech/archive/dio9qspdezo/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>