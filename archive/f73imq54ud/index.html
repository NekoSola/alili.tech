<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="HTML5上传图片文件（含拖拽、预览、上传、美化）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>HTML5上传图片文件（含拖拽、预览、上传、美化） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/f73imq54ud/",
				"appid": "1613049289050283", 
				"title": "HTML5上传图片文件（含拖拽、预览、上传、美化） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/c5o31gi2txw/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/b9m062uch3f/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&text=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&text=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&title=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&is_video=false&description=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&title=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&title=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&title=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff73imq54ud%2f&title=HTML5%e4%b8%8a%e4%bc%a0%e5%9b%be%e7%89%87%e6%96%87%e4%bb%b6%ef%bc%88%e5%90%ab%e6%8b%96%e6%8b%bd%e3%80%81%e9%a2%84%e8%a7%88%e3%80%81%e4%b8%8a%e4%bc%a0%e3%80%81%e7%be%8e%e5%8c%96%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">HTML5上传图片文件（含拖拽、预览、上传、美化）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e欢迎交换友链 \x3ca href=\x22http:\/\/laker.me\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eLaker\x27s Blog--进击的程序媛\x3c\/a\x3e\x3cbr\x3eGithub：\x3ca href=\x22https:\/\/github.com\/younglaker\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/younglaker\x3c\/a\x3e\x3cbr\x3e微博: \x3ca href=\x22http:\/\/weibo.com\/1830309103\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e江小湖Laker\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuO9f\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuO9f\x22 alt=\x22HTML5上传图片文件.png\x22 title=\x22HTML5上传图片文件.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/laker.me\/blog\/2016\/03\/04\/16_0304_ajax_file_upload\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e上篇文章讲了如何上传文件\x3c\/a\x3e。本文讲细分讲述图片上传、预览等。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e关于接口\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.w3.org\/TR\/file-upload\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFile API\x3c\/a\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eFile - 独立文件；提供只读信息，例如名称、文件大小、mimetype 和对文件句柄的引用。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFileList - File 对象的类数组序列（考虑多文件上传或者从桌面拖动目录或文件）。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eBlob - 可将文件分割为字节范围。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFileReader - 读取File或Blob\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eURL scheme\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e检测浏览器是否支持\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 检测是否支持File API\nif (window.File \x26amp;\x26amp; window.FileReader \x26amp;\x26amp; window.FileList \x26amp;\x26amp; window.Blob) {\n  \/\/  支持\n} else {\n  alert(\x27不支持\x27);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检测是否支持File API\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.File \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.FileReader \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.FileList \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Blob) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/  支持\x3c\/span\x3e\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n  alert(\x3cspan class=\x22hljs-string\x22\x3e\x27不支持\x27\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e基本代码\x3c\/h2\x3e\n\x3cp\x3e选取一张图片，并预览：\x3cbr\x3e\x3ca href=\x22https:\/\/codepen.io\/younglaker\/pen\/vGmaYr\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDemo1\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22younglaker\/pen\/vGmaYr\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cinput id=\x26quot;img_input\x26quot; type=\x26quot;file\x26quot; accept=\x26quot;image\/*\x26quot;\/\x3e\n\x3clabel for=\x26quot;img_input\x26quot;\x3e\x3c\/label\x3e\n\x3cdiv class=\x26quot;preview_box\x26quot;\x3e\x3c\/div\x3e\n\n.preview_box img {\n  width: 200px;\n}\n\n$(\x26quot;#img_input\x26quot;).on(\x26quot;change\x26quot;, function(e){\n\n  var file = e.target.files[0]; \/\/获取图片资源\n\n  \/\/ 只选择图片文件\n  if (!file.type.match(\x27image.*\x27)) {\n    return false;\n  }\n\n  var reader = new FileReader();\n\n  reader.readAsDataURL(file); \/\/ 读取文件\n\n  \/\/ 渲染文件\n  reader.onload = function(arg) {\n\n    var img = \x27\x3cimg class=\x26quot;preview\x26quot; src=\x26quot;\x27 \x2b arg.target.result \x2b \x27\x26quot; alt=\x26quot;preview\x26quot;\/\x3e\x27;\n    $(\x26quot;.preview_box\x26quot;).empty().append(img);\n  }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x26lt;input id=\x3cspan class=\x22hljs-string\x22\x3e\x22img_input\x22\x3c\/span\x3e type=\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e accept=\x3cspan class=\x22hljs-string\x22\x3e\x22image\/*\x22\x3c\/span\x3e\/\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img_input\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22preview_box\x22\x3c\/span\x3e\x26gt;\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n.preview_box img {\n  \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3epx;\n}\n\n$(\x3cspan class=\x22hljs-string\x22\x3e\x22#img_input\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x22change\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e file = e.target.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取图片资源\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只选择图片文件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!file.type.match(\x3cspan class=\x22hljs-string\x22\x3e\x27image.*\x27\x3c\/span\x3e)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e reader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FileReader();\n\n  reader.readAsDataURL(file); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 读取文件\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染文件\x3c\/span\x3e\n  reader.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;img class=\x22preview\x22 src=\x22\x27\x3c\/span\x3e \x2b arg.target.result \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x22 alt=\x22preview\x22\/\x26gt;\x27\x3c\/span\x3e;\n    $(\x3cspan class=\x22hljs-string\x22\x3e\x22.preview_box\x22\x3c\/span\x3e).empty().append(img);\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上传到服务器\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var form_data = new FormData();\nvar file_data = $(\x26quot;#img_input\x26quot;).prop(\x26quot;files\x26quot;)[0];\n\n\/\/ 把上传的数据放入form_data\nform_data.append(\x26quot;user\x26quot;, \x26quot;Mike\x26quot;);\nform_data.append(\x26quot;img\x26quot;, file_data);\n\n$.ajax({\n    type: \x26quot;POST\x26quot;, \/\/ 上传文件要用POST\n    url: \x26quot;\x26quot;,\n    dataType : \x26quot;json\x26quot;,\n    crossDomain: true, \/\/ 如果用到跨域，需要后台开启CORS\n  processData: false,  \/\/ 注意：不要 process data\n  contentType: false,  \/\/ 注意：不设置 contentType\n    data: form_data\n}).success(function(msg) {\n    console.log(msg);\n}).fail(function(msg) {\n    console.log(msg);\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e form_data = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FormData();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e file_data = $(\x3cspan class=\x22hljs-string\x22\x3e\x22#img_input\x22\x3c\/span\x3e).prop(\x3cspan class=\x22hljs-string\x22\x3e\x22files\x22\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把上传的数据放入form_data\x3c\/span\x3e\nform_data.append(\x3cspan class=\x22hljs-string\x22\x3e\x22user\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22Mike\x22\x3c\/span\x3e);\nform_data.append(\x3cspan class=\x22hljs-string\x22\x3e\x22img\x22\x3c\/span\x3e, file_data);\n\n$.ajax({\n    \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22POST\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 上传文件要用POST\x3c\/span\x3e\n    url: \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3edataType\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22json\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecrossDomain\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果用到跨域，需要后台开启CORS\x3c\/span\x3e\n  processData: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意：不要 process data\x3c\/span\x3e\n  contentType: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意：不设置 contentType\x3c\/span\x3e\n    data: form_data\n}).success(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(msg);\n}).fail(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(msg);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e拖拽上传\x3c\/h2\x3e\n\x3cp\x3e三个相关事件：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3edragenter\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3edragover\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3edrop\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e原生JavaScript：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/younglaker\/pen\/vGmaYr\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDemo2\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22younglaker\/pen\/vGmaYr\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv id=\x26quot;drop_zone\x26quot;\x3eDrop files here\x3c\/div\x3e\n\x3cul id=\x26quot;list\x26quot;\x3e\x3c\/ul\x3e\n\n\n\/\/ 必须阻止dragenter和dragover事件的默认行为，这样才能触发 drop 事件\nfunction fileSelect(evt) {\n\n  evt.stopPropagation();\n  evt.preventDefault();\n\n  var files = evt.dataTransfer.files; \/\/ 文件对象\n  var output = [];\n\n  \/\/ 处理多文件\n  for (var i = 0, f; f = files[i]; i\x2b\x2b) {\n    output.push(\x27\x3cli\x3e\x3cstrong\x3e\x27, escape(f.name), \x27\x3c\/strong\x3e (\x27, f.type || \x27n\/a\x27, \x27) - \x27,\n                f.size, \x27 bytes, last modified: \x27,\n                f.lastModifiedDate.toLocaleDateString(), \x27\x3c\/li\x3e\x27);\n  }\n  \/\/ 显示文件信息\n  document.getElementById(\x27list\x27).innerHTML = output.join(\x27\x27);\n}\n\nfunction dragOver(evt) {\n  evt.stopPropagation();\n  evt.preventDefault();\n  evt.dataTransfer.dropEffect = \x27copy\x27;\n}\n\n\/\/ 监听器\nvar dropZone = document.getElementById(\x27drop_zone\x27);\ndropZone.addEventListener(\x27dragover\x27, dragOver, false);\ndropZone.addEventListener(\x27drop\x27, fileSelect, false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x26lt;div id=\x3cspan class=\x22hljs-string\x22\x3e\x22drop_zone\x22\x3c\/span\x3e\x26gt;Drop files here\x26lt;\/div\x26gt;\n\x26lt;ul id=\x3cspan class=\x22hljs-string\x22\x3e\x22list\x22\x3c\/span\x3e\x26gt;\x26lt;\/ul\x26gt;\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 必须阻止dragenter和dragover事件的默认行为，这样才能触发 drop 事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efileSelect\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(evt)\x3c\/span\x3e \x3c\/span\x3e{\n\n  evt.stopPropagation();\n  evt.preventDefault();\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e files = evt.dataTransfer.files; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件对象\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e output = [];\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理多文件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, f; f = files[i]; i\x2b\x2b) {\n    output.push(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;li\x26gt;\x26lt;strong\x26gt;\x27\x3c\/span\x3e, escape(f.name), \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/strong\x26gt; (\x27\x3c\/span\x3e, f.type || \x3cspan class=\x22hljs-string\x22\x3e\x27n\/a\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27) - \x27\x3c\/span\x3e,\n                f.size, \x3cspan class=\x22hljs-string\x22\x3e\x27 bytes, last modified: \x27\x3c\/span\x3e,\n                f.lastModifiedDate.toLocaleDateString(), \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/li\x26gt;\x27\x3c\/span\x3e);\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示文件信息\x3c\/span\x3e\n  document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27list\x27\x3c\/span\x3e).innerHTML = output.join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edragOver\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(evt)\x3c\/span\x3e \x3c\/span\x3e{\n  evt.stopPropagation();\n  evt.preventDefault();\n  evt.dataTransfer.dropEffect = \x3cspan class=\x22hljs-string\x22\x3e\x27copy\x27\x3c\/span\x3e;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dropZone = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27drop_zone\x27\x3c\/span\x3e);\ndropZone.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27dragover\x27\x3c\/span\x3e, dragOver, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\ndropZone.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27drop\x27\x3c\/span\x3e, fileSelect, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ejQuery：\x3c\/p\x3e\n\x3cp\x3e其他代码可以不变，注意监听事件的时候的，由于jQuery的封装，数据存放的字段有变，传参是\x3ccode\x3ee.originalEvent\x3c\/code\x3e而不是\x3ccode\x3ee\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$(\x26quot;#drop_zone\x26quot;).on(\x27dragover\x27, function(e){\n  e.stopPropagation();\n  e.preventDefault();\n  handleDragOver(e.originalEvent);\n});\n\n$(\x26quot;#drop_zone\x26quot;).on(\x27drop\x27, function(e){\n  e.stopPropagation();\n  e.preventDefault();\n  handleFileSelect(e.originalEvent);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e$(\x3cspan class=\x22hljs-string\x22\x3e\x22#drop_zone\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27dragover\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n  e.stopPropagation();\n  e.preventDefault();\n  handleDragOver(e.originalEvent);\n});\n\n$(\x3cspan class=\x22hljs-string\x22\x3e\x22#drop_zone\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27drop\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n  e.stopPropagation();\n  e.preventDefault();\n  handleFileSelect(e.originalEvent);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e美化上传框\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e方法一： 在隐藏的文件输入框上调用click()方法\x3c\/h3\x3e\n\x3cp\x3e隐藏掉默认的的文件输入框\x3ccode\x3e\x26lt;input\x26gt;\x3c\/code\x3e元素，使用自定义的界面来充当打开文件选择对话框的按钮。要使用样式\x3ccode\x3edisplay:none\x3c\/code\x3e把原本的文件输入框隐藏掉，然后在需要的时候调用它的click()方法就行了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cinput type=\x26quot;file\x26quot; id=\x26quot;fileElem\x26quot; multiple accept=\x26quot;image\/*\x26quot; style=\x26quot;display：none\x26quot; onchange=\x26quot;handleFiles(this.files)\x26quot;\x3e\n\x3ca href=\x26quot;#\x26quot; id=\x26quot;fileSelect\x26quot;\x3e选择文件\x3c\/a\x3e\n\nvar fileSelect = document.getElementById(\x26quot;fileSelect\x26quot;),\n  fileElem = document.getElementById(\x26quot;fileElem\x26quot;);\n\nfileSelect.addEventListener(\x26quot;click\x26quot;, function (e) {\n  if (fileElem) {\n    fileElem.click();  \/\/ jQuery可以使用 trigger()\n  }\n  e.preventDefault(); \/\/ prevent navigation to \x26quot;#\x26quot;\n}, false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x26lt;input type=\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22fileElem\x22\x3c\/span\x3e multiple accept=\x3cspan class=\x22hljs-string\x22\x3e\x22image\/*\x22\x3c\/span\x3e style=\x3cspan class=\x22hljs-string\x22\x3e\x22display：none\x22\x3c\/span\x3e onchange=\x3cspan class=\x22hljs-string\x22\x3e\x22handleFiles(this.files)\x22\x3c\/span\x3e\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22#\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22fileSelect\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e选择文件\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fileSelect = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22fileSelect\x22\x3c\/span\x3e),\n  fileElem = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22fileElem\x22\x3c\/span\x3e);\n\nfileSelect.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (fileElem) {\n    fileElem.click();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ jQuery可以使用 trigger()\x3c\/span\x3e\n  }\n  e.preventDefault(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ prevent navigation to \x22#\x22\x3c\/span\x3e\n}, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e方法二：用label\x3c\/h3\x3e\n\x3cp\x3e隐藏input，把样式写到label上，点击label就是对input进行操作。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/younglaker\/pen\/vGmaYr\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDemo3\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22younglaker\/pen\/vGmaYr\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cinput id=\x26quot;img_input2\x26quot; type=\x26quot;file\x26quot; accept=\x26quot;image\/*\x26quot;\/\x3e\n\x3clabel for=\x26quot;img_input2\x26quot; id=\x26quot;img_label2\x26quot;\x3e选择文件\n    \x3ci class=\x26quot;fa fa-plus fa-lg\x26quot;\x3e\x3c\/i\x3e\n\x3c\/label\x3e\n\x3cdiv id=\x26quot;preview_box2\x26quot;\x3e\x3c\/div\x3e\n\n\n#img_input2 {\n  display: none;\n}\n#img_label2 {\n  background-color: #f2d547;\n  border-radius: 5px;\n  display: inline-block;\n  padding: 10px;\n}\n#preview_box2 img {\n  width: 200px;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22img_input2\x22\x3c\/span\x3e type=\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e accept=\x3cspan class=\x22hljs-string\x22\x3e\x22image\/*\x22\x3c\/span\x3e\/\x26gt;\n\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img_input2\x22\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22img_label2\x22\x3c\/span\x3e\x26gt;选择文件\n    \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e class=\x3cspan class=\x22hljs-string\x22\x3e\x22fa fa-plus fa-lg\x22\x3c\/span\x3e\x26gt;\x26lt;\/i\x26gt;\n\x26lt;\/label\x26gt;\n\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22preview_box2\x22\x3c\/span\x3e\x26gt;\x26lt;\/div\x26gt;\n\n\n\x3cspan class=\x22hljs-selector-id\x22\x3e#img_input2\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n}\n\x3cspan class=\x22hljs-selector-id\x22\x3e#img_label2\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#f2d547\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: inline-block;\n  \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10px\x3c\/span\x3e;\n}\n\x3cspan class=\x22hljs-selector-id\x22\x3e#preview_box2\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e200px\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>HTML5上传图片文件（含拖拽、预览、上传、美化）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004924160">https://segmentfault.com/a/1190000004924160</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/f73imq54ud/" target="_blank">https://alili.tech/archive/f73imq54ud/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>