<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="HTML 简单拼图游戏"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>HTML 简单拼图游戏 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/990vsm47t8i/",
				"appid": "1613049289050283", 
				"title": "HTML 简单拼图游戏 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-08T02:30:41"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/pkl88vozu67/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/obbxs1xycsg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&text=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&text=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&title=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&is_video=false&description=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&title=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&title=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&title=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f990vsm47t8i%2f&title=HTML%20%e7%ae%80%e5%8d%95%e6%8b%bc%e5%9b%be%e6%b8%b8%e6%88%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">HTML 简单拼图游戏</h1><div class="meta"><div class="postdate"><time datetime="2019-02-08" itemprop="datePublished">2019-02-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e先不废话，\x3ca href=\x22http:\/\/www.lemonvc.com\/html\/20160616\/pintu.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e请看演示\x3c\/a\x3e。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyoj2\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyoj2\x22 alt=\x22拼图游戏\x22 title=\x22拼图游戏\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyoj5\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyoj5\x22 alt=\x22开始游戏\x22 title=\x22开始游戏\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e公司要搞这么个微信活动，可现在没有前端开发，没办法，身为打杂总监只好临时顶下这个空缺了。先找了一些 JS 代码，试用了下都不太理想，好一点的写的又太复杂，改起来有难度，干脆撸起袖子自己干。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e基本需求\x3c\/h2\x3e\n\x3cp\x3e有一个固定区域，被拆分成 c*r 个同等大小的碎片，拿走其中一块，靠近缺口的块可以向缺口方向移动；当拼出原来的图样视为完成。\x3c\/p\x3e\n\x3cp\x3e依照此需求，需要经历 加载图片-》拆分图片-》随机打散-》移动碎片-》判定完成 这些步骤。为了更有可玩性，能自行选择自己的图片就更妙了。\x3c\/p\x3e\n\x3cp\x3e下面就重点说明下各个步骤，为编写方便，引入 jQuery 作为辅助库。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e加载图片\x3c\/h2\x3e\n\x3cp\x3e首先当然是载入图片，计算宽高，对比拼图区域的尺寸进行缩放，如果比例不同，还得“裁剪”掉多余的部分。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 加载图片\n * cal 的回调参数为:\n *  ox 横向偏移\n *  oy 纵向偏移\n *  this 指向载入的图片的 jQuery 对象\n * @param {String} src 图片路径\n * @param {int} w 额定宽\n * @param {int} h 额定高\n * @param {Fucntion} cal 加载完成后的回调方法\n *\/\nfunction loadr(src, w, h, cal) {\n    var img  =  new Image();\n    img.onload = function() {\n        var xw = img.width ;\n        var xh = img.height;\n        var zw = xh * w \/ h;\n        if (zw \x3e xw) {\n            \/\/ 宽度优先\n            img.width   = w;\n            img.height  = xh * w \/ xw;\n            xh = (h - img.height) \/ 2;\n            xw = 0;\n        } else {\n            \/\/ 高度优先\n            img.height  = h;\n            img.width   = xw * h \/ xh;\n            xw = (w - img.width ) \/ 2;\n            xh = 0;\n        }\n\n        cal.call(img, xw, xh);\n    };\n    img.src = src ;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 加载图片\n * cal 的回调参数为:\n *  ox 横向偏移\n *  oy 纵向偏移\n *  this 指向载入的图片的 jQuery 对象\n * @param {String} src 图片路径\n * @param {int} w 额定宽\n * @param {int} h 额定高\n * @param {Fucntion} cal 加载完成后的回调方法\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eloadr\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esrc, w, h, cal\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img  =  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image();\n    img.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xw = img.width ;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xh = img.height;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e zw = xh * w \/ h;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (zw \x26gt; xw) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 宽度优先\x3c\/span\x3e\n            img.width   = w;\n            img.height  = xh * w \/ xw;\n            xh = (h - img.height) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            xw = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 高度优先\x3c\/span\x3e\n            img.height  = h;\n            img.width   = xw * h \/ xh;\n            xw = (w - img.width ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            xh = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n\n        cal.call(img, xw, xh);\n    };\n    img.src = src ;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上的“裁剪”仅仅是计算出偏移，然后将其传递给加载就绪的回调函数。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e拆分图片\x3c\/h2\x3e\n\x3cp\x3e图有了，已缩放，现在需要“拆分”成碎片。这里自然不是真的切割了，而是将图片 clone 出 c*r 片，然后利用负的坐标定位，其实质是用一个块遮盖了“切除”的部分，仅显示需要的碎片部分。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 拆分图片\n * @param {jQuery} that 容器对象\n * @param {int} cols 行\n * @param {int} rows 列\n * @param {int} ew 板块宽度\n * @param {int} eh 板块高度\n * @param {int} ox 图片横向偏移\n * @param {int} oy 图片纵向偏移\n * @param {Image} im 图片对象\n *\/\nfunction split(that, cols, rows, ew, eh, ox, oy, im) {\n    that.empty();\n\n    for(var j = 0 ; j \x3c rows; j \x2b\x2b) {\n        for(var i = 0 ; i \x3c cols; i \x2b\x2b) {\n            var k = i \x2b j * rows;\n\n            var pic = $(\x27\x3cdiv class=\x26quot;pt-pic\x26quot;\x3e\x3c\/div\x3e\x27);\n            pic.attr(\x26quot;id\x26quot;, \x26quot;pt-pic-\x26quot;\x2bk);\n            pic.data(\x26quot;idx\x26quot;, k);\n            pic.appendTo(that);\n            pic.css ({\n                \x26quot;position\x26quot;: \x26quot;relative\x26quot;,\n                \x26quot;overflow\x26quot;: \x26quot;hidden\x26quot;,\n                \x26quot;border\x26quot;  : \x26quot;0\x26quot;,\n                \x26quot;width\x26quot;   : ew \x2b \x26quot;px\x26quot;,\n                \x26quot;height\x26quot;  : eh \x2b \x26quot;px\x26quot;\n            });\n\n            var img = $(im.cloneNode());\n            img.appendTo(pic);\n            img.css ({\n                \x26quot;position\x26quot;: \x26quot;absolute\x26quot;,\n                \x26quot;z-index\x26quot; : \x26quot;88\x26quot;,\n                \x26quot;border\x26quot;  : \x26quot;0\x26quot;,\n                \x26quot;left\x26quot;    : (0 - i * ew \x2b ox) \x2b \x26quot;px\x26quot;,\n                \x26quot;top\x26quot;     : (0 - j * eh \x2b oy) \x2b \x26quot;px\x26quot;\n            });\n\n            \/\/ 因边框可能影响宽高计算, 故边框单独用一个块来放\n            var bor = $(\x27\x3cdiv class=\x26quot;pt-bor\x26quot;\x3e\x3c\/div\x3e\x27);\n            bor.appendTo(pic);\n            bor.css ({\n                \x26quot;position\x26quot;: \x26quot;absolute\x26quot;,\n                \x26quot;z-index\x26quot; : \x26quot;99\x26quot;,\n                \x26quot;width\x26quot;   : \x26quot;100%\x26quot;,\n                \x26quot;height\x26quot;  : \x26quot;100%\x26quot;\n            });\n            \/\/ 由于样式宽高并不含边框, 故再次计算尺寸的偏移量\n            bor.css ({\n                \x26quot;width\x26quot;   : (2 * bor.width () - bor.outerWidth ()) \x2b \x26quot;px\x26quot;,\n                \x26quot;height\x26quot;  : (2 * bor.height() - bor.outerHeight()) \x2b \x26quot;px\x26quot;\n            });\n        }\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 拆分图片\n * @param {jQuery} that 容器对象\n * @param {int} cols 行\n * @param {int} rows 列\n * @param {int} ew 板块宽度\n * @param {int} eh 板块高度\n * @param {int} ox 图片横向偏移\n * @param {int} oy 图片纵向偏移\n * @param {Image} im 图片对象\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esplit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ethat, cols, rows, ew, eh, ox, oy, im\x3c\/span\x3e) \x3c\/span\x3e{\n    that.empty();\n\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ; j \x26lt; rows; j \x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ; i \x26lt; cols; i \x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k = i \x2b j * rows;\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pic = $(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22pt-pic\x22\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e);\n            pic.attr(\x3cspan class=\x22hljs-string\x22\x3e\x22id\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22pt-pic-\x22\x3c\/span\x3e\x2bk);\n            pic.data(\x3cspan class=\x22hljs-string\x22\x3e\x22idx\x22\x3c\/span\x3e, k);\n            pic.appendTo(that);\n            pic.css ({\n                \x3cspan class=\x22hljs-string\x22\x3e\x22position\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22relative\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22overflow\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22hidden\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22border\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22width\x22\x3c\/span\x3e   : ew \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22height\x22\x3c\/span\x3e  : eh \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e\n            });\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = $(im.cloneNode());\n            img.appendTo(pic);\n            img.css ({\n                \x3cspan class=\x22hljs-string\x22\x3e\x22position\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22absolute\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22z-index\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x2288\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22border\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22left\x22\x3c\/span\x3e    : (\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e - i * ew \x2b ox) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22top\x22\x3c\/span\x3e     : (\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e - j * eh \x2b oy) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e\n            });\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 因边框可能影响宽高计算, 故边框单独用一个块来放\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bor = $(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22pt-bor\x22\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e);\n            bor.appendTo(pic);\n            bor.css ({\n                \x3cspan class=\x22hljs-string\x22\x3e\x22position\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22absolute\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22z-index\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x2299\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22width\x22\x3c\/span\x3e   : \x3cspan class=\x22hljs-string\x22\x3e\x22100%\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22height\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x22100%\x22\x3c\/span\x3e\n            });\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由于样式宽高并不含边框, 故再次计算尺寸的偏移量\x3c\/span\x3e\n            bor.css ({\n                \x3cspan class=\x22hljs-string\x22\x3e\x22width\x22\x3c\/span\x3e   : (\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * bor.width () - bor.outerWidth ()) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-string\x22\x3e\x22height\x22\x3c\/span\x3e  : (\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * bor.height() - bor.outerHeight()) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px\x22\x3c\/span\x3e\n            });\n        }\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e稍微注意，为方便人眼分辨碎片，最好给碎片加个边框，但加边框必然影响坐标的计算，故在图片上再覆盖一层，边框设在他上面，就算加个撕裂效果的透明图做边框都没问题了。这样碎片内图片的偏移坐标的计算就少了些麻烦了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e随机打散\x3c\/h2\x3e\n\x3cp\x3e这游戏当然是跟电脑玩了，总不能自己打散自己玩吧？但这个打散不能给每个图片一个随机位置，那很可能你永远也拼不回去了。小时拿那种拼图游戏板整人就干过这种事，故意抠下来把头和脚交换再打散，然后跟其他小朋友打赌。所以程序也得守规矩一块一块的移动。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 打散图片\n * @param {jQuery} that 容器对象\n * @param {int} cols 列\n * @param {int} rows 行\n * @param {int} rand 打散步数\n *\/\nfunction upset(that, cols, rows, rand) {\n    var v ;\n    var r = Math.floor(Math.random()  *  cols  *  rows);\n    var hole = that.children().eq(r).addClass(\x26quot;pt-pix\x26quot;);\n    var part ;\n    var step = [];\n    var dbug = [];\n    for(var  i = 0, j = rand; i \x3c j; i \x2b\x2b) {\n        var  x = cols - 1;\n        var  y = rows - 1;\n        var  z = cols;\n        var rx = r % cols;\n        var ry = Math.floor(r \/ cols);\n        var rv = [];\n\n        if (rx \x3e 0 \x26amp;\x26amp; rx \x3c x) {\n            rv.push(r - 1, r \x2b 1); \/\/ 可左右移动\n        } else\n        if (rx \x3e 0) {\n            rv.push(r - 1); \/\/ 可向左移动\n        } else\n        {\n            rv.push(r \x2b 1); \/\/ 可向右移动\n        }\n        if (ry \x3e 0 \x26amp;\x26amp; ry \x3c y) {\n            rv.push(r - z, r \x2b z); \/\/ 可上下移动\n        } else\n        if (ry \x3e 0) {\n            rv.push(r - z); \/\/ 可向上移动\n        } else\n        {\n            rv.push(r \x2b z); \/\/ 可向下移动\n        }\n\n        \/\/ 排除来源位置\n        if (step.length \x3e 0) {\n            v = step[step.length - 1];\n            v = $.inArray(v, rv);\n            if (v \x3e -1) {\n                rv.splice(v, 1 );\n            }\n        }\n        \/\/ 排除回旋位置\n        if (step.length \x3e 2 \x26amp;\x26amp; rv.length \x3e 1) {\n            v = step[step.length - 3];\n            v = $.inArray(v, rv);\n            if (v \x3e -1) {\n                rv.splice(v, 1 );\n            }\n        }\n\n        \/\/ 随机方向\n        r = rv[Math.floor(Math.random()* rv.length)];\n        v = hole.index();\n            step.push(v);\n\n        \/\/ 交换位置\n        part  = that.children().eq( r );\n        if (r \x3c v) {\n            part.insertBefore(hole);\n            hole.insertBefore(that.children().eq(r));\n        } else {\n            hole.insertBefore(part);\n            part.insertBefore(that.children().eq(v));\n        }\n\n        \/\/ 调试步骤\n        if (r == v \x2b 1) {\n            dbug.push(\x26quot;左\x26quot;);\n        } else\n        if (r == v - 1) {\n            dbug.push(\x26quot;右\x26quot;);\n        } else\n        if (r \x3e v) {\n            dbug.push(\x26quot;上\x26quot;);\n        } else\n        if (r \x3c v) {\n            dbug.push(\x26quot;下\x26quot;);\n        }\n    }\n\n    \/\/ 攻略\n    dbug = dbug.reverse().join(\x26quot; \x26quot;); alert(dbug);\n    console.log( \x26quot;攻略: \x26quot;\x2bdbug\x2b\x26quot;\\r\\n此非最优解, 仅为随机打散时的逆向步骤, 上下左右为相对缺口的板块, 祝您玩的开心!\x26quot; );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 打散图片\n * @param {jQuery} that 容器对象\n * @param {int} cols 列\n * @param {int} rows 行\n * @param {int} rand 打散步数\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eupset\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ethat, cols, rows, rand\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v ;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e r = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()  *  cols  *  rows);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hole = that.children().eq(r).addClass(\x3cspan class=\x22hljs-string\x22\x3e\x22pt-pix\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e part ;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e step = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dbug = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e  i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, j = rand; i \x26lt; j; i \x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e  x = cols - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e  y = rows - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e  z = cols;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rx = r % cols;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ry = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(r \/ cols);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rv = [];\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (rx \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; rx \x26lt; x) {\n            rv.push(r - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, r \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可左右移动\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (rx \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            rv.push(r - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向左移动\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        {\n            rv.push(r \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向右移动\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ry \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; ry \x26lt; y) {\n            rv.push(r - z, r \x2b z); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可上下移动\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ry \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            rv.push(r - z); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向上移动\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        {\n            rv.push(r \x2b z); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向下移动\x3c\/span\x3e\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 排除来源位置\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (step.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            v = step[step.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n            v = $.inArray(v, rv);\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (v \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n                rv.splice(v, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e );\n            }\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 排除回旋位置\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (step.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x26amp;\x26amp; rv.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            v = step[step.length - \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n            v = $.inArray(v, rv);\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (v \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n                rv.splice(v, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e );\n            }\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 随机方向\x3c\/span\x3e\n        r = rv[\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()* rv.length)];\n        v = hole.index();\n            step.push(v);\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 交换位置\x3c\/span\x3e\n        part  = that.children().eq( r );\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r \x26lt; v) {\n            part.insertBefore(hole);\n            hole.insertBefore(that.children().eq(r));\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            hole.insertBefore(part);\n            part.insertBefore(that.children().eq(v));\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 调试步骤\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r == v \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            dbug.push(\x3cspan class=\x22hljs-string\x22\x3e\x22左\x22\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r == v - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            dbug.push(\x3cspan class=\x22hljs-string\x22\x3e\x22右\x22\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r \x26gt; v) {\n            dbug.push(\x3cspan class=\x22hljs-string\x22\x3e\x22上\x22\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (r \x26lt; v) {\n            dbug.push(\x3cspan class=\x22hljs-string\x22\x3e\x22下\x22\x3c\/span\x3e);\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 攻略\x3c\/span\x3e\n    dbug = dbug.reverse().join(\x3cspan class=\x22hljs-string\x22\x3e\x22 \x22\x3c\/span\x3e); alert(dbug);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log( \x3cspan class=\x22hljs-string\x22\x3e\x22攻略: \x22\x3c\/span\x3e\x2bdbug\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22\\r\\n此非最优解, 仅为随机打散时的逆向步骤, 上下左右为相对缺口的板块, 祝您玩的开心!\x22\x3c\/span\x3e );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把打散的步骤记录下来，然后反转数组，就是攻略啦。\x3c\/p\x3e\n\x3cp\x3e不过随机时需要避免往回走，否则出现 左-\x26gt;右-\x26gt;左 这类情况就不好玩了；还得避免其他循环，如 上-\x26gt;右-\x26gt;下-\x26gt;左 这样的，这会回到原点，等于什么也没干；但更大的循环没想好怎么处理，暂时不去纠结了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e移动判定\x3c\/h2\x3e\n\x3cp\x3e移动碎片到缺口，也就是交换碎片与缺口的位置。左右移动很简单，序号大的 insertBefore 序号小的即可。上下移动有个小坑，开始自己没注意，我原本想不管横向还是纵向，没有两次 insertBefore 搞不定的，但是如果 3 和 7 交换位置(3x3, 0~8)，3 移动到 7 前，7 再移动到 3 前，此时原来的 3 变成了 6。的确，没有什么是不能两次 insertBefore 解决的，但还得考虑让序号大的先动。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 移动板块\n * @param {jQuery} that 容器对象\n * @param {int} cols 列数\n * @param {int} rows 行数\n * @param {jQuery} hole 缺口对象\n * @param {jQuery} part 板块对象\n *\/\nfunction mover(that, cols, rows, hole, part) {\n    var move = false ;\n    var i  = part.index();\n    var j  = hole.index();\n    var ix = i % cols;\n    var jx = j % cols;\n    var iy = Math.floor(i \/ cols);\n    var jy = Math.floor(j \/ cols);\n\n    if (iy == jy) { \/\/ 在同一行\n        move  = ix == jx \x2b 1  \/\/ 可向左边移动\n             || ix == jx - 1; \/\/ 可向右边移动\n    } else\n    if (ix == jx) { \/\/ 在同一列\n        move  = iy == jy \x2b 1  \/\/ 可向上移动\n             || iy == jy - 1; \/\/ 可向下移动\n    }\n\n    \/\/ 互换位置\n    if (move) {\n        if (i  \x3c  j ) {\n            part.insertBefore(hole);\n            hole.insertBefore(that.children().eq(i));\n        } else {\n            hole.insertBefore(part);\n            part.insertBefore(that.children().eq(j));\n        }\n    }\n\n    \/\/ 判断是否拼图完成\n    move = true;\n    for (i = 0, j = cols * rows; i \x3c j; i \x2b\x2b) {\n        if (that.children().eq(i).data(\x26quot;idx\x26quot;) != i) {\n            move = false;\n        }\n    }\n\n    return  move;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 移动板块\n * @param {jQuery} that 容器对象\n * @param {int} cols 列数\n * @param {int} rows 行数\n * @param {jQuery} hole 缺口对象\n * @param {jQuery} part 板块对象\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emover\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ethat, cols, rows, hole, part\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e move = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e ;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i  = part.index();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j  = hole.index();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ix = i % cols;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e jx = j % cols;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iy = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(i \/ cols);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e jy = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(j \/ cols);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (iy == jy) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在同一行\x3c\/span\x3e\n        move  = ix == jx \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向左边移动\x3c\/span\x3e\n             || ix == jx - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向右边移动\x3c\/span\x3e\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ix == jx) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在同一列\x3c\/span\x3e\n        move  = iy == jy \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向上移动\x3c\/span\x3e\n             || iy == jy - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可向下移动\x3c\/span\x3e\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 互换位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (move) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i  \x26lt;  j ) {\n            part.insertBefore(hole);\n            hole.insertBefore(that.children().eq(i));\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            hole.insertBefore(part);\n            part.insertBefore(that.children().eq(j));\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断是否拼图完成\x3c\/span\x3e\n    move = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, j = cols * rows; i \x26lt; j; i \x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (that.children().eq(i).data(\x3cspan class=\x22hljs-string\x22\x3e\x22idx\x22\x3c\/span\x3e) != i) {\n            move = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        }\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e  move;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e判断是否完成就来个笨办法吧，依次遍历所有碎片，只要有一个没对上序号就是还没成功。\x3c\/p\x3e\n\x3cp\x3e未处理滑动事件，以后闲了再加吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e整合游戏程序\x3c\/h2\x3e\n\x3cp\x3e上面分散的几个函数用起来还是不太方便，整合成一个 jQuery 插件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 拼图游戏\n * @param {String} src 图片路径\n * @param {int} cols 列数\n * @param {int} rows 行数\n * @param {int} rand 打散步数\n *\/\n$.fn.hsPintu = function(src, cols, rows, rand) {\n    var that = $(this);\n    var srz  = that.data(\x26quot;src\x26quot;);\n    var img  = that.data(\x26quot;img\x26quot;);\n\n    var aw = that.width ();\n    var ah = that.height();\n    var ew = aw \/ rows;\n    var eh = ah \/ cols;\n\n    \/\/ 状态: 0 进行中, 1 成功, 2 结束\n    that.data(\x26quot;hsPintuStatus\x26quot;, 2);\n    that.data(\x26quot;cols\x26quot;, cols);\n    that.data(\x26quot;rows\x26quot;, rows);\n\n    \/**\n     * img 存在且 src 没变化\n     * 则不需要再次加载图片\n     * 直接取出存储好的数据\n     *\/\n    if (img \x26amp;\x26amp; srz === src) {\n        var ox = that.data(\x26quot;pos_x\x26quot;);\n        var oy = that.data(\x26quot;pos_y\x26quot;);\n        console.log(\x26quot;Note: 图片无变化\x26quot;);\n\n        split(that, cols, rows, ew, eh, ox, oy, img );\n\n        \/\/ 未给 rand 则仅拆分而不打散\n        if (rand === undefined) return;\n\n        upset(that, cols, rows, rand);\n        that.data(\x26quot;hsPintuStatus\x26quot;, 0);\n        that.trigger(\x26quot;hsPintuLaunch\x26quot;);\n    } else\n    loadr(src, aw, ah, function(ox, oy) {\n        that.data(\x26quot;src\x26quot;, src );\n        that.data(\x26quot;img\x26quot;, this);\n        that.data(\x26quot;pos_x\x26quot;, ox);\n        that.data(\x26quot;pos_y\x26quot;, oy);\n        console.log(\x26quot;Note: 载入新图片\x26quot;);\n\n        split(that, cols, rows, ew, eh, ox, oy, this);\n\n        \/\/ 未给 rand 则仅拆分而不打散\n        if (rand === undefined) return;\n\n        upset(that, cols, rows, rand);\n        that.data(\x26quot;hsPintuStatus\x26quot;, 0);\n        that.trigger(\x26quot;hsPintuLaunch\x26quot;);\n    });\n\n    \/\/ 已经初始化过就不要再绑定事件了\n    if (! that.data(\x26quot;hsPintuInited\x26quot;)) {\n        that.data(\x26quot;hsPintuInited\x26quot;, 1);\n\n        that.on(\x26quot;click\x26quot;, \x26quot;.pt-pic:not(.pt-pix)\x26quot;, function() {\n            if (that.data(\x26quot;hsPintuStatus\x26quot;) === 0) {\n                var cols =that.data(\x26quot;cols\x26quot;);\n                var rows =that.data(\x26quot;rows\x26quot;);\n                var hole =that.children(\x26quot;.pt-pix\x26quot;);\n                if (mover(that, cols, rows, hole, $(this))) {\n                    that.data(\x26quot;hsPintuStatus\x26quot;, 1);\n                    that.trigger(\x26quot;hsPintuFinish\x26quot;);\n                }\n            }\n        });\n    }\n\n    return  this;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 拼图游戏\n * @param {String} src 图片路径\n * @param {int} cols 列数\n * @param {int} rows 行数\n * @param {int} rand 打散步数\n *\/\x3c\/span\x3e\n$.fn.hsPintu = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esrc, cols, rows, rand\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = $(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e srz  = that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22src\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img  = that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22img\x22\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e aw = that.width ();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ah = that.height();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ew = aw \/ rows;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e eh = ah \/ cols;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 状态: 0 进行中, 1 成功, 2 结束\x3c\/span\x3e\n    that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuStatus\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22cols\x22\x3c\/span\x3e, cols);\n    that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22rows\x22\x3c\/span\x3e, rows);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * img 存在且 src 没变化\n     * 则不需要再次加载图片\n     * 直接取出存储好的数据\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (img \x26amp;\x26amp; srz === src) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ox = that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22pos_x\x22\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oy = that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22pos_y\x22\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Note: 图片无变化\x22\x3c\/span\x3e);\n\n        split(that, cols, rows, ew, eh, ox, oy, img );\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 未给 rand 则仅拆分而不打散\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (rand === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n        upset(that, cols, rows, rand);\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuStatus\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n        that.trigger(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuLaunch\x22\x3c\/span\x3e);\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n    loadr(src, aw, ah, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eox, oy\x3c\/span\x3e) \x3c\/span\x3e{\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22src\x22\x3c\/span\x3e, src );\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22img\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22pos_x\x22\x3c\/span\x3e, ox);\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22pos_y\x22\x3c\/span\x3e, oy);\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Note: 载入新图片\x22\x3c\/span\x3e);\n\n        split(that, cols, rows, ew, eh, ox, oy, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 未给 rand 则仅拆分而不打散\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (rand === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n        upset(that, cols, rows, rand);\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuStatus\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n        that.trigger(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuLaunch\x22\x3c\/span\x3e);\n    });\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 已经初始化过就不要再绑定事件了\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (! that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuInited\x22\x3c\/span\x3e)) {\n        that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuInited\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n        that.on(\x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22.pt-pic:not(.pt-pix)\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuStatus\x22\x3c\/span\x3e) === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cols =that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22cols\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rows =that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22rows\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hole =that.children(\x3cspan class=\x22hljs-string\x22\x3e\x22.pt-pix\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mover(that, cols, rows, hole, $(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e))) {\n                    that.data(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuStatus\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n                    that.trigger(\x3cspan class=\x22hljs-string\x22\x3e\x22hsPintuFinish\x22\x3c\/span\x3e);\n                }\n            }\n        });\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用 \x3ccode\x3e$(\x22#pt-box\x22).hsPintu(图片URL, 列数, 行数[, 随机步数]);\x3c\/code\x3e 即可初始化拼图游戏了, 拼图区域需要固定宽高；随机步数参数不提供时，仅拆解不打散。\x3c\/p\x3e\n\x3cp\x3e图片没变化时没必要重新加载，避免下时间损耗。当然了，更好的办法是再判断行、列和区域尺寸，没变化则直接排列好碎片。懒得写了，先这样吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e选择任意图片\x3c\/h2\x3e\n\x3cp\x3e上面都是固定的图片，参与感不好，让用户自行“上传”图片岂不更有意思。其实不必真的上传到服务器，既然“缩放”、“裁剪”上面都有了，直接加载本地图片不就好了嘛。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 预载文件\n * @param {Function} cal 回调函数\n * @returns {jQuery} 当前文件节点\n *\/\n$.fn.hsFileLoad = function(cal) {\n    this.each(function() {\n        var that = this;\n        if (window.FileReader) {\n            var fr = new FileReader( );\n            fr.onloadend = function(e) {\n                cal.call(that, e.target.result);\n            };  cal.call(that);\n            $.each( this.files, function(i, fo) {\n                fr.readAsDataURL( fo );\n            });\n        } else\n        if (this.getAsDataURL) {\n            cal.call(that, that.getAsDataURL());\n        } else {\n            cal.call(that, that.value);\n        }\n    });\n    return this;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 预载文件\n * @param {Function} cal 回调函数\n * @returns {jQuery} 当前文件节点\n *\/\x3c\/span\x3e\n$.fn.hsFileLoad = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecal\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.each(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.FileReader) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FileReader( );\n            fr.onloadend = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                cal.call(that, e.target.result);\n            };  cal.call(that);\n            $.each( \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.files, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei, fo\x3c\/span\x3e) \x3c\/span\x3e{\n                fr.readAsDataURL( fo );\n            });\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getAsDataURL) {\n            cal.call(that, that.getAsDataURL());\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            cal.call(that, that.value);\n        }\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码也能从我的开源项目内找到 \x3ca href=\x22https:\/\/github.com\/ihongs\/HongsCORE\/blob\/master\/hongs-web\/web\/static\/assets\/src\/hongscore-fork.js#L472\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e预载文件\x3c\/a\x3e 方法，此工具包还有些其他的文件上传预览类的方法，这是我对 bootstrap-fileinput 没有图片裁剪功能（与最终服务端处理后的结果一致）而“一气之下”自己写的一点零散代码。\x3c\/p\x3e\n\x3cp\x3e完整的代码及演示可在 \x3ca href=\x22http:\/\/www.lemonvc.com\/html\/20160616\/pintu.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3e这里\x3c\/strong\x3e\x3c\/a\x3e 看到，有朋友说看不到图，但图片我用的百度图片搜索的缩略图，不清楚怎么回事，看不到可以自己从本地选择图片。只是那个“加载”(Image.onload)和“切片”(Image.cloneNode)比较耗时，比较大的图片请耐心等等。\x3c\/p\x3e\n\x3cp\x3e当然了，也可以光顾我们的活动页玩一把 \x3ca href=\x22http:\/\/www.lemonvc.com\/html\/20160616\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e拼图抽奖\x3c\/a\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>HTML 简单拼图游戏</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005773885">https://segmentfault.com/a/1190000005773885</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/990vsm47t8i/" target="_blank">https://alili.tech/archive/990vsm47t8i/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>