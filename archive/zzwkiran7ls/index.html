<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Vuex — The core of Vue application"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Vuex — The core of Vue application | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/zzwkiran7ls/",
				"appid": "1613049289050283", 
				"title": "Vuex — The core of Vue application | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-05T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/90hbpd9kk27/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qh7bmnrf0h/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&text=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&text=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&title=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&is_video=false&description=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&title=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&title=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&title=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzzwkiran7ls%2f&title=Vuex%20%e2%80%94%20The%20core%20of%20Vue%20application"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Vuex — The core of Vue application</h1><div class="meta"><div class="postdate"><time datetime="2019-02-05" itemprop="datePublished">2019-02-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3cp\x3e系列文章:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006435886\x22\x3eVue 2.0 升（cai）级（keng）之旅\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eVuex — The core of Vue application (本文)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007753975\x22 target=\x22_blank\x22\x3e从单页应用(SPA)到服务器渲染(SSR)\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e当今，谈到状态管理首先想到的肯定是 Redux，而随着 Vue 2.0 的发布，Vuex 也伴随着推出了最新版，本文就带你对照 Redux 来看看刚刚出炉的 Vuex 2.0。\x3c\/p\x3e\n\x3cp\x3e有关 Redux 的基础概念在本文中会简要略过，如再一一赘述篇幅就太长了，不了解的可以看一下本人之前写的有关 Redux 的两篇文章：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005925630\x22\x3eRedux 入门\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006056167\x22 target=\x22_blank\x22\x3eRedux 进阶\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e为什么说 Vuex 是 Vue 应用的核心？\x3c\/h2\x3e\n\x3cp\x3e众所周知，一个应用的外观可以千变万化，但无论如何变化，它都需要一样东西去支撑，那就是——\x3cstrong\x3e数据\x3c\/strong\x3e。这个数据是广义上的，可以是数据库中的数据，也可以是当前应用所处的状态，甚至可以是 \x3ca href=\x22https:\/\/webrtc.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebRTC\x3c\/a\x3e, \x3ca href=\x22https:\/\/developers.google.com\/web\/updates\/2015\/07\/interact-with-ble-devices-on-the-web\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWeb Bluetooth\x3c\/a\x3e 等一系列实时数据。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e在 vue 应用中，vuex 就充当了\x3cstrong\x3e数据\x3c\/strong\x3e提供者的角色，vue 则只需要关注页面的展示与交互。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e既然，明确了以 vuex 为核心，那么就来看看如何在 vue 应用中使用 vuex？\x3c\/p\x3e\n\x3cp\x3e随着 Vue 2.0 的发布，Vuex 在近期也随之推出 2.0 版。在\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006435886\x22\x3e上一篇文章\x3c\/a\x3e中有提到作者的博客是用 vue 2.0 搭建的，但之前并没有添加 vuex，现在正可以借此机会将 vuex 添加到项目中。\x3c\/p\x3e\n\x3cp\x3e本文将介绍 Vuex 2.0 的同时，分享一些本人在这个过程中的一些心得。\x3c\/p\x3e\n\x3cp\x3e首先，当然是核心的核心 Store。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eStore\x3c\/h2\x3e\n\x3cp\x3eStore 用来存放整个应用的 state。\x3c\/p\x3e\n\x3cp\x3e那怎么建立 store 哪？由于，Vuex 2.0 刚刚推出，最新的 API 还得看 \x3ca href=\x22https:\/\/github.com\/vuejs\/vuex\/releases\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRelease Note\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e创建一个 Store 非常简单只需 \x3ccode\x3enew Vuex.Store({ ...options })\x3c\/code\x3e，其中，\x3ccode\x3eoptions\x3c\/code\x3e 可以是一下几种：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3estate \x3ccode\x3eObject\x3c\/code\x3e：存放应用状态\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eactions \x3ccode\x3eObject\x3c\/code\x3e：注册 \x3ccode\x3eaction\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emutations \x3ccode\x3eObject\x3c\/code\x3e：注册 \x3ccode\x3emutation\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egetters \x3ccode\x3eObject\x3c\/code\x3e：注册 \x3ccode\x3egetter\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emodules \x3ccode\x3eObject\x3c\/code\x3e：注册 \x3ccode\x3emodule\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eplugins \x3ccode\x3eArray\x26lt;Function\x26gt;\x3c\/code\x3e：注册中间件\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3estrict \x3ccode\x3eBoolean\x3c\/code\x3e：是否开启严格模式，严格模式下所有对 state 的变化必须通过 \x3ccode\x3emutation\x3c\/code\x3e 来修改，反之抛出异常，默认不开启。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e或许你不了解这些属性的含义，没关系，之后每个还会分别解释。\x3c\/p\x3e\n\x3cp\x3e明白了属性的含义，那么创建一个 store 的代码就可能会是这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ store.js\nimport Vue from \x27vue\x27;\nimport Vuex from \x27vuex\x27;\nimport createLogger from \x27vuex\/logger\x27;\n\nimport blog from \x27.\/module\/blog\x27;\n\n\/\/ 在 Vue 中，注册 Vuex\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n    state: {},\n    plugins: process.env.NODE_ENV !== \x27production\x27 ? [createLogger()] : [],\n    modules: {\n        blog\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ store.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vuex \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e createLogger \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex\/logger\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e blog \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/module\/blog\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在 Vue 中，注册 Vuex\x3c\/span\x3e\nVue.use(Vuex);\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vuex.Store({\n    \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e: {},\n    \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: process.env.NODE_ENV !== \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e ? [createLogger()] : [],\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: {\n        blog\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3estore 创建完成之后，就可以在根组件中使用了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27;\nimport store from \x27..\/vuex\x27;\nimport router from \x27.\/router\x27;\nimport \x27.\/blog\x27;\n\nnew Vue({\n    store,\n    router,\n    template: \x27\x3cblog\x3e\x3c\/blog\x3e\x27\n}).$mount(\x27#app\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/vuex\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/blog\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n    store,\n    router,\n    \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;blog\x26gt;\x26lt;\/blog\x26gt;\x27\x3c\/span\x3e\n}).$mount(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e个人看来，一个状态管理的应用，无论是使用 vuex，还是 redux，最困难的部分是在 store 的\x3cstrong\x3e设计\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e究竟该如何设计一个 store，是根据组件的结构层次设计对应的 store，还是根据应用数据来设计 store？\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e由于，store 是存放整个应用状态的地方，所以，起初我认为应该是前者按组件的层次结构去设计。这样 store 中分别保存着每个组件的状态，这对大型项目来说或许会造成大量的冗余数据存储在 store 中，以及一些重复的工作，但这也提供了简洁鲜明的层次结构，增强了项目的可维护性，这对大型项目来说更至关重要。\x3c\/p\x3e\n\x3cp\x3e但伴随着写项目时的思考，我渐渐推翻了之前的想法。\x3c\/p\x3e\n\x3cp\x3e假设这样一个场景，项目中有两个互不相关的组件，但它们俩却依赖同一份数据源。如果，这时采用之前的设计方法，那么这同一份数据源会被存放在 store 的两个不同的位置。那么此时，如果一个组件需要对数据源进行操作的话，它不但需要修改自己组件对应的 state，同时还要发起 action 来修改另一个组件的 state，这恰恰违背了组件的单一性。\x3c\/p\x3e\n\x3cp\x3e然而，使用应用数据来设计 store 就不会有这样的问题。鉴于这个原因，我现在更倾向于第二个理念来设计整个应用的 store。\x3c\/p\x3e\n\x3cp\x3e所以，当项目开始时，要考虑到整个应用的数据模型来设计 store 真是相当麻烦啊。\x3c\/p\x3e\n\x3cp\x3e谈完了 store，就再一个个来看刚刚创建 store 时所提到的属性，state 就是用来保存状态的，没啥好说的，直接来看看第二个 \x3ccode\x3eactions\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eActions\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eactions\x3c\/code\x3e 是一个对象，key 就是 action 的名字，value 就是对应的 action。此处的 action，无论从名字，还是作用都和 redux 中的 action 相同，用于激发 state 的变更。但是，它们的用法却不相同。\x3c\/p\x3e\n\x3cp\x3eRedux 中的 action 需要返回一个 JS 对象，即使加了 thunk 中间件之后，能够返回一个函数，但这个函数最终返回的还是一个 JS 对象，最后通过，\x3ccode\x3estore.dispatch\x3c\/code\x3e 该对象来触发 state 的变更。\x3c\/p\x3e\n\x3cp\x3e然而，Vuex 中的 action 它本身就是一个方法，并且这个方法并不需要任何的返回，而是，通过 \x3ccode\x3estore.commit\x3c\/code\x3e 来触发 \x3ccode\x3emutation\x3c\/code\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eVuex 2.0 中，已将原先的 \x3ccode\x3estore.dispatch\x3c\/code\x3e 改名为了 \x3ccode\x3estore.commit\x3c\/code\x3e 来触发 \x3ccode\x3emutation\x3c\/code\x3e。  \x3cbr\x3eVuex 2.0 中，并没有移除 \x3ccode\x3estore.dispatch\x3c\/code\x3e，而是改为用于触发 \x3ccode\x3eaction\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e所有 action 方法接受当前 store 的实例作为第一个参数，调用传递的参数会作为第二个参数传入（暂不支持多参数）。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eMutations\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3emutations \x3c\/code\x3e 也是一个对象，同 \x3ccode\x3eactions\x3c\/code\x3e 类似，key 就是 mutation 的名字，value 就是对应的 mutation。\x3c\/p\x3e\n\x3cp\x3emutation 用于更新应用的 state。Redux 中虽然没有 mutation 这个词，但从上面的解释就明白，这同 redux 中的 reduce 起着相同的作用。\x3c\/p\x3e\n\x3cp\x3e但两者在写法上又有着不同，由于 vuex 中的 \x3ccode\x3emutations\x3c\/code\x3e 是一个对象，并借用 ES6 对象方法可以\x3cstrong\x3e使用变量\x3c\/strong\x3e和\x3cstrong\x3e省略\x3c\/strong\x3e的特点，调用 \x3ccode\x3emutation\x3c\/code\x3e 可以直接通过命名找到相应的处理方法，这使得它比 redux 的一系列 switch\/case 语句要更简单、更优雅。\x3c\/p\x3e\n\x3cp\x3e更大的不同之处在于 redux 的 reduce 是要求返回一个新的 state，而 vuex 就如它的命名 mutations（变异）是对当前 state 进行操作，而不能返回一个新的 state，这里就和 FP 的理念有所冲突了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ mutations.js\nexport default {\n    \/\/ work\n    [LOAD_SOCIAL_LINK](state = {}, mutation = {}) {\n        state.socialLinkList = mutation.payload\n            .filter(item =\x3e !!item.link)\n            .map(item =\x3e ({\n                ...item,\n                svgPath: svgPath \x2b \x27#\x27 \x2b item.name\n            }));\n    }\n    \n    \/\/ not work\n    [LOAD_SOCIAL_LINK](state = {}, mutation = {}) {\n        state = {\n            ...state,\n            socialLinkList: mutation.payload\n                .filter(item =\x3e !!item.link)\n                .map(item =\x3e ({\n                    ...item,\n                    svgPath: svgPath \x2b \x27#\x27 \x2b item.name\n                }))\n        };\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ mutations.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ work\x3c\/span\x3e\n    [LOAD_SOCIAL_LINK](state = {}, mutation = {}) {\n        state.socialLinkList = mutation.payload\n            .filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !!item.link)\n            .map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n                ...item,\n                \x3cspan class=\x22hljs-attr\x22\x3esvgPath\x3c\/span\x3e: svgPath \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e \x2b item.name\n            }));\n    }\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ not work\x3c\/span\x3e\n    [LOAD_SOCIAL_LINK](state = {}, mutation = {}) {\n        state = {\n            ...state,\n            \x3cspan class=\x22hljs-attr\x22\x3esocialLinkList\x3c\/span\x3e: mutation.payload\n                .filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !!item.link)\n                .map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n                    ...item,\n                    \x3cspan class=\x22hljs-attr\x22\x3esvgPath\x3c\/span\x3e: svgPath \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e \x2b item.name\n                }))\n        };\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e单就这点来看，redux 略胜一筹。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eGetters\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eGetters\x3c\/code\x3e 也是一个对象，用于注册 getter，每个 getter 都是一个 \x3ccode\x3efunction\x3c\/code\x3e 用于返回一部分的 state。\x3c\/p\x3e\n\x3cp\x3egetter 方法接受 state 作为第一个参数，一个简单的 \x3ccode\x3egetters\x3c\/code\x3e 就可能是这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default {\n    \/\/ 省略...\n    getters: {\n        socialLinkList: state =\x3e state.socialLinkList\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n    getters: {\n        \x3cspan class=\x22hljs-attr\x22\x3esocialLinkList\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.socialLinkList\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e掌握了 Store, Actions, Mutations 以及 Getters 这几个概念，那你就掌握了 vuex 的核心，已经完全可以创建一个完整的 store，并可以使用了。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e但随着项目的增长，你会发现将 Actions, Mutations, Getters 全都写在一起非常难以维护，这时你会想念 Redux 中将 state 划分处理的 \x3ccode\x3ecombineReducers\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006760693?w=205\x26amp;h=246\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006760693?w=205\x26amp;h=246\x22 alt=\x22Wake up!\x22 title=\x22Wake up!\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e醒醒！别想 Redux 啦，Vuex 也可以划分处理 state 树，它就是接着就要提到的 \x3ccode\x3emodules\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eModules\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eModules\x3c\/code\x3e 的作用就如它的名字，划分模块。\x3c\/p\x3e\n\x3cp\x3e它的属性也是一个对象，key 是对应的 module 名，在 state 中会创建相应的 key，而 value 是一个用于配置如何创建 module 的对象，该对象的属性基本同创建 store 时的 \x3ccode\x3eoptions\x3c\/code\x3e 对象一样，只少了最后 2 个还没有讲到的属性 \x3ccode\x3eplugins\x3c\/code\x3e 和 \x3ccode\x3estrict\x3c\/code\x3e。这两者是不是有什么关系哪？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Store {\n  constructor (options = {}) {\n    \/\/ 省略...\n    \n    \/\/ init root module.\n    \/\/ this also recursively registers all sub-modules\n    \/\/ and collects all module getters inside this._wrappedGetters\n    installModule(this, state, [], options)\n    \n    \/\/ 省略...\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eStore\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (options = {}) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ init root module.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this also recursively registers all sub-modules\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ and collects all module getters inside this._wrappedGetters\x3c\/span\x3e\n    installModule(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, state, [], options)\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 省略...\x3c\/span\x3e\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从 vuex 创建的源码中可以看到，其实，store 它本身就是一个 module。\x3c\/p\x3e\n\x3cp\x3e既然，\x3ccode\x3emodules\x3c\/code\x3e 中能配置 \x3ccode\x3emodules\x3c\/code\x3e 那就意味着：模块是可以嵌套的。那么，使用 \x3ccode\x3emodules\x3c\/code\x3e 就可以将 state 划分为各个模块，同 \x3ccode\x3ecombineReducers\x3c\/code\x3e 一样可以化繁为简，这对中大型项目来说必不可少。\x3c\/p\x3e\n\x3cp\x3e一个 module 的定义就可以是这样。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ nav module\nimport mutations from \x27.\/mutations\x27;\nimport actions from \x27.\/actions\x27;\n\nexport default {\n    state: {},\n    getters: {\n        navList: state =\x3e state.navList\n    },\n    actions,\n    mutations\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ nav module\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e mutations \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/mutations\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e actions \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/actions\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e: {},\n    \x3cspan class=\x22hljs-attr\x22\x3egetters\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3enavList\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.navList\n    },\n    actions,\n    mutations\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e警报！前方第 6 行有坑，请速速绕行。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e第 6 行？\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3estate: {},\x3c\/code\x3e 初始化 state 能有什么问题啊？\x3c\/p\x3e\n\x3cp\x3e当你运行你的应用的时候，你会发现，如果 navList 的变化是由一个同步的方法返回的就没有问题，但如果，它是通过异步方法返回的，你会发现虽然控制台上的 mutation log 输出正确，但你的组件中并没有得到正确的值。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006673175\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006673175\x22 alt=\x22What happened?\x22 title=\x22What happened?\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因为，当 action 调用之后会计算一次 getter，如果是同步的，那么此时 getter 的 state 中已经保存着最新的数据。\x3c\/p\x3e\n\x3cp\x3e但如果是异步的，那么此时 getter 中的 state 是一个空对象，那么上例中的 \x3ccode\x3estate.navList\x3c\/code\x3e 就会返回一个 \x3ccode\x3eundefined\x3c\/code\x3e。然而，\x3ccode\x3eundefined\x3c\/code\x3e 就不会进入 vue 的 watch 系统，所以当异步请求结束后，即使 state 中对应字段变为了目标值，但也不会再调用 getter 了，组件中的值自然也不会更新了。\x3c\/p\x3e\n\x3cp\x3e那怎么解决哪？那就是给 state 中的每个属性设初始值，这样在第一次计算 getter 的值时就会返回对应的初始值，而这个初始值是在 vue 的系统中的，所以当异步请求结束后调用 mutation 改变 state 中对应的值后，getter 会自动触发更新，此时，组件中对应的值也就被修改了。\x3c\/p\x3e\n\x3cp\x3e所以，一定要记得：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e为每个属性设置初始化 state ！！！\x3c\/p\x3e\n\x3cp\x3e为每个属性设置初始化 state ！！！\x3c\/p\x3e\n\x3cp\x3e为每个属性设置初始化 state ！！！\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e重要的话，说三遍！！！\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e最后，在使用 \x3ccode\x3emodules\x3c\/code\x3e 还需要注意，在不同 \x3ccode\x3emodules\x3c\/code\x3e 下，注册的 action 或 mutation 的名字重复并不会报错，但都会被调用，所以要\x3cstrong\x3e注意命名\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e好，\x3ccode\x3emodules\x3c\/code\x3e 讲完了，继续看下一个属性 \x3ccode\x3eplugins\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3ePlugins\x3c\/h3\x3e\n\x3cp\x3evuex 自 1.0 版开始就将原先的 \x3ccode\x3emiddlewares\x3c\/code\x3e 替换成了 \x3ccode\x3eplugins\x3c\/code\x3e。也就是说，现在使用的 \x3ccode\x3eplugins\x3c\/code\x3e 就是中间件。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eplugins\x3c\/code\x3e 的参数终于同之前的有所不同了，是一个数组，数组中的每一项都是一个方法，方法接受一个参数就是当前 store 的实例。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ vuex source code: apply plugins\n    plugins.concat(devtoolPlugin).forEach(plugin =\x3e plugin(this))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ vuex source code: apply plugins\x3c\/span\x3e\n    plugins.concat(devtoolPlugin).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eplugin\x3c\/span\x3e =\x26gt;\x3c\/span\x3e plugin(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3evuex 中间件的编写理解起来也十分容易，就是通过 \x3ccode\x3estore.subscribe\x3c\/code\x3e 来订阅 mutation 的变化，这比 redux 中间件的工作原理更容易理解。\x3c\/p\x3e\n\x3cp\x3e最后的 \x3ccode\x3estrict\x3c\/code\x3e 属性之前已经提到了，就是用来设置时候开启严格模式的，严格模式下，state 只能通过 mutation 来修改。\x3c\/p\x3e\n\x3cp\x3e至此，创建 vuex store 的所有属性都讲完了，store 也就完成了，那么，vue 的组件该如何和 vuex 的 store 链接起来哪？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e连接到组件\x3c\/h2\x3e\n\x3cp\x3evuex 1.0 之前如何将 vuex 连接到组件在这里就不说了，有兴趣可以上\x3ca href=\x22http:\/\/vuex.vuejs.org\/en\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官网\x3c\/a\x3e上看看。\x3c\/p\x3e\n\x3cp\x3e主要来看看如何使用 vue 2.0 新增的 4 个 helper 方法\x3cstrong\x3e优雅\x3c\/strong\x3e地将 vuex 连接到组件。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006673177\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006673177\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这 4 个 helper 方法，分别是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3emapState\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emapMutations\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emapGetters\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emapActions\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e常言道：口说无凭。\x3c\/p\x3e\n\x3cp\x3e我们就来看一个博客升级中的简单例子，没有加入 vuex 前，本人博客的首页是这样设定的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ home.js\nimport Vue from \x27vue\x27;\n\nimport PostService from \x27..\/..\/..\/common\/service\/PostService\x27;\n\nimport img from \x27..\/..\/..\/assets\/img\/home-bg.jpg\x27;\nimport template from \x27.\/home.html\x27;\n\nconst Home = Vue.extend({\n    template,\n    data: () =\x3e {\n        return {\n            header: {\n                img,\n                title: \x27D.D Blog\x27,\n                subtitle: \x27Share More, Gain More.\x27\n            },\n            postList: []\n        };\n    },\n    created() {\n        const postService = new PostService();\n        postService.queryPostList().then(({postList}) =\x3e (this.postList = postList));\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ home.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e PostService \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/..\/common\/service\/PostService\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e img \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/..\/assets\/img\/home-bg.jpg\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e template \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/home.html\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = Vue.extend({\n    template,\n    \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3eheader\x3c\/span\x3e: {\n                img,\n                \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27D.D Blog\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3esubtitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Share More, Gain More.\x27\x3c\/span\x3e\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3epostList\x3c\/span\x3e: []\n        };\n    },\n    created() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e postService = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e PostService();\n        postService.queryPostList().then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{postList}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.postList = postList));\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们回顾一下之前的所讲，为 home 组件创建对应的 store module。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ index.js\n\/\/ mutation types\nconst INIT_HOME_PAGE = \x27INIT_HOME_PAGE\x27;\nconst LOAD_POST_LIST = \x27LOAD_POST_LIST\x27;\n\n\/\/ actions\nconst initHomePage = ({dispatch, commit}) =\x3e {\n    commit(createAction(INIT_HOME_PAGE, {\n        header: {\n            image,\n            title: \x27D.D Blog\x27,\n            subtitle: \x27Share More, Gain More.\x27\n        }\n    }));\n    dispatch(\x27loadPostList\x27);\n};\n\nconst loadPostList = ({commit}) =\x3e {\n    new PostService().queryPostList()\n        .then((result = {}) =\x3e {\n            commit(createAction(LOAD_POST_LIST, {\n                postsList: result.postsList\n            }));\n        });\n};\n\nconst actions = {initHomePage, loadPostList};\n\n\/\/ mutations\nconst mutations = {\n    [INIT_HOME_PAGE](state = {}, mutation = {}) {\n        state.header = mutation.payload.header;\n    },\n\n    [LOAD_POST_LIST](state = {}, mutation = {}) {\n        state.postsList = mutation.payload.postsList;\n    }\n};\n\nexport default {\n    state: {\n        header: {},\n        postsList: []\n    },\n    getters: {\n        postsList: state =\x3e state.postsList\n    },\n    actions,\n    mutations\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ mutation types\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e INIT_HOME_PAGE = \x3cspan class=\x22hljs-string\x22\x3e\x27INIT_HOME_PAGE\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e LOAD_POST_LIST = \x3cspan class=\x22hljs-string\x22\x3e\x27LOAD_POST_LIST\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ actions\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initHomePage = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{dispatch, commit}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    commit(createAction(INIT_HOME_PAGE, {\n        \x3cspan class=\x22hljs-attr\x22\x3eheader\x3c\/span\x3e: {\n            image,\n            \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27D.D Blog\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3esubtitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Share More, Gain More.\x27\x3c\/span\x3e\n        }\n    }));\n    dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27loadPostList\x27\x3c\/span\x3e);\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e loadPostList = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{commit}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e PostService().queryPostList()\n        .then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresult = {}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            commit(createAction(LOAD_POST_LIST, {\n                \x3cspan class=\x22hljs-attr\x22\x3epostsList\x3c\/span\x3e: result.postsList\n            }));\n        });\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e actions = {initHomePage, loadPostList};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ mutations\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mutations = {\n    [INIT_HOME_PAGE](state = {}, mutation = {}) {\n        state.header = mutation.payload.header;\n    },\n\n    [LOAD_POST_LIST](state = {}, mutation = {}) {\n        state.postsList = mutation.payload.postsList;\n    }\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eheader\x3c\/span\x3e: {},\n        \x3cspan class=\x22hljs-attr\x22\x3epostsList\x3c\/span\x3e: []\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3egetters\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epostsList\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.postsList\n    },\n    actions,\n    mutations\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const createAction = (typeName = \x27\x27, data = \x27\x27) =\x3e ({ type: typeName, payload: data });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3econst createAction = (\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3eName = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, data = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e) =\x26gt; ({ \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3eName, payload: data });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里的 \x3ccode\x3ecreateAction\x3c\/code\x3e 是自己创建的一个简单函数，用于格式化 \x3ccode\x3emutation\x3c\/code\x3e 获得的参数，这并不是必须的，vuex 的 \x3ccode\x3ecommit\x3c\/code\x3e 方法是接受参数为 \x3ccode\x3e(type, data)\x3c\/code\x3e 的。\x3c\/p\x3e\n\x3cp\x3eOK。对应的 store module 也创建好了，就来改组件吧。\x3c\/p\x3e\n\x3cp\x3e首先，应用的状态都来自于 store，那么组件中的 \x3ccode\x3edata\x3c\/code\x3e 属性自然就不用了，直接删除。爽~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const Home = Vue.extend({\n    template,\n    created() {\n        const postService = new PostService();\n        postService.queryPostList().then(({postList}) =\x3e (this.postList = postList));\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = Vue.extend({\n    template,\n    created() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e postService = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e PostService();\n        postService.queryPostList().then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{postList}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.postList = postList));\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其次，原先在 created hooks 里直接去查数据，现在用了 vuex 自然要通过调用 action 来获取数据，这里就要用到 4 大金刚之一——\x3ccode\x3emapActions\x3c\/code\x3e 来获取 vuex 中设定好的 action。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3emapActions\x3c\/code\x3e 接受一个数组或对象，根据相应的值将对应的 action 绑定到组件上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {mapActions} from \x27vuex\x27;\n\nconst Home = Vue.extend({\n    template,\n    methods: mapActions([\x27initHomePage\x27]),\n    created() {\n        this.initHomePage();\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {mapActions} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = Vue.extend({\n    template,\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: mapActions([\x3cspan class=\x22hljs-string\x22\x3e\x27initHomePage\x27\x3c\/span\x3e]),\n    created() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initHomePage();\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e数据拿到了，怎么绑定到组件上哪？这就可以用到另两个 helper：\x3ccode\x3emapState\x3c\/code\x3e 和 \x3ccode\x3emapGetters\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3emapState\x3c\/code\x3e 和 \x3ccode\x3emapGetters\x3c\/code\x3e 同样接受一个数组或对象，并根据相应的值将 store 中的 state 或 getter 绑定到组件上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import vue from \x27vue\x27;\nimport { mapState, mapGetters, mapActions } from \x27vuex\x27;\n\nimport template from \x27.\/home.html\x27;\n\nconst Home = vue.extend({\n    template,\n    computed: {\n        ...mapState({\n            header: state =\x3e state.home.header\n        }),\n        ...mapGetters([\x27postsList\x27])\n    },\n    methods: mapActions([\x27initHomePage\x27]),\n    created() {\n        this.initHomePage();\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { mapState, mapGetters, mapActions } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e template \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/home.html\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = vue.extend({\n    template,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomputed\x3c\/span\x3e: {\n        ...mapState({\n            \x3cspan class=\x22hljs-attr\x22\x3eheader\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.home.header\n        }),\n        ...mapGetters([\x3cspan class=\x22hljs-string\x22\x3e\x27postsList\x27\x3c\/span\x3e])\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: mapActions([\x3cspan class=\x22hljs-string\x22\x3e\x27initHomePage\x27\x3c\/span\x3e]),\n    created() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initHomePage();\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e哈哈，这样模板不用改变一分一毫，升级就完成啦~\x3c\/p\x3e\n\x3cp\x3e是不是很简洁，很优雅~\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006673179\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006673179\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e容器组件和展示组件\x3c\/h2\x3e\n\x3cp\x3e容器组件和展示组件这个概念在 \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005925630\x22\x3eRedux 入门\x3c\/a\x3e一文中已有提到。然而，这个概念并不只服务于 react，在 vue 中也可以用到。\x3c\/p\x3e\n\x3cp\x3e简单来说，容器组件就是用于包裹展示组件的组件，它和界面展示无关，它负责数据的获取和传递，之前的 home 组件就是一个容器组件，再来看看它的 template，你会发现它除了根元素以外，不包含其他任何的 html 标签。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3csection\x3e\n    \x3c!-- Content Header --\x3e\n    \x3ccontent-header :board-img=\x26quot;header.image\x26quot; :title=\x26quot;header.title\x26quot; :subtitle=\x26quot;header.subtitle\x26quot;\x3e\x3c\/content-header\x3e\n\n    \x3c!-- Main Content --\x3e\n    \x3cmain-content\x3e\n        \x3cpost-list :post-list=\x26quot;postsList\x26quot;\x3e\x3c\/post-list\x3e\n    \x3c\/main-content\x3e\n\x3c\/section\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22Html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- Content Header --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3econtent-header\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:board-img\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22header.image\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:title\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22header.title\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:subtitle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22header.subtitle\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3econtent-header\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- Main Content --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emain-content\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3epost-list\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:post-list\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22postsList\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3epost-list\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3emain-content\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e与此相反的是，展示组件单单用于展示，自己不获取任何数据，数据都通过 \x3ccode\x3eprops\x3c\/code\x3e 传递，比如 content-header。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const template = `\x3cheader class=\x26quot;intro-header\x26quot; :style=\x26quot;{ backgroundImage: \x27url(\x27 \x2b boardImg \x2b \x27)\x27 }\x26quot;\x3e\n    \x3cdiv class=\x26quot;container\x26quot;\x3e\n        \x3cdiv class=\x26quot;row\x26quot;\x3e\n            \x3cdiv class=\x26quot;col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\x26quot;\x3e\n                \x3cdiv class=\x26quot;site-heading\x26quot;\x3e\n                    \x3ch1\x3e\x22{{\x22 title \x22}}\x22\x3c\/h1\x3e\n                    \x3chr class=\x26quot;small\x26quot;\x3e\n                    \x3cspan class=\x26quot;subheading\x26quot;\x3e\x22{{\x22 subtitle \x22}}\x22\x3c\/span\x3e\n                \x3c\/div\x3e\n            \x3c\/div\x3e\n        \x3c\/div\x3e\n    \x3c\/div\x3e\n\x3c\/header\x3e`;\n\nexport default Vue.component(\x27contentHeader\x27, {\n    template,\n    props: {\n        boardImg: {\n            type: String,\n            default: _defaultImg\n        },\n        title: {\n            type: String,\n            required: true\n        },\n        subtitle: {\n            type: String\n        }\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e template = \x3cspan class=\x22hljs-string\x22\x3e`\x26lt;header class=\x22intro-header\x22 :style=\x22{ backgroundImage: \x27url(\x27 \x2b boardImg \x2b \x27)\x27 }\x22\x26gt;\n    \x26lt;div class=\x22container\x22\x26gt;\n        \x26lt;div class=\x22row\x22\x26gt;\n            \x26lt;div class=\x22col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1\x22\x26gt;\n                \x26lt;div class=\x22site-heading\x22\x26gt;\n                    \x26lt;h1\x26gt;\x22{{\x22 title \x22}}\x22\x26lt;\/h1\x26gt;\n                    \x26lt;hr class=\x22small\x22\x26gt;\n                    \x26lt;span class=\x22subheading\x22\x26gt;\x22{{\x22 subtitle \x22}}\x22\x26lt;\/span\x26gt;\n                \x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n        \x26lt;\/div\x26gt;\n    \x26lt;\/div\x26gt;\n\x26lt;\/header\x26gt;`\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Vue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27contentHeader\x27\x3c\/span\x3e, {\n    template,\n    \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eboardImg\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3edefault\x3c\/span\x3e: _defaultImg\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3erequired\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3esubtitle\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e\n        }\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样明确地区分容器组件和展示组件会使得项目结构变得更清晰，追踪 bug ，以及维护也变得轻而易举。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e管理路由\x3c\/h2\x3e\n\x3cp\x3e是不是觉得这样就完了？\x3c\/p\x3e\n\x3cp\x3eNo, No, No. 路由系统还没处理，那么如何将 vue-router 纳入到 vuex 的管理中哪？\x3c\/p\x3e\n\x3cp\x3e这里又得感谢尤大大为我们造好了一个小工具 \x3cstrong\x3e\x3ca href=\x22https:\/\/github.com\/vuejs\/vuex-router-sync\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evuex-router-sync\x3c\/a\x3e\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e首先，安装\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install vuex-router-sync@next --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22Bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install vuex-router-sync@next --save\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，在项目初始化的时候将 router 同 store 联系起来就行，简单到都不知道说啥好。\x3c\/p\x3e\n\x3cp\x3e不知道说啥，就说说原理，看看源码吧。\x3c\/p\x3e\n\x3cp\x3e这个工具的原理也非常好理解，主要是 2 点：\x3c\/p\x3e\n\x3cp\x3e一是，给 vuex 的 store 注册一个 router 的 module。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function patchStore (store) {\n  \/\/ 略...\n  var routeModule = {\n    mutations: {\n      \x27router\/ROUTE_CHANGED\x27: function (state, to) {\n        store.state.route = to\n      }\n    }\n  }\n\n  \/\/ add module\n  if (store.registerModule) {\n    store.registerModule(\x27route\x27, routeModule)\n  } else if (store.module) {\n    store.module(\x27route\x27, routeModule)\n  } else {\n    store.hotUpdate({\n      modules: {\n        route: routeModule\n      }\n    })\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epatchStore\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estore\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 略...\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e routeModule = {\n    \x3cspan class=\x22hljs-attr\x22\x3emutations\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27router\/ROUTE_CHANGED\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estate, to\x3c\/span\x3e) \x3c\/span\x3e{\n        store.state.route = to\n      }\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ add module\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (store.registerModule) {\n    store.registerModule(\x3cspan class=\x22hljs-string\x22\x3e\x27route\x27\x3c\/span\x3e, routeModule)\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (store.module) {\n    store.module(\x3cspan class=\x22hljs-string\x22\x3e\x27route\x27\x3c\/span\x3e, routeModule)\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    store.hotUpdate({\n      \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e: routeModule\n      }\n    })\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另一个，就是使用 vue-router 的 afterEach hooks 来触发 mutation。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22exports.sync = function (store, router) {\n  patchStore(store)\n  store.router = router\n\n  var commit = store.commit || store.dispatch\n  \/\/ 略...\n  \n  \/\/ sync store on router navigation\n  router.afterEach(function (transition) {\n    if (isTimeTraveling) {\n      isTimeTraveling = false\n      return\n    }\n    var to = transition.to\n    currentPath = to.path\n    commit(\x27router\/ROUTE_CHANGED\x27, to)\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3eexports.sync = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estore, router\x3c\/span\x3e) \x3c\/span\x3e{\n  patchStore(store)\n  store.router = router\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e commit = store.commit || store.dispatch\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 略...\x3c\/span\x3e\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ sync store on router navigation\x3c\/span\x3e\n  router.afterEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etransition\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isTimeTraveling) {\n      isTimeTraveling = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e to = transition.to\n    currentPath = to.path\n    commit(\x3cspan class=\x22hljs-string\x22\x3e\x27router\/ROUTE_CHANGED\x27\x3c\/span\x3e, to)\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e项目中使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { sync } from \x27vuex-router-sync\x27;\nimport store from \x27..\/vuex\x27;\nimport router from \x27.\/router\x27;\n\nsync(store, router);\n\nnew Vue({\n    store,\n    router,\n    template: \x27\x3cblog\x3e\x3c\/blog\x3e\x27\n}).$mount(\x27#app\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { sync } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex-router-sync\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/vuex\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\x27\x3c\/span\x3e;\n\nsync(store, router);\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n    store,\n    router,\n    \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;blog\x26gt;\x26lt;\/blog\x26gt;\x27\x3c\/span\x3e\n}).$mount(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eOK，这样就大功告成了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e加入了 vuex 后，我的博客终于让 vue 它们一家子（vue \x2b vuex \x2b vue-router）团圆了。\x3c\/p\x3e\n\x3cp\x3e总的来看，vuex 同 vue 一样使用起来相当方便，集成了许多方法，但似乎缺少了 redux 的那份优雅，而我喜欢比较优雅的...（看在全篇我都在安利 vue 的情面上，尤大大请不要打我~）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006673181\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006673181\x22 alt=\x22逃~\x22 title=\x22逃~\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3ePS: 一下把 vuex 有关的一股脑都过了，可能过得太快，如有不明白的就留言吧。\x3c\/p\x3e\n\x3cp\x3e最后的最后，当然是继续安利下自己的 \x3ca href=\x22http:\/\/discipled.me\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBlog\x3c\/a\x3e，以及 \x3ca href=\x22https:\/\/github.com\/DiscipleD\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSource Code\x3c\/a\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Vuex — The core of Vue application</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006673171">https://segmentfault.com/a/1190000006673171</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/zzwkiran7ls/" target="_blank">https://alili.tech/archive/zzwkiran7ls/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>