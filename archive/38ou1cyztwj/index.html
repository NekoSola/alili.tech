<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="[译] 用 Webpack 武装自己"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>[译] 用 Webpack 武装自己 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/38ou1cyztwj/",
				"appid": "1613049289050283", 
				"title": "[译] 用 Webpack 武装自己 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/cnrmy7643rp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/x94nn5vb76/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&text=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&text=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&title=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&is_video=false&description=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&title=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&title=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&title=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f38ou1cyztwj%2f&title=%5b%e8%af%91%5d%20%e7%94%a8%20Webpack%20%e6%ad%a6%e8%a3%85%e8%87%aa%e5%b7%b1"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">[译] 用 Webpack 武装自己</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3cp\x3e本文译自：\x3ca href=\x22https:\/\/blog.madewithlove.be\/post\/webpack-your-bags\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack your bags\x3c\/a\x3e\x3cbr\x3e这篇文章由入门到深入的介绍了webpack的功能和使用技巧，真心值得一看。\x3c\/p\x3e\n\x3cp\x3e由于我英语水平有限，而且很少翻译文章，所以文中的一些语句在翻译时做了类似语义的转换，望谅解。要是有幸被转还是希望能够注明啊\x3c\/p\x3e\n\x3cp\x3eby the way，打个小广告。。把自己的\x3ca href=\x22https:\/\/github.com\/ecmadao\/Coding-Guide\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e扔这儿好了，有时候会更新些译文或者笔记什么的\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVtk2v\x22 src=\x22https:\/\/static.alili.tech\/img\/bVtk2v\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e你可能已经听说过这个酷酷的工具-Webpack。一些人称之为类似于Gulp的工具，还有一些人则认为它类似于Browserify。如果你还没接触过它，那很有可能会因此感到困惑。而Webpack的主页上则认为它是两者的结合，那或许更让你困惑了。\x3c\/p\x3e\n\x3cp\x3e说实话，一开始的时候，“什么是Webpack”这个话题让我很心烦，也就没有继续研究下去了。直到后来，当我已经构建了几个项目后，才真心的为之痴迷。如果你像我一样紧随Javascript的发展步伐，你很有可能会因为太追随潮流跨度太大而蛋疼。在经历了上面这些之后，我写下这篇文章，以便更加细致的解释Webpack是什么，以及它如此重要的原因。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eWebpack是啥?\x3c\/h3\x3e\n\x3cp\x3e首先来让我们回答最开始的问题：Webpack是个系统的构建工具，还是打包工具？答案是两者都是--这不代表它做了这两件事（先构建资源，在分别进行打包），而是说它将两者结合在一起了。\x3c\/p\x3e\n\x3cp\x3e更加清晰的说明：与“构建sass文件，压缩图片，然后引用它们，再打包，再在页面上引用”相比，你只要这么做：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import stylesheet from \x27styles\/my-styles.scss\x27;\nimport logo from \x27img\/my-logo.svg\x27;\nimport someTemplate from \x27html\/some-template.html\x27;\n\nconsole.log(stylesheet); \/\/ \x26quot;body{font-size:12px}\x26quot;\nconsole.log(logo); \/\/ \x26quot;data:image\/svg\x2bxml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5[...]\x26quot;\nconsole.log(someTemplate) \/\/ \x26quot;\x3chtml\x3e\x3cbody\x3e\x3ch1\x3eHello\x3c\/h1\x3e\x3c\/body\x3e\x3c\/html\x3e\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e stylesheet \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27styles\/my-styles.scss\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e logo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27img\/my-logo.svg\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e someTemplate \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27html\/some-template.html\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(stylesheet); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22body{font-size:12px}\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(logo); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22data:image\/svg\x2bxml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5[...]\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(someTemplate) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22\x26lt;html\x26gt;\x26lt;body\x26gt;\x26lt;h1\x26gt;Hello\x26lt;\/h1\x26gt;\x26lt;\/body\x26gt;\x26lt;\/html\x26gt;\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你的所有资源都被当做包处理，可以被import，修改，控制，最终展现在你最后的一个bundle上。\x3c\/p\x3e\n\x3cp\x3e为了能让上面那些有效运转，你需要在自己的Webpage配置里配置\x3ccode\x3eloader\x3c\/code\x3e。\x3ccode\x3eloader\x3c\/code\x3e是一个“当程序遇见XXX类型文件的时候，就做YYY”的小型插件。来看一些\x3ccode\x3eloader\x3c\/code\x3e的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \/\/ 如果引用了 .ts 文件, 将会触发 Typescript loader\n  test: \/\\.ts\/,\n  loader: \x27typescript\x27,\n},\n{\n  \/\/ 如果引用了png|jpg|svg图片,则会用 image-webpack 进行压缩 (wrapper around imagemin)\n  \/\/ 并转化成 data64 URL 格式\n  test: \/\\.(png|jpg|svg)\/,\n  loaders: [\x27url\x27, \x27image-webpack\x27],\n},\n{\n  \/\/ 如果使用了 SCSS files, 则会用 node-sass 解析, 最终返回CSS格式\n  test: \/\\.scss\/,\n  loaders: [\x27css\x27, \x27autoprefixer\x27, \x27sass\x27],\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果引用了 .ts 文件, 将会触发 Typescript loader\x3c\/span\x3e\n  test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.ts\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27typescript\x27\x3c\/span\x3e,\n},\n{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果引用了png|jpg|svg图片,则会用 image-webpack 进行压缩 (wrapper around imagemin)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 并转化成 data64 URL 格式\x3c\/span\x3e\n  test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpg|svg)\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27image-webpack\x27\x3c\/span\x3e],\n},\n{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果使用了 SCSS files, 则会用 node-sass 解析, 最终返回CSS格式\x3c\/span\x3e\n  test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.scss\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27css\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27autoprefixer\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e],\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终在食物链的最底端，所有的\x3ccode\x3eloader\x3c\/code\x3e都返回\x3ccode\x3estring\x3c\/code\x3e，这样Webpack就可以将它们加入到javascript模块中去。当你的Sass文件被loader转换之后，它的引用实际上是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default \x27body{font-size:12px}\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27body{font-size:12px}\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWq\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWq\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e究竟为什么要这么做？\x3c\/h3\x3e\n\x3cp\x3e在你理解了Webpack是做什么的之后，第二个问题就接踵而至：使用它有什么好处？“把图片和CSS扔进我的js里？什么鬼？”其实在很久之前，为了减少HTTP request请求，我们都被教育要把所有东西写在一个文件里面。\x3c\/p\x3e\n\x3cp\x3e到了现在，与之类似的是，很多人把所有东西打包进\x3ccode\x3eapp.js\x3c\/code\x3e。这两种方法都有一个很大的负面影响：很多时候人们在下载的是他们用不到的资源。但如果你不这么做吧，你就得手动的在每个页面引用相应的资源，最终会混乱成一坨：哪个页面已经引用了它所依赖的资源？\x3c\/p\x3e\n\x3cp\x3e这些方法没有绝对的对错。把Webpage当做一个中间件--不仅仅是打包或构建工具，而是个聪明的模块打包系统。只要你设置正确，它会比你还要清楚使用的技术栈，并更好的优化它们。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e来让我们一起构建一个简单的App\x3c\/h3\x3e\n\x3cp\x3e为了让你更快捷的理解使用Webpack的好处，我们会构建一个简单的App，并将资源打包进去。在这里教程中我推荐使用Node4（或5），以及NPM3作为包管理工具，以便在使用Webpack的时候避免大量的麻烦。如果你还没装NPM3，可以通过\x3ccode\x3enpm install npm@3 -g\x3c\/code\x3e来安装。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ node --version\nv5.7.1\n$ npm --version\n3.6.0\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ node --version\nv5\x3cspan class=\x22hljs-number\x22\x3e.7\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3e\n$ npm --version\n\x3cspan class=\x22hljs-number\x22\x3e3.6\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我还要推荐你把\x3ccode\x3enode_modules\/.bin\x3c\/code\x3e放进你的\x3ccode\x3ePATH\x3c\/code\x3e变量，以避免每次都要输入\x3ccode\x3enode_modules\/.bin\/webpack\x3c\/code\x3e。在下面了例子里我输入的指令都不会再包含\x3ccode\x3enode_modules\/.bin\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e基础指引（setup）\x3c\/h4\x3e\n\x3cp\x3e从创建项目安装Webpack开始。我们同时也安装了jQuery以便支持后续操作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm init -y\n$ npm install jquery --save\n$ npm install webpack --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ npm init -y\n$ npm install jquery --save\n$ npm install webpack --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在来做一个App的入口：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/index.js\nvar $ = require(\x27jquery\x27);\n\n$(\x27body\x27).html(\x27Hello\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e $ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e);\n\n$(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).html(\x3cspan class=\x22hljs-string\x22\x3e\x27Hello\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e让我们在\x3ccode\x3ewebpack.config.js\x3c\/code\x3e文件里进行的Webpack配置。Webpack配置实质上是Javascript，并且在最后\x3ccode\x3eexport\x3c\/code\x3e出去一个Object：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ webpack.config.js\nmodule.exports = {\n    entry:  \x27.\/src\x27,\n    output: {\n        path: \x27builds\x27,\n        filename: \x27bundle.js\x27,\n    },\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e:  \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n    },\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里，\x3ccode\x3eentry\x3c\/code\x3e告诉Webpack哪些文件是应用的入口文件。它们是你的主要文件，在依赖树的最顶端。之后，我们告诉Webpack把资源打包在\x3ccode\x3ebuilds\x3c\/code\x3e文件夹下的\x3ccode\x3ebundle.js\x3c\/code\x3e文件里。让我们编写index HTML文件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3cbody\x3e\n    \x3ch1\x3eMy title\x3c\/h1\x3e\n    \x3ca\x3eClick me\x3c\/a\x3e\n\n    \x3cscript src=\x26quot;builds\/bundle.js\x26quot;\x3e\x3c\/script\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;!DOCTYPE html\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eMy title\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3eClick me\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22builds\/bundle.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行Webpack。如果一切正确那就可以看见下面的信息：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack\nHash: d41fc61f5b9d72c13744\nVersion: webpack 1.12.14\nTime: 301ms\n    Asset    Size  Chunks             Chunk Names\nbundle.js  268 kB       0  [emitted]  main\n   [0] .\/src\/index.js 53 bytes {0} [built]\n    \x2b 1 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ webpack\nHash: d41fc61f5b9d72c13744\nVersion: webpack \x3cspan class=\x22hljs-number\x22\x3e1.12\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.14\x3c\/span\x3e\nTime: \x3cspan class=\x22hljs-number\x22\x3e301\x3c\/span\x3ems\n    Asset    Size  Chunks             Chunk Names\nbundle.js  \x3cspan class=\x22hljs-number\x22\x3e268\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] .\/src\/index.js \x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这段信息里可以看出，\x3ccode\x3ebundle.js\x3c\/code\x3e包含了\x3ccode\x3eindex.js\x3c\/code\x3e和一个隐藏的模块。隐藏的模块是jQuery。在默认模式下Webpack隐藏的模块都不是你写的。如果想要显示它们，我们可以在运行Webpack的时候使用\x3ccode\x3e--display-modules\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack --display-modules\nbundle.js  268 kB       0  [emitted]  main\n   [0] .\/src\/index.js 53 bytes {0} [built]\n   [3] .\/~\/jquery\/dist\/jquery.js 259 kB {0} [built]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ webpack --display-modules\nbundle.js  \x3cspan class=\x22hljs-number\x22\x3e268\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] .\/src\/index.js \x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/jquery\/\x3c\/span\x3edist\/jquery.js \x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你还可以使用\x3ccode\x3ewebpack --watch\x3c\/code\x3e，在改变代码的时候自动进行打包。\x3c\/p\x3e\n\x3ch4\x3e设置第一个loader（\x3ccode\x3eloader\x3c\/code\x3e-01）\x3c\/h4\x3e\n\x3cp\x3e还记得Webpack可以处理各种资源的引用吗？该怎么搞？如果你跟随了这些年Web组件发展的步伐（Angular2，Vue，React，Polymer，X-Tag等等），那么你应该知道，与一堆UI相互连接组合而成的App相比，使用可维护的小型可复用的UI组件会更好：web component。\x3c\/p\x3e\n\x3cp\x3e为了确保组件能够保持独立，它们需要在自己内部打包需要的资源。想象一个按钮组件：除了HTML之外，还需要js以便和外部结合。噢对或许还需要一些样式。如果能够在需要这个按钮组件的时候，加载所有它所依赖的资源的话那就太赞了。当我们import按钮组件的时候，就获取到了所有资源。\x3c\/p\x3e\n\x3cp\x3e开始编写这个按钮组件吧。首先，假设你已经习惯了ES2015语法，那么需要安装第一个loader：Babel。安装好一个loader你需要做下面这两步：首先，通过\x3ccode\x3enpm install {whatever}-loader\x3c\/code\x3e安装你需要的loader，然后，将它加到Webpage配置的\x3ccode\x3emodule.loaders\x3c\/code\x3e里：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install babel-loader --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install babel-loader --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eloader并不会帮我们安装Babel所以我们要自己安装它。需要安装\x3ccode\x3ebabel-core\x3c\/code\x3e包和\x3ccode\x3ees2015\x3c\/code\x3e预处理包。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install babel-core babel-preset-es2015 --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install babel-core babel-preset-es2015 --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新建\x3ccode\x3e.babelrc\x3c\/code\x3e文件，里面是一段JSON，告诉Babel使用\x3ccode\x3ees2015\x3c\/code\x3e进行预处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ .babelrc \n{ \x26quot;presets\x26quot;: [\x26quot;es2015\x26quot;] }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ .babelrc \x3c\/span\x3e\n{ \x3cspan class=\x22hljs-string\x22\x3e\x22presets\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e] }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，Babel已经被安装并配置完成，我们要更新Webpack配置。我们想要Babel运行在所有以\x3ccode\x3e.js\x3c\/code\x3e结尾的文件里，但是要避免运行在第三方依赖包例如jQuery里面。loader拥有\x3ccode\x3einclude\x3c\/code\x3e和\x3ccode\x3eexclude\x3c\/code\x3e规则，里面可以是一段字符串、正则、回调等等。在这个例子里，我们只想让Babel在我们自己的文件里运行，因此使用\x3ccode\x3einclude\x3c\/code\x3e包含自己的资源文件夹：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n    entry:  \x27.\/src\x27,\n    output: {\n        path: \x27builds\x27,\n        filename: \x27bundle.js\x27,\n    },\n    module: {\n        loaders: [\n            {\n                test: \/\\.js\/,\n                loader: \x27babel\x27,\n                include: __dirname \x2b \x27\/src\x27,\n            }\n        ],\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e:  \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js\/\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: __dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/src\x27\x3c\/span\x3e,\n            }\n        ],\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，我们可以用ES6语法重写\x3ccode\x3eindex.js\x3c\/code\x3e了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ index.js\nimport $ from \x27jquery\x27;\n\n$(\x27body\x27).html(\x27Hello\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\n$(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).html(\x3cspan class=\x22hljs-string\x22\x3e\x27Hello\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e写个小组件（\x3ccode\x3eloader\x3c\/code\x3e-02）\x3c\/h4\x3e\n\x3cp\x3e来写个按钮组件吧，它将包含一些SCSS样式，HTML模板和一些操作。所以我们要安装需要的工具。首先安装Mustache这个轻量级的模板库，然后安装处理Sass和HTML的loader。同样的，为了处理Sass loader返回的结果，还要安装CSS loader。一旦获取到了CSS文件，我们就可以用很多种方式来处理。目前使用的是一个叫\x3ccode\x3estyle-loader\x3c\/code\x3e的东西，它能够把CSS插入到包中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install mustache --save\n$ npm install css-loader style-loader html-loader sass-loader node-sass --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ npm install mustache --save\n$ npm install css-loader style-loader html-loader sass-loader node-sass --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了能够让Webpack依次处理不同loader的返回结果，我们可以将loader通过\x3ccode\x3e!\x3c\/code\x3e链接到一起，获取使用\x3ccode\x3eloaders\x3c\/code\x3e并对应一个由loader组成的数组：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    test: \/\\.js\/,\n    loader: \x27babel\x27,\n    include: __dirname \x2b \x27\/src\x27,\n},\n{\n    test: \/\\.scss\/,\n    loader: \x27style!css!sass\x27,\n    \/\/ Or\n    loaders: [\x27style\x27, \x27css\x27, \x27sass\x27],\n},\n{\n    test: \/\\.html\/,\n    loader: \x27html\x27,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: __dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/src\x27\x3c\/span\x3e,\n},\n{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.scss\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27style!css!sass\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Or\x3c\/span\x3e\n    loaders: [\x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e],\n},\n{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.html\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27html\x27\x3c\/span\x3e,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有了loader，我们来写写按钮：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/Components\/Button.scss\n.button {\n  background: tomato;\n  color: white;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22scss hljs\x22\x3e\x3ccode class=\x22scss\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/Components\/Button.scss\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-class\x22\x3e.button\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: tomato;\n  \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: white;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- src\/Components\/Button.html --\x3e\n\x3ca class=\x26quot;button\x26quot; href=\x26quot;\x22{{\x22link\x22}}\x22\x26quot;\x3e\x22{{\x22text\x22}}\x22\x3c\/a\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- src\/Components\/Button.html --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22button\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22{{\x22link\x22}}\x22\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22text\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/Components\/Button.js\nimport $ from \x27jquery\x27;\nimport template from \x27.\/Button.html\x27;\nimport Mustache from \x27mustache\x27;\nimport \x27.\/Button.scss\x27;\n\nexport default class Button {\n    constructor(link) {\n        this.link = link;\n    }\n\n    onClick(event) {\n        event.preventDefault();\n        alert(this.link);\n    }\n\n    render(node) {\n        const text = $(node).text();\n        \/\/ Render our button\n        $(node).html(\n            Mustache.render(template, {text})\n        );\n        \/\/ Attach our listeners\n        $(\x27.button\x27).click(this.onClick.bind(this));\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/Components\/Button.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e template \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Button.html\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Mustache \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27mustache\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Button.scss\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eButton\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(link) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.link = link;\n    }\n\n    onClick(event) {\n        event.preventDefault();\n        alert(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.link);\n    }\n\n    render(node) {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e text = $(node).text();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Render our button\x3c\/span\x3e\n        $(node).html(\n            Mustache.render(template, {text})\n        );\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Attach our listeners\x3c\/span\x3e\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27.button\x27\x3c\/span\x3e).click(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.onClick.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你的\x3ccode\x3eButton.js\x3c\/code\x3e现在处于完全独立的状态，不管何时何地的引用它，都能获取到所有需要的依赖并渲染出来。现在渲染我们的按钮试试：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/index.js\nimport Button from ‘.\/Components\/Button’;\n\nconst button = new Button(‘google.com’); \nbutton.render(‘a’); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Button \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e ‘.\/Components\/Button’;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e button = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Button(‘google.com’); \nbutton.render(‘a’); \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行Webpack，刷新页面，立刻就能看见我们这个难看的按钮了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuvRw\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuvRw\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e现在你已经学习了如何安装loader，以及定义各个依赖配置。看起来好像也没啥。但让我们来深入扩展一下这个例子。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e代码分离（\x3ccode\x3erequire.ensure\x3c\/code\x3e）\x3c\/h3\x3e\n\x3cp\x3e上面的例子还不错，但我们并不总是需要这个按钮。或许有的页面没有可以用来渲染按钮的\x3ccode\x3ea\x3c\/code\x3e，我们并不想在这样的页面引用按钮的资源文件。这种时候代码分离就能起到作用了。代码分离是Webpack对于“整块全部打包”vs“难以维护的手动引导”这个问题而给出的解决方案。这需要在你的代码中设定“分离点”：代码可以据此分离成不同区域进行按需加载。它的语法很简单：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import $ from \x27jquery\x27;\n\n\/\/ 这个是分割点\nrequire.ensure([], () =\x3e {\n  \/\/ 在这里import进的代码都会被打包到一个单独的文件里\n  const library = require(\x27some-big-library\x27);\n  $(\x27foo\x27).click(() =\x3e library.doSomething());\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个是分割点\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], () =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这里import进的代码都会被打包到一个单独的文件里\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e library = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27some-big-library\x27\x3c\/span\x3e);\n  $(\x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e).click(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e library.doSomething());\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3ccode\x3erequire.ensure\x3c\/code\x3e中的东西都会在打包结果中分离开来--只有当需要加载它的时候Webpack才会通过AJAX请求进行加载。也就是说我们实际上得到的是这样的文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22bundle.js\n|- jquery.js\n|- index.js \/\/ 入口文件\nchunk1.js\n|- some-big-libray.js\n|- index-chunk.js \/\/ 回调中的代码在这里\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebundle.js\n|- jquery.js\n|- index.js \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 入口文件\x3c\/span\x3e\nchunk1.js\n|- some-big-libray.js\n|- index-chunk.js \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 回调中的代码在这里\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你不需要在任何地方引用\x3ccode\x3echunk1.js\x3c\/code\x3e文件，Webpack会帮你在需要的时候进行请求。这意味着你可以像我们的例子一样，根据逻辑需要引进的资源全部扔进代码里。\x3c\/p\x3e\n\x3cp\x3e只有当页面上有链接存在时，再引用按钮组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/index.js\nif (document.querySelectorAll(\x27a\x27).length) {\n    require.ensure([], () =\x3e {\n        const Button = require(\x27.\/Components\/Button\x27).default;\n        const button = new Button(\x27google.com\x27);\n\n        button.render(\x27a\x27);\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e).length) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Button = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/Components\/Button\x27\x3c\/span\x3e).default;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e button = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Button(\x3cspan class=\x22hljs-string\x22\x3e\x27google.com\x27\x3c\/span\x3e);\n\n        button.render(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的一点是，因为\x3ccode\x3erequire\x3c\/code\x3e不会同时处理default export和normal export，所以使用\x3ccode\x3erequire\x3c\/code\x3e引用资源里default export的时候，需要手动加上\x3ccode\x3e.default\x3c\/code\x3e。相比之下，\x3ccode\x3eimport\x3c\/code\x3e则可以进行处理：\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eimport foo from \x27bar\x27\x3c\/code\x3e vs \x3ccode\x3eimport {baz} from \x27bar\x27\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e此时Webpack的output将会变得更复杂了。跑下Webpack，用\x3ccode\x3e--display-chunks\x3c\/code\x3e打印出来看看：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack --display-modules --display-chunks\nHash: 43b51e6cec5eb6572608\nVersion: webpack 1.12.14\nTime: 1185ms\n      Asset     Size  Chunks             Chunk Names\n  bundle.js  3.82 kB       0  [emitted]  main\n1.bundle.js   300 kB       1  [emitted]\nchunk    {0} bundle.js (main) 235 bytes [rendered]\n    [0] .\/src\/index.js 235 bytes {0} [built]\nchunk    {1} 1.bundle.js 290 kB {0} [rendered]\n    [5] .\/src\/Components\/Button.js 1.94 kB {1} [built]\n    [6] .\/~\/jquery\/dist\/jquery.js 259 kB {1} [built]\n    [7] .\/src\/Components\/Button.html 72 bytes {1} [built]\n    [8] .\/~\/mustache\/mustache.js 19.4 kB {1} [built]\n    [9] .\/src\/Components\/Button.scss 1.05 kB {1} [built]\n    [10] .\/~\/css-loader!.\/~\/sass-loader!.\/src\/Components\/Button.scss 212 bytes {1} [built]\n    [11] .\/~\/css-loader\/lib\/css-base.js 1.51 kB {1} [built]\n    [12] .\/~\/style-loader\/addStyles.js 7.21 kB {1} [built]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$ webpack --display-modules --display-chunks\nHash: \x3cspan class=\x22hljs-number\x22\x3e43\x3c\/span\x3eb51e6cec5eb6572608\nVersion: webpack \x3cspan class=\x22hljs-number\x22\x3e1.12\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.14\x3c\/span\x3e\nTime: \x3cspan class=\x22hljs-number\x22\x3e1185\x3c\/span\x3ems\n      Asset     Size  Chunks             Chunk Names\n  bundle.js  \x3cspan class=\x22hljs-number\x22\x3e3.82\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ebundle.js   \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} bundle.js (main) \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e bytes [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] .\/src\/index.js \x3cspan class=\x22hljs-number\x22\x3e235\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ebundle.js \x3cspan class=\x22hljs-number\x22\x3e290\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e] .\/src\/Components\/Button.js \x3cspan class=\x22hljs-number\x22\x3e1.94\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/jquery\/\x3c\/span\x3edist\/jquery.js \x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e] .\/src\/Components\/Button.html \x3cspan class=\x22hljs-number\x22\x3e72\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/mustache\/mu\x3c\/span\x3estache.js \x3cspan class=\x22hljs-number\x22\x3e19.4\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] .\/src\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e1.05\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader!.\/\x3c\/span\x3e~\x3cspan class=\x22hljs-regexp\x22\x3e\/sass-loader!.\/\x3c\/span\x3esrc\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e212\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader\/\x3c\/span\x3elib\/css-base.js \x3cspan class=\x22hljs-number\x22\x3e1.51\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/style-loader\/\x3c\/span\x3eaddStyles.js \x3cspan class=\x22hljs-number\x22\x3e7.21\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如你所见的那样，我们的入口\x3ccode\x3ebundle.js\x3c\/code\x3e值包含了一些逻辑，而其他东西（jQuery，Mustache，Button）都被打包进了\x3ccode\x3e1.bundle.js\x3c\/code\x3e，并且只在需要的时候才会被引用。现在为了能够让Webpack在AJAX的时候找到这些资源，我们需要改下配置里的\x3ccode\x3eoutput\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22path: \x27builds\x27,\nfilename: \x27bundle.js\x27,\npublicPath: \x27builds\/\x27,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3epath: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\/\x27\x3c\/span\x3e,\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eoutput.publicPath\x3c\/code\x3e告诉Webpack，从当前页面的位置出发哪里可以找到需要的资源（在这个例子里是\x3ccode\x3e\/builds\/\x3c\/code\x3e）。当我们加载页面的时候一切正常，而且能够看见Webpack已经根据页面上预留的“锚”加载好了包。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmW7\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmW7\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如果页面上缺少“锚”(代指link)，那么只会加载\x3ccode\x3ebundle.js\x3c\/code\x3e。通过这种方式，你可以做到在真正需要资源的时候才进行加载，避免让自己的页面变成笨重的一坨。顺带一提，我们可以改变分割点的名字，不使用\x3ccode\x3e1.bundle.js\x3c\/code\x3e而使用更加语义化的名称。通过\x3ccode\x3erequire.ensure\x3c\/code\x3e的第三个参数来实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22require.ensure([], () =\x3e {\n    const Button = require(\x27.\/Components\/Button\x27).default;\n    const button = new Button(\x27google.com\x27);\n\n    button.render(\x27a\x27);\n}, \x27button\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], () =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Button = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/Components\/Button\x27\x3c\/span\x3e).default;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e button = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Button(\x3cspan class=\x22hljs-string\x22\x3e\x27google.com\x27\x3c\/span\x3e);\n\n    button.render(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n}, \x3cspan class=\x22hljs-string\x22\x3e\x27button\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样的话就会生成\x3ccode\x3ebutton.bundle.js\x3c\/code\x3e而不是\x3ccode\x3e1.bundle.js\x3c\/code\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e再加个组件（\x3ccode\x3eCommonChunksPlugin\x3c\/code\x3e）\x3c\/h3\x3e\n\x3cp\x3e来让我们再加个组件吧：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/Components\/Header.scss\n.header {\n  font-size: 3rem;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22scss hljs\x22\x3e\x3ccode class=\x22scss\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/Components\/Header.scss\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-class\x22\x3e.header\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3rem\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- src\/Components\/Header.html --\x3e\n\x3cheader class=\x26quot;header\x26quot;\x3e\x22{{\x22text\x22}}\x22\x3c\/header\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- src\/Components\/Header.html --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22header\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22text\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/Components\/Header.js\nimport $ from \x27jquery\x27;\nimport Mustache from \x27mustache\x27;\nimport template from \x27.\/Header.html\x27;\nimport \x27.\/Header.scss\x27;\n\nexport default class Header {\n    render(node) {\n        const text = $(node).text();\n        $(node).html(\n            Mustache.render(template, {text})\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/Components\/Header.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Mustache \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27mustache\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e template \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Header.html\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Header.scss\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHeader\x3c\/span\x3e \x3c\/span\x3e{\n    render(node) {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e text = $(node).text();\n        $(node).html(\n            Mustache.render(template, {text})\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e将它在应用中渲染出来：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 如果有链接，则渲染按钮组件\nif (document.querySelectorAll(\x27a\x27).length) {\n    require.ensure([], () =\x3e {\n        const Button = require(\x27.\/Components\/Button\x27);\n        const button = new Button(\x27google.com\x27);\n\n        button.render(\x27a\x27);\n    });\n}\n\n\/\/ 如果有标题，则渲染标题组件\nif (document.querySelectorAll(\x27h1\x27).length) {\n    require.ensure([], () =\x3e {\n        const Header = require(\x27.\/Components\/Header\x27);\n\n        new Header().render(\x27h1\x27);\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果有链接，则渲染按钮组件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e).length) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Button = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/Components\/Button\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e button = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Button(\x3cspan class=\x22hljs-string\x22\x3e\x27google.com\x27\x3c\/span\x3e);\n\n        button.render(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n    });\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果有标题，则渲染标题组件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x27h1\x27\x3c\/span\x3e).length) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Header = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/Components\/Header\x27\x3c\/span\x3e);\n\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Header().render(\x3cspan class=\x22hljs-string\x22\x3e\x27h1\x27\x3c\/span\x3e);\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e瞅瞅使用了\x3ccode\x3e--display-chunks --display-modules\x3c\/code\x3e标记后Webpack的output输出：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack --display-modules --display-chunks\nHash: 178b46d1d1570ff8bceb\nVersion: webpack 1.12.14\nTime: 1548ms\n      Asset     Size  Chunks             Chunk Names\n  bundle.js  4.16 kB       0  [emitted]  main\n1.bundle.js   300 kB       1  [emitted]\n2.bundle.js   299 kB       2  [emitted]\nchunk    {0} bundle.js (main) 550 bytes [rendered]\n    [0] .\/src\/index.js 550 bytes {0} [built]\nchunk    {1} 1.bundle.js 290 kB {0} [rendered]\n    [14] .\/src\/Components\/Button.js 1.94 kB {1} [built]\n    [15] .\/~\/jquery\/dist\/jquery.js 259 kB {1} {2} [built]\n    [16] .\/src\/Components\/Button.html 72 bytes {1} [built]\n    [17] .\/~\/mustache\/mustache.js 19.4 kB {1} {2} [built]\n    [18] .\/src\/Components\/Button.scss 1.05 kB {1} [built]\n    [19] .\/~\/css-loader!.\/~\/sass-loader!.\/src\/Components\/Button.scss 212 bytes {1} [built]\n    [20] .\/~\/css-loader\/lib\/css-base.js 1.51 kB {1} {2} [built]\n    [21] .\/~\/style-loader\/addStyles.js 7.21 kB {1} {2} [built]\nchunk    {2} 2.bundle.js 290 kB {0} [rendered]\n    [22] .\/~\/jquery\/dist\/jquery.js 259 kB {1} {2} [built]\n    [23] .\/~\/mustache\/mustache.js 19.4 kB {1} {2} [built]\n    [24] .\/~\/css-loader\/lib\/css-base.js 1.51 kB {1} {2} [built]\n    [25] .\/~\/style-loader\/addStyles.js 7.21 kB {1} {2} [built]\n    [26] .\/src\/Components\/Header.js 1.62 kB {2} [built]\n   [27] .\/src\/Components\/Header.html 64 bytes {2} [built]\n   [28] .\/src\/Components\/Header.scss 1.05 kB {2} [built]\n   [29] .\/~\/css-loader!.\/~\/sass-loader!.\/src\/Components\/Header.scss 192 bytes {2} [built]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$ webpack --display-modules --display-chunks\nHash: \x3cspan class=\x22hljs-number\x22\x3e178\x3c\/span\x3eb46d1d1570ff8bceb\nVersion: webpack \x3cspan class=\x22hljs-number\x22\x3e1.12\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.14\x3c\/span\x3e\nTime: \x3cspan class=\x22hljs-number\x22\x3e1548\x3c\/span\x3ems\n      Asset     Size  Chunks             Chunk Names\n  bundle.js  \x3cspan class=\x22hljs-number\x22\x3e4.16\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ebundle.js   \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3ebundle.js   \x3cspan class=\x22hljs-number\x22\x3e299\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} bundle.js (main) \x3cspan class=\x22hljs-number\x22\x3e550\x3c\/span\x3e bytes [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] .\/src\/index.js \x3cspan class=\x22hljs-number\x22\x3e550\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ebundle.js \x3cspan class=\x22hljs-number\x22\x3e290\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e] .\/src\/Components\/Button.js \x3cspan class=\x22hljs-number\x22\x3e1.94\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/jquery\/\x3c\/span\x3edist\/jquery.js \x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e] .\/src\/Components\/Button.html \x3cspan class=\x22hljs-number\x22\x3e72\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e17\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/mustache\/mu\x3c\/span\x3estache.js \x3cspan class=\x22hljs-number\x22\x3e19.4\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e18\x3c\/span\x3e] .\/src\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e1.05\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e19\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader!.\/\x3c\/span\x3e~\x3cspan class=\x22hljs-regexp\x22\x3e\/sass-loader!.\/\x3c\/span\x3esrc\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e212\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader\/\x3c\/span\x3elib\/css-base.js \x3cspan class=\x22hljs-number\x22\x3e1.51\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/style-loader\/\x3c\/span\x3eaddStyles.js \x3cspan class=\x22hljs-number\x22\x3e7.21\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3ebundle.js \x3cspan class=\x22hljs-number\x22\x3e290\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/jquery\/\x3c\/span\x3edist\/jquery.js \x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/mustache\/mu\x3c\/span\x3estache.js \x3cspan class=\x22hljs-number\x22\x3e19.4\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader\/\x3c\/span\x3elib\/css-base.js \x3cspan class=\x22hljs-number\x22\x3e1.51\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/style-loader\/\x3c\/span\x3eaddStyles.js \x3cspan class=\x22hljs-number\x22\x3e7.21\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e26\x3c\/span\x3e] .\/src\/Components\/Header.js \x3cspan class=\x22hljs-number\x22\x3e1.62\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e27\x3c\/span\x3e] .\/src\/Components\/Header.html \x3cspan class=\x22hljs-number\x22\x3e64\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e] .\/src\/Components\/Header.scss \x3cspan class=\x22hljs-number\x22\x3e1.05\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e29\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader!.\/\x3c\/span\x3e~\x3cspan class=\x22hljs-regexp\x22\x3e\/sass-loader!.\/\x3c\/span\x3esrc\/Components\/Header.scss \x3cspan class=\x22hljs-number\x22\x3e192\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看出一点问题了：这两个组件都需要jQuery和Mustache，这样的话就造成了包中的依赖重复，这可不是我们想要的。尽管Webpack会在默认情况下进行一定的优化，但还得靠插件来加足火力搞定它。\x3c\/p\x3e\n\x3cp\x3e插件和loader的不同在于，loader只对一类特定的文件有效，而插件往往面向所有文件，并且并不总是会引起转化。Webpack提供了很多插件供你优化。在这里我们使用\x3ccode\x3eCommonChunksPlugin\x3c\/code\x3e插件:它会分析你包中的重复依赖并提取出来，生成一个完全独立的文件（例如vendor.js），甚至生成你的主文件。\x3c\/p\x3e\n\x3cp\x3e现在，我们想要把共同的依赖包从入口中剔除。如果所有的页面都用到了jQuery和Mustache，那么就要把它们提取出来。更新下配置吧：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x27webpack\x27);\n\nmodule.exports = {\n    entry: \x27.\/src\x27,\n    output:  {\n      \/\/ ...\n    },\n    plugins: [\n        new webpack.optimize.CommonsChunkPlugin({\n            name: \x27main\x27, \/\/ 将依赖移到我们的主文件中\n            children: true, \/\/ 再在所有的子文件中检查依赖文件\n            minChunks: 2, \/\/ 一个依赖重复几次会被提取出来\n        }),\n    ],\n    module:  {\n      \/\/ ...\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e:  {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27main\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将依赖移到我们的主文件中\x3c\/span\x3e\n            children: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 再在所有的子文件中检查依赖文件\x3c\/span\x3e\n            minChunks: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 一个依赖重复几次会被提取出来\x3c\/span\x3e\n        }),\n    ],\n    \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e:  {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再跑次Webpack，可以看出现在就好多了。其中，\x3ccode\x3emain\x3c\/code\x3e是我们的默认依赖。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22chunk    {0} bundle.js (main) 287 kB [rendered]\n    [0] .\/src\/index.js 550 bytes {0} [built]\n    [30] .\/~\/jquery\/dist\/jquery.js 259 kB {0} [built]\n    [31] .\/~\/mustache\/mustache.js 19.4 kB {0} [built]\n    [32] .\/~\/css-loader\/lib\/css-base.js 1.51 kB {0} [built]\n    [33] .\/~\/style-loader\/addStyles.js 7.21 kB {0} [built]\nchunk    {1} 1.bundle.js 3.28 kB {0} [rendered]\n    [34] .\/src\/Components\/Button.js 1.94 kB {1} [built]\n    [35] .\/src\/Components\/Button.html 72 bytes {1} [built]\n    [36] .\/src\/Components\/Button.scss 1.05 kB {1} [built]\n    [37] .\/~\/css-loader!.\/~\/sass-loader!.\/src\/Components\/Button.scss 212 bytes {1} [built]\nchunk    {2} 2.bundle.js 2.92 kB {0} [rendered]\n    [38] .\/src\/Components\/Header.js 1.62 kB {2} [built]\n   [39] .\/src\/Components\/Header.html 64 bytes {2} [built]\n   [40] .\/src\/Components\/Header.scss 1.05 kB {2} [built]\n   [41] .\/~\/css-loader!.\/~\/sass-loader!.\/src\/Components\/Header.scss 192 bytes {2} [built]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3echunk    {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} bundle.js (main) \x3cspan class=\x22hljs-number\x22\x3e287\x3c\/span\x3e kB [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] .\/src\/index.js \x3cspan class=\x22hljs-number\x22\x3e550\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/jquery\/\x3c\/span\x3edist\/jquery.js \x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e31\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/mustache\/mu\x3c\/span\x3estache.js \x3cspan class=\x22hljs-number\x22\x3e19.4\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader\/\x3c\/span\x3elib\/css-base.js \x3cspan class=\x22hljs-number\x22\x3e1.51\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e33\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/style-loader\/\x3c\/span\x3eaddStyles.js \x3cspan class=\x22hljs-number\x22\x3e7.21\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ebundle.js \x3cspan class=\x22hljs-number\x22\x3e3.28\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e34\x3c\/span\x3e] .\/src\/Components\/Button.js \x3cspan class=\x22hljs-number\x22\x3e1.94\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e35\x3c\/span\x3e] .\/src\/Components\/Button.html \x3cspan class=\x22hljs-number\x22\x3e72\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e] .\/src\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e1.05\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    [\x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader!.\/\x3c\/span\x3e~\x3cspan class=\x22hljs-regexp\x22\x3e\/sass-loader!.\/\x3c\/span\x3esrc\/Components\/Button.scss \x3cspan class=\x22hljs-number\x22\x3e212\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\nchunk    {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3ebundle.js \x3cspan class=\x22hljs-number\x22\x3e2.92\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [rendered]\n    [\x3cspan class=\x22hljs-number\x22\x3e38\x3c\/span\x3e] .\/src\/Components\/Header.js \x3cspan class=\x22hljs-number\x22\x3e1.62\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e39\x3c\/span\x3e] .\/src\/Components\/Header.html \x3cspan class=\x22hljs-number\x22\x3e64\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e] .\/src\/Components\/Header.scss \x3cspan class=\x22hljs-number\x22\x3e1.05\x3c\/span\x3e kB {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e41\x3c\/span\x3e] .\/~\x3cspan class=\x22hljs-regexp\x22\x3e\/css-loader!.\/\x3c\/span\x3e~\x3cspan class=\x22hljs-regexp\x22\x3e\/sass-loader!.\/\x3c\/span\x3esrc\/Components\/Header.scss \x3cspan class=\x22hljs-number\x22\x3e192\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果我们改变下名字\x3ccode\x3ename: \x27vendor\x27\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.optimize.CommonsChunkPlugin({\n    name: \x27vendor\x27,\n    children: true,\n    minChunks: 2,\n}),\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3echildren\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n}),\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eWebpack会在没有该文件的情况下自动生成\x3ccode\x3ebuilds\/vendor.js\x3c\/code\x3e，之后我们可以手动引入：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript src=\x26quot;builds\/vendor.js\x26quot;\x3e\x3c\/script\x3e\n\x3cscript src=\x26quot;builds\/bundle.js\x26quot;\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22builds\/vendor.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22builds\/bundle.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你也可以通过\x3ccode\x3easync: true\x3c\/code\x3e，并且不提供共同依赖包的命名，来达到异步加载共同依赖的效果。\x3c\/p\x3e\n\x3cp\x3eWebpack有很多这样给力的优化方案。我没法一个一个介绍它们，不过可以通过创造一个生产环境的应用来进一步学习。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e飞跃到生产环境（\x3ccode\x3eproduction\x3c\/code\x3e）\x3c\/h3\x3e\n\x3cp\x3e首先，要在设置中添加几个插件，但要求只有当\x3ccode\x3eNODE_ENV\x3c\/code\x3e为\x3ccode\x3eproduction\x3c\/code\x3e的时候才运行它们：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x27webpack\x27);\nvar production = process.env.NODE_ENV === \x27production\x27;\n\nvar plugins = [\n    new webpack.optimize.CommonsChunkPlugin({\n        name: \x27main\x27,\n        children: true,\n        minChunks: 2,\n    }),\n];\n\nif (production) {\n    plugins = plugins.concat([\n       \/\/ 生产环境下需要的插件\n    ]);\n}\n\nmodule.exports = {\n    entry: \x27.\/src\x27,\n    output: {\n        path: \x27builds\x27,\n        filename: \x27bundle.js\x27,\n        publicPath: \x27builds\/\x27,\n    },\n    plugins: plugins,\n    \/\/ ...\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e production = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plugins = [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27main\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echildren\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n    }),\n];\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (production) {\n    plugins = plugins.concat([\n       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生产环境下需要的插件\x3c\/span\x3e\n    ]);\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\/\x27\x3c\/span\x3e,\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: plugins,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eWebpack也提供了一些可以切换生产环境的设置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n    debug: !production,\n    devtool: production ? false : \x27eval\x27,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3edebug\x3c\/span\x3e: !production,\n    \x3cspan class=\x22hljs-attr\x22\x3edevtool\x3c\/span\x3e: production ? \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27eval\x27\x3c\/span\x3e,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e设置中的第一行表明在开发环境下，将开启debug模式，代码不再混做一团，利于本地调试。第二行则用来生产资源地图（sourcemaps）。Webpack有\x3ca href=\x22http:\/\/webpack.github.io\/docs\/configuration.html#devtool\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一些方法\x3c\/a\x3e可以生成\x3ca href=\x22http:\/\/www.html5rocks.com\/en\/tutorials\/developertools\/sourcemaps\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esourcemaps\x3c\/a\x3e，而\x3ccode\x3eeval\x3c\/code\x3e则是在本地表现最赞的一个。在生产环境下，我们并不关心sourcemaps，因此关闭了这个选项。\x3c\/p\x3e\n\x3cp\x3e现在来添加生产环境下的插件吧：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (production) {\n    plugins = plugins.concat([\n        \/\/ 这个插件用来寻找相同的包和文件，并把它们合并在一起\n        new webpack.optimize.DedupePlugin(),\n\n        \/\/ 这个插件根据包\/库的引用次数来优化它们\n        new webpack.optimize.OccurenceOrderPlugin(),\n\n        \/\/ 这个插件用来阻止Webpack把过小的文件打成单独的包\n        new webpack.optimize.MinChunkSizePlugin({\n            minChunkSize: 51200, \/\/ ~50kb\n        }),\n\n        \/\/ 压缩js文件\n        new webpack.optimize.UglifyJsPlugin({\n            mangle: true,\n            compress: {\n                warnings: false, \/\/ 禁止生成warning\n            },\n        }),\n\n        \/\/ 这个插件提供了各种可用在生产环境下的变量\n        \/\/ 通过设置为false，可避免生产环境下调用到它们\n        new webpack.DefinePlugin({\n            __SERVER__: !production,\n            __DEVELOPMENT__: !production,\n            __DEVTOOLS__: !production,\n            \x27process.env\x27: {\n                BABEL_ENV: JSON.stringify(process.env.NODE_ENV),\n            },\n        }),\n\n    ]);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (production) {\n    plugins = plugins.concat([\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个插件用来寻找相同的包和文件，并把它们合并在一起\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.DedupePlugin(),\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个插件根据包\/库的引用次数来优化它们\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.OccurenceOrderPlugin(),\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个插件用来阻止Webpack把过小的文件打成单独的包\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.MinChunkSizePlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3eminChunkSize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e51200\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ~50kb\x3c\/span\x3e\n        }),\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩js文件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ecompress\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3ewarnings\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 禁止生成warning\x3c\/span\x3e\n            },\n        }),\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个插件提供了各种可用在生产环境下的变量\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过设置为false，可避免生产环境下调用到它们\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3e__SERVER__\x3c\/span\x3e: !production,\n            \x3cspan class=\x22hljs-attr\x22\x3e__DEVELOPMENT__\x3c\/span\x3e: !production,\n            \x3cspan class=\x22hljs-attr\x22\x3e__DEVTOOLS__\x3c\/span\x3e: !production,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3eBABEL_ENV\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(process.env.NODE_ENV),\n            },\n        }),\n\n    ]);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我普遍使用的差不多就这么多了，不过Webpack还提供了非常多的插件，你可以自己去研究它们。也可以在NPM上找到很多用户自己贡献的插件。插件的链接在文末提供。\x3c\/p\x3e\n\x3cp\x3e还有一个关于生产环境的优化是给资源提供版本的概念。还记得\x3ccode\x3eoutput.filename\x3c\/code\x3e里的\x3ccode\x3ebundle.js\x3c\/code\x3e吗？在这个配置里面，你可以使用一些变量，而\x3ccode\x3e[hash]\x3c\/code\x3e则会给文件提供一段随机的字符串。除此以外，我们想要包可以被版本化，因此添加了\x3ccode\x3eoutput.chunkFilename\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22output: {\n    path: \x27builds\x27,\n    filename: production ? \x27[name]-[hash].js\x27 : \x27bundle.js\x27,\n    chunkFilename: \x27[name]-[chunkhash].js\x27,\n    publicPath: \x27builds\/\x27,\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eoutput: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: production ? \x3cspan class=\x22hljs-string\x22\x3e\x27[name]-[hash].js\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3echunkFilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]-[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\/\x27\x3c\/span\x3e,\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为无法得知每次打包生成的文件名，所以我们只在生产环境下使用它。除此之外，我们还想保证每次打包的时候，builds文件夹都会被清空以节约空间，因此使用了一个第三方插件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install clean-webpack-plugin --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install clean-webpack-plugin --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e并将它添加到配置中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x27webpack\x27);\nvar CleanPlugin = require(\x27clean-webpack-plugin\x27);\n\/\/ ...\nif (production) {\n    plugins = plugins.concat([\n        \/\/ 在打包前清空 builds\/ 文件夹\n        new CleanPlugin(\x27builds\x27),\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CleanPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27clean-webpack-plugin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (production) {\n    plugins = plugins.concat([\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在打包前清空 builds\/ 文件夹\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CleanPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e),\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e做完这些漂亮的优化，来比较下结果的不同吧：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack\n                bundle.js   314 kB       0  [emitted]  main\n1-21660ec268fe9de7776c.js  4.46 kB       1  [emitted]\n2-fcc95abf34773e79afda.js  4.15 kB       2  [emitted]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$ webpack\n                bundle.js   \x3cspan class=\x22hljs-number\x22\x3e314\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-21660\x3c\/span\x3eec268fe9de7776c.js  \x3cspan class=\x22hljs-number\x22\x3e4.46\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e-fcc95abf34773e79afda.js  \x3cspan class=\x22hljs-number\x22\x3e4.15\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ NODE_ENV=production webpack\nmain-937cc23ccbf192c9edd6.js  97.2 kB       0  [emitted]  main\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$ NODE_ENV=production webpack\nmain\x3cspan class=\x22hljs-number\x22\x3e-937\x3c\/span\x3ecc23ccbf192c9edd6.js  \x3cspan class=\x22hljs-number\x22\x3e97.2\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e来看看Webpack都做了什么：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e在第一段代码中，后两个包非常轻量，异步请求不会占用多少HTTP带宽，所以在生产环境下Webpack将它们打包进了入口文件里\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e所有东西都压缩过了。从322kb降到了97kb\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e但是这样下去，Webpack岂不是会将js文件合并成巨大的一坨吗？\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e是的，在这个小小的应用中是这样没错。但是你需要这么想：你不需要考虑在什么时候合并什么。如果你的包中含有太多的依赖，它们会被移走到异步请求包中而不会被合并起来。反之，如果它们很小，不值得独立加载，那么就会被合并。你只需要建立规则，Webpack会最大化的将其优化。没有人力劳作，不需要思考依赖关系，一切都是自动化的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWL\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWL\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e或许你已经注意到了，我没有对HTML或CSS进行压缩。那是因为当\x3ccode\x3edebug\x3c\/code\x3e模式开启的时候，\x3ccode\x3ecss-loader\x3c\/code\x3e和\x3ccode\x3ehtml-loader\x3c\/code\x3e已经帮我们搞好了。这也是为什么Uglify是一个独立插件的原因：在Webpack中没有\x3ccode\x3ejs-loader\x3c\/code\x3e这种东西，Webpack自己就是个JS loader。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e抽取（\x3ccode\x3eextract-text-webpack-plugin\x3c\/code\x3e）\x3c\/h3\x3e\n\x3cp\x3e可能你已经注意到了，从这个教程一开始，Webpack打包好之后，我们的样式就直接插在网页页面上，简直不能更难看了。能通过Webpack把打包过的CSS生成独立的文件吗？当然没问题：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install extract-text-webpack-plugin --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install extract-text-webpack-plugin --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个插件所做的就是我刚刚说的那些：从打出的最终包里面，提取出某一类内容分离开来单独引用。它通常被用于提取CSS文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x27webpack\x27);\nvar CleanPlugin = require(\x27clean-webpack-plugin\x27);\nvar ExtractPlugin = require(\x27extract-text-webpack-plugin\x27);\nvar production = process.env.NODE_ENV === \x27production\x27;\n\nvar plugins = [\n    new ExtractPlugin(\x27bundle.css\x27), \/\/ \x3c=== 提取出来的文件\n    new webpack.optimize.CommonsChunkPlugin({\n        name: \x27main\x27,\n        children: true, \n        minChunks: 2,\n    }),\n];\n\/\/ ...\nmodule.exports = {\n    \/\/ ...\n    plugins: plugins,\n    module:  {\n        loaders: [\n            {\n                test: \/\\.scss\/,\n                loader: ExtractPlugin.extract(\x27style\x27, \x27css!sass\x27),\n            },\n            \/\/ ...\n        ],\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CleanPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27clean-webpack-plugin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e production = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plugins = [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x27bundle.css\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;=== 提取出来的文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27main\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echildren\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \n        \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n    }),\n];\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    plugins: plugins,\n    \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e:  {\n        \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.scss\/\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: ExtractPlugin.extract(\x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css!sass\x27\x3c\/span\x3e),\n            },\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n        ],\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eExtractPlugin.extrac\x3c\/code\x3e方法接收两个参数，第一个参数代表当它处于已经打包好的包（\x27style\x27）里时，如何处理那些提取出来的东西；第二个参数代表当它在主文件（\x27css!sass\x27）里时，如何对待提取出的东西。当它在包里时，肯定不能直接将CSS加在生成的东西后面，所以先用\x3ccode\x3estyle-loader\x3c\/code\x3e进行处理；而对于主文件里面的styles，则将它们放进\x3ccode\x3ebuilds\/bundle.css\x3c\/code\x3e文件。我们来给应用加一个主样式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/styles.scss\nbody {\n  font-family: sans-serif;\n  background: darken(white, 0.2);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22scss hljs\x22\x3e\x3ccode class=\x22scss\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/styles.scss\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3efont-family\x3c\/span\x3e: sans-serif;\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: darken(white, \x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/index.js\nimport \x27.\/styles.scss\x27;\n\n\/\/ Rest of our file\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/styles.scss\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Rest of our file\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e跑下Webpack，就能看见已经生成了\x3ccode\x3ebundle.css\x3c\/code\x3e，可以把它引用进HTML里：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack\n                bundle.js    318 kB       0  [emitted]  main\n1-a110b2d7814eb963b0b5.js   4.43 kB       1  [emitted]\n2-03eb25b4d6b52a50eb89.js    4.1 kB       2  [emitted]\n               bundle.css  59 bytes       0  [emitted]  main\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$ webpack\n                bundle.js    \x3cspan class=\x22hljs-number\x22\x3e318\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e-a110b2d7814eb963b0b5.js   \x3cspan class=\x22hljs-number\x22\x3e4.43\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-03\x3c\/span\x3eeb25b4d6b52a50eb89.js    \x3cspan class=\x22hljs-number\x22\x3e4.1\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]\n               bundle.css  \x3cspan class=\x22hljs-number\x22\x3e59\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你想提取出所有包里的样式，则需要设置\x3ccode\x3eExtractTextPlugin(\x27bundle.css\x27, {allChunks: true})\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e顺带一提，你也可以自定义文件名，就跟之前说的改变js output-file名称一样：\x3ccode\x3eExtractTextPlugin(\x27[name]-[hash].css\x27)\x3c\/code\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e使用图片（\x3ccode\x3eurl-loader\x3c\/code\x3e\x26amp;\x3ccode\x3efile-loader\x3c\/code\x3e）\x3c\/h3\x3e\n\x3cp\x3e到目前为止，我们还没处理例如图片、字体这样的资源文件。它们在Webpack中如何工作，我们又该如何优化？接下来，我要在网站的背景里加入图片，看起来一定酷酷的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWM\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWM\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e把图片保存在\x3ccode\x3eimg\/puppy.jpg\x3c\/code\x3e，更新下Sass文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/styles.scss\nbody {\n    font-family: sans-serif;\n    background: darken(white, 0.2);\n    background-image: url(\x27..\/img\/puppy.jpg\x27);\n    background-size: cover;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22scss hljs\x22\x3e\x3ccode class=\x22scss\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/styles.scss\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3efont-family\x3c\/span\x3e: sans-serif;\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: darken(white, \x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground-image\x3c\/span\x3e: url(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/img\/puppy.jpg\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground-size\x3c\/span\x3e: cover;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果仅仅是这样，Webpack一定会告诉你：“你特么的想让我对JPG做啥？”，那是因为还没有加入对应的loader。有两种loader可以使用：\x3ccode\x3efile-loader\x3c\/code\x3e和\x3ccode\x3eurl-loader\x3c\/code\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3efile-loader\x3c\/code\x3e：返回一段指向资源的URL，允许你给文件加入版本的概念（默认）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eurl-loader\x3c\/code\x3e：以\x3ccode\x3edata:image\/jpeg;base64\x3c\/code\x3e的形式返回URL\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e两个方法不能说谁好谁坏：如果你的图片大于2M的话那你一定不希望它直接夹杂在代码中，而是独立出去；而如果仅仅是2kb左右的小图标。那么合并在一起减少HTTP请求会更好。因此，我们两个都要设置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install url-loader file-loader --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install url-loader file-loader --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    test: \/\\.(png|gif|jpe?g|svg)$\/i,\n    loader: \x27url?limit=10000\x27,\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|gif|jpe?g|svg)$\/i\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url?limit=10000\x27\x3c\/span\x3e,\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里，我们给\x3ccode\x3eurl-loader\x3c\/code\x3e了一个\x3ccode\x3elimit\x3c\/code\x3e参数，这样，当文件大小小于10kb的时候，会采取行内样式，否则的话，会转到\x3ccode\x3efile-loader\x3c\/code\x3e进行处理。你也可以通过\x3ccode\x3equery\x3c\/code\x3e传递一个Object来实现它：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    test: \/\\.(png|gif|jpe?g|svg)$\/i,\n    loader: \x27url\x27,\n    query: {\n      limit: 10000,\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|gif|jpe?g|svg)$\/i\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e来瞅一眼Webpack的输出：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22bundle.js   15 kB       0  [emitted]  main\n1-b8256867498f4be01fd7.js  317 kB       1  [emitted]\n2-e1bc215a6b91d55a09aa.js  317 kB       2  [emitted]\n               bundle.css  2.9 kB       0  [emitted]  main\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ebundle.js   \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e-b8256867498f4be01fd7.js  \x3cspan class=\x22hljs-number\x22\x3e317\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e-e1bc215a6b91d55a09aa.js  \x3cspan class=\x22hljs-number\x22\x3e317\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]\n               bundle.css  \x3cspan class=\x22hljs-number\x22\x3e2.9\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输出里面没有JPG图像，那是因为我们的小狗图片比配置里限制的大小要小，因此被加到了行内。访问页面，你就能看见这只可爱的小狗了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWP\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWP\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是一个非常强大的功能，它意味着Webpack可以智能的根据资源的大小和HTTP请求占有的比率，采取不同的优化方案。还有一个叫做\x3ca href=\x22https:\/\/github.com\/tcoopman\/image-webpack-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eimage-loader\x3c\/a\x3e的loader，可以在打包前检查所有图片，避免图片的重复压缩。它有一个叫\x3ccode\x3e?bypassOnDebug \x3c\/code\x3e的参数，通过它你可以只在生产环境下启动该插件。\x3c\/p\x3e\n\x3cp\x3e还有很多优秀的插件，我强烈建议你使用文末的链接去查看它们。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e来个牛逼的热加载（dev-server）\x3c\/h3\x3e\n\x3cp\x3e我们的生产环境以及整的差不多了，现在应该更多的关心一下本地开发。或许你以及注意到了，当人们提及开发工具的时候，总是会提及热加载：LiveReload，BrowserSync，或者其他的什么鬼东西。但是只有傻瓜才会整页的刷新，我们则使用更高端的热加载。因为Webpack可以确切的知道你依赖树中某一点位置的代码，因此每次的改变都会据此生成一个新的文件。简单的说，就是不需要刷新页面就能将改变展现在屏幕上。\x3c\/p\x3e\n\x3cp\x3e为了能够使用HMR，我们需要一个server来启动热加载。Webpack提供的\x3ccode\x3edev-server\x3c\/code\x3e可以完成这个任务：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install webpack-dev-server --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install webpack-dev-server --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e安装下面的命令启动server，不能再简单了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack-dev-server --inline --hot\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ webpack-dev-server --inline --hot\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第一个标记\x3ccode\x3e--inline\x3c\/code\x3e是让Webpack把HMR逻辑直接写入页面上而不是放到iframe里，而第二个标记则开启了HMR。接下来，访问\x3ccode\x3ehttp:\/\/localhost:8080\/webpack-dev-server\/\x3c\/code\x3e,嗯还是那个正常的页面。试着修改Sass文件，MAGIC！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWQ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWQ\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e你可以把webpack-dev-server作为自己本地的server。如果你打算一直使用HMR，就需要这么配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22output: {\n    path: \x27builds\x27,\n    filename: production ? \x27[name]-[hash].js\x27 : \x27bundle.js\x27,\n    chunkFilename: \x27[name]-[chunkhash].js\x27,\n    publicPath: \x27builds\/\x27,\n},\ndevServer: {\n    hot: true,\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eoutput: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: production ? \x3cspan class=\x22hljs-string\x22\x3e\x27[name]-[hash].js\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3echunkFilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]-[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27builds\/\x27\x3c\/span\x3e,\n},\n\x3cspan class=\x22hljs-attr\x22\x3edevServer\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3ehot\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样的话，不管我们什么时候运行\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e，都会是HMR模式。值得一提的是，我们在这里使用\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e对资源进行热加载，但也可以使用在其他地方例如Express server上。Webpack提供了一个中间件，使得你可以把HMR的功能用在其他server上。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e代码不干净的人都给我去罚站！（pre-loader \x26amp; lint)\x3c\/h3\x3e\n\x3cp\x3e如果你一直跟着本教程走，那或许会有这样的疑问：为什么loader都在\x3ccode\x3emodule.loaders\x3c\/code\x3e中而插件不在？那当然是因为还有其他可以配置进\x3ccode\x3emodule\x3c\/code\x3e的东西~Webpack不只是有loader，也有pre-loader和post-loader：在main-loader运行之前和之后发动的玩意。举个栗子：我基本可以确信自己在这个文章里面写的代码很糟糕，所以使用ESLint进行代码检查：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install eslint eslint-loader babel-eslint --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install eslint eslint-loader babel-eslint --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新建一个肯定会引发错误的\x3ccode\x3e.eslintrc\x3c\/code\x3e文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ .eslintrc\nparser: \x27babel-eslint\x27\nrules:\n  quotes: 2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ .eslintrc\x3c\/span\x3e\nparser: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-eslint\x27\x3c\/span\x3e\nrules:\n  quotes: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在增加pre-loader，语法和之前的一样，只不过加在\x3ccode\x3emodule.preLoaders\x3c\/code\x3e里：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module:  {\n    preLoaders: [\n        {\n            test: \/\\.js\/,\n            loader: \x27eslint\x27,\n        }\n    ],\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e:  {\n    \x3cspan class=\x22hljs-attr\x22\x3epreLoaders\x3c\/span\x3e: [\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint\x27\x3c\/span\x3e,\n        }\n    ],\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e启动Webpack，然后淡定的看它失败：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack\nHash: 33cc307122f0a9608812\nVersion: webpack 1.12.2\nTime: 1307ms\n                    Asset      Size  Chunks             Chunk Names\n                bundle.js    305 kB       0  [emitted]  main\n1-551ae2634fda70fd8502.js    4.5 kB       1  [emitted]\n2-999713ac2cd9c7cf079b.js   4.17 kB       2  [emitted]\n               bundle.css  59 bytes       0  [emitted]  main\n    \x2b 15 hidden modules\n\nERROR in .\/src\/index.js\n\n\/Users\/anahkiasen\/Sites\/webpack\/src\/index.js\n   1:8   error  Strings must use doublequote  quotes\n   4:31  error  Strings must use doublequote  quotes\n   6:32  error  Strings must use doublequote  quotes\n   7:35  error  Strings must use doublequote  quotes\n   9:23  error  Strings must use doublequote  quotes\n  14:31  error  Strings must use doublequote  quotes\n  16:32  error  Strings must use doublequote  quotes\n  18:29  error  Strings must use doublequote  quotes\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$ webpack\nHash: \x3cspan class=\x22hljs-number\x22\x3e33\x3c\/span\x3ecc307122f0a9608812\nVersion: webpack \x3cspan class=\x22hljs-number\x22\x3e1.12\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.2\x3c\/span\x3e\nTime: \x3cspan class=\x22hljs-number\x22\x3e1307\x3c\/span\x3ems\n                    Asset      Size  Chunks             Chunk Names\n                bundle.js    \x3cspan class=\x22hljs-number\x22\x3e305\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-551\x3c\/span\x3eae2634fda70fd8502.js    \x3cspan class=\x22hljs-number\x22\x3e4.5\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-999713\x3c\/span\x3eac2cd9c7cf079b.js   \x3cspan class=\x22hljs-number\x22\x3e4.17\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]\n               bundle.css  \x3cspan class=\x22hljs-number\x22\x3e59\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  main\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e hidden modules\n\nERROR \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e .\/src\/index.js\n\n\/Users\/anahkiasen\/Sites\/webpack\/src\/index.js\n   \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e   error  Strings must use doublequote  quotes\n   \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e31\x3c\/span\x3e  error  Strings must use doublequote  quotes\n   \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e  error  Strings must use doublequote  quotes\n   \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e35\x3c\/span\x3e  error  Strings must use doublequote  quotes\n   \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e  error  Strings must use doublequote  quotes\n  \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e31\x3c\/span\x3e  error  Strings must use doublequote  quotes\n  \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e  error  Strings must use doublequote  quotes\n  \x3cspan class=\x22hljs-number\x22\x3e18\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e29\x3c\/span\x3e  error  Strings must use doublequote  quotes\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再举个pre-loader的例子：每个组件里我们都引用了stylesheet，而它们都有相同命名的对应模板。使用一个pre-loader可以自动将有相同名称的文件作为一个module载入：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install baggage-loader --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install baggage-loader --save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    test: \/\\.js\/,\n    loader: \x27baggage?[file].html=template\x26amp;[file].scss\x27,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27baggage?[file].html=template\x26amp;[file].scss\x27\x3c\/span\x3e,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过这样的方式告知Webpack，如果遇见和配置相同的HTML文件，则将它作为\x3ccode\x3etemplate \x3c\/code\x3e引入，同时引入和它同名的Sass文件。这样就能改写组件文件：\x3c\/p\x3e\n\x3cp\x3e将：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import $ from \x27jquery\x27;\nimport template from \x27.\/Button.html\x27;\nimport Mustache from \x27mustache\x27;\nimport \x27.\/Button.scss\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e template \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Button.html\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Mustache \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27mustache\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Button.scss\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e改为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import $ from \x27jquery\x27;\nimport Mustache from \x27mustache\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e $ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Mustache \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27mustache\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你看，pre-loaders也可以很强大。在文末你可以找到更多的loader\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e还没看够？\x3c\/h3\x3e\n\x3cp\x3e现在我们的应用还很小，当它变的庞大的时候，观测依赖树就变的非常有用了，从中可以看出我们做的是对是错，应用的瓶颈在哪里等等。Webpack知晓这一切，不过我们得礼貌的请教它才能知晓答案。为了做到这点，你可以通过下面的命令运行Webpack：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22webpack --profile --json \x3e stats.json\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ewebpack --profile --json \x26gt; stats.json\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第一个标记会让Webpack生成一个profile文件，而第二个则将它转化为JSON格式。最终，讲所有的output都生成了JSON文件。现在有很多网站都可以解析这个JSON文件，不过Webpack官方提供了一个解码的网站\x3ca href=\x22http:\/\/webpack.github.io\/analyse\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack Analyze\x3c\/a\x3e。将JSON文件导入，进入Modules板块，就可以看见自己依赖树的可视化图像：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWR\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWR\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e小圆点越红，则证明在打包的时候越困难。在这个例子中，jQuery作为最大的文件而成为罪魁祸首。再瞅瞅网站上的其他模块。或许你无法从这个小小的例子里学到很多东西，但是这个工具在分析依赖树和包的时候真的非常有用。\x3c\/p\x3e\n\x3cp\x3e我之前提过，现在有很多服务提供可以对profile文件进行分析。其中一个是\x3ca href=\x22http:\/\/chrisbateman.github.io\/webpack-visualizer\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack Visualizer\x3c\/a\x3e，它可以以饼状图的形式告知你各个文件占据了多大的比重：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVvmWS\x22 src=\x22https:\/\/static.alili.tech\/img\/bVvmWS\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e就先讲到这儿吧\x3c\/h3\x3e\n\x3cp\x3e对我而言，Webpack已经取代了Grunt或者Gulp：大部分的功能可以使用Webpack替代，其他的则使用NPM脚本就够了。在以前，每个任务中我们都要通过Aglio，把API文档转换为HTML，而现在只需要这么做：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ package.json\n{\n  \x26quot;scripts\x26quot;: {\n    \x26quot;build\x26quot;: \x26quot;webpack\x26quot;,\n    \x26quot;build:api\x26quot;: \x26quot;aglio -i docs\/api\/index.apib -o docs\/api\/index.html\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ package.json\x3c\/span\x3e\n{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22build:api\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22aglio -i docs\/api\/index.apib -o docs\/api\/index.html\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e即便是一些不需要打包和构建的Glup任务，Webpack都贴心的提供了对应的服务。下面是一个将Glup融合进Webpack的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var gulp = require(\x27gulp\x27);\nvar gutil = require(\x27gutil\x27);\nvar webpack = require(\x27webpack\x27);\nvar config = require(\x27.\/webpack.config\x27);\n\ngulp.task(\x27default\x27, function(callback) {\n  webpack(config, function(error, stats) {\n    if (error) throw new gutil.PluginError(\x27webpack\x27, error);\n    gutil.log(\x27[webpack]\x27, stats.toString());\n\n    callback();\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gulp = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gutil = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gutil\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.config\x27\x3c\/span\x3e);\n\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27default\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecallback\x3c\/span\x3e) \x3c\/span\x3e{\n  webpack(config, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (error) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e gutil.PluginError(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e, error);\n    gutil.log(\x3cspan class=\x22hljs-string\x22\x3e\x27[webpack]\x27\x3c\/span\x3e, stats.toString());\n\n    callback();\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为Webpack具有Node API，因此可以很轻松了运用在其他构建体系中。不用多久你就能发现自己深爱着它无法自拔了。\x3c\/p\x3e\n\x3cp\x3e不管怎样，这篇文字带你预览了Webpack能够帮你做的事情。或许你认为我们讲了很多方面，但实际上这只是个表皮而已：multiple entry points, prefetching, context replacement等等都还没有涉及到。Webpack是个强大的工具，也因此比那些传统的工具更加难懂。但一旦你知道如何使用它，它就会为你鸣奏最悦耳动听的声音。我曾在一些项目里使用过它，它提供的强大的优化和自动化让我深深不能自拔。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e资源\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/webpack.github.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack documentation\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/webpack.github.io\/docs\/list-of-loaders.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eList of loaders\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/webpack.github.io\/docs\/list-of-plugins.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eList of plugins\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/madewithlove\/webpack-article\/commits\/master\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSources for this article\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/madewithlove\/webpack-config\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eOur Webpack configuration package\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>[译] 用 Webpack 武装自己</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005054055">https://segmentfault.com/a/1190000005054055</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/38ou1cyztwj/" target="_blank">https://alili.tech/archive/38ou1cyztwj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>