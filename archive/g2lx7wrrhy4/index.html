<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/g2lx7wrrhy4/",
				"appid": "1613049289050283", 
				"title": "Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-15T02:30:44"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dfejr0q89no/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4ho25kya1mg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&text=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&text=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&title=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&is_video=false&description=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&title=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&title=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&title=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg2lx7wrrhy4%2f&title=Apache%e3%80%81Nginx%20%e4%b8%8e%20Node.js%20%e4%b9%8b%e4%ba%89%20%e2%80%94%e2%80%94%20WordPress%20%e4%b8%8e%20Ghost%20%e7%9a%84%e6%80%a7%e8%83%bd%e5%a4%a7%e5%af%b9%e5%86%b3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决</h1><div class="meta"><div class="postdate"><time datetime="2019-02-15" itemprop="datePublished">2019-02-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#apachenginx-与-nodejs-之争--wordpress-与-ghost-的性能大对决\x22\x3e\x3c\/a\x3eApache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决\x3c\/h1\x3e\n\x3cp\x3e巨头之间的终极对决：崛起的新星 Node.js 能否战胜巨人 Apache 和 Nginx？\x3c\/p\x3e\n\x3cp\x3e我和你一样，都阅读过大量散布在互联网各处的意见或事实，其中有一些我认为是可靠的，而其它的可能是谣传，让人难以置信。\x3c\/p\x3e\n\x3cp\x3e我读过的许多信息是相当矛盾的，有人深信 StackOverflow（比如\x3ca href=\x22http:\/\/stackoverflow.com\/questions\/9967887\/node-js-itself-or-nginx-frontend-for-serving-static-files\x22\x3e这个\x3c\/a\x3e和\x3ca href=\x22http:\/\/stackoverflow.com\/questions\/16770673\/using-node-js-only-vs-using-node-js-with-apache-nginx\x22\x3e另一个\x3c\/a\x3e），而其他人展示了一个清晰的令人惊讶的\x3ca href=\x22http:\/\/centminmod.com\/siegebenchmarks\/2013\/020313\/index.html\x22\x3e结果\x3c\/a\x3e，这在推动我自己去做测试来验证结论的过程中扮演了重要的角色。\x3c\/p\x3e\n\x3cp\x3e起初，我做了一些思想准备，我认为我可以避免自己进行实际测试来校验结论的麻烦——在我知道这一切之前我一直这样认为。\x3c\/p\x3e\n\x3cp\x3e尽管如此，回顾之前，似乎我最初的想法是相当准确的，并且被我的测试再次印证。这个事实让我想起了当年我在学校学到的爱因斯坦和他的光电效应的实验，他面临着一个光的波粒二重性的问题，最初的结论是实验受到他的心理状态的影响，即当他期望结果是一个波的时候结果就会是一个波，反之亦然。\x3c\/p\x3e\n\x3cp\x3e也就是说，我坚信我的结果不会在不久的将来被证明二重性，虽然我的心理状态可能在某种程度上对它们有影响。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#关于比较\x22\x3e\x3c\/a\x3e关于比较\x3c\/h3\x3e\n\x3cp\x3e上面我读过一份材料具有一种革新的方式，在我看来，需要了解其自然而然的主观性和作者自身的偏见。\x3c\/p\x3e\n\x3cp\x3e我决定采用这种方式，因此，提前声明以下内容：\x3c\/p\x3e\n\x3cp\x3e开发者花了很多年来打磨他们的作品。那些取得了更高成就的人通常参考很多因素来做出自己的抉择，这是主观的做法；你需要推崇和捍卫你的技术决策。\x3c\/p\x3e\n\x3cp\x3e也就是说，这个比较文章的着眼点不会成为另一篇“哥们，使用适合你的东西就好”的口水文章。我将会根据我的自身经验、需求和偏见提出建议。你可能会同意其中一些观点，反对另外一些；这很好——你的意见会帮助别人做出明智的选择。\x3c\/p\x3e\n\x3cp\x3e感谢 \x3ca href=\x22https:\/\/www.sitepoint.com\/sitepoint-smackdown-php-vs-node-js\/\x22\x3eSitePoint\x3c\/a\x3e 的 Craig Buckler ，重新启发了我对比较类文章的看法——尝试重新忘记自我，并试图让所有的读者心悦诚服。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#关于测试\x22\x3e\x3c\/a\x3e关于测试\x3c\/h3\x3e\n\x3cp\x3e所有的测试都在本地运行：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e英特尔酷睿 i7-2600k，四核八线程的机器\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/iwf1.com\/5-reasons-use-gentoo-linux\/\x22\x3eGentoo Linux\x3c\/a\x3e 是用于测试的操作系统\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e用于基准测试的工具：ApacheBench，2.3 \x26lt;$Revision: 1748469 $\x26gt;\x3c\/p\x3e\n\x3cp\x3e测试包括一系列基准，从 1000 到 10000 个请求以及从 100 到 1000 个的并发请求——结果相当令人惊讶。\x3c\/p\x3e\n\x3cp\x3e此外，我还进行了在高负载下测量服务器功能的压力测试。\x3c\/p\x3e\n\x3cp\x3e至于内容，主要是一个包含一些 Lorem Ipsum 的标题和一张图片静态文件。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/11\/Lorem-Ipsum-and-ApacheBenchmark.jpg\x22\x3e\x3cimg src=\x22https:\/\/p1.ssl.qhimg.com\/t017331d4fcb2ad74d3.jpg\x22 alt=\x22Lorem Ipsum and ApacheBenchmark\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eLorem Ipsum 和 ApacheBenchmark\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e我决定专注于静态文件的原因是因为它们去除了可能对测试产生影响的各种渲染因素，例如：编程语言解释器的速度、解释器与服务器的集成程度等等。\x3c\/p\x3e\n\x3cp\x3e此外，基于我自身的经验，平均网页加载时间很大一部分通常花费在静态内容上，例如图片，因此关注哪个服务器可以节省我们加载静态内容的时间是比较现实的。\x3c\/p\x3e\n\x3cp\x3e除此之外，我还想测试一个更加真实的案例，案例中我在运行不同 CMS 的动态页面（稍后将详细介绍）时对服务器进行基准测试。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#服务器\x22\x3e\x3c\/a\x3e服务器\x3c\/h4\x3e\n\x3cp\x3e正如我用的是 Gentoo Linux，你就知道我的 HTTP 服务器在一开始就已经经过优化了，因为我在构建系统的时候只使用了我实际需要的东西。也就是说，当我运行我的测试的时候，不会在后台运行任何不必要的代码或加载没用的模块。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/10\/Apache-vs-Nginx-vs-Node.js-use-flags.jpg\x22\x3e\x3cimg src=\x22https:\/\/p1.ssl.qhimg.com\/t010dbf470228ae6a1a.jpg\x22 alt=\x22Apache、Nginx 和 Node.js 的使用的配置对比\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eApache、Nginx 和 Node.js 的使用的配置对比\x3c\/em\x3e\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#apache\x22\x3e\x3c\/a\x3eApache\x3c\/h4\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs groovy\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e$:\x3c\/span\x3e curl -i \x3cspan class=\x22hljs-string\x22\x3ehttp:\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/localhost\/index.html\x3c\/span\x3e\n\nHTTP\/\x3cspan class=\x22hljs-number\x22\x3e1.1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e OK\n\x3cspan class=\x22hljs-string\x22\x3eDate:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e35\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e44\x3c\/span\x3e GMT\n\x3cspan class=\x22hljs-string\x22\x3eServer:\x3c\/span\x3e Apache\nLast-\x3cspan class=\x22hljs-string\x22\x3eModified:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e GMT\n\x3cspan class=\x22hljs-string\x22\x3eETag:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x222cf2-54015b280046d\x22\x3c\/span\x3e\nAccept-\x3cspan class=\x22hljs-string\x22\x3eRanges:\x3c\/span\x3e bytes\nContent-\x3cspan class=\x22hljs-string\x22\x3eLength:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e11506\x3c\/span\x3e\nCache-\x3cspan class=\x22hljs-string\x22\x3eControl:\x3c\/span\x3e max-age=\x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3eExpires:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e44\x3c\/span\x3e GMT\n\x3cspan class=\x22hljs-string\x22\x3eVary:\x3c\/span\x3e Accept-Encoding\nContent-\x3cspan class=\x22hljs-string\x22\x3eType:\x3c\/span\x3e text\/html\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eApache 配置了 “event mpm”。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#nginx\x22\x3e\x3c\/a\x3eNginx\x3c\/h4\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs groovy\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e$:\x3c\/span\x3e curl -i \x3cspan class=\x22hljs-string\x22\x3ehttp:\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/localhost\/index.html\x3c\/span\x3e\n\nHTTP\/\x3cspan class=\x22hljs-number\x22\x3e1.1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e OK\n\x3cspan class=\x22hljs-string\x22\x3eServer:\x3c\/span\x3e nginx\/\x3cspan class=\x22hljs-number\x22\x3e1.10\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3eDate:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e17\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e GMT\nContent-\x3cspan class=\x22hljs-string\x22\x3eType:\x3c\/span\x3e text\/html\nContent-\x3cspan class=\x22hljs-string\x22\x3eLength:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e11506\x3c\/span\x3e\nLast-\x3cspan class=\x22hljs-string\x22\x3eModified:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e GMT\n\x3cspan class=\x22hljs-string\x22\x3eConnection:\x3c\/span\x3e keep-alive\nKeep-\x3cspan class=\x22hljs-string\x22\x3eAlive:\x3c\/span\x3e timeout=\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3eETag:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x2258160010-2cf2\x22\x3c\/span\x3e\nAccept-\x3cspan class=\x22hljs-string\x22\x3eRanges:\x3c\/span\x3e bytes\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eNginx 包括几个调整：\x3ccode\x3esendfile on\x3c\/code\x3e、\x3ccode\x3etcp_nopush on\x3c\/code\x3e 和 \x3ccode\x3etcp_nodelay on\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#nodejs\x22\x3e\x3c\/a\x3eNode.js\x3c\/h4\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs groovy\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e$:\x3c\/span\x3e curl -i \x3cspan class=\x22hljs-string\x22\x3ehttp:\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/127.0.0.1:8080\x3c\/span\x3e\n\nHTTP\/\x3cspan class=\x22hljs-number\x22\x3e1.1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e OK\nContent-\x3cspan class=\x22hljs-string\x22\x3eLength:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e11506\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3eEtag:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e\nLast-\x3cspan class=\x22hljs-string\x22\x3eModified:\x3c\/span\x3e Thu, \x3cspan class=\x22hljs-number\x22\x3e27\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e09\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e58\x3c\/span\x3e GMT\nContent-\x3cspan class=\x22hljs-string\x22\x3eType:\x3c\/span\x3e text\/html\n\x3cspan class=\x22hljs-string\x22\x3eDate:\x3c\/span\x3e Sun, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e Oct \x3cspan class=\x22hljs-number\x22\x3e2016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e39\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e47\x3c\/span\x3e GMT\n\x3cspan class=\x22hljs-string\x22\x3eConnection:\x3c\/span\x3e keep-alive\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在静态测试中使用的 Node.js 服务器是从头定制的，这样可以让它尽可能更加的轻快——没有使用外部模块（Node 核心模块除外）。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#测试结果\x22\x3e\x3c\/a\x3e测试结果\x3c\/h3\x3e\n\x3cp\x3e点击图片以放大：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/11\/requests.jpg\x22\x3e\x3cimg src=\x22https:\/\/p4.ssl.qhimg.com\/t011fc237f33822147e.jpg\x22 alt=\x22Apache、Nginx 与 Node 的对比：请求负载能力（每 100 位并发用户）\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eApache、Nginx 与 Node 的对比：请求负载的性能（每 100 位并发用户）\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/11\/concurrency.jpg\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01444119b4db1db3d4.jpg\x22 alt=\x22Apache、Nginx 与 Node 的对比：用户负载能力\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eApache、Nginx 与 Node 的对比：用户负载能力（每 1000 个请求）\x3c\/em\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#压力测试\x22\x3e\x3c\/a\x3e压力测试\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/11\/stress.jpg\x22\x3e\x3cimg src=\x22https:\/\/p3.ssl.qhimg.com\/t016cdd3d55c79922cd.jpg\x22 alt=\x22Apache、Nginx 与 Node 的对比：完成 1000 位用户并发的 100000 个请求耗时\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eApache、Nginx 与 Node 的对比：完成 1000 位用户并发的 100000 个请求耗时\x3c\/em\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#我们可以从结果中得到什么\x22\x3e\x3c\/a\x3e我们可以从结果中得到什么？\x3c\/h3\x3e\n\x3cp\x3e从以上结果判断，似乎 Nginx 可以在最少的时间内完成最多请求，换句话来说，\x3cstrong\x3eNginx\x3c\/strong\x3e 是最快的 HTTP 服务器。\x3c\/p\x3e\n\x3cp\x3e还有一个相当惊人的事实是，在特定的用户并发数和请求数下，Node.js 可以比 Nginx 和 Apache 更快。\x3c\/p\x3e\n\x3cp\x3e但当请求的数量在并发测试中增加的时候，Nginx 将重回领先的位置，这个结果可以让那些陷入 Node.js 的遐想的人清醒一下。\x3c\/p\x3e\n\x3cp\x3e和 Apache、Nginx 不同的是，Node.js 似乎对用户的并发数不太敏感，尤其是在集群节点。如图所示，集群节点在 0.1 秒左右保持一条直线，而 Apache 和 Nginx 都有大约 0.2 秒的波动。\x3c\/p\x3e\n\x3cp\x3e基于上述统计可以得出的结论是：网站比较小，其使用的服务器就无所谓。然而，随着网站的受众越来越多，HTTP 服务器的影响变得愈加明显。\x3c\/p\x3e\n\x3cp\x3e当涉及到每台服务器的原始速度的底线的时候，正如压力测试所描述的，我的感觉是，性能背后最关键的因素不是一些特定的算法，而实际上是运行的每台服务器所用的编程语言。\x3c\/p\x3e\n\x3cp\x3e由于 Apache 和 Nginx 都使用了 C 语言—— AOT 语言（编译型语言），而 Node.js 使用了 JavaScript ——这是一种 JIT 语言（解释型语言）。这意味着 Node.js 在执行程序的过程中还有额外的工作负担。\x3c\/p\x3e\n\x3cp\x3e这意味着我不能仅仅基于上面的结果来下结论，而要做进一步校验，正如你下面看到的结果，当我使用一台经过优化的 Node.js 服务器与流行的 Express 框架时，我得到几乎相同的性能结论。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#全面考虑\x22\x3e\x3c\/a\x3e全面考虑\x3c\/h3\x3e\n\x3cp\x3e逝者如斯夫，如果没有服务的内容，HTTP 服务器是没什么用的。因此，在比较 web 服务器的时候，我们必须考虑的一个重要的部分就是我们希望在上面运行的内容。\x3c\/p\x3e\n\x3cp\x3e虽然也有其它的功能，但是 HTTP 服务器最广泛的使用就是运行网站。因此，为了看到每台服务器的性能的实际效果，我决定比较一下世界上使用最广泛的 CMS（内容管理系统）WordPress 和 Ghost —— 内核使用了 JavaScript 的一颗冉冉升起的明星。\x3c\/p\x3e\n\x3cp\x3e基于 JavaScript 的 Ghost 网页能否胜过运行在 PHP 和 Apache \/ Nginx 上面的 WordPress 页面？\x3c\/p\x3e\n\x3cp\x3e这是一个有趣的问题，因为 Ghost 具有操作工具单一且一致的优点——无需额外的封装，而 WordPress 需要依赖 Apache \/ Nginx 和 PHP 之间的集成，这可能会导致显著的性能缺陷。\x3c\/p\x3e\n\x3cp\x3e除此之外，PHP 距 Node.js 之间还有一个显著的性能落差，后者更佳，我将在下面简要介绍一下，可能会出现一些与初衷大相径庭的结果。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#php-与-nodejs-的对决\x22\x3e\x3c\/a\x3ePHP 与 Node.js 的对决\x3c\/h4\x3e\n\x3cp\x3e为了比较 WordPress 和 Ghost，我们必须首先考虑一个影响到两者的基本组件。\x3c\/p\x3e\n\x3cp\x3e基本上，WordPress 是一个基于 PHP 的 CMS，而 Ghost 是基于 Node.js（JavaScript）的。与 PHP 不同，Node.js 有以下优点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e非阻塞的 I\/O\x3c\/li\x3e\n\x3cli\x3e事件驱动\x3c\/li\x3e\n\x3cli\x3e更新颖、更少的残旧代码\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e由于有大量的测评文章解释和演示了 Node.js 的原始速度超过 PHP（包括 PHP 7），我不会再进一步阐述这个主题，请你自行用谷歌搜索相关内容。\x3c\/p\x3e\n\x3cp\x3e因此，考虑到 Node.js 的性能优于 PHP，一个 Node.js 的网站的速度要比 Apache \/ Nginx 和 PHP 的网站快吗？\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#wordpress-和-ghost-对决\x22\x3e\x3c\/a\x3eWordPress 和 Ghost 对决\x3c\/h3\x3e\n\x3cp\x3e当比较 WordPress 和 Ghost 时，有些人会说这就像比较苹果和橘子，大多数情况下我同意这个观点，因为 WordPress 是一个完全成熟的 CMS，而 Ghost 基本上只是一个博客平台。\x3c\/p\x3e\n\x3cp\x3e然而，两者仍然有共同竞争的市场，这两者都可以用于向世界发布你的个人文章。\x3c\/p\x3e\n\x3cp\x3e制定一个前提，我们怎么比较两个完全基于不同的代码来运行的平台，包括风格主题和核心功能。\x3c\/p\x3e\n\x3cp\x3e事实上，一个科学的实验测试条件是很难设计的。然而，在这个测试中我对更接近生活的情景更感兴趣，所以 WordPress 和 Ghost 都将保留其主题。因此，这里的目标是使两个平台的网页大小尽可能相似，让 PHP 和 Node.js 在幕后斗智斗勇。\x3c\/p\x3e\n\x3cp\x3e由于结果是根据不同的标准进行测量的，最重要的是尺度不一样，因此在图表中并排显示它们是不公平的。因此，我改为使用表：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/iwf1.com\/wordpress\/wp-content\/uploads\/2016\/11\/Node-vs-Nginx-vs-Apache-comparison-table.jpg\x22\x3e\x3cimg src=\x22https:\/\/p1.ssl.qhimg.com\/t016c45e7b279f26db3.jpg\x22 alt=\x22Node、Nginx 和 Apache 性能比较表\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eNode、Nginx、Apache 以及运行 WordPress 和 Ghost 的比较。前两行是 WordPress，底部的两行是 Ghost\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e正如你所见，尽管事实上 Ghost（Node.js）正在加载一个更小的页面（你可能会惊讶 1kb 可以产生这么大的差异），它仍然比同时使用 Nginx 和 Apache 的 WordPress 要慢。\x3c\/p\x3e\n\x3cp\x3e此外，使用 Nginx 代理作为负载均衡器来接管每个 Node 服务器的请求实际上会提升还是降低性能？\x3c\/p\x3e\n\x3cp\x3e那么，根据上面的表格，如果说它产生什么效果的话，它造成了更慢的效果——这是一个合理的结果，因为额外封装一层理所当然会使其变得更慢。当然，上面的数字也表明这点差异可以忽略不计。\x3c\/p\x3e\n\x3cp\x3e但是上表中最重要的一点是，即使 Node.js 比 PHP 快，HTTP 服务器的作用也可能超过某个 web 平台使用的编程语言的重要性。\x3c\/p\x3e\n\x3cp\x3e当然，另一方面，如果加载的页面更多地依赖于服务器端的脚本处理，那么我怀疑结果可能会有点不同。\x3c\/p\x3e\n\x3cp\x3e最后，如果一个 web 平台真的想在这场竞赛里击败 WordPress，从这个比较中得出的结论就是，要想性能占优，必须要定制一些像 PHP-FPM 的工具，它将直接与 JavaScript 通信（而不是作为服务器来运行），因此它可以完全发挥 JavaScript 的力量来达到更好的性能。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/iwf1.com\/apache-vs-nginx-vs-node-js-and-what-it-means-about-the-performance-of-wordpress-vs-ghost\/\x22\x3ehttps:\/\/iwf1.com\/apache-vs-nginx-vs-node-js-and-what-it-means-about-the-performance-of-wordpress-vs-ghost\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/iwf1.com\/tag\/linux\x22\x3eLiron\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/OneNewLife\x22\x3eOneNewLife\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/apache-vs-nginx-vs-node-js-and-what-it-means-about-the-performance-of-wordpress-vs-ghost">https://www.zcfy.cc/article/apache-vs-nginx-vs-node-js-and-what-it-means-about-the-performance-of-wordpress-vs-ghost</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/g2lx7wrrhy4/" target="_blank">https://alili.tech/archive/g2lx7wrrhy4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/qpsy2j0ebq/">JavaScript: 什么是纯函数以及为什么要用纯函数?<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>