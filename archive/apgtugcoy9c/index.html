<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="AngularJS：factory，service与provider的区别"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>AngularJS：factory，service与provider的区别 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/apgtugcoy9c/",
				"appid": "1613049289050283", 
				"title": "AngularJS：factory，service与provider的区别 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-13T02:31:22"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/vn4a0ma8dba/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bdid00xzvy7/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&text=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&text=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&title=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&is_video=false&description=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&title=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&title=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&title=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fapgtugcoy9c%2f&title=AngularJS%ef%bc%9afactory%ef%bc%8cservice%e4%b8%8eprovider%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">AngularJS：factory，service与provider的区别</h1><div class="meta"><div class="postdate"><time datetime="2019-02-13" itemprop="datePublished">2019-02-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e翻译自 \x3ca href=\x22http:\/\/tylermcginnis.com\/angularjs-factory-vs-service-vs-provider\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/tylermcginnis.com\/angularjs-factory-vs-service-vs-provider\/\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e当你开始使用Angular的时候，你会发现，你总是会让你的控制器和作用域充满各种不必要的逻辑。你应该早点意识到一个控制器应该是很简洁精炼的；同时大多数的商业逻辑和一些重复性的数据都应该要存储到服务中。一天我在Stack Overflow上看到一些问题说是考虑将重复性的数据放在控制器里，但是，这不是这不是一个控制器应该有的目的。如果为了内存需要，控制器就应该在需要他们的时候实例化，在不需要的时候就取消掉。因此，Angular在你每次切换路由的时候，就会清理当前的控制器。但是呢，服务为我们提供了一种长期存储应用数据的方式，同时，也可以在不同的控制器之间统一的使用服务。\x3c\/p\x3e\n\x3cp\x3eAngular为我们提供了三种创建服务的方式：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1、Factory\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e2、Service\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e3、Provider\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e先简单介绍一下\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e一、\x3c\/strong\x3e当使用\x3ccode\x3efactory\x3c\/code\x3e来创建服务的时候，相当于新创建了一个对象，然后在这个对象上新添属性，最后返回这个对象。当把这个服务注入控制器的时候，控制器就可以访问在那个对象上的属性了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.factory(\x27MyFactory\x27, function () {\n        var _artist = \x27\x27,\n            service = {};\n\n        service.getArtist = function () {\n            return _artist;\n        };\n\n        return service;\n    })\n    .controller(\x27myFactoryCtrl\x27, [\n        \x27$scope\x27, \x27MyFactory\x27,\n        function ( $scope, MyFactory ) {\n            $scope.artist = MyFactory.getArtist();\n        }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.factory(\x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            service = {};\n\n        service.getArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e service;\n    })\n    .controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myFactoryCtrl\x27\x3c\/span\x3e, [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyFactory \x3c\/span\x3e) \x3c\/span\x3e{\n            $scope.artist = MyFactory.getArtist();\n        }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e二、\x3c\/strong\x3e当使用\x3ccode\x3eservice\x3c\/code\x3e创建服务的时候，相当于使用\x3ccode\x3enew\x3c\/code\x3e关键词进行了实例化。因此，你只需要在\x3ccode\x3ethis\x3c\/code\x3e上添加属性和方法，然后，服务就会自动的返回\x3ccode\x3ethis\x3c\/code\x3e。当把这个服务注入控制器的时候，控制器就可以访问在那个对象上的属性了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.service(\x27MyService\x27, function () {\n        var _artist = \x27\x27;\n    \n        this.getArtist = function () {\n            return _artist;\n        };\n    })\n    .controller(\x27myServiceCtrl\x27, [\n        \x27$scope\x27, \x27MyService\x27,\n        function ( $scope, MyService ) {\n            $scope.artist = MyService.getArtist();\n        }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.service(\x3cspan class=\x22hljs-string\x22\x3e\x27MyService\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n        };\n    })\n    .controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myServiceCtrl\x27\x3c\/span\x3e, [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyService\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyService \x3c\/span\x3e) \x3c\/span\x3e{\n            $scope.artist = MyService.getArtist();\n        }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e三、\x3c\/strong\x3e\x3ccode\x3eprovider\x3c\/code\x3e是唯一一种可以创建用来注入到\x3ccode\x3econfig()\x3c\/code\x3e函数的服务的方式。想在你的服务启动之前，进行一些模块化的配置的话，就使用\x3ccode\x3eprovider\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.provider(\x27MyProvider\x27, function () {\n\n        \/\/ 只有直接添加在this上的属性才能被config函数访问\n        this._artist = \x27\x27;\n        this.thingFromConfig = \x27\x27;\n\n        \/\/ 只有$get函数返回的属性才能被控制器访问\n        this.$get = function () {\n            var that = this;\n\n            return {\n                getArtist: function () {\n                    return that._artist;\n                },\n                thingFromConfig: that.thingFromConfig\n            };\n        };\n    })\n    .config([\x27MyProvider\x27, function ( MyProvider ) {\n        MyProvider.thingFormConfig = \x27this is set in config()\x27;\n    }])\n    .controller(\x27myProviderCtrl\x27, [\n        \x27$scope\x27, \x27MyProvider\x27,\n        function ( $scope, MyProvider ) {\n            $scope.artist = MyProvider.getArtist();\n        }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.provider(\x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有直接添加在this上的属性才能被config函数访问\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.thingFromConfig = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有$get函数返回的属性才能被控制器访问\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$get = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3egetArtist\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e that._artist;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3ethingFromConfig\x3c\/span\x3e: that.thingFromConfig\n            };\n        };\n    })\n    .config([\x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e MyProvider \x3c\/span\x3e) \x3c\/span\x3e{\n        MyProvider.thingFormConfig = \x3cspan class=\x22hljs-string\x22\x3e\x27this is set in config()\x27\x3c\/span\x3e;\n    }])\n    .controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myProviderCtrl\x27\x3c\/span\x3e, [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyProvider \x3c\/span\x3e) \x3c\/span\x3e{\n            $scope.artist = MyProvider.getArtist();\n        }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e下面我们来详细说明\x3c\/h3\x3e\n\x3cp\x3e为了详细的说明这三种方式的不同之处，我们分别使用这三种方式来创建同一个服务。这个服务将会用到iTunes API以及promise的\x3ccode\x3e$q\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e使用\x3ccode\x3efactory\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e要创建和配置服务，最普通的做法就是使用\x3ccode\x3efactory\x3c\/code\x3e。就像上面简单说明的那样，这里也没有太多要说明的地方，就是创建一个对象，然后为他添加属性和方法，最后返回这个对象。当把这个服务注入控制器的时候，控制器就可以访问在那个对象上的属性了。一个很普通的例子就像下面那样。\x3c\/p\x3e\n\x3cp\x3e首先我们创建一个对象，然后返回这个对象。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.factory(\x27MyFactory\x27, function () {\n    var service = {};\n    \n    return service;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.factory(\x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e service = {};\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e service;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，我们添加到\x3ccode\x3eservice\x3c\/code\x3e上的任何属性，只要将\x3ccode\x3eMyFactory\x3c\/code\x3e注入到控制器，控制器就都可以访问了。\x3c\/p\x3e\n\x3cp\x3e现在，我们添加一些私有属性到回调函数里，虽然不能从控制器里直接访问这些变量，但是最终我们会提供一些\x3ccode\x3egetter\x3c\/code\x3e和\x3ccode\x3esetter\x3c\/code\x3e方法到\x3ccode\x3eservice\x3c\/code\x3e上以便于我们在需要的时候修改这些属性。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.factory(\x27MyFactory\x27, [\n    \x27$http\x27, \x27$q\x27, function ( $http, $q ) {\n        var service = {},\n            baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n            _artist = \x27\x27,\n            _finalUrl = \x27\x27;\n\n        function makeUrl() {\n            _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n            _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n            return _finalUrl;\n        }\n\n        return service;\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.factory(\x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27$q\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e service = {},\n            baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n            _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n            _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e service;\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你应该注意到了，我们没有把这些属性和方法添加到\x3ccode\x3eservice\x3c\/code\x3e对象上去。我们现在只是先简单的创建出来，以便于待会儿使用或者修改。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ebaseUrl\x3c\/code\x3e是iTunes API需要的基本URL\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e_artist\x3c\/code\x3e是我们需要查找的艺术家\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e_finalUrl\x3c\/code\x3e是最终向iTunes发送请求的URL\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3emakeUrl\x3c\/code\x3e是一个用来创建返回我们最终的URL的函数\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e既然我们的辅助变量和函数都创建好了，那么，就往\x3ccode\x3eservice\x3c\/code\x3e添加一些属性吧。我们在\x3ccode\x3eservice\x3c\/code\x3e上添加的任何属性，只要服务注入了控制器中，那么，控制器就可以访问这些属性。\x3c\/p\x3e\n\x3cp\x3e我们要创建一个\x3ccode\x3esetArtist()\x3c\/code\x3e和\x3ccode\x3egetArtist()\x3c\/code\x3e函数来设置以及取得艺术家的值。同时，也要创建一个用于向iTunes发送请求的函数。这个函数会返回一个promise对象，当有数据从iTunes返回的时候，这个promise对象就会执行。如果你对Angular的promise对象还不是很了解的话，推荐你去深入了解一下。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3esetArtist()\x3c\/code\x3e接受一个参数并且允许用来设置艺术家的值\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3egetArtist()\x3c\/code\x3e返回艺术家的值\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecallITunes()\x3c\/code\x3e首先会调用\x3ccode\x3emakeUrl()\x3c\/code\x3e函数来创建我们需要使用\x3ccode\x3e$http\x3c\/code\x3e进行请求的URL，然后使用我们最终的URL来发送请求，创建一个promise对象。由于\x3ccode\x3e$http\x3c\/code\x3e返回了promise对象，我们就可以在请求之后调用\x3ccode\x3e.success\x3c\/code\x3e和\x3ccode\x3e.error\x3c\/code\x3e了。然后我们处理从iTunes返回的数据或者驳回，并返回一个错误消息，比如\x3ccode\x3eThere was an error\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.factory(\x27MyFactory\x27, [\n    \x27$http\x27, \x27$q\x27, function ( $http, $q ) {\n        var service = {},\n            baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n            _artist = \x27\x27,\n            _finalUrl = \x27\x27;\n\n        function makeUrl() {\n            _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n            _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n            return _finalUrl;\n        }\n\n        service.setArtist = function ( artist ) {\n            _artist = artist;\n        };\n\n        service.getArtist = function () {\n            return _artist;\n        };\n\n        service.callITunes = function () {\n            var deferred = $q.defer();\n            _finalUrl = makeUrl();\n\n            $http({\n                method: \x27JSONP\x27,\n                url: _finalUrl\n            }).success(function ( data ) {\n                deferred.resolve(data);\n            }).error(function ( error ) {\n                deferred.reject(error);\n            });\n\n            return deferred.promise;\n        };\n\n        return service;\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.factory(\x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27$q\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e service = {},\n            baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n            _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n            _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n        }\n\n        service.setArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e artist \x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = artist;\n        };\n\n        service.getArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n        };\n\n        service.callITunes = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e deferred = $q.defer();\n            _finalUrl = makeUrl();\n\n            $http({\n                \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JSONP\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: _finalUrl\n            }).success(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                deferred.resolve(data);\n            }).error(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                deferred.reject(error);\n            });\n\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e deferred.promise;\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e service;\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，我们的服务就完成了，我们可以将这个服务注入到任何的控制器了，并且，可以使用我们添加到\x3ccode\x3eservice\x3c\/code\x3e上的那些方法了(\x3ccode\x3egetArtist\x3c\/code\x3e,  \x3ccode\x3esetArtise\x3c\/code\x3e, \x3ccode\x3ecallITunes\x3c\/code\x3e)。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.controller(\x27myFactoryCtrl\x27, [\n    \x27$scope\x27, \x27MyFactory\x27, function ( $scope, MyFactory ) {\n        $scope.data = {};\n        $scope.updateArtist = function () {\n            MyFactory.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = function () {\n            MyFactory.callITunes().then(function ( data ) {\n                $scope.data.artistData = data;\n            }, function ( error ) {\n                alert(error);\n            });\n        };\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myFactoryCtrl\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyFactory\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyFactory \x3c\/span\x3e) \x3c\/span\x3e{\n        $scope.data = {};\n        $scope.updateArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyFactory.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyFactory.callITunes().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                $scope.data.artistData = data;\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                alert(error);\n            });\n        };\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的控制器中我们注入了\x3ccode\x3eMyFactory\x3c\/code\x3e服务，然后，将从服务里来的数据设置到\x3ccode\x3e$scope\x3c\/code\x3e的属性上。上面的代码中最难的地方应该就是你从来没有使用过promise。由于\x3ccode\x3ecallITunes()\x3c\/code\x3e返回了一个promise对象，所以一旦有数据从iTunes返回，promise执行的时候，我们就可以使用\x3ccode\x3e.then()\x3c\/code\x3e方法来设置\x3ccode\x3e$scope.data.artistData\x3c\/code\x3e的值了。你会注意到，我们的控制器非常简洁，我们所有的逻辑和重复性数据都写在了服务里面。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e使用\x3ccode\x3eservice\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e也许在使用\x3ccode\x3eservice\x3c\/code\x3e创建服务时，我们需要知道的最重要的一件事就是他是使用\x3ccode\x3enew\x3c\/code\x3e关键字进行实例化的。如果你是Javascript大师，你应该知道从代码的本质来思考。对于那些不了解Javascript背景的或者并不熟悉\x3ccode\x3enew\x3c\/code\x3e实际做了什么的程序员，我们需要复习一下Javascript的基础知识，以便于最终帮助我们理解\x3ccode\x3eservice\x3c\/code\x3e的本质。\x3c\/p\x3e\n\x3cp\x3e为了真正的看到当我们使用\x3ccode\x3enew\x3c\/code\x3e来调用函数的时候发生了什么，我们来创建一个函数，并且使用\x3ccode\x3enew\x3c\/code\x3e来调用他，然后，我们再看看在解释器发现\x3ccode\x3enew\x3c\/code\x3e的时候，他会做什么。最终结果肯定是一样的。\x3c\/p\x3e\n\x3cp\x3e首先创建我们的构造函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Person( name, age ) {\n    this.name = name;\n    this.age = age;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePerson\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e name, age \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.age = age;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这是一个典型的构造函数。现在，无论我们什么时候使用\x3ccode\x3enew\x3c\/code\x3e来调用这个函数，\x3ccode\x3ethis\x3c\/code\x3e都会被绑定到新创建的那个对象上。\x3c\/p\x3e\n\x3cp\x3e现在我们再在\x3ccode\x3ePerson\x3c\/code\x3e的原型上创建一个方法，以便于每一个实例都可以访问到。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Person.prototype.sayName = function () {\n    alert(\x27My name is: \x27 \x2b this.name);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ePerson.prototype.sayName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    alert(\x3cspan class=\x22hljs-string\x22\x3e\x27My name is: \x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，由于我们在\x3ccode\x3ePerson\x3c\/code\x3e对象的原型上创建了\x3ccode\x3esayName\x3c\/code\x3e函数，所以，\x3ccode\x3ePerson\x3c\/code\x3e的每一个实例都可以调用到这个方法。\x3c\/p\x3e\n\x3cp\x3e既然我们已经有了构造函数和原型方法，那么，就来真正的创建一个\x3ccode\x3ePerson\x3c\/code\x3e的实例并且调用\x3ccode\x3esayName\x3c\/code\x3e函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var tyler = new Person(\x27Tyler\x27, 23);\ntyler.sayName();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tyler = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Person(\x3cspan class=\x22hljs-string\x22\x3e\x27Tyler\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e);\ntyler.sayName();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以，最终，所有的代码合起来就是下面这个样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Person( name, age ) {\n    this.name = name;\n    this.age = age;\n}\n\nPerson.prototype.sayName = function () {\n    alert(\x27My name is: \x27 \x2b this.name);\n};\n\nvar tyler = new Person(\x27Tyler\x27, 23);\ntyler.sayName();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePerson\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e name, age \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.age = age;\n}\n\nPerson.prototype.sayName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    alert(\x3cspan class=\x22hljs-string\x22\x3e\x27My name is: \x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name);\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tyler = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Person(\x3cspan class=\x22hljs-string\x22\x3e\x27Tyler\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e);\ntyler.sayName();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们来看看在使用\x3ccode\x3enew\x3c\/code\x3e的时候到底发生了什么。首先你应该注意到的是，在我们的例子中，使用了\x3ccode\x3enew\x3c\/code\x3e之后，我们可以使用\x3ccode\x3etyler\x3c\/code\x3e来调用\x3ccode\x3esayName\x3c\/code\x3e方法，就好像这是一个对象一样，当然，\x3ccode\x3etyler\x3c\/code\x3e确实是一个对象。所以，我们首先知道的就是无论我们是否能够在代码里面看见，\x3ccode\x3ePerson\x3c\/code\x3e构造函数是会返回一个对象的。第二，我们我们应该知道，\x3ccode\x3esayName\x3c\/code\x3e方法是在原型上的，不是直接定义在\x3ccode\x3ePerson\x3c\/code\x3e对象实例上的，所以，\x3ccode\x3ePerson\x3c\/code\x3e返回的对象必须是通过原型委托的。用更简单的例子说就是，当我们调用\x3ccode\x3etyler.sayName()\x3c\/code\x3e的时候，解释器就会说：“OK，我将会在刚创建的\x3ccode\x3etyler\x3c\/code\x3e对象上查找\x3ccode\x3esayName\x3c\/code\x3e函数，然后调用他。等会儿，我没有发现这个函数，只看到了\x3ccode\x3ename\x3c\/code\x3e和\x3ccode\x3eage\x3c\/code\x3e属性，让我再检查一下原型。哦，原来在原型上，让我来调用他”。\x3c\/p\x3e\n\x3cp\x3e下面的代码就是你能够想象的在Javascript里，\x3ccode\x3enew\x3c\/code\x3e实际做了什么。下面的代码是一个很基础的例子，我以解释器的视角来添加了一些注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Person( name, age ) {\n    \/\/var obj = object.create(Person.prototype);\n    \/\/this = obj;\n\n    this.name = name;\n    this.age = age;\n    \n    \/\/return thisl\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePerson\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e name, age \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/var obj = object.create(Person.prototype);\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/this = obj;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.age = age;\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/return thisl\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，既然知道了\x3ccode\x3enew\x3c\/code\x3e做了什么，那么，使用\x3ccode\x3eservice\x3c\/code\x3e来创建服务也很容易理解了。\x3c\/p\x3e\n\x3cp\x3e在使用\x3ccode\x3eservice\x3c\/code\x3e创建服务时，我们需要知道的最重要的一件事就是他是使用\x3ccode\x3enew\x3c\/code\x3e关键字进行实例化的。与上面的例子的知识相结合，你应该就能意识到你要把属性和方法添加到\x3ccode\x3ethis\x3c\/code\x3e上，并且，服务会自动返回\x3ccode\x3ethis\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e与我们使用\x3ccode\x3efactory\x3c\/code\x3e创建服务的方式不同，我们不需要新创建一个对象然后再返回这个对象，因为正如我们前面所提到的那样，我们使用\x3ccode\x3enew\x3c\/code\x3e的时候，解释器会自动创建对象，并且代理到他的原型，然后代替我们返回。\x3c\/p\x3e\n\x3cp\x3e所以，在所有的开始之前，我们先创建我们的私有辅助函数，与我们之前使用\x3ccode\x3efactory\x3c\/code\x3e创建的时候非常类似。现在我不会解释每一行的意义了，如果你有什么疑惑的话，可以看看前面的\x3ccode\x3efactory\x3c\/code\x3e的例子。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.service(\x27MyService\x27, [\n    \x27$http\x27, \x27$q\x27, function ( $http, $q ) {\n        var baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n            _artist = \x27\x27,\n            _finalUrl = \x27\x27;\n\n        function makeUrl() {\n            _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n            _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n            return _finalUrl;\n        }\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.service(\x3cspan class=\x22hljs-string\x22\x3e\x27MyService\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27$q\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n            _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n            _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n        }\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，我们会把可用的方法都添加到\x3ccode\x3ethis\x3c\/code\x3e上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.service(\x27MyService\x27, [\n    \x27$http\x27, \x27$q\x27, function ( $http, $q ) {\n        var baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n            _artist = \x27\x27,\n            _finalUrl = \x27\x27;\n\n        function makeUrl() {\n            _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n            _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n            return _finalUrl;\n        }\n\n        this.setArtist = function ( artist ) {\n            _artist = artist;\n        };\n\n        this.getArtist = function () {\n            return _artist;\n        };\n\n        this.callITunes = function () {\n            var deferred = $q.defer();\n            _finalUrl = makeUrl();\n\n            $http({\n                method: \x27JSONP\x27,\n                url: _finalUrl\n            }).success(function ( data ) {\n                deferred.resolve(data);\n            }).error(function ( error ) {\n                deferred.reject(error);\n            });\n\n            return deferred.promise;\n        };\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.service(\x3cspan class=\x22hljs-string\x22\x3e\x27MyService\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27$q\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n            _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n            _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e artist \x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = artist;\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.callITunes = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e deferred = $q.defer();\n            _finalUrl = makeUrl();\n\n            $http({\n                \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JSONP\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: _finalUrl\n            }).success(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                deferred.resolve(data);\n            }).error(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                deferred.reject(error);\n            });\n\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e deferred.promise;\n        };\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，就像我们使用\x3ccode\x3efactory\x3c\/code\x3e所创建的服务那样，注入这个服务的任何一个控制器都可以使用\x3ccode\x3esetArtist\x3c\/code\x3e，\x3ccode\x3egetArtist\x3c\/code\x3e和\x3ccode\x3ecallITunes\x3c\/code\x3e方法了。下面是我们的\x3ccode\x3emyServiceCtrl\x3c\/code\x3e，几乎与\x3ccode\x3emyFactoryCtrl\x3c\/code\x3e相同。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.controller(\x27myServiceCtrl\x27, [\n    \x27$scope\x27, \x27MyService\x27, function ( $scope, MyService ) {\n        $scope.data = {};\n        $scope.updateArtist = function () {\n            MyService.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = function () {\n            MyService.callITunes().then(function ( data ) {\n                $scope.data.artistData = data;\n            }, function ( error ) {\n                alert(error);\n            });\n        };\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myServiceCtrl\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyService\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyService \x3c\/span\x3e) \x3c\/span\x3e{\n        $scope.data = {};\n        $scope.updateArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyService.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyService.callITunes().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                $scope.data.artistData = data;\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                alert(error);\n            });\n        };\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如我之前提到的，一旦你理解了\x3ccode\x3enew\x3c\/code\x3e关键词做了什么，\x3ccode\x3eservice\x3c\/code\x3e和\x3ccode\x3efactory\x3c\/code\x3e就几乎是相同的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e使用\x3ccode\x3eprovider\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e关于\x3ccode\x3eprovider\x3c\/code\x3e，要记住的最重要的一件事就是他是唯一一种可以创建用来注入到\x3ccode\x3eapp.config()\x3c\/code\x3e函数的服务的方式。\x3c\/p\x3e\n\x3cp\x3e如果你需要在你的应用在别处运行之前对你的服务对象进行一部分的配置，那么，这个就显得很重要了。尽管与\x3ccode\x3eservice\x3c\/code\x3e和\x3ccode\x3eprovider\x3c\/code\x3e类似，但是我们还是会讲解一些他们的不同之处。\x3c\/p\x3e\n\x3cp\x3e首先，类似的，我们设置我们的\x3ccode\x3eprovider\x3c\/code\x3e。下面的变量就是我们的私有函数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.provider(\x27MyProvider\x27, function () {\n    var baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n        _artist = \x27\x27,\n        _finalUrl = \x27\x27;\n    \n    \/\/ 从config函数里设置这个属性\n    this.thingFromConfig = \x27\x27;\n\n    function makeUrl() {\n        _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n        _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n        return _finalUrl;\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.provider(\x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n        _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n        _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 从config函数里设置这个属性\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.thingFromConfig = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n        _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e再说明一次，如果对上面的代码逻辑有疑问的话，可以参考之前的列子。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e你可以认为\x3ccode\x3eprovider\x3c\/code\x3e有三个部分，第一部分是私有变量和私有函数，这些变量和函数会在以后被修改。第二部分是在\x3ccode\x3eapp.config\x3c\/code\x3e函数里可以访问的变量和函数，所以，他们可以在在其他地方使用之前被修改。注意，这些变量和函数一定要添加到\x3ccode\x3ethis\x3c\/code\x3e上面才行。在我们的例子中，\x3ccode\x3eapp.config()\x3c\/code\x3e函数能够修改的只有\x3ccode\x3ethingFromConfig\x3c\/code\x3e。第三部分是在控制器里可以访问的变量和函数。\x3c\/p\x3e\n\x3cp\x3e当使用 \x3ccode\x3eprovider\x3c\/code\x3e创建服务的时候，唯一可以让控制器访问的属性和方法是在\x3ccode\x3e$get()\x3c\/code\x3e函数里返回的属性和方法。下面的代码将\x3ccode\x3e$get\x3c\/code\x3e添加到了\x3ccode\x3ethis\x3c\/code\x3e上面，最终这个函数会被返回。\x3c\/p\x3e\n\x3cp\x3e现在，\x3ccode\x3e$get()\x3c\/code\x3e函数会返回我们需要在控制器里访问的函数和变量。下面是代码例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.$get = function ( $http, $q ) {\n            return {\n                setArtist: function ( artist ) {\n                    _artist = artist;\n                },\n                getArtist: function () {\n                    return _artist;\n                },\n                callITunes: function () {\n                    var deferred = $q.defer();\n                    _finalUrl = makeUrl();\n\n                    $http({\n                        method: \x27JSONP\x27,\n                        url: _finalUrl\n                    }).success(function ( data ) {\n                        deferred.resolve(data);\n                    }).error(function ( error ) {\n                        deferred.reject(error);\n                    });\n\n                    return deferred.promise;\n                },\n                thingOnConfig: this.thingFromConfig\n            };\n        };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$get = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3esetArtist\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e artist \x3c\/span\x3e) \x3c\/span\x3e{\n                    _artist = artist;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3egetArtist\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3ecallITunes\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e deferred = $q.defer();\n                    _finalUrl = makeUrl();\n\n                    $http({\n                        \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JSONP\x27\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: _finalUrl\n                    }).success(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                        deferred.resolve(data);\n                    }).error(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                        deferred.reject(error);\n                    });\n\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e deferred.promise;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3ethingOnConfig\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.thingFromConfig\n            };\n        };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，完整的\x3ccode\x3eprovider\x3c\/code\x3e就是这个样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.provider(\x27MyProvider\x27, [\n    \x27$http\x27, \x27$q\x27, function ( $http, $q ) {\n        var baseUrl = \x27https:\/\/itunes.apple.com\/search?term=\x27,\n            _artist = \x27\x27,\n            _finalUrl = \x27\x27;\n\n        this.thingFromConfig = \x27\x27;\n\n        this.$get = function ( $http, $q ) {\n            return {\n                setArtist: function ( artist ) {\n                    _artist = artist;\n                },\n                getArtist: function () {\n                    return _artist;\n                },\n                callITunes: function () {\n                    var deferred = $q.defer();\n                    _finalUrl = makeUrl();\n\n                    $http({\n                        method: \x27JSONP\x27,\n                        url: _finalUrl\n                    }).success(function ( data ) {\n                        deferred.resolve(data);\n                    }).error(function ( error ) {\n                        deferred.reject(error);\n                    });\n\n                    return deferred.promise;\n                },\n                thingOnConfig: this.thingFromConfig\n            };\n        };\n\n        function makeUrl() {\n            _artist = _artist.split(\x27 \x27).join(\x27\x2b\x27);\n            _finalUrl = baseUrl \x2b _artist \x2b \x27\x26amp;callback=JSON_CALLBACK\x27;\n            return _finalUrl;\n        }\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.provider(\x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27$q\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/itunes.apple.com\/search?term=\x27\x3c\/span\x3e,\n            _artist = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            _finalUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.thingFromConfig = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$get = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $http, $q \x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3esetArtist\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e artist \x3c\/span\x3e) \x3c\/span\x3e{\n                    _artist = artist;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3egetArtist\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _artist;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3ecallITunes\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e deferred = $q.defer();\n                    _finalUrl = makeUrl();\n\n                    $http({\n                        \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JSONP\x27\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: _finalUrl\n                    }).success(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                        deferred.resolve(data);\n                    }).error(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                        deferred.reject(error);\n                    });\n\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e deferred.promise;\n                },\n                \x3cspan class=\x22hljs-attr\x22\x3ethingOnConfig\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.thingFromConfig\n            };\n        };\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeUrl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _artist = _artist.split(\x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e).join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e);\n            _finalUrl = baseUrl \x2b _artist \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;callback=JSON_CALLBACK\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _finalUrl;\n        }\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，与之前的\x3ccode\x3eservice\x3c\/code\x3e和\x3ccode\x3efactory\x3c\/code\x3e类似，只要我们把\x3ccode\x3eMyProvider\x3c\/code\x3e注入到控制器里面，对应的方法就可以使用了。下面是\x3ccode\x3emyProviderCtrl\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.controller(\x27myProviderCtrl\x27, [\n    \x27$scope\x27, \x27MyProvider\x27, function ( $scope, MyProvider ) {\n        $scope.data = {};\n        $scope.updateArtist = function () {\n            MyProvider.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = function () {\n            MyProvider.callITunes().then(function ( data ) {\n                $scope.data.artistData = data;\n            }, function ( error ) {\n                alert(error);\n            });\n        };\n\n        $scope.data.thingFromConfig = MyProvider.thingOnConfig;\n    }]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.controller(\x3cspan class=\x22hljs-string\x22\x3e\x27myProviderCtrl\x27\x3c\/span\x3e, [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27$scope\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27MyProvider\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e $scope, MyProvider \x3c\/span\x3e) \x3c\/span\x3e{\n        $scope.data = {};\n        $scope.updateArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyProvider.setArtist($scope.data.artist);\n        };\n\n        $scope.submitArtist = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            MyProvider.callITunes().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e data \x3c\/span\x3e) \x3c\/span\x3e{\n                $scope.data.artistData = data;\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e error \x3c\/span\x3e) \x3c\/span\x3e{\n                alert(error);\n            });\n        };\n\n        $scope.data.thingFromConfig = MyProvider.thingOnConfig;\n    }]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如之前提到的，使用\x3ccode\x3eprovider\x3c\/code\x3e来创建服务的目的就是为了能够通过\x3ccode\x3eapp.config()\x3c\/code\x3e函数修改一些变量来传递到最终的项目中。我们来看个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.config([\x27MyProviderProvider\x27, function ( MyProviderProvider ) {\n    MyProviderProvider.thingFromConfig = \x27This sentence was set in app.config. Providers are the only service that can be passed into app.config. Check out the code to see how it works.\x27;\n}]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eapp.config([\x3cspan class=\x22hljs-string\x22\x3e\x27MyProviderProvider\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e MyProviderProvider \x3c\/span\x3e) \x3c\/span\x3e{\n    MyProviderProvider.thingFromConfig = \x3cspan class=\x22hljs-string\x22\x3e\x27This sentence was set in app.config. Providers are the only service that can be passed into app.config. Check out the code to see how it works.\x27\x3c\/span\x3e;\n}]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，你就能看到，在\x3ccode\x3eprovider\x3c\/code\x3e里，\x3ccode\x3ethingFromConfig\x3c\/code\x3e是空字符串，但是，当我们在DOM里显示的时候，他就会是我们上面所设置的字符串了。\x3c\/p\x3e\n\x3cp\x3e谢谢你的阅读，希望能够帮助你分辨这三者的不同之处。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e要查看完整的代码例子，欢迎fork我的项目：\x3ca href=\x22https:\/\/github.com\/tylermcginnis33\/AngularServices\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/tylermcginnis33\/AngularServices\x3c\/a\x3e 或者查看\x3ca href=\x22http:\/\/stackoverflow.com\/a\/23683176\/1867084\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e我在Stack Overflow的问题回答\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>AngularJS：factory，service与provider的区别</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004602085">https://segmentfault.com/a/1190000004602085</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/apgtugcoy9c/" target="_blank">https://alili.tech/archive/apgtugcoy9c/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>