<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React Router最新指南与异步加载实践"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React Router最新指南与异步加载实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/paxgwd3ar39/",
				"appid": "1613049289050283", 
				"title": "React Router最新指南与异步加载实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-06T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/s3pl2eesosl/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2ph59jt82fa/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&text=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&text=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&title=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&is_video=false&description=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&title=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&title=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&title=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpaxgwd3ar39%2f&title=React%20Router%e6%9c%80%e6%96%b0%e6%8c%87%e5%8d%97%e4%b8%8e%e5%bc%82%e6%ad%a5%e5%8a%a0%e8%bd%bd%e5%ae%9e%e8%b7%b5"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React Router最新指南与异步加载实践</h1><div class="meta"><div class="postdate"><time datetime="2019-02-06" itemprop="datePublished">2019-02-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e本文从属于笔者的\x3ca href=\x22https:\/\/github.com\/wxyyxc1992\/web-frontend-practice-handbook#react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact入门与最佳实践\x3c\/a\x3e系列\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3eIntroduction\x3c\/h1\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact Router\x3c\/a\x3e是基于React的同时支持服务端路由与客户端路由的强大易用的路由框架，可以允许开发者方便地添加新页面到应用中，保证页面内容与页面路由的一致性以及在页面之间进行方便地参数传递。之前React Router作者没有积极地开发与审核Pull Request，结果有个\x3ca href=\x22https:\/\/github.com\/taion\/rrtr\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3errtr\x3c\/a\x3e一怒之下要建个独立的分支，不过后来好像又回归到了React Router上。 目前React-Router的官方版本已经达到了2.6.0，其API也一直在发生变化，笔者在本文中所述内容也是基于2.6.0的官方文档以及自己的实践整理而来。同时，随着React Router项目的更新本文文档也会随之更新，有需要的建议关注本项目。如果你是初学者希望快速搭建React的基本开发环境，那么笔者建议参考\x3ca href=\x22https:\/\/github.com\/wxyyxc1992\/Webpack-React-Redux-Boilerplate\/tree\/boilerplate\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack-React-Redux-Boilerplate\x3c\/a\x3e来迅速构建可应用于生产环境的自动化开发配置。首先，基本的React的路由配置如下所示:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\n\n\x3cRouter history={appHistory}\x3e\n    \x3cRoute path = \x26quot;\/\x26quot; component = {withRouter(App)}\x3e \/\/在2.4.0之后建议默认使用withRouter进行包裹\n      \x3cIndexRoute component = {withRouter(ClusterTabPane)} \/\x3e \/\/默认路由\n      \x3cRoute path = \x26quot;cluster\x26quot; component = {withRouter(ClusterTabPane)} \/\x3e\n    \x3c\/Route\x3e\n    \x3cRoute path=\x26quot;*\x26quot; component={withRouter(ErrorPage)}\/\x3e \/\/默认错误路由\n  \x3c\/Router\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3e\n\n\x3cspan class=\x22xml\x22\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehistory\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{appHistory}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e{withRouter(App)}\x3c\/span\x3e\x26gt;\x3c\/span\x3e \/\/在2.4.0之后建议默认使用withRouter进行包裹\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eIndexRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e{withRouter(ClusterTabPane)}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e \/\/默认路由\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22cluster\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e{withRouter(ClusterTabPane)}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22*\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{withRouter(ErrorPage)}\/\x3c\/span\x3e\x26gt;\x3c\/span\x3e \/\/默认错误路由\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不过React-Router因为其与React的强绑定性也不可避免的带来了一些缺陷，譬如在目前情况下因为React存在的性能问题(笔者觉得在React-Fiber正式发布之后能得到有效解决)，如果笔者打算使用\x3ca href=\x22https:\/\/github.com\/trueadm\/inferno\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eInferno\x3c\/a\x3e来替换部分对性能要求较大的页面，也是会存在问题。如果有兴趣的话也可以参考下\x3ca href=\x22https:\/\/medium.freecodecamp.com\/you-might-not-need-react-router-38673620f3d#.hzfajjq3t\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e你不一定需要React-Router这篇文章\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eWhy React-Router\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eWithout React-Router\x3c\/h3\x3e\n\x3cp\x3eReact-Router的核心原理是将子组件根据选择注入到\x3ccode\x3e{this.props.children}\x3c\/code\x3e中。在一个多页面的应用程序中，如果我们不使用React-Router，那么整体的代码可能如下所示:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport React from \x27react\x27\n\nimport { render } from \x27react-dom\x27\n\n\n\nconst About = React.createClass({\/*...*\/})\n\nconst Inbox = React.createClass({\/*...*\/})\n\nconst Home = React.createClass({\/*...*\/})\n\n\n\nconst App = React.createClass({\n\n  getInitialState() {\n\n    return {\n\n      route: window.location.hash.substr(1)\n\n    }\n\n  },\n\n\n\n  componentDidMount() {\n\n    window.addEventListener(\x27hashchange\x27, () =\x3e {\n\n      this.setState({\n\n        route: window.location.hash.substr(1)\n\n      })\n\n    })\n\n  },\n\n\n\n  render() {\n\n    let Child\n\n    switch (this.state.route) {\n\n      case \x27\/about\x27: Child = About; break;\n\n      case \x27\/inbox\x27: Child = Inbox; break;\n\n      default:      Child = Home;\n\n    }\n\n\n\n    return (\n\n      \x3cdiv\x3e\n\n        \x3ch1\x3eApp\x3c\/h1\x3e\n\n        \x3cul\x3e\n\n          \x3cli\x3e\x3ca href=\x26quot;#\/about\x26quot;\x3eAbout\x3c\/a\x3e\x3c\/li\x3e\n\n          \x3cli\x3e\x3ca href=\x26quot;#\/inbox\x26quot;\x3eInbox\x3c\/a\x3e\x3c\/li\x3e\n\n        \x3c\/ul\x3e\n\n        \x3cChild\/\x3e\n\n      \x3c\/div\x3e\n\n    )\n\n  }\n\n})\n\n\n\nrender(\x3cApp \/\x3e, document.body)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { render } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e\n\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e About = React.createClass({\x3cspan class=\x22hljs-comment\x22\x3e\/*...*\/\x3c\/span\x3e})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Inbox = React.createClass({\x3cspan class=\x22hljs-comment\x22\x3e\/*...*\/\x3c\/span\x3e})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = React.createClass({\x3cspan class=\x22hljs-comment\x22\x3e\/*...*\/\x3c\/span\x3e})\n\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e App = React.createClass({\n\n  getInitialState() {\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n\n      \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.hash.substr(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n\n    }\n\n  },\n\n\n\n  componentDidMount() {\n\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27hashchange\x27\x3c\/span\x3e, () =\x26gt; {\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n\n        \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.hash.substr(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n\n      })\n\n    })\n\n  },\n\n\n\n  render() {\n\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e Child\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.route) {\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\/about\x27\x3c\/span\x3e: Child = About; \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\/inbox\x27\x3c\/span\x3e: Child = Inbox; \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:      Child = Home;\n\n    }\n\n\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eApp\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22#\/about\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eAbout\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22#\/inbox\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eInbox\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eChild\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n    )\n\n  }\n\n})\n\n\n\nrender(\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e, document.body)\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看出，在原始的多页面程序配置下，我们需要在\x3ccode\x3erender\x3c\/code\x3e函数中手动地根据传入的Props来决定应该填充哪个组件，这样就导致了父子页面之间的耦合度过高，并且这种命令式的方式可维护性也比较差，也不是很直观。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eWith React-Router\x3c\/h3\x3e\n\x3cp\x3e在React-Router的协助下，我们的路由配置可能如下所示:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport React from \x27react\x27\n\nimport { render } from \x27react-dom\x27\n\n\n\n\/\/ First we import some modules...\n\nimport { Router, Route, IndexRoute, Link, hashHistory } from \x27react-router\x27\n\n\n\n\/\/ Then we delete a bunch of code from App and\n\n\/\/ add some \x3cLink\x3e elements...\n\nconst App = React.createClass({\n\n  render() {\n\n    return (\n\n      \x3cdiv\x3e\n\n        \x3ch1\x3eApp\x3c\/h1\x3e\n\n        {\/* change the \x3ca\x3es to \x3cLink\x3es *\/}\n\n        \x3cul\x3e\n\n          \x3cli\x3e\x3cLink to=\x26quot;\/about\x26quot;\x3eAbout\x3c\/Link\x3e\x3c\/li\x3e\n\n          \x3cli\x3e\x3cLink to=\x26quot;\/inbox\x26quot;\x3eInbox\x3c\/Link\x3e\x3c\/li\x3e\n\n        \x3c\/ul\x3e\n\n\n\n        {\/*\n\n          next we replace `\x3cChild\x3e` with `this.props.children`\n\n          the router will figure out the children for us\n\n        *\/}\n\n        {this.props.children}\n\n      \x3c\/div\x3e\n\n    )\n\n  }\n\n})\n\n\n\n\/\/ Finally, we render a \x3cRouter\x3e with some \x3cRoute\x3es.\n\n\/\/ It does all the fancy routing stuff for us.\n\nrender((\n\n  \x3cRouter history={hashHistory}\x3e\n\n    \x3cRoute path=\x26quot;\/\x26quot; component={App}\x3e\n\n      \x3cIndexRoute component={Home} \/\x3e\n\n      \x3cRoute path=\x26quot;about\x26quot; component={About} \/\x3e\n\n      \x3cRoute path=\x26quot;inbox\x26quot; component={Inbox} \/\x3e\n\n    \x3c\/Route\x3e\n\n  \x3c\/Router\x3e\n\n), document.body)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\nimport React from \x27react\x27\n\nimport { render } from \x27react-dom\x27\n\n\n\n\/\/ First we import some modules...\n\nimport { Router, Route, IndexRoute, Link, hashHistory } from \x27react-router\x27\n\n\n\n\/\/ Then we delete a bunch of code from App and\n\n\/\/ add some \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3e elements...\n\nconst App = React.createClass({\n\n  render() {\n\n    return (\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eApp\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        {\/* change the \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3es to \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3es *\/}\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/about\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eAbout\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/inbox\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eInbox\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\n\n        {\/*\n\n          next we replace `\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eChild\x3c\/span\x3e\x26gt;\x3c\/span\x3e` with `this.props.children`\n\n          the router will figure out the children for us\n\n        *\/}\n\n        {this.props.children}\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    )\n\n  }\n\n})\n\n\n\n\/\/ Finally, we render a \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e\x26gt;\x3c\/span\x3e with some \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3es.\n\n\/\/ It does all the fancy routing stuff for us.\n\nrender((\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehistory\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{hashHistory}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{App}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eIndexRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{Home}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22about\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{About}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22inbox\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{Inbox}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n), document.body)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eReact Router提供了统一的声明式全局路由配置方案，使我们在父组件内部不需要再去关系应该如何选择子组件、应该如何控制组件间的跳转等等。而如果你希望将路由配置独立于应用程序，你也可以使用简单的JavaScript Object来进行配置:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nconst routes = {\n\n  path: \x27\/\x27,\n\n  component: App,\n\n  indexRoute: { component: Home },\n\n  childRoutes: [\n\n    { path: \x27about\x27, component: About },\n\n    { path: \x27inbox\x27, component: Inbox },\n\n  ]\n\n}\n\n\n\nrender(\x3cRouter history={history} routes={routes} \/\x3e, document.body)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\nconst routes = {\n\n  path: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n\n  componen\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e App,\n\n  indexRoute: { componen\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e Home },\n\n  childRoute\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\n\n    { path: \x3cspan class=\x22hljs-string\x22\x3e\x27about\x27\x3c\/span\x3e, componen\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e About },\n\n    { path: \x3cspan class=\x22hljs-string\x22\x3e\x27inbox\x27\x3c\/span\x3e, componen\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e Inbox },\n\n  ]\n\n}\n\n\n\nrender(\x26lt;Router \x3cspan class=\x22hljs-keyword\x22\x3ehistory\x3c\/span\x3e={\x3cspan class=\x22hljs-keyword\x22\x3ehistory\x3c\/span\x3e} routes={routes} \/\x26gt;, document.body)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eReference\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eTutorials \x26amp; Docs\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/medium.com\/@dabit3\/beginner-s-guide-to-react-router-53094349669#.ccpvbjkxi\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBeginner’s Guide to React Router\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/medium.freecodecamp.com\/you-might-not-need-react-router-38673620f3d#.hzfajjq3t\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eyou-might-not-need-react-router\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/react-guide.github.io\/react-router-cn\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact Router 中文文档\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3eRoute Configuration:路由配置\x3c\/h1\x3e\n\x3cp\x3e在将React Router集成到项目中之后，我们会使用\x3ccode\x3eRouter\x3c\/code\x3e对象作为根容器包裹数个Route配置，而Route也就意味着一系列用于指示Router应该如何匹配URL的规则。以简单的TodoAPP为例，其路由配置如下所示:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nimport { render } from \x27react-dom\x27\nimport { Router, Route, Link } from \x27react-router\x27\n\nconst App = React.createClass({\n  render() {\n    return (\n      \x3cdiv\x3e\n        \x3ch1\x3eApp\x3c\/h1\x3e\n        \x3cul\x3e\n          \x3cli\x3e\x3cLink to=\x26quot;\/about\x26quot;\x3eAbout\x3c\/Link\x3e\x3c\/li\x3e\n          \x3cli\x3e\x3cLink to=\x26quot;\/inbox\x26quot;\x3eInbox\x3c\/Link\x3e\x3c\/li\x3e\n        \x3c\/ul\x3e\n        {this.props.children}\n      \x3c\/div\x3e\n    )\n  }\n})\n\nconst About = React.createClass({\n  render() {\n    return \x3ch3\x3eAbout\x3c\/h3\x3e\n  }\n})\n\nconst Inbox = React.createClass({\n  render() {\n    return (\n      \x3cdiv\x3e\n        \x3ch2\x3eInbox\x3c\/h2\x3e\n        {this.props.children || \x26quot;Welcome to your Inbox\x26quot;}\n      \x3c\/div\x3e\n    )\n  }\n})\n\nconst Message = React.createClass({\n  render() {\n    return \x3ch3\x3eMessage {this.props.params.id}\x3c\/h3\x3e\n  }\n})\n\nrender((\n  \x3cRouter\x3e\n    \x3cRoute path=\x26quot;\/\x26quot; component={App}\x3e\n      \x3cRoute path=\x26quot;about\x26quot; component={About} \/\x3e\n      \x3cRoute path=\x26quot;inbox\x26quot; component={Inbox}\x3e\n        \x3cRoute path=\x26quot;messages\/:id\x26quot; component={Message} \/\x3e\n      \x3c\/Route\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e\n), document.body)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { render } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Router, Route, Link } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e App = React.createClass({\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eApp\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/about\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eAbout\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/inbox\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eInbox\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {this.props.children}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    )\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e About = React.createClass({\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3eAbout\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Inbox = React.createClass({\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3eInbox\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {this.props.children || \x22Welcome to your Inbox\x22}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    )\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Message = React.createClass({\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3eMessage {this.props.params.id}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh3\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  }\n})\n\nrender((\n  \x26lt;Router\x26gt;\n    \x26lt;Route path=\x22\/\x22 component={App}\x26gt;\n      \x26lt;Route path=\x22about\x22 component={About} \/\x26gt;\n      \x26lt;Route path=\x22inbox\x22 component={Inbox}\x26gt;\n        \x26lt;Route path=\x22messages\/:id\x22 component={Message} \/\x26gt;\n      \x26lt;\/Route\x26gt;\n    \x26lt;\/Route\x26gt;\n  \x26lt;\/Router\x26gt;\n), document.body)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据以上的配置，Router能够智能地处理以下几个路由跳转:\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eURL\x3c\/th\x3e\n\x3cth\x3eComponents\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/about\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; About\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/inbox\/messages\/:id\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox -\x26gt; Message\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e添加默认路由\x3c\/h3\x3e\n\x3cp\x3e在上面的配置中，如果我们默认访问的\x3ccode\x3e\/\x3c\/code\x3e地址，那么根据React Router的原理此时并没有选定任何的子组件进行注入，即此时的\x3ccode\x3ethis.props.children\x3c\/code\x3e值为\x3ccode\x3eundefined\x3c\/code\x3e。而React Router允许我们使用\x3ca href=\x22\/docs\/API.md#indexroute\x22\x3e\x3ccode\x3e\x26lt;IndexRoute\x26gt;\x3c\/code\x3e\x3c\/a\x3e 来配置默认路由。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { IndexRoute } from \x27react-router\x27\n\nconst Dashboard = React.createClass({\n  render() {\n    return \x3cdiv\x3eWelcome to the app!\x3c\/div\x3e\n  }\n})\n\nrender((\n  \x3cRouter\x3e\n    \x3cRoute path=\x26quot;\/\x26quot; component={App}\x3e\n      {\/* Show the dashboard at \/ *\/}\n      \x3cIndexRoute component={Dashboard} \/\x3e\n      \x3cRoute path=\x26quot;about\x26quot; component={About} \/\x3e\n      \x3cRoute path=\x26quot;inbox\x26quot; component={Inbox}\x3e\n        \x3cRoute path=\x26quot;messages\/:id\x26quot; component={Message} \/\x3e\n      \x3c\/Route\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e\n), document.body)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { IndexRoute } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Dashboard = React.createClass({\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eWelcome to the app!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  }\n})\n\nrender((\n  \x26lt;Router\x26gt;\n    \x26lt;Route path=\x22\/\x22 component={App}\x26gt;\n      {\/* Show the dashboard at \/ *\/}\n      \x26lt;IndexRoute component={Dashboard} \/\x26gt;\n      \x26lt;Route path=\x22about\x22 component={About} \/\x26gt;\n      \x26lt;Route path=\x22inbox\x22 component={Inbox}\x26gt;\n        \x26lt;Route path=\x22messages\/:id\x22 component={Message} \/\x26gt;\n      \x26lt;\/Route\x26gt;\n    \x26lt;\/Route\x26gt;\n  \x26lt;\/Router\x26gt;\n), document.body)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时整体路由的配置为:\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eURL\x3c\/th\x3e\n\x3cth\x3eComponents\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Dashboard\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/about\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; About\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/inbox\/messages\/:id\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox -\x26gt; Message\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e将UI与URL解耦\x3c\/h3\x3e\n\x3cp\x3e在上面的配置中，Message组件是Inbox的子组件，因此每次访问Message组件都需要在路由上添加\x3ccode\x3e\/inbox\x3c\/code\x3e，这样会导致随着应用层次的加深而部分路由过于冗长，因此React Router还允许将UI与URL的配置解耦，譬如对上述配置的重构方式就是:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render((\n  \x3cRouter\x3e\n    \x3cRoute path=\x26quot;\/\x26quot; component={App}\x3e\n      \x3cIndexRoute component={Dashboard} \/\x3e\n      \x3cRoute path=\x26quot;about\x26quot; component={About} \/\x3e\n      \x3cRoute path=\x26quot;inbox\x26quot; component={Inbox} \/\x3e\n\n      {\/* Use \/messages\/:id instead of \/inbox\/messages\/:id *\/}\n      \x3cRoute component={Inbox}\x3e\n        \x3cRoute path=\x26quot;messages\/:id\x26quot; component={Message} \/\x3e\n      \x3c\/Route\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e\n), document.body)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3erender((\n  \x26lt;Router\x26gt;\n    \x26lt;Route path=\x22\/\x22 component={App}\x26gt;\n      \x26lt;IndexRoute component={Dashboard} \/\x26gt;\n      \x26lt;Route path=\x22about\x22 component={About} \/\x26gt;\n      \x26lt;Route path=\x22inbox\x22 component={Inbox} \/\x26gt;\n\n      {\/* Use \/messages\/:id instead of \/inbox\/messages\/:id *\/}\n      \x26lt;Route component={Inbox}\x26gt;\n        \x26lt;Route path=\x22messages\/:id\x22 component={Message} \/\x26gt;\n      \x26lt;\/Route\x26gt;\n    \x26lt;\/Route\x26gt;\n  \x26lt;\/Router\x26gt;\n), document.body)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样近似于绝对路径访问的方式能够提高整体路由配置的可读性，我们不需要在URL中添加更多的Segments来访问内部的组件，此时的整体路由配置为:\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eURL\x3c\/th\x3e\n\x3cth\x3eComponents\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Dashboard\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/about\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; About\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3e\/messages\/:id\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eApp -\x26gt; Inbox -\x26gt; Message\x3c\/code\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cblockquote\x3e\x3cp\x3e注意，绝对路径可能无法使用在动态路由中。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e重定向路由\x3c\/h3\x3e\n\x3cp\x3eReact Router提供了\x3ca href=\x22\/docs\/API.md#redirect\x22\x3e\x3ccode\x3e\x26lt;Redirect\x26gt;\x3c\/code\x3e\x3c\/a\x3e来允许我们将某个路由重定向到其他路由，譬如对于上面的配置中，当我们将Message组件设置为绝对路径访问而部分开发者仍然使用\x3ccode\x3e\/inbox\/message\/:id\x3c\/code\x3e方式进行访问时:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { Redirect } from \x27react-router\x27\n\nrender((\n  \x3cRouter\x3e\n    \x3cRoute path=\x26quot;\/\x26quot; component={App}\x3e\n      \x3cIndexRoute component={Dashboard} \/\x3e\n      \x3cRoute path=\x26quot;about\x26quot; component={About} \/\x3e\n\n      \x3cRoute path=\x26quot;inbox\x26quot; component={Inbox}\x3e\n        {\/* Redirect \/inbox\/messages\/:id to \/messages\/:id *\/}\n        \x3cRedirect from=\x26quot;messages\/:id\x26quot; to=\x26quot;\/messages\/:id\x26quot; \/\x3e\n      \x3c\/Route\x3e\n\n      \x3cRoute component={Inbox}\x3e\n        \x3cRoute path=\x26quot;messages\/:id\x26quot; component={Message} \/\x3e\n      \x3c\/Route\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e\n), document.body)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Redirect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\nrender((\n  \x26lt;Router\x26gt;\n    \x26lt;Route path=\x22\/\x22 component={App}\x26gt;\n      \x26lt;IndexRoute component={Dashboard} \/\x26gt;\n      \x26lt;Route path=\x22about\x22 component={About} \/\x26gt;\n\n      \x26lt;Route path=\x22inbox\x22 component={Inbox}\x26gt;\n        {\/* Redirect \/inbox\/messages\/:id to \/messages\/:id *\/}\n        \x26lt;Redirect from=\x22messages\/:id\x22 to=\x22\/messages\/:id\x22 \/\x26gt;\n      \x26lt;\/Route\x26gt;\n\n      \x26lt;Route component={Inbox}\x26gt;\n        \x26lt;Route path=\x22messages\/:id\x22 component={Message} \/\x26gt;\n      \x26lt;\/Route\x26gt;\n    \x26lt;\/Route\x26gt;\n  \x26lt;\/Router\x26gt;\n), document.body)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时对于 \x3ccode\x3e\/inbox\/messages\/5\x3c\/code\x3e会被自动重定向到\x3ccode\x3e\/messages\/5\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e非JSX方式配置\x3c\/h3\x3e\n\x3cp\x3e当我们使用JSX方式进行配置时，其嵌入式的层次结构有助于提高路由的可读性，不同组件之间的关系也能较好地表现出来。不过很多时候我们仍然希望使用单纯的JS对象进行配置而避免使用JSX语法。注意，如果使用单纯的JS对象进行配置的时候，我们无法再使用 \x3ccode\x3e\x26lt;Redirect\x26gt;\x3c\/code\x3e，因此你只能够在\x3ccode\x3eonEnter\x3c\/code\x3e钩子中配置重定向。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const routes = {\n  path: \x27\/\x27,\n  component: App,\n  indexRoute: { component: Dashboard },\n  childRoutes: [\n    { path: \x27about\x27, component: About },\n    {\n      path: \x27inbox\x27,\n      component: Inbox,\n      childRoutes: [{\n        path: \x27messages\/:id\x27,\n        onEnter: ({ params }, replace) =\x3e replace(`\/messages\/${params.id}`)\n      }]\n    },\n    {\n      component: Inbox,\n      childRoutes: [{\n        path: \x27messages\/:id\x27, component: Message\n      }]\n    }\n  ]\n}\n\nrender(\x3cRouter routes={routes} \/\x3e, document.body)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e routes = {\n  \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: App,\n  \x3cspan class=\x22hljs-attr\x22\x3eindexRoute\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: Dashboard },\n  \x3cspan class=\x22hljs-attr\x22\x3echildRoutes\x3c\/span\x3e: [\n    { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27about\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: About },\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27inbox\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: Inbox,\n      \x3cspan class=\x22hljs-attr\x22\x3echildRoutes\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27messages\/:id\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eonEnter\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ params }, replace\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e replace(\x3cspan class=\x22hljs-string\x22\x3e`\/messages\/\x3cspan class=\x22hljs-subst\x22\x3e${params.id}\x3c\/span\x3e`\x3c\/span\x3e)\n      }]\n    },\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: Inbox,\n      \x3cspan class=\x22hljs-attr\x22\x3echildRoutes\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27messages\/:id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: Message\n      }]\n    }\n  ]\n}\n\nrender(\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eroutes\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{routes}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e, document.body)\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3eRoute Matching:路由匹配\x3c\/h1\x3e\n\x3cp\x3e路由主要依靠三个属性来判断其是否与某个URL相匹配:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e嵌套的层级\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e优先级\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3eNesting\x3c\/h3\x3e\n\x3cp\x3eReact Router提供了嵌套式的路由声明方案来表述组件之间的从属关系，嵌套式的路由就好像树形结构一样，而React Router来对某个URL进行匹配的时候也会按照深度优先的搜索方案进行匹配搜索。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3ePath Syntax:路径表达式\x3c\/h3\x3e\n\x3cp\x3e一个典型的路由路径由以下几个部分组成:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e:paramName\x3c\/code\x3e – 匹配参数直到 \x3ccode\x3e\/\x3c\/code\x3e, \x3ccode\x3e?\x3c\/code\x3e, or \x3ccode\x3e#\x3c\/code\x3e.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e()\x3c\/code\x3e – 匹配可选的路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e*\x3c\/code\x3e – 非贪婪匹配所有的路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3e**\x3c\/code\x3e - 贪婪匹配所有字符直到 \x3ccode\x3e\/\x3c\/code\x3e, \x3ccode\x3e?\x3c\/code\x3e, or \x3ccode\x3e#\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cRoute path=\x26quot;\/hello\/:name\x26quot;\x3e         \/\/ 匹配 \/hello\/michael and \/hello\/ryan\n\x3cRoute path=\x26quot;\/hello(\/:name)\x26quot;\x3e       \/\/ 匹配 \/hello, \/hello\/michael, and \/hello\/ryan\n\x3cRoute path=\x26quot;\/files\/*.*\x26quot;\x3e           \/\/ 匹配 \/files\/hello.jpg and \/files\/hello.html\n\x3cRoute path=\x26quot;\/**\/*.jpg\x26quot;\x3e            \/\/ 匹配 \/files\/hello.jpg and \/files\/path\/to\/file.jpg\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/hello\/:name\x22\x3c\/span\x3e\x26gt;         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配 \/hello\/michael and \/hello\/ryan\x3c\/span\x3e\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/hello(\/:name)\x22\x3c\/span\x3e\x26gt;       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配 \/hello, \/hello\/michael, and \/hello\/ryan\x3c\/span\x3e\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/files\/*.*\x22\x3c\/span\x3e\x26gt;           \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配 \/files\/hello.jpg and \/files\/hello.html\x3c\/span\x3e\n\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/**\/*.jpg\x22\x3c\/span\x3e\x26gt;            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配 \/files\/hello.jpg and \/files\/path\/to\/file.jpg\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3ePrecedence:优先级\x3c\/h3\x3e\n\x3cp\x3e路由算法自动根据路由的定义顺序来决定其优先级，因此你在定义路由的时候需要注意前一个路由定义不能完全覆盖下一个路由的全部跳转情况:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cRoute path=\x26quot;\/comments\x26quot; ... \/\x3e\n\x3cRedirect from=\x26quot;\/comments\x26quot; ... \/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/comments\x22\x3c\/span\x3e ... \/\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRedirect\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/comments\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e...\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader15\x22\x3eHistory\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router\/blob\/master\/docs\/guides\/Histories.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHistories官方文档\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3cp\x3eReact Router 是建立在 \x3ca href=\x22https:\/\/github.com\/rackt\/history\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehistory\x3c\/a\x3e 之上的。 简而言之，一个 history 知道如何去监听浏览器地址栏的变化， 并解析这个 URL 转化为 \x3ccode\x3elocation\x3c\/code\x3e 对象， 然后 router 使用它匹配到路由，最后正确地渲染对应的组件。常用的 history 有三种形式， 但是你也可以使用 React Router 实现自定义的 history。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/react-guide.github.io\/react-router-cn\/docs\/guides\/basics\/Histories.html#createhashhistory\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehashHistory\x3c\/code\x3e\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/react-guide.github.io\/react-router-cn\/docs\/guides\/basics\/Histories.html#createbrowserhistory\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ebrowserHistory\x3c\/code\x3e\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/react-guide.github.io\/react-router-cn\/docs\/guides\/basics\/Histories.html#creatememoryhistory\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ecreateMemoryHistory\x3c\/code\x3e\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e从 React Router 库中获取它们：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ JavaScript module import\nimport { browserHistory } from \x27react-router\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e JavaScript \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { browserHistory } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后可以传入到\x3ccode\x3e\x26lt;Router\x26gt;\x3c\/code\x3e的配置中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render(\n  \x3cRouter history={browserHistory} routes={routes} \/\x3e,\n  document.getElementById(\x27app\x27)\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode\x3erender(\n  \x3cspan class=\x22hljs-name\x22\x3e\x26lt;Router\x3c\/span\x3e history={browserHistory} routes={routes} \/\x26gt;,\n  document.getElementById(\x27app\x27)\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e\n\x3ccode\x3ecreateHashHistory\x3c\/code\x3e:用于客户端跳转\x3c\/h2\x3e\n\x3cp\x3e这是一个你会获取到的默认 history ，如果你不指定某个 history （即 \x3ccode\x3e{\/* your routes *\/}\x3c\/code\x3e）。它用到的是 URL 中的 hash（\x3ccode\x3e#\x3c\/code\x3e）部分去创建形如 \x3ccode\x3eexample.com\/#\/some\/path\x3c\/code\x3e 的路由。\x3c\/p\x3e\n\x3ch4\x3e我应该使用 \x3ccode\x3ecreateHashHistory\x3c\/code\x3e吗？\x3c\/h4\x3e\n\x3cp\x3eHash history 是默认的，因为它可以在服务器中不作任何配置就可以运行，并且它在全部常用的浏览器包括 IE8\x2b 都可以用。但是我们不推荐在实际生产中用到它，因为每一个 web 应用都应该有目的地去使用\x3ccode\x3ecreateBrowserHistory\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e像这样 \x3ccode\x3e?_k=ckuvup\x3c\/code\x3e 没用的在 URL 中是什么？\x3c\/h4\x3e\n\x3cp\x3e当一个 history 通过应用程序的 \x3ccode\x3epushState\x3c\/code\x3e 或 \x3ccode\x3ereplaceState\x3c\/code\x3e 跳转时，它可以在新的 location 中存储 “location state” 而不显示在 URL 中，这就像是在一个 HTML 中 post 的表单数据。在 DOM API 中，这些 hash history 通过 \x3ccode\x3ewindow.location.hash = newHash\x3c\/code\x3e 很简单地被用于跳转，且不用存储它们的location state。但我们想全部的 history 都能够使用location state，因此我们要为每一个 location 创建一个唯一的 key，并把它们的状态存储在 session storage 中。当访客点击“后退”和“前进”时，我们就会有一个机制去恢复这些 location state。你也可以不使用这个特性 (更多内容点击\x3ca href=\x22http:\/\/rackt.org\/history\/stable\/HashHistoryCaveats.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e):\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 选择退出连续的 state， 不推荐使用\nlet history = createHistory({\n  queryKey: false\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ 选择退出连续的 \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e， 不推荐使用\nlet history = createHistory({\n  queryKey: false\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e\n\x3ccode\x3ecreateBrowserHistory\x3c\/code\x3e:用于服务端跳转\x3c\/h3\x3e\n\x3cp\x3eBrowser history 是由 React Router 创建浏览器应用推荐的 history。它使用 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/History\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHistory\x3c\/a\x3e API 在浏览器中被创建用于处理 URL，新建一个像这样真实的 URL \x3ccode\x3eexample.com\/some\/path\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e服务器配置\x3c\/h4\x3e\n\x3cp\x3e首先服务器应该能够处理 URL 请求。处理应用启动最初的 \x3ccode\x3e\/\x3c\/code\x3e 这样的请求应该没问题，但当用户来回跳转并在 \x3ccode\x3e\/accounts\/123\x3c\/code\x3e 刷新时，服务器就会收到来自 \x3ccode\x3e\/accounts\/123\x3c\/code\x3e 的请求，这时你需要处理这个 URL 并在响应中包含 JavaScript 程序代码。\x3c\/p\x3e\n\x3cp\x3e一个 express 的应用可能看起来像这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const express = require(\x27express\x27)\nconst path = require(\x27path\x27)\nconst port = process.env.PORT || 8080\nconst app = express()\n\n\/\/ 通常用于加载静态资源\napp.use(express.static(__dirname \x2b \x27\/public\x27))\n\n\/\/ 在你应用 JavaScript 文件中包含了一个 script 标签\n\/\/ 的 index.html 中处理任何一个 route\napp.get(\x27*\x27, function (request, response){\n  response.sendFile(path.resolve(__dirname, \x27public\x27, \x27index.html\x27))\n})\n\napp.listen(port)\nconsole.log(\x26quot;server started on port \x26quot; \x2b port)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e express = \x3cspan class=\x22hljs-keyword\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-keyword\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e port = process.env.PORT || \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app = express()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通常用于加载静态资源\x3c\/span\x3e\napp.\x3cspan class=\x22hljs-keyword\x22\x3euse\x3c\/span\x3e(express.\x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e(__dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/public\x27\x3c\/span\x3e))\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在你应用 JavaScript 文件中包含了一个 script 标签\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 的 index.html 中处理任何一个 route\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(request, response)\x3c\/span\x3e\x3c\/span\x3e{\n  response.sendFile(path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27public\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e))\n})\n\napp.listen(port)\nconsole.log(\x3cspan class=\x22hljs-string\x22\x3e\x22server started on port \x22\x3c\/span\x3e \x2b port)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你的服务器是 nginx，请使用 \x3ca href=\x22http:\/\/nginx.org\/en\/docs\/http\/ngx_http_core_module.html#try_files\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3etry_files\x3c\/code\x3e directive\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22server {\n  ...\n  location \/ {\n    try_files $uri \/index.html\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3eserver {\n  ...\n  \x3cspan class=\x22hljs-keyword\x22\x3elocation\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e\/ {\n    try_files\x3c\/span\x3e $uri \/index.html\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当在服务器上找不到其他文件时，这就会让 nginx 服务器生成静态文件和操作 \x3ccode\x3eindex.html\x3c\/code\x3e 文件。\x3c\/p\x3e\n\x3ch4\x3eIE8, IE9 支持情况\x3c\/h4\x3e\n\x3cp\x3e如果我们能使用浏览器自带的 \x3ccode\x3ewindow.history\x3c\/code\x3e API，那么我们的特性就可以被浏览器所检测到。如果不能，那么任何调用跳转的应用就会导致 \x3cstrong\x3e全页面刷新\x3c\/strong\x3e，它允许在构建应用和更新浏览器时会有一个更好的用户体验，但仍然支持的是旧版的。\x3c\/p\x3e\n\x3cp\x3e你可能会想为什么我们不后退到 hash history，问题是这些 URL 是不确定的。如果一个访客在 hash history 和 browser history 上共享一个 URL，然后他们也共享同一个后退功能，最后我们会以产生笛卡尔积数量级的、无限多的 URL 而崩溃。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3e\n\x3ccode\x3ecreateMemoryHistory\x3c\/code\x3e:非地址栏呈现\x3c\/h3\x3e\n\x3cp\x3eMemory history 不会在地址栏被操作或读取。这就解释了我们是如何实现服务器渲染的。同时它也非常适合测试和其他的渲染环境（像 React Native ）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e实现示例\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nimport createBrowserHistory from \x27history\/lib\/createBrowserHistory\x27\nimport { Router, Route, IndexRoute } from \x27react-router\x27\nimport App from \x27..\/components\/App\x27\nimport Home from \x27..\/components\/Home\x27\nimport About from \x27..\/components\/About\x27\nimport Features from \x27..\/components\/Features\x27\n\nReact.render(\n  \x3cRouter history={createBrowserHistory()}\x3e\n    \x3cRoute path=\x27\/\x27 component={App}\x3e\n      \x3cIndexRoute component={Home} \/\x3e\n      \x3cRoute path=\x27about\x27 component={About} \/\x3e\n      \x3cRoute path=\x27features\x27 component={Features} \/\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e,\n  document.getElementById(\x27app\x27)\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e createBrowserHistory \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27history\/lib\/createBrowserHistory\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Router, Route, IndexRoute } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/App\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/Home\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e About \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/About\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Features \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/Features\x27\x3c\/span\x3e\n\nReact.render(\n  \x26lt;Router history={createBrowserHistory()}\x26gt;\n    \x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e component={App}\x26gt;\n      \x26lt;IndexRoute component={Home} \/\x26gt;\n      \x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x27about\x27\x3c\/span\x3e component={About} \/\x26gt;\n      \x26lt;Route path=\x3cspan class=\x22hljs-string\x22\x3e\x27features\x27\x3c\/span\x3e component={Features} \/\x26gt;\n    \x26lt;\/Route\x26gt;\n  \x26lt;\/Router\x26gt;,\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e)\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader20\x22\x3eRouter Control:路由控制\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3eManual Navigation:手动导航\x3c\/h2\x3e\n\x3cp\x3e在2.4.0版本之前，\x3ccode\x3erouter\x3c\/code\x3e对象通过\x3ccode\x3ethis.context\x3c\/code\x3e进行传递，不过这种方式往往会引起莫名的错误。因此在2.4.0版本之后推荐的是采取所谓的HOC模式进行router对象的访问，React Router也提供了一个\x3ccode\x3ewithRouter\x3c\/code\x3e函数来方便进行封装：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nimport { withRouter } from \x27react-router\x27\n\nconst Page = React.createClass({\n  componentDidMount() {\n    this.props.router.setRouteLeaveHook(this.props.route, () =\x3e {\n      if (this.state.unsaved)\n        return \x27You have unsaved information, are you sure you want to leave this page?\x27\n    })\n  },\n\n  render() {\n    return \x3cdiv\x3eStuff\x3c\/div\x3e\n  }\n})\n\nexport default withRouter(Page)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { withRouter } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Page = React.createClass({\n  componentDidMount() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.router.setRouteLeaveHook(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.route, () =\x26gt; {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.unsaved)\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27You have unsaved information, are you sure you want to leave this page?\x27\x3c\/span\x3e\n    })\n  },\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eStuff\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e withRouter(Page)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在某个具体的组件内部，可以使用\x3ccode\x3ethis.props.router\x3c\/code\x3e来获取\x3ccode\x3erouter\x3c\/code\x3e对象:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22router.push(\x27\/users\/12\x27)\n\n\/\/ or with a location descriptor object\nrouter.push({\n  pathname: \x27\/users\/12\x27,\n  query: { modal: true },\n  state: { fromDashboard: true }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3erouter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.push\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\/users\/12\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ or with a location descriptor object\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3erouter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.push\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3epathname\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/users\/12\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attribute\x22\x3equery\x3c\/span\x3e: { \x3cspan class=\x22hljs-attribute\x22\x3emodal\x3c\/span\x3e: true },\n  \x3cspan class=\x22hljs-attribute\x22\x3estate\x3c\/span\x3e: { \x3cspan class=\x22hljs-attribute\x22\x3efromDashboard\x3c\/span\x3e: true }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3erouter对象的常见方法有:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ereplace(pathOrLoc):Identical to push except replaces the current history entry with a new one.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ego(n):Go forward or backward in the history by n or -n.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egoBack():Go back one entry in the history.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egoForward():Go forward one entry in the history.\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader22\x22\x3eConfirming Navigation:跳转前确认\x3c\/h2\x3e\n\x3cp\x3eReact Router提供了钩子函数以方便我们在正式执行跳转前进行确认:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const Home = withRouter(\n  React.createClass({\n\n    componentDidMount() {\n      this.props.router.setRouteLeaveHook(this.props.route, this.routerWillLeave)\n    },\n\n    routerWillLeave(nextLocation) {\n      \/\/ return false to prevent a transition w\/o prompting the user,\n      \/\/ or return a string to allow the user to decide:\n      if (!this.state.isSaved)\n        return \x27Your work is not saved! Are you sure you want to leave?\x27\n    },\n\n    \/\/ ...\n\n  })\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3econst Home = withRouter(\n  React.createClass({\n\n    componentDidMount() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.router.setRouteLeaveHook(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.route, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.routerWillLeave)\n    },\n\n    routerWillLeave(nextLocation) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ return false to prevent a transition w\/o prompting the user,\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ or return a string to allow the user to decide:\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.isSaved)\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Your work is not saved! Are you sure you want to leave?\x27\x3c\/span\x3e\n    },\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n\n  })\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3eEnter and Leave Hooks\x3c\/h3\x3e\n\x3cp\x3e除了跳转确认之外，\x3ca href=\x22\/docs\/Glossary.md#route\x22\x3eRoute\x3c\/a\x3e也提供了钩子函数以通知我们当路由发生时的情况，可以有助于我们进行譬如页面权限认证等等操作:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eonLeave\x3c\/code\x3e : 当我们离开某个路由时\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eonEnter\x3c\/code\x3e : 当我们进入某个路由时\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader24\x22\x3eNavigating Outside Of Components:组件外路由\x3c\/h2\x3e\n\x3cp\x3e如果我们在React Component组件外，譬如Reducer或者Service中需要进行路由跳转的时候，我们可以直接使用\x3ccode\x3ehistory\x3c\/code\x3e对象进行手动跳转:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ your main file that renders a Router\nimport { Router, browserHistory } from \x27react-router\x27\nimport routes from \x27.\/app\/routes\x27\nrender(\x3cRouter history={browserHistory} routes={routes}\/\x3e, el)\n\/\/ somewhere like a redux\/flux action file:\nimport { browserHistory } from \x27react-router\x27\nbrowserHistory.push(\x27\/some\/path\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ your main file that renders a Router\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Router, browserHistory } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e routes \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/app\/routes\x27\x3c\/span\x3e\nrender(\x26lt;Router history={browserHistory} routes={routes}\/\x26gt;, el)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ somewhere like a redux\/flux action file:\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { browserHistory } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e\nbrowserHistory.push(\x3cspan class=\x22hljs-string\x22\x3e\x27\/some\/path\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader25\x22\x3eAsync:异步路由加载\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22http:\/\/henleyedition.com\/implicit-code-splitting-with-react-router-and-webpack\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eimplicit-code-splitting-with-react-router-and-webpack\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader26\x22\x3eDynamic Routing Configuration:动态的路由配置\x3c\/h2\x3e\n\x3cp\x3e在介绍对于组件的异步加载之前，React Router也是支持对于路由配置文件的异步加载的。可以参考\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router\/tree\/master\/examples\/huge-apps\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehuge apps\x3c\/a\x3e以获得更详细的信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const CourseRoute = {\n  path: \x27course\/:courseId\x27,\n\n  getChildRoutes(partialNextState, callback) {\n    require.ensure([], function (require) {\n      callback(null, [\n        require(\x27.\/routes\/Announcements\x27),\n        require(\x27.\/routes\/Assignments\x27),\n        require(\x27.\/routes\/Grades\x27),\n      ])\n    })\n  },\n\n  getIndexRoute(partialNextState, callback) {\n    require.ensure([], function (require) {\n      callback(null, {\n        component: require(\x27.\/components\/Index\x27),\n      })\n    })\n  },\n\n  getComponents(nextState, callback) {\n    require.ensure([], function (require) {\n      callback(null, require(\x27.\/components\/Course\x27))\n    })\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CourseRoute = {\n  \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27course\/:courseId\x27\x3c\/span\x3e,\n\n  getChildRoutes(partialNextState, callback) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erequire\x3c\/span\x3e) \x3c\/span\x3e{\n      callback(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, [\n        \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Announcements\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Assignments\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Grades\x27\x3c\/span\x3e),\n      ])\n    })\n  },\n\n  getIndexRoute(partialNextState, callback) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erequire\x3c\/span\x3e) \x3c\/span\x3e{\n      callback(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, {\n        \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/components\/Index\x27\x3c\/span\x3e),\n      })\n    })\n  },\n\n  getComponents(nextState, callback) {\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.ensure([], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erequire\x3c\/span\x3e) \x3c\/span\x3e{\n      callback(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/components\/Course\x27\x3c\/span\x3e))\n    })\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader27\x22\x3eLazy Bundle Loading:块\/组件的懒加载\x3c\/h2\x3e\n\x3cp\x3eReact Router在其官方的\x3ca href=\x22https:\/\/github.com\/reactjs\/react-router\/tree\/master\/examples\/huge-apps\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehuge apps\x3c\/a\x3e介绍了一种基于Webpack的异步加载方案，不过其实完全直接使用了Webpack的\x3ccode\x3erequire.ensure\x3c\/code\x3e函数，这样导致了大量的冗余代码，并且导致了路由的逻辑被分散到了多个子文件夹中，其样例项目中的文件结构为:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── components\n├── routes\n│   ├── Calendar\n│   │   ├── components\n│   │   │   └── Calendar.js\n│   │   └── index.js\n│   ├── Course\n│   │   ├── components\n│   │   │   ├── Course.js\n│   │   │   ├── Dashboard.js\n│   │   │   └── Nav.js\n│   │   └── routes\n│   │       ├── Announcements\n│   │       │   ├── components\n│   │       │   │   ├── Announcements.js\n│   │       │   │   ├── Sidebar.js\n│   │       │   ├── routes\n│   │       │   │   └── Announcement\n│   │       │   │       ├── components\n│   │       │   │       │   └── Announcement\n│   │       │   │       └── index.js\n│   │       │   └── index.js\n│   │       ├── Assignments\n│   │       │   ├── components\n│   │       │   │   ├── Assignments.js\n│   │       │   │   ├── Sidebar.js\n│   │       │   ├── routes\n│   │       │   │   └── Assignment\n│   │       │   │       ├── components\n│   │       │   │       │   └── Assignment\n│   │       │   │       └── index.js\n│   │       │   └── index.js\n│   │       └── Grades\n│   │           ├── components\n│   │           │   └── Grades.js\n│   │           └── index.js\n│   ├── Grades\n│   │   ├── components\n│   │   │   └── Grades.js\n│   │   └── index.js\n│   ├── Messages\n│   │   ├── components\n│   │   │   └── Messages.js\n│   │   └── index.js\n│   └── Profile\n│       ├── components\n│       │   └── Profile.js\n│       └── index.js\n├── stubs\n└── app.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e├── components\n├── routes\n│   ├── Calendar\n│   │   ├── components\n│   │   │   └── Calendar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Course\n│   │   ├── components\n│   │   │   ├── Course\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   ├── Dashboard\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   └── Nav\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   └── routes\n│   │       ├── Announcements\n│   │       │   ├── components\n│   │       │   │   ├── Announcements\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   │   ├── Sidebar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   ├── routes\n│   │       │   │   └── Announcement\n│   │       │   │       ├── components\n│   │       │   │       │   └── Announcement\n│   │       │   │       └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       ├── Assignments\n│   │       │   ├── components\n│   │       │   │   ├── Assignments\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   │   ├── Sidebar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   ├── routes\n│   │       │   │   └── Assignment\n│   │       │   │       ├── components\n│   │       │   │       │   └── Assignment\n│   │       │   │       └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       │   └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │       └── Grades\n│   │           ├── components\n│   │           │   └── Grades\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │           └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Grades\n│   │   ├── components\n│   │   │   └── Grades\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Messages\n│   │   ├── components\n│   │   │   └── Messages\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   └── Profile\n│       ├── components\n│       │   └── Profile\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│       └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├── stubs\n└── app.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种结构下需要为每个组件写一个单独的index.js加载文件，毫无疑问会加大项目的冗余度。笔者建议是使用\x3ccode\x3ebundle-loader\x3c\/code\x3e来替代\x3ccode\x3erequire.ensure\x3c\/code\x3e，这样可以大大简化目前的代码。\x3ccode\x3ebundle-loader\x3c\/code\x3e是对于\x3ccode\x3erequire.ensuire\x3c\/code\x3e的抽象，并且能够大大屏蔽底层的实现。如果某个模块选择使用Bundle Loader进行打包，那么其会被打包到一个单独的Chunk中，并且Webpack会自动地为我们生成一个加载函数，从而使得在需要时以异步请求方式进行加载。我们可以选择删除所有子目录下的\x3ccode\x3eindex.js\x3c\/code\x3e文件，并且将文件结构进行扁平化处理:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── components\n├── routes\n│   ├── Calendar.js\n│   ├── Course\n│   │   ├── components\n│   │   │   ├── Dashboard.js\n│   │   │   └── Nav.js\n│   │   ├── routes\n│   │   │   ├── Announcements\n│   │   │   │   ├── routes\n│   │   │   │   │   └── Announcement.js\n│   │   │   │   ├── Announcements.js\n│   │   │   │   └── Sidebar.js\n│   │   │   ├── Assignments\n│   │   │   │   ├── routes\n│   │   │   │   │   └── Assignment.js\n│   │   │   │   ├── Assignments.js\n│   │   │   │   └── Sidebar.js\n│   │   │   └── Grades.js\n│   │   └── Course.js\n│   ├── Grades.js\n│   ├── Messages.js\n│   └── Profile.js\n├── stubs\n└── app.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e├── components\n├── routes\n│   ├── Calendar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Course\n│   │   ├── components\n│   │   │   ├── Dashboard\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   └── Nav\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   ├── routes\n│   │   │   ├── Announcements\n│   │   │   │   ├── routes\n│   │   │   │   │   └── Announcement\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   │   ├── Announcements\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   │   └── Sidebar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   ├── Assignments\n│   │   │   │   ├── routes\n│   │   │   │   │   └── Assignment\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   │   ├── Assignments\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   │   └── Sidebar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   │   └── Grades\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   │   └── Course\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Grades\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├── Messages\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   └── Profile\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├── stubs\n└── app.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们需要在我们的Webpack中配置如下专门的加载器:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ NOTE: this assumes you\x27re on a Unix system. You will\n\/\/ need to update this regex and possibly some other config\n\/\/ to get this working on Windows (but it can still work!)\nvar routeComponentRegex = \/routes\\\/([^\\\/]\x2b\\\/?[^\\\/]\x2b).js$\/  \n\n\nmodule.exports = {  \n  \/\/ ...rest of config...\n  modules: {\n    loaders: [\n      \/\/ make sure to exclude route components here\n      {\n        test: \/\\.js$\/,\n        include: path.resolve(__dirname, \x27src\x27),\n        exclude: routeComponentRegex,\n        loader: \x27babel\x27\n      },\n      \/\/ run route components through bundle-loader\n      {\n        test: routeComponentRegex,\n        include: path.resolve(__dirname, \x27src\x27),\n        loaders: [\x27bundle?lazy\x27, \x27babel\x27]\n      }\n    ]\n  }\n  \/\/ ...rest of config...\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3e\/\/ NOTE: this assumes you\x27re on a Unix system. You will\n\/\/ need to \x3cspan class=\x22hljs-keyword\x22\x3eupdate\x3c\/span\x3e this regex \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e possibly \x3cspan class=\x22hljs-keyword\x22\x3esome\x3c\/span\x3e other config\n\/\/ \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e this working \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e Windows (but it can still \x3cspan class=\x22hljs-keyword\x22\x3ework\x3c\/span\x3e!)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e routeComponentRegex = \/routes\\\/([^\\\/]\x2b\\\/?[^\\\/]\x2b).js$\/  \n\n\nmodule.exports = {  \n  \/\/ ...rest \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e config...\n  modules: {\n    loaders: [\n      \/\/ make sure \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eexclude\x3c\/span\x3e route components here\n      {\n        \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e: \/\\.js$\/,\n        \x3cspan class=\x22hljs-keyword\x22\x3einclude\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-keyword\x22\x3eexclude\x3c\/span\x3e: routeComponentRegex,\n        loader: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e\n      },\n      \/\/ run route components \x3cspan class=\x22hljs-keyword\x22\x3ethrough\x3c\/span\x3e bundle-loader\n      {\n        \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e: routeComponentRegex,\n        \x3cspan class=\x22hljs-keyword\x22\x3einclude\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n        loaders: [\x3cspan class=\x22hljs-string\x22\x3e\x27bundle?lazy\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e]\n      }\n    ]\n  }\n  \/\/ ...rest \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e config...\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述配置中是会将\x3ccode\x3eroutes\x3c\/code\x3e目录下的所有文件都进行异步打包加载，即将其从主Chunk中移除，而如果你需要指定某个单独的部分进行单独的打包，建议是如下配置:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n...module: {  loaders: [{\n    \/\/ use `test` to split a single file\n    \/\/ or `include` to split a whole folder    test: \/.*\/,\n    include: [path.resolve(__dirname, \x27pages\/admin\x27)],\n    loader: \x27bundle?lazy\x26amp;name=admin\x27\n   }]\n  \n}\n...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e{\n...module: {  loader\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [{\n    \/\/ use `test` \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esplit\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ea\x3c\/span\x3e single \x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e\n    \/\/ \x3cspan class=\x22hljs-built_in\x22\x3eor\x3c\/span\x3e `include` \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esplit\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ea\x3c\/span\x3e whole folder    tes\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e \/.*\/,\n    include: [path.\x3cspan class=\x22hljs-built_in\x22\x3eresolve\x3c\/span\x3e(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/admin\x27\x3c\/span\x3e)],\n    loader: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle?lazy\x26amp;name=admin\x27\x3c\/span\x3e\n   }]\n  \n}\n...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而后在\x3ccode\x3eapp.js\x3c\/code\x3e中，我们只需要用正常的ES6的语法引入组件:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Webpack is configured to create ajax wrappers around each of these modules.\n\/\/ Webpack will create a separate chunk for each of these imports (including\n\/\/ any dependencies)\nimport Course from \x27.\/routes\/Course\/Course\x27  \nimport AnnouncementsSidebar from \x27.\/routes\/Course\/routes\/Announcements\/Sidebar\x27  \nimport Announcements from \x27.\/routes\/Course\/routes\/Announcements\/Announcements\x27  \nimport Announcement from \x27.\/routes\/Course\/routes\/Announcements\/routes\/Announcement\x27  \nimport AssignmentsSidebar from \x27.\/routes\/Course\/routes\/Assignments\/Sidebar\x27  \nimport Assignments from \x27.\/routes\/Course\/routes\/Assignments\/Assignments\x27  \nimport Assignment from \x27.\/routes\/Course\/routes\/Assignments\/routes\/Assignment\x27  \nimport CourseGrades from \x27.\/routes\/Course\/routes\/Grades\x27  \nimport Calendar from \x27.\/routes\/Calendar\x27  \nimport Grades from \x27.\/routes\/Grades\x27  \nimport Messages from \x27.\/routes\/Messages\x27  \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3e\/\/ Webpack is configured to \x3cspan class=\x22hljs-keyword\x22\x3ecreate\x3c\/span\x3e ajax wrappers around \x3cspan class=\x22hljs-keyword\x22\x3eeach\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e these modules.\n\/\/ Webpack will \x3cspan class=\x22hljs-keyword\x22\x3ecreate\x3c\/span\x3e a separate \x3cspan class=\x22hljs-keyword\x22\x3echunk\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eeach\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e these imports (\x3cspan class=\x22hljs-keyword\x22\x3eincluding\x3c\/span\x3e\n\/\/ \x3cspan class=\x22hljs-keyword\x22\x3eany\x3c\/span\x3e dependencies)\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Course \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/Course\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e AnnouncementsSidebar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Announcements\/Sidebar\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Announcements \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Announcements\/Announcements\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Announcement \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Announcements\/routes\/Announcement\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e AssignmentsSidebar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Assignments\/Sidebar\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Assignments \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Assignments\/Assignments\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Assignment \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Assignments\/routes\/Assignment\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e CourseGrades \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Course\/routes\/Grades\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Calendar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Calendar\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Grades \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Grades\x27\x3c\/span\x3e  \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Messages \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/Messages\x27\x3c\/span\x3e  \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，这里引入的对象并不是组件本身，而是Webpack为我们提供的一些封装函数，当你真实地需要调用这些组件时，这些组件才会被异步加载进来。而我们在React Router中需要调用\x3ccode\x3eroute.getComponent\x3c\/code\x3e函数来异步加载这些组件，我们需要自定义封装一个加载函数:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nfunction lazyLoadComponents(lazyModules) {  \n  return (location, cb) =\x3e {\n    const moduleKeys = Object.keys(lazyModules);\n    const promises = moduleKeys.map(key =\x3e\n      new Promise(resolve =\x3e lazyModules[key](resolve))\n    )\n\n    Promise.all(promises).then(modules =\x3e {\n      cb(null, modules.reduce((obj, module, i) =\x3e {\n        obj[moduleKeys[i]] = module;\n        return obj;\n      }, {}))\n    })\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elazyLoadComponents\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3elazyModules\x3c\/span\x3e) \x3c\/span\x3e{  \n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3elocation, cb\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e moduleKeys = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(lazyModules);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e promises = moduleKeys.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e =\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e lazyModules[key](resolve))\n    )\n\n    \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all(promises).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3emodules\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      cb(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, modules.reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e, i\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        obj[moduleKeys[i]] = \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj;\n      }, {}))\n    })\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而最后的路由配置方案如下所示:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nrender(  \n  \x3cRouter history={ browserHistory }\x3e\n    \x3cRoute path=\x26quot;\/\x26quot; component={ App }\x3e\n      \x3cRoute path=\x26quot;calendar\x26quot; getComponent={ lazyLoadComponent(Calendar) } \/\x3e\n      \x3cRoute path=\x26quot;course\/:courseId\x26quot; getComponent={ lazyLoadComponent(Course) }\x3e\n        \x3cRoute path=\x26quot;announcements\x26quot; getComponents={ lazyLoadComponents({\n          sidebar: AnnouncementsSidebar,\n          main: Announcements\n        }) }\x3e\n          \x3cRoute path=\x26quot;:announcementId\x26quot; getComponent={ lazyLoadComponent(Announcement) } \/\x3e\n        \x3c\/Route\x3e\n        \x3cRoute path=\x26quot;assignments\x26quot; getComponents={ lazyLoadComponents({\n          sidebar: AssignmentsSidebar,\n          main: Assignments\n        }) }\x3e\n          \x3cRoute path=\x26quot;:assignmentId\x26quot; getComponent={ lazyLoadComponent(Assignment) } \/\x3e\n        \x3c\/Route\x3e\n        \x3cRoute path=\x26quot;grades\x26quot; getComponent={ lazyLoadComponent(CourseGrades) } \/\x3e\n      \x3c\/Route\x3e\n      \x3cRoute path=\x26quot;grades\x26quot; getComponent={ lazyLoadComponent(Grades) } \/\x3e\n      \x3cRoute path=\x26quot;messages\x26quot; getComponent={ lazyLoadComponent(Messages) } \/\x3e\n      \x3cRoute path=\x26quot;profile\x26quot; getComponent={ lazyLoadComponent(Calendar) } \/\x3e\n    \x3c\/Route\x3e\n  \x3c\/Router\x3e,\n  document.getElementById(\x27example\x27)\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\nrender(  \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehistory\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ebrowserHistory\x3c\/span\x3e }\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eApp\x3c\/span\x3e }\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22calendar\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eCalendar\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22course\/:courseId\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eCourse\x3c\/span\x3e) }\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22announcements\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponents\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponents\x3c\/span\x3e({\n          \x3cspan class=\x22hljs-attr\x22\x3esidebar:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eAnnouncementsSidebar\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3emain:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eAnnouncements\x3c\/span\x3e\n        }) }\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22:announcementId\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eAnnouncement\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22assignments\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponents\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponents\x3c\/span\x3e({\n          \x3cspan class=\x22hljs-attr\x22\x3esidebar:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eAssignmentsSidebar\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3emain:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eAssignments\x3c\/span\x3e\n        }) }\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22:assignmentId\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eAssignment\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22grades\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eCourseGrades\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22grades\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eGrades\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22messages\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eMessages\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22profile\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3egetComponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elazyLoadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3eCalendar\x3c\/span\x3e) } \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRoute\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eRouter\x3c\/span\x3e\x26gt;\x3c\/span\x3e,\n  document.getElementById(\x27example\x27)\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你需要支持服务端渲染，那么需要进行下判断:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nfunction loadComponent(module) {  \n  return __CLIENT__\n    ? lazyLoadComponent(module)\n    : (location, cb) =\x3e cb(null, module);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eloadComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emodule\x3c\/span\x3e) \x3c\/span\x3e{  \n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e __CLIENT__\n    ? lazyLoadComponent(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e)\n    : \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3elocation, cb\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e cb(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006767239\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006767239\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React Router最新指南与异步加载实践</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006063554">https://segmentfault.com/a/1190000006063554</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/paxgwd3ar39/" target="_blank">https://alili.tech/archive/paxgwd3ar39/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>