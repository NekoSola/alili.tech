<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端临床手札——webpack构建逐步解构（上）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端临床手札——webpack构建逐步解构（上） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qtv4tolsale/",
				"appid": "1613049289050283", 
				"title": "前端临床手札——webpack构建逐步解构（上） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9gihavqse1/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8h6t08q672/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&text=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&text=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&title=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&title=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&title=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&title=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqtv4tolsale%2f&title=%e5%89%8d%e7%ab%af%e4%b8%b4%e5%ba%8a%e6%89%8b%e6%9c%ad%e2%80%94%e2%80%94webpack%e6%9e%84%e5%bb%ba%e9%80%90%e6%ad%a5%e8%a7%a3%e6%9e%84%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端临床手札——webpack构建逐步解构（上）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e由于博主最近又闲下来了，之前觉得webpack的官方文档比较难啃一直放到现在。细心阅读多个webpack配置案例后觉得还是得自己写个手脚架，当然这个案例是基于vue的，但是并不影响你使用其他库（jquery这些）。文章会逐步分析每个处理的用意（当然是博主自己的理解），不足之处欢迎指出沟通交流。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e案例\x3c\/h1\x3e\n\x3cp\x3e一个通用简单的手脚架，只需修改简单配置就可使用，同时满足多页面需求。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emultiple-page-vue-webpack-example\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e最近添加了雪碧图功能，并把\x3ccode\x3esass-loader\x3c\/code\x3e替换成\x3ccode\x3epostcss\x3c\/code\x3e的\x3ccode\x3epress\x3c\/code\x3e，详细可以看分支\x3ccode\x3edevelop\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e使用\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# 安装依赖\n$ npm i\n\n# 运行本地服务，访问 http:\/\/localhost:6002 进行开发调试\n$ npm run dev\n\n# 构建发行版本到.\/dist目录\n$ npm run build\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e# 安装依赖\x3c\/span\x3e\n$ npm i\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 运行本地服务，访问 http:\/\/localhost:6002 进行开发调试\x3c\/span\x3e\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e dev\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 构建发行版本到.\/dist目录\x3c\/span\x3e\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e build\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e目录结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22build\/         #构建配置目录\nsrc\/           #源代码目录\n    clients\/   #入口文件\n    imports\/   #js代码目录，此为js引入的root目录\n    styles\/    #全局样式目录\n    templates\/ #页面模板文件（建议和入口文件名字对应）\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vbnet\x22\x3e\x3ccode\x3ebuild\/         \x3cspan class=\x22hljs-meta\x22\x3e#构建配置目录\x3c\/span\x3e\nsrc\/           \x3cspan class=\x22hljs-meta\x22\x3e#源代码目录\x3c\/span\x3e\n    clients\/   \x3cspan class=\x22hljs-meta\x22\x3e#入口文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eimports\x3c\/span\x3e\/   \x3cspan class=\x22hljs-meta\x22\x3e#js代码目录，此为js引入的root目录\x3c\/span\x3e\n    styles\/    \x3cspan class=\x22hljs-meta\x22\x3e#全局样式目录\x3c\/span\x3e\n    templates\/ \x3cspan class=\x22hljs-meta\x22\x3e#页面模板文件（建议和入口文件名字对应）\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e分析案例\x3c\/h1\x3e\n\x3cp\x3e乍看案例\x3ccode\x3ebuild\x3c\/code\x3e目录下代码挺多的，而且很多刚入手webpack的人都会瞬间懵逼。但是如果逐步分析理解后就会发觉其实还挺简单易懂，下面先介绍一下每个文件作用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/build\n    build.js               #构建生产代码\n    config.js              #配置\n    dev-client.js \n    dev-server.js          #执行本地服务器\n    utils.js               #额外的通用方法\n    webpack.base.conf.js   #默认的webpack配置\n    webpack.dev.conf.js    #本地开发的webpack配置\n    webpack.prod.conf.js   #构建生产的webpack配置\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\/build\n    build\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e               #构建生产代码\n    config\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e              #配置\n    dev-client\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \n    dev-server\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e          #执行本地服务器\n    utils\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e               #额外的通用方法\n    webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.base\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e   #默认的webpack配置\n    webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.dev\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    #本地开发的webpack配置\n    webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.prod\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e   #构建生产的webpack配置\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e工作流程\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCT2m?w=793\x26amp;h=410\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCT2m?w=793\x26amp;h=410\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e本地测试\x3c\/h3\x3e\n\x3cp\x3e结合上面流程图和\x3ccode\x3ebuild\x3c\/code\x3e目录下的文件介绍能看出主要webpack本地测试建立在\x3ccode\x3ewebpack\x3c\/code\x3e和\x3ccode\x3eexpress\x3c\/code\x3e两个工具上面。\x3c\/p\x3e\n\x3cp\x3e首先我们执行下面代码，能得到一个测试服务器，并能在浏览器预览到我们的代码效果\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm run dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e dev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打开\x3ccode\x3epackage.json\x3c\/code\x3e 找到\x3ccode\x3escripts\x3c\/code\x3e能看到实际执行的是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ node build\/dev-server.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e$ \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebuild\x3c\/span\x3e\/dev-server.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来就先从\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/dev-server.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edev-server.js\x3c\/a\x3e开始分析\x3c\/p\x3e\n\x3cp\x3e打开\x3ccode\x3edev-server.js\x3c\/code\x3e能看到引用这些核心依赖\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e.\/config\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e.\/webpack.dev.conf\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewebpack\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eexpress\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewebpack-dev-middleware\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewebpack-hot-middleware\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3econnect-history-api-fallback\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e前两个是配置文件，\x3ccode\x3ewebpack\x3c\/code\x3e和\x3ccode\x3eexpress\x3c\/code\x3e就不用多说了，主要看剩下那三个。\x3c\/p\x3e\n\x3ch4\x3ewebpack-dev-middleware\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3ewebpack-dev-middleware\x3c\/code\x3e 是一个结合了\x3ccode\x3ewebpack\x3c\/code\x3e配置的\x3ccode\x3eexpress\x3c\/code\x3e中间件插件(不熟悉\x3ccode\x3eexpress\x3c\/code\x3e的可以看\x3ca href=\x22http:\/\/expressjs.com\/zh-cn\/guide\/using-middleware.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e)，哪他都干了些什么呢？\x3ca href=\x22https:\/\/github.com\/webpack\/webpack-dev-middleware#what-is-it\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e是这样说的：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e这是一个简单webpack中间件。它提供一个连接服务器并处理访问webpack中的文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewebpack中的文件寄存在内存，不会生成文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果在观测模式下修改的文件，中间件不再提供旧包，但会延迟请求，直到编译完成，在文件变化后页面刷新之前你无需等待。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e简单来说就是提供一个可以让你访问经过webpack处理后的服务，然后看一下\x3ccode\x3edev-server.js\x3c\/code\x3e下这块的代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const compiler = webpack(webpackConfig)\n\nconst devMiddleware = require(\x27webpack-dev-middleware\x27)(compiler, {\n  publicPath: \x27\/\x27, \n  stats: {\n    colors: true,\n    chunks: false\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3ecompiler\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3ewebpack(webpackConfig)\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-string\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3edevMiddleware\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3erequire(\x27webpack-dev-middleware\x27)(compiler,\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e  publicPath:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e \n\x3cspan class=\x22hljs-attr\x22\x3e  stats:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    colors:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    chunks:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e})\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ecompiler\x3c\/code\x3e就是webpack实例，然后这里的说明一下\x3ccode\x3epublicPath\x3c\/code\x3e其实是访问的目录根，如果改为\x3ccode\x3e\/app\/\x3c\/code\x3e那么你访问的地址就必须是\x3ccode\x3ehttp:\/\/localhost:6002\/app\/index.html\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3ewebpack-hot-middleware\x3c\/h4\x3e\n\x3cp\x3e使用它的目的是让代码变化时能更新代码而无需刷新整个页面，但是这块配置就较为繁琐。除了需要在\x3ccode\x3eexpress\x3c\/code\x3e挂载这个中间件之外还得修改\x3ccode\x3ewebpack\x3c\/code\x3e配置。\x3c\/p\x3e\n\x3cp\x3e首先得在每个入口前加上\x3ccode\x3ewebpack-hot-middleware\/client\x3c\/code\x3e，还需要添加一下\x3ccode\x3eplugin\x3c\/code\x3e到\x3ccode\x3ewebpack\x3c\/code\x3e配置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 这块由于是多入口处理有点不同，后续解析多入口问题和为何使用\x27.\/build\/dev-client\x27而不是\x27webpack-hot-middleware\/client\x27\nObject.keys(webpackConfig.entry).forEach(function (name) {\n  webpackConfig.entry[name] = [\x27.\/build\/dev-client\x27].concat(webpackConfig.entry[name])\n})\n\nplugins: [\n    ...\n    \/\/ webpack 1.0\n    new webpack.optimize.OccurrenceOrderPlugin(),\n    \/\/ webpack 2.0\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoErrorsPlugin()\n    ...\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这块由于是多入口处理有点不同，后续解析多入口问题和为何使用\x27.\/build\/dev-client\x27而不是\x27webpack-hot-middleware\/client\x27\x3c\/span\x3e\nObject.keys(webpackConfig.entry).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3c\/span\x3e(name) {\n  webpackConfig.entry[name] = [\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build\/dev-client\x27\x3c\/span\x3e].concat(webpackConfig.entry[name])\n})\n\nplugins: \x3cspan class=\x22hljs-type\x22\x3e\x3c\/span\x3e[\n    ...\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 1.0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3ewebpack\x3c\/span\x3e.optimize.OccurrenceOrderPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 2.0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3ewebpack\x3c\/span\x3e.HotModuleReplacementPlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3ewebpack\x3c\/span\x3e.NoErrorsPlugin()\n    ...\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看到这类估计你会有所疑问，为何入口加上的是\x3ccode\x3e.\/build\/dev-client\x3c\/code\x3e而不是\x3ccode\x3ewebpack-hot-middleware\/client\x3c\/code\x3e？因为这里由于使用了\x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e而当修改了html我们需要它整个页面刷新，而写了个简单的处理，具体可以看\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/dev-client.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edev-client.js\x3c\/a\x3e，至于其他配置细节可以看\x3ca href=\x22https:\/\/github.com\/glenjamin\/webpack-hot-middleware#config\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch4\x3econnect-history-api-fallback\x3c\/h4\x3e\n\x3cp\x3e这个不多说一笔带过，就是让你的单页面路由处理更自然（比如vue-router的mode设置为html5时），具体看\x3ca href=\x22https:\/\/github.com\/bripkens\/connect-history-api-fallback\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e关于多页面处理\x3c\/h4\x3e\n\x3cp\x3e这里页面处理使用了\x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e插件处理，至于配置需要看三个地方，首先是入口配置\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/webpack.base.conf.js#L12\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack.base.conf.js\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let webpackConfig = {\n    entry: utils.getEntry(config.entry),\n    ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs roboconf\x22\x3e\x3ccode\x3elet webpackConfig = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eentry\x3c\/span\x3e: utils\x3cspan class=\x22hljs-variable\x22\x3e.getEntry\x3c\/span\x3e(config\x3cspan class=\x22hljs-variable\x22\x3e.entry\x3c\/span\x3e),\n    ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由于使用固定目录结构的关系，原理就是把\x3ccode\x3esrc\/clients\/\x3c\/code\x3e目录下的文件都视为入口文件加载到配置。\x3c\/p\x3e\n\x3cp\x3e还有模板处理\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/webpack.dev.conf.js#L34\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack.dev.conf.js\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22webpackConfig.plugins = [].concat(webpackConfig.plugins, utils.htmlLoaders(config.template, webpackConfig.entry))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ewebpackConfig\x3cspan class=\x22hljs-selector-class\x22\x3e.plugins\x3c\/span\x3e = [].concat(webpackConfig\x3cspan class=\x22hljs-selector-class\x22\x3e.plugins\x3c\/span\x3e, utils.htmlLoaders(config\x3cspan class=\x22hljs-selector-class\x22\x3e.template\x3c\/span\x3e, webpackConfig.entry))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e模板处理也是一样，这里建立与一个潜规则：\x3cstrong\x3e入口文件必须和模板文件的目录结构和名字一致\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e在这样的条件下，多页面处理就简单很多了，具体细节可看\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/utils.js#L65\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3eutils@getEntry()\x3c\/code\x3e\x3c\/a\x3e和\x3ca href=\x22https:\/\/github.com\/lpreterite\/multiple-page-vue-webpack-example\/blob\/master\/build\/utils.js#L86\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3eutils@htmlLoaders()\x3c\/code\x3e\x3c\/a\x3e。关于\x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e配置细节可看\x3ca href=\x22https:\/\/github.com\/ampedandwired\/html-webpack-plugin#configuration\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e后续将会补上构建生产的配置分析，\x3cem\x3e案例参考：vue-cli\x3c\/em\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006863919\x22\x3e前端临床手札——webpack构建逐步解构（下）\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端临床手札——webpack构建逐步解构（上）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006851575">https://segmentfault.com/a/1190000006851575</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qtv4tolsale/" target="_blank">https://alili.tech/archive/qtv4tolsale/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>