<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="精益 React 学习指南 （Lean React）- 2.4 webpack &#43; gulp 构建完整前端工作流"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>精益 React 学习指南 （Lean React）- 2.4 webpack &#43; gulp 构建完整前端工作流 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4mobbvoqxib/",
				"appid": "1613049289050283", 
				"title": "精益 React 学习指南 （Lean React）- 2.4 webpack &#43; gulp 构建完整前端工作流 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:59"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v8tqaky8zd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/jr7z99n3ttl/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&text=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&text=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&title=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&is_video=false&description=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&title=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&title=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&title=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mobbvoqxib%2f&title=%e7%b2%be%e7%9b%8a%20React%20%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%20%ef%bc%88Lean%20React%ef%bc%89-%202.4%20webpack%20%2b%20gulp%20%e6%9e%84%e5%bb%ba%e5%ae%8c%e6%95%b4%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">精益 React 学习指南 （Lean React）- 2.4 webpack &#43; gulp 构建完整前端工作流</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005136764\x22\x3e书籍完整目录\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e2.4 webpack \x2b gulp 构建完整前端工作流\x3c\/h1\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVxUol\x22 src=\x22https:\/\/static.alili.tech\/img\/bVxUol\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在前面的两个小节中已经完整的讲了 webpack 和 gulp 相关的内容，本小节中将会结合二者构建一个完整的前端工作流，内容目录为：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e前端工程结构和目标\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e前端工程目录结构\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp clean\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp copy\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp less\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp autoprefixer\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp webpack\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp eslint\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp watch\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp connect 和 livereload\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp mock server\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp test\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e2.4.1 前端工程结构和目标\x3c\/h2\x3e\n\x3cp\x3eReact 在大多数情况被当做当 SPA （单页面应用）的框架，实际上在真实业务开发过程中，非单页面应用的业务框架居多。所以我们在构建前端工程的时候，以多个页面的方式维护。下面定义前端工程的目标：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e基础技术\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3ereact(es6 \x2b jsx)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eless\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egulp \x2b webpack\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e应用模式\x3c\/h3\x3e\n\x3cp\x3e多页面应用：以多页面应用方式，能同时构建多个页面\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e样式结构\x3c\/h3\x3e\n\x3cp\x3e在样式的架构上的一些基本需求:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e基于 less 或者 sass 或者其他样式语言\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e基础库\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e共享变量和工具类\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e样式的设计上，大可归为两种方式：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e独立样式\x3c\/strong\x3e：样式的开发和其他代码尽量分离独立；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eInline Style\x3c\/strong\x3e：样式通过 javascript 变量维护，或者通过工具将 css 转化为 javascript，再应用到 React 的 style 中；\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e样式文件在工程中的位置也可以分为两种：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e逻辑样式隔离\x3c\/strong\x3e：javascript 文件和样式文件在不同的工程目录，这是传统的样式逻辑分离设计，符合大多数的业务场景；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3ecomponent pod\x3c\/strong\x3e：也就是一个组件的目录结构包括样式，逻辑和模板，在 React 中模板和逻辑是在一起的，也就是一个组件包括一个 \x3ccode\x3ecomponent.js\x3c\/code\x3e 和 \x3ccode\x3ecomponent.css\x3c\/code\x3e 。 这种模式的目的是出于组件的 \x3cstrong\x3e独立性\x3c\/strong\x3e，所以基于 pod 的组件好处是能够更好的共享，但坏处是和不方便共享变量和工具类（共享就会产生耦合，也就违背了 pod 的目的）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e所以在样式的设计上，我们应用如下这些设计：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e基于 Less\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eLess 相关的基础库和公共变量独立出来，变量主要是用于主题设置\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e样式统一放在 style 目录下面，业务组件需要共享变量，以非 pod 的方式设计样式，放置在 style 目录独立文件中，文件名称和组件名相同\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e需要独立的组件以 npm 的方式维护，样式以 pod 和 inline style 的方式设计\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e兼容的第三方库引入方式\x3c\/h3\x3e\n\x3cp\x3e在第三方库的引入上，可能以 bower_components 的方式，可能是自己公司内部维护的第三方库和基础组件，也可能是 npm 组件，所以为了兼容这些第三方库的引入，确定一下规范:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3evendor 目录下面放在第三方库，包括样式和逻辑，为了优化编译速度，这些目录的文件在编译的时候只做合并，避免和业务代码的编译做过多的耦合（vendor 库文件通常比较大）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ebower_components 中的库同 vendor\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3enpm 中的第三方库做代码分割，统一打包到 vendor.bundle.js 中\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e配置自动化\x3c\/h3\x3e\n\x3cp\x3e业务代码可能在不断增加，在工程 build 的时候，尽量以 glob 的方式匹配文件，避免增加一个业务文件就需要修改配置\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e高效的编译\x3c\/h3\x3e\n\x3cp\x3e代码编译的时间如果太长，会极大的影响开发体验，所以在编译的时候要考虑提高编译的效率：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e避免全局编译\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e增量编译：利用上一节介绍的 gulp-cached 和 gulp-remember\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e只在 prodution 的时候才做代码压缩优化\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e后端数据 mock 和代理\x3c\/h3\x3e\n\x3cp\x3e能够支持数据 mock 和代理功能\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e2.4.2 前端工程目录结构\x3c\/h2\x3e\n\x3cp\x3e基于这些目标定义如下工程结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── package.json                 \n├── README.md                    \n├── gulpfile.js                  \/\/ gulp 配置文件\n├── webpack.config.js            \/\/ webpack 配置文件\n├── doc                          \/\/ doc  目录：放置应用文档\n├── test                         \/\/ test 目录：测试文件\n├── dist                         \/\/ dist 目录：放置开发时候的临时打包文件\n├── bin                          \/\/ bin  目录：放置 prodcution 打包文件\n├── mocks                        \/\/ 数据 mock 相关  \n├── src                          \/\/ 源文件目录\n│\x26nbsp;\x26nbsp; ├── html                     \/\/ html 目录 \n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── index.html\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── page2.html\n│\x26nbsp;\x26nbsp; ├── js                       \/\/ js 目录 \n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── common               \/\/ 所有页面的共享区域，可能包含共享组件，共享工具类\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── home                 \/\/ home 页面 js 目录\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App.js\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── index.js         \/\/ 每个页面会有一个入口，统一为 index.js\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── page2                \/\/ page2 页面 js 目录\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App.js\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── index.js\n│\x26nbsp;\x26nbsp; └── style                    \/\/ style 目录\n│\x26nbsp;\x26nbsp;     ├── common               \/\/ 公共样式区域\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── varables.less    \/\/ 公共共享变量\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── index.less       \/\/ 公共样式入口\n│\x26nbsp;\x26nbsp;     ├── home                 \/\/ home 页面样式目录    \n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── components       \/\/ home 页面组件样式目录\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App.less \n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── index.less       \/\/ home 页面样式入口\n│\x26nbsp;\x26nbsp;     ├── page2                \/\/ page2 页面样式目录\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── components       \n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App.less\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; └── index.less       \n├── vendor\n│\x26nbsp;\x26nbsp; └── bootstrap\n└── └── jquery\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e.\n├── package\x3cspan class=\x22hljs-selector-class\x22\x3e.json\x3c\/span\x3e                 \n├── README\x3cspan class=\x22hljs-selector-class\x22\x3e.md\x3c\/span\x3e                    \n├── gulpfile\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ gulp 配置文件\x3c\/span\x3e\n├── webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.config\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 配置文件\x3c\/span\x3e\n├── doc                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ doc  目录：放置应用文档\x3c\/span\x3e\n├── test                         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ test 目录：测试文件\x3c\/span\x3e\n├── dist                         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ dist 目录：放置开发时候的临时打包文件\x3c\/span\x3e\n├── bin                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ bin  目录：放置 prodcution 打包文件\x3c\/span\x3e\n├── mocks                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据 mock 相关  \x3c\/span\x3e\n├── src                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 源文件目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; ├── \x3cspan class=\x22hljs-selector-tag\x22\x3ehtml\x3c\/span\x3e                     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ html 目录 \x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.html\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── page2\x3cspan class=\x22hljs-selector-class\x22\x3e.html\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; ├── js                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ js 目录 \x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── common               \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所有页面的共享区域，可能包含共享组件，共享工具类\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── home                 \x3cspan class=\x22hljs-comment\x22\x3e\/\/ home 页面 js 目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每个页面会有一个入口，统一为 index.js\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── page2                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ page2 页面 js 目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; └── style                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ style 目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── common               \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 公共样式区域\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── varables\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 公共共享变量\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 公共样式入口\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── home                 \x3cspan class=\x22hljs-comment\x22\x3e\/\/ home 页面样式目录    \x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── components       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ home 页面组件样式目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e \n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ home 页面样式入口\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── page2                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ page2 页面样式目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; ├── components       \n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── App\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     │\x26nbsp;\x26nbsp; └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.less\x3c\/span\x3e       \n├── vendor\n│\x26nbsp;\x26nbsp; └── bootstrap\n└── └── jquery\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e2.4.3 安装基础依赖\x3c\/h2\x3e\n\x3cp\x3e目录创建好过后，进入项目目录，安装 webpack ，gulp，react 相关的基础依赖\x3c\/p\x3e\n\x3cp\x3e\/\/ react 相关\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ cd project\n$ npm install react react-dom --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cmake\x22\x3e\x3ccode class=\x22shell\x22\x3e$ cd \x3cspan class=\x22hljs-keyword\x22\x3eproject\x3c\/span\x3e\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e react react-dom --save\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\/\/ webpack 相关\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install webpack-dev-server webpack --save-dev\n$ npm install babel-loader babel-preset-es2015 babel-preset-stage-0 babel-preset-react babel-polyfill --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode class=\x22shell\x22\x3e$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall \x3c\/span\x3ewebpack-dev-server webpack --save-dev\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-loader \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-preset-es2015 \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-preset-stage-0 \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-preset-react \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3ebabel-polyfill \x3c\/span\x3e--save-dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\/\/ gulp 相关\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install gulpjs\/gulp-cli -g\n$ npm install gulpjs\/gulp.git#4.0 --save-dev\n$ npm install gulp-util del gulp-rename gulp-less gulp-connect connect-rest@1.9.5  --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode class=\x22shell\x22\x3e$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e gulpjs\/gulp-cli -g\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e gulpjs\/gulp.git#\x3cspan class=\x22hljs-number\x22\x3e4.0\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e--save-dev\x3c\/span\x3e\n$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e gulp-util del gulp-\x3cspan class=\x22hljs-keyword\x22\x3erename\x3c\/span\x3e gulp-\x3cspan class=\x22hljs-keyword\x22\x3eless\x3c\/span\x3e gulp-\x3cspan class=\x22hljs-keyword\x22\x3econnect\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econnect\x3c\/span\x3e-rest@\x3cspan class=\x22hljs-number\x22\x3e1.9\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e--save-dev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e2.4.4 创建 gulpfile.js\x3c\/h2\x3e\n\x3cp\x3e创建 gulpfile.js 并全局定义打包源文件和打包目标相关的配置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ gulpfile.js\nvar gulp = require(\x26quot;gulp\x26quot;);\nvar gutil = require(\x26quot;gulp-util\x26quot;);\nvar src = {\n  \/\/ html 文件\n  html: \x26quot;src\/html\/*.html\x26quot;,                          \n  \/\/ vendor 目录和 bower_components\n  vendor: [\x26quot;vendor\/**\/*\x26quot;, \x26quot;bower_components\/**\/*\x26quot;], \n  \/\/ style 目录下所有 xx\/index.less\n  style: \x26quot;src\/style\/*\/index.less\x26quot;,                 \n  \/\/ 图片等应用资源\n  assets: \x26quot;assets\/**\/*\x26quot;                             \n};\n\nvar dist = {\n  root: \x26quot;dist\/\x26quot;,\n  html: \x26quot;dist\/\x26quot;,\n  style: \x26quot;dist\/style\x26quot;,\n  vendor: \x26quot;dist\/vendor\x26quot;,\n  assets: \x26quot;dist\/assets\x26quot;\n};\n\nvar bin = {\n  root: \x26quot;bin\/\x26quot;,\n  html: \x26quot;bin\/\x26quot;,\n  style: \x26quot;bin\/style\x26quot;,\n  vendor: \x26quot;bin\/vendor\x26quot;,\n  assets: \x26quot;bin\/assets\x26quot;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ gulpfile.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gulp = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22gulp\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gutil = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22gulp-util\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e src = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ html 文件\x3c\/span\x3e\n  html: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/html\/*.html\x22\x3c\/span\x3e,                          \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ vendor 目录和 bower_components\x3c\/span\x3e\n  vendor: [\x3cspan class=\x22hljs-string\x22\x3e\x22vendor\/**\/*\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22bower_components\/**\/*\x22\x3c\/span\x3e], \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ style 目录下所有 xx\/index.less\x3c\/span\x3e\n  style: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/style\/*\/index.less\x22\x3c\/span\x3e,                 \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片等应用资源\x3c\/span\x3e\n  assets: \x3cspan class=\x22hljs-string\x22\x3e\x22assets\/**\/*\x22\x3c\/span\x3e                             \n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dist = {\n  \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/style\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/vendor\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassets\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/assets\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bin = {\n  \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/style\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vendor\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassets\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/assets\x22\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e2.4.5 清理和拷贝任务\x3c\/h2\x3e\n\x3cp\x3e在每次启动 build 的时候，需要先清除之间的 build 结果，然后将最新的文件如 html, assets, vendor 这些文件拷贝到 dist 目录中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var del = require(\x26quot;del\x26quot;);\n\n\/**\n * clean build dir\n *\/\nfunction clean(done) {\n  del.sync(dist.root);\n  done();\n}\n\n\/**\n * [cleanBin description]\n * @return {[type]} [description]\n *\/\nfunction cleanBin(done) {\n  del.sync(bin.root);\n  done();\n}\n\n\/**\n * [copyVendor description]\n * @return {[type]} [description]\n *\/\nfunction copyVendor() {\n  return gulp.src(src.vendor)\n    .pipe(gulp.dest(dist.vendor));\n}\n\n\/**\n * [copyAssets description]\n * @return {[type]} [description]\n *\/\nfunction copyAssets() {\n  return gulp.src(src.assets)\n    .pipe(gulp.dest(dist.assets));\n}\n\n\/**\n * [copyDist description]\n * @return {[type]} [description]\n *\/\nfunction copyDist() {\n  return gulp.src(dist.root \x2b \x27**\/*\x27)\n    .pipe(gulp.dest(bin.root));\n}\n\n\/**\n * [html description]\n * @return {[type]} [description]\n *\/\nfunction html() {\n    return gulp.src(src.html)\n      .pipe(gulp.dest(dist.html))\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e del = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22del\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * clean build dir\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eclean\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  del.sync(dist.root);\n  done();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [cleanBin description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecleanBin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  del.sync(bin.root);\n  done();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyVendor description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyVendor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.vendor)\n    .pipe(gulp.dest(dist.vendor));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyAssets description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyAssets\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.assets)\n    .pipe(gulp.dest(dist.assets));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyDist description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyDist\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(dist.root \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27**\/*\x27\x3c\/span\x3e)\n    .pipe(gulp.dest(bin.root));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [html description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehtml\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.html)\n      .pipe(gulp.dest(dist.html))\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e2.4.6 样式转换\x3c\/h2\x3e\n\x3cp\x3e样式使用了 gulp-less 插件，其中需要注意的一点是，less 文件如果出错可能会将整个 build 进程结束，需要添加 error 时候的处理函数，同时也能自定义的输出 error 相关的信息，样式的转换使用了 autoprefixer 代码补全\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var less = require(\x27gulp-less\x27);\nvar autoprefixer = require(\x27gulp-autoprefixer\x27);\n\n\/**\n * [style description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nfunction style() {\n    return gulp.src(src.style)\n      .pipe(cached(\x27style\x27))\n      .pipe(less())\n      .on(\x27error\x27, handleError)\n      .pipe(autoprefixer({\n        browsers: [\x27last 3 version\x27]\n      }))\n      .pipe(gulp.dest(dist.style))\n}\n\nexports.style = style;\n\n\/**\n * [handleError description]\n * @param  {[type]} err [description]\n * @return {[type]}     [description]\n *\/\nfunction handleError(err) {\n  if (err.message) {\n    console.log(err.message)\n  } else {\n    console.log(err)\n  }\n  this.emit(\x27end\x27)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e less = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-less\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoprefixer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-autoprefixer\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [style description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estyle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.style)\n      .pipe(cached(\x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e))\n      .pipe(less())\n      .on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, handleError)\n      .pipe(autoprefixer({\n        \x3cspan class=\x22hljs-attr\x22\x3ebrowsers\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27last 3 version\x27\x3c\/span\x3e]\n      }))\n      .pipe(gulp.dest(dist.style))\n}\n\nexports.style = style;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [handleError description]\n * @param  {[type]} err [description]\n * @return {[type]}     [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehandleError\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err.message) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err.message)\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.emit(\x3cspan class=\x22hljs-string\x22\x3e\x27end\x27\x3c\/span\x3e)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行 gulp style 测试\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ gulp style\n[21:00:35] Starting \x27style\x27...\n[21:00:36] Finished \x27style\x27 after 87 ms\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs prolog\x22\x3e\x3ccode class=\x22shell\x22\x3e$ gulp style\n[\x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e00\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e35\x3c\/span\x3e] \x3cspan class=\x22hljs-symbol\x22\x3eStarting\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e...\n[\x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e00\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e] \x3cspan class=\x22hljs-symbol\x22\x3eFinished\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e after \x3cspan class=\x22hljs-number\x22\x3e87\x3c\/span\x3e ms\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ehome\/index.less\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * before\n *\/\nbody {\n  background: white;\n  color: #333;\n  transform: rotate(45deg);\n  display: flex;\n}\n\n\/**\n * after\n *\/\nbody {\n  background: white;\n  color: #333;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * before\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: white;\n  \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#333\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erotate\x3c\/span\x3e(45deg);\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: flex;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * after\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: white;\n  \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#333\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-transform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erotate\x3c\/span\x3e(45deg);\n      \x3cspan class=\x22hljs-attribute\x22\x3e-ms-transform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erotate\x3c\/span\x3e(45deg);\n          \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erotate\x3c\/span\x3e(45deg);\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: -webkit-flex;\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: -ms-flexbox;\n  \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: flex;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果需要做样式的 lint 可以通过 ，gulp-stylelint 来实现。\x3c\/p\x3e\n\x3cp\x3e更多信息可参考：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3egulp-autoprefixer: \x3ca href=\x22https:\/\/www.npmjs.com\/package\/gulp-autoprefixer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.npmjs.com\/package\/gulp-autoprefixer\x3c\/a\x3e\x3cbr\x3egulp-stylelint: \x3ca href=\x22https:\/\/github.com\/stylelint\/stylelint\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/stylelint\/stylelint\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e2.4.7 webpack 配置\x3c\/h2\x3e\n\x3cp\x3e首先创建 webpack.config.js，这里使用的一个技巧是使用 glob 动态添加 entry，让配置做到自动化。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ webpack.config.js\nvar webpack = require(\x26quot;webpack\x26quot;);\nconst glob = require(\x27glob\x27);\n\nvar config = {\n  entry: {\n    vendor: [\n      \x27react\x27,\n      \x27react-dom\x27\n    ]\n  },\n  output: {\n    path: __dirname \x2b \x27\/dist\/js\/\x27,\n    filename: \x27[name].js\x27\n  },\n  module: {\n    loaders: [\n      {\n        test: \/\\.js$\/,\n        exclude: \/node_modules\/,\n        loader: \x27babel\x27,\n        query: { presets: [ \x27es2015\x27, \x27stage-0\x27, \x27react\x27 ] }\n      }\n    ]\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin(\x27vendor\x27, \x27vendor.bundle.js\x27)\n  ]\n};\n\n\/**\n * find entries\n *\/\nvar files = glob.sync(\x27.\/src\/js\/*\/index.js\x27);\nvar newEntries = files.reduce(function(memo, file) {\n  var name = \/.*\\\/(.*?)\\\/index\\.js\/.exec(file)[1];\n  memo[name] = entry(name);\n  return memo;\n}, {});\n\nconfig.entry = Object.assign({}, config.entry, newEntries);\n\n\/**\n * [entry description]\n * @param  {[type]} name [description]\n * @return {[type]}      [description]\n *\/\nfunction entry(name) {\n  return \x27.\/src\/js\/\x27 \x2b name \x2b \x27\/index.js\x27;\n}\n\nmodule.exports = config;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e glob = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27glob\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\n      \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e\n    ]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: __dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/dist\/js\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3epresets\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x27es2015\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27stage-0\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e ] }\n      }\n    ]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor.bundle.js\x27\x3c\/span\x3e)\n  ]\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * find entries\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e files = glob.sync(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/js\/*\/index.js\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newEntries = files.reduce(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ememo, file\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = \x3cspan class=\x22hljs-regexp\x22\x3e\/.*\\\/(.*?)\\\/index\\.js\/\x3c\/span\x3e.exec(file)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n  memo[name] = entry(name);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e memo;\n}, {});\n\nconfig.entry = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, config.entry, newEntries);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [entry description]\n * @param  {[type]} name [description]\n * @return {[type]}      [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eentry\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/js\/\x27\x3c\/span\x3e \x2b name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/index.js\x27\x3c\/span\x3e;\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = config;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 gulpfile 中定义 webpack 任务，因为 webpack.config.js 为一个 node 模块，可直接引入，\x3cbr\x3e又因为在 production 环境和 development 环境的模式是不同的，可以定义两个不同的任务：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * [webpack 相关的依赖]\n * @type {[type]}\n *\/\nvar webpack = require(\x26quot;webpack\x26quot;);\nvar WebpackDevServer = require(\x26quot;webpack-dev-server\x26quot;);\nvar webpackConfig = require(\x26quot;.\/webpack.config.js\x26quot;);\n\n\/**\n * [webpackDevelopment description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nvar devConfig, devCompiler;\n\ndevConfig = Object.create(webpackConfig);\ndevConfig.devtool = \x26quot;sourcemap\x26quot;;\ndevConfig.debug = true;\ndevCompiler = webpack(devConfig);\n\nfunction webpackDevelopment(done) {\n  devCompiler.run(function(err, stats) {\n    if (err) {\n      throw new gutil.PluginError(\x26quot;webpack:build-dev\x26quot;, err);\n      return;\n    }\n    gutil.log(\x26quot;[webpack:build-dev]\x26quot;, stats.toString({\n      colors: true\n    }));\n    done();\n  });\n}\n\n\/**\n * [webpackProduction description]\n * production 任务中添加了压缩和打包优化组件，且没有 sourcemap\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nfunction webpackProduction(done) {\n  var config = Object.create(webpackConfig);\n  config.plugins = config.plugins.concat(\n    new webpack.DefinePlugin({\n      \x26quot;process.env\x26quot;: {\n        \x26quot;NODE_ENV\x26quot;: \x26quot;production\x26quot;\n      }\n    }),\n    new webpack.optimize.DedupePlugin(),\n    new webpack.optimize.UglifyJsPlugin()\n  );\n\n  webpack(config, function(err, stats) {\n    if(err) throw new gutil.PluginError(\x26quot;webpack:build\x26quot;, err);\n    gutil.log(\x26quot;[webpack:production]\x26quot;, stats.toString({\n      colors: true\n    }));\n    done();\n  });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [webpack 相关的依赖]\n * @type {[type]}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e WebpackDevServer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22.\/webpack.config.js\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [webpackDevelopment description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e devConfig, devCompiler;\n\ndevConfig = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(webpackConfig);\ndevConfig.devtool = \x3cspan class=\x22hljs-string\x22\x3e\x22sourcemap\x22\x3c\/span\x3e;\ndevConfig.debug = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\ndevCompiler = webpack(devConfig);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewebpackDevelopment\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  devCompiler.run(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e gutil.PluginError(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack:build-dev\x22\x3c\/span\x3e, err);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    gutil.log(\x3cspan class=\x22hljs-string\x22\x3e\x22[webpack:build-dev]\x22\x3c\/span\x3e, stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }));\n    done();\n  });\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [webpackProduction description]\n * production 任务中添加了压缩和打包优化组件，且没有 sourcemap\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewebpackProduction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(webpackConfig);\n  config.plugins = config.plugins.concat(\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x22process.env\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x22NODE_ENV\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22production\x22\x3c\/span\x3e\n      }\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.DedupePlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin()\n  );\n\n  webpack(config, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e gutil.PluginError(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack:build\x22\x3c\/span\x3e, err);\n    gutil.log(\x3cspan class=\x22hljs-string\x22\x3e\x22[webpack:production]\x22\x3c\/span\x3e, stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }));\n    done();\n  });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e2.4.8 javascript lint\x3c\/h2\x3e\n\x3cp\x3e为了能够 lint Es6 和 jsx 的 javascript ，可以基于 Eslint 来实现，Eslint 的基本配置：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e安装相关依赖\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install eslint eslint-loader eslint-plugin-react  --save-dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode class=\x22shell\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e eslint eslint-loader eslint-\x3cspan class=\x22hljs-keyword\x22\x3eplugin\x3c\/span\x3e-react  \x3cspan class=\x22hljs-comment\x22\x3e--save-dev\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e添加 .eslintrc 配置文件\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \/\/ Extend existing configuration\n  \/\/ from ESlint and eslint-plugin-react defaults.\n  \x26quot;extends\x26quot;: [\n    \x26quot;eslint:recommended\x26quot;, \n    \x26quot;plugin:react\/recommended\x26quot;\n  ],\n  \/\/ Enable ES6 support. If you want to use custom Babel\n  \/\/ features, you will need to enable a custom parser\n  \/\/ as described in a section below.\n  \x26quot;parserOptions\x26quot;: {\n    \x26quot;ecmaVersion\x26quot;: 6,\n    \x26quot;sourceType\x26quot;: \x26quot;module\x26quot;\n  },\n  \x26quot;env\x26quot;: {\n    \x26quot;browser\x26quot;: true,\n    \x26quot;node\x26quot;: true\n  },\n  \/\/ Enable custom plugin known as eslint-plugin-react\n  \x26quot;plugins\x26quot;: [\n    \x26quot;react\x26quot;\n  ],\n  \x26quot;rules\x26quot;: {\n    \/\/ Disable `no-console` rule\n    \x26quot;no-console\x26quot;: 0,\n    \/\/ Give a warning if identifiers contain underscores\n    \x26quot;no-underscore-dangle\x26quot;: 1,\n    \/\/ Default to single quotes and raise an error if something\n    \/\/ else is used\n    \x26quot;quotes\x26quot;: [2, \x26quot;single\x26quot;]\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \/\/ Extend existing configuration\n  \/\/ from ESlint and eslint-plugin-react defaults.\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22extends\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22eslint:recommended\x22\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-string\x22\x3e\x22plugin:react\/recommended\x22\x3c\/span\x3e\n  ],\n  \/\/ Enable ES6 support. If you want to use custom Babel\n  \/\/ features, you will need to enable a custom parser\n  \/\/ as described in a section below.\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22parserOptions\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22ecmaVersion\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22sourceType\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22module\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22env\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22browser\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22node\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  },\n  \/\/ Enable custom plugin known as eslint-plugin-react\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22rules\x22\x3c\/span\x3e: {\n    \/\/ Disable `no-console` rule\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22no-console\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \/\/ Give a warning if identifiers contain underscores\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22no-underscore-dangle\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    \/\/ Default to single quotes and raise an error if something\n    \/\/ else is used\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22quotes\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22single\x22\x3c\/span\x3e]\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e修改 webpack.config.js 配置\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在 webpack.config.js 中添加 preloaders (preloader 会在其他 loader 前应用)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module: {\n  preLoaders:[{\n    test: \/\\.js$\/, \n    loader: \x26quot;eslint-loader\x26quot;, \n    exclude: \/node_modules\/\n  }]\n},\neslint: {\n  configFile: \x27.\/.eslintrc\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-attr\x22\x3epreLoaders\x3c\/span\x3e:[{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22eslint-loader\x22\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e\n  }]\n},\n\x3cspan class=\x22hljs-attr\x22\x3eeslint\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-attr\x22\x3econfigFile\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/.eslintrc\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e测试\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e修改 index.js 添加如下的代码块：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const d = a ? b : c;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e d = a ? b : c;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行 webpack 测试\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack\n\nERROR in .\/src\/js\/home\/index.js\n.......\/src\/js\/home\/index.js\n  1:7   error  \x27d\x27 is defined but never used  no-unused-vars\n  1:11  error  \x27a\x27 is not defined             no-undef\n  1:15  error  \x27b\x27 is not defined             no-undef\n  1:19  error  \x27c\x27 is not defined             no-undef\n\n✖ 4 problems (4 errors, 0 warnings)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs perl\x22\x3e\x3ccode class=\x22shell\x22\x3e$ webpack\n\nERROR in .\/src\/js\/home\/index.js\n.......\/src\/js\/home\/index.js\n  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e   error  \x3cspan class=\x22hljs-string\x22\x3e\x27d\x27\x3c\/span\x3e is \x3cspan class=\x22hljs-keyword\x22\x3edefined\x3c\/span\x3e but never used  \x3cspan class=\x22hljs-keyword\x22\x3eno\x3c\/span\x3e-unused-vars\n  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e  error  \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e is \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefined\x3c\/span\x3e             \x3cspan class=\x22hljs-keyword\x22\x3eno\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3eundef\x3c\/span\x3e\n  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e  error  \x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e is \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefined\x3c\/span\x3e             \x3cspan class=\x22hljs-keyword\x22\x3eno\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3eundef\x3c\/span\x3e\n  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e19\x3c\/span\x3e  error  \x3cspan class=\x22hljs-string\x22\x3e\x27c\x27\x3c\/span\x3e is \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefined\x3c\/span\x3e             \x3cspan class=\x22hljs-keyword\x22\x3eno\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3eundef\x3c\/span\x3e\n\n✖ \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e problems (\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e errors, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e warnings)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多的 eslint 的定义可以参考官网：\x3ca href=\x22http:\/\/eslint.org\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/eslint.org\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e2.4.9 自动刷新和数据 mock\x3c\/h2\x3e\n\x3cp\x3e代码的自动刷新用到了 gulp-connect 插件，并通过 connect-rest 模块实现 rest 接口的数据 mock。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * [connectServer description]\n * @return {[type]} [description]\n *\/\nfunction connectServer(done) {\n  connect.server({\n      root: dist.root,\n      port: 8080,\n      livereload: true,\n      middleware: function(connect, opt) {\n        return [rest.rester({\n          context: \x26quot;\/\x26quot;\n        })]\n      }\n  });\n  mocks(rest);\n  done();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [connectServer description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econnectServer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  connect.server({\n      \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: dist.root,\n      \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3elivereload\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emiddleware\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3econnect, opt\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [rest.rester({\n          \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e\n        })]\n      }\n  });\n  mocks(rest);\n  done();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3emocks 目录下面定义了一个 index.js 如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * [mocks]\n * @param  {[type]} app [description]\n * @return {[type]}     [description]\n *\/\nmodule.exports = function(app) {\n    app.get(\x26quot;rest\x26quot;, function(req, content, callback) {\n        setTimeout(function() {\n            callback(null, {\n                a: 1,\n                b: 2\n            });\n        }, 500)\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [mocks]\n * @param  {[type]} app [description]\n * @return {[type]}     [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eapp\x3c\/span\x3e) \x3c\/span\x3e{\n    app.get(\x3cspan class=\x22hljs-string\x22\x3e\x22rest\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, content, callback\x3c\/span\x3e) \x3c\/span\x3e{\n        setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            callback(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, {\n                \x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n            });\n        }, \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e)\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3econnect-rest 不仅可以做数据 mock 的 rest 接口，同时也能实现 proxy 转发。更多可参见 \x3ca href=\x22https:\/\/github.com\/imrefazekas\/connect-rest\/tree\/v2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/imrefazekas\/connect-rest\/tree\/v2\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e需要注意的是 connect-rest 用到的版本为 1.9.5, 高版本不兼容。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3e2.4.10 代码监控\x3c\/h2\x3e\n\x3cp\x3e为了能够监控文件改变能实现自动刷新，还需要通过定义 watch 任务，监控文件的改变。 这里使用到了一个 trick，只监控 dist 目录的文件，如果该目录文件改变了，使用 pipe 的方式调用 connect.reload(), 直接调用不会自动刷新\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * [watch description]\n * @return {[type]} [description]\n *\/\nfunction watch() {\n  gulp.watch(src.html, html);\n  gulp.watch(\x26quot;src\/**\/*.js\x26quot;, webpackDevelopment);\n  gulp.watch(\x26quot;src\/**\/*.less\x26quot;, style);\n  gulp.watch(\x26quot;dist\/**\/*\x26quot;).on(\x27change\x27, function(file) {\n    gulp.src(\x27dist\/\x27)\n      .pipe(connect.reload());\n  });\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [watch description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewatch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  gulp.watch(src.html, html);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22src\/**\/*.js\x22\x3c\/span\x3e, webpackDevelopment);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22src\/**\/*.less\x22\x3c\/span\x3e, style);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22dist\/**\/*\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27change\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efile\x3c\/span\x3e) \x3c\/span\x3e{\n    gulp.src(\x3cspan class=\x22hljs-string\x22\x3e\x27dist\/\x27\x3c\/span\x3e)\n      .pipe(connect.reload());\n  });\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3e2.4.11 任务编排\x3c\/h2\x3e\n\x3cp\x3e最后将之前定义的任务通过 parallel 和 series 方法进行编排， 默认任务为开发任务，build 任务为 production 任务\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * default task\n *\/\ngulp.task(\x26quot;default\x26quot;, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackDevelopment), \n  connectServer, \n  watch\n));\n\n\/** \n * production build task\n *\/\ngulp.task(\x26quot;build\x26quot;, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackProduction), \n  cleanBin, \n  copyDist, \n  function(done) {\n    console.log(\x27build success\x27);\n    done();\n  }\n));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * default task\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x22default\x22\x3c\/span\x3e, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackDevelopment), \n  connectServer, \n  watch\n));\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/** \n * production build task\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackProduction), \n  cleanBin, \n  copyDist, \n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27build success\x27\x3c\/span\x3e);\n    done();\n  }\n));\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e2.4.12 webpack-dev-server vs gulp-connect\x3c\/h2\x3e\n\x3cp\x3e在 webpack 小节也介绍过 webpack-dev-server 可以实现自动刷新并能实现局部的热加载 ，那为什么不使用 webpack-dev-server 而是使用 gulp-connect？\x3c\/p\x3e\n\x3cp\x3e我的观点是对于一般的项目来说两者都可以使用，甚至可以只使用 webpack 就能完整工程构建任务，但是引入了 gulp 过后，能够更加清晰可控的编排任务，通过使用 gulp-connect 能够很方便的通过中间件的方式实现数据 mock，并且也能和 gulp.watch 整合。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader20\x22\x3e附件：完整代码\x3c\/h2\x3e\n\x3cp\x3e\/\/ webpack.config.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x26quot;webpack\x26quot;);\nconst glob = require(\x27glob\x27);\nvar config = {\n    entry: {\n        vendor: [\x27react\x27, \x27react-dom\x27]\n    },\n    output: {\n        path: __dirname \x2b \x27\/dist\/js\/\x27,\n        filename: \x27[name].js\x27\n    },\n    module: {\n        loaders: [{\n            test: \/\\.js$\/,\n            exclude: \/node_modules\/,\n            loader: \x27babel\x27,\n            query: {\n                presets: [\x27es2015\x27, \x27stage-0\x27, \x27react\x27]\n            }\n        }],\n        preLoaders:[{\n            test: \/\\.js$\/, \n            loader: \x26quot;eslint-loader\x26quot;, \n            exclude: \/node_modules\/\n        }],\n    },\n    plugins: [\n        new webpack.optimize.CommonsChunkPlugin(\x27vendor\x27, \x27vendor.bundle.js\x27)\n    ],\n    eslint: {\n        configFile: \x27.\/.eslintrc\x27\n    }\n};\n\/**\n * find entries\n *\/\nvar files = glob.sync(\x27.\/src\/js\/*\/index.js\x27);\nvar newEntries = files.reduce(function(memo, file) {\n    var name = \/.*\\\/(.*?)\\\/index\\.js\/.exec(file)[1];\n    memo[name] = entry(name);\n    return memo;\n}, {});\nconfig.entry = Object.assign({}, config.entry, newEntries);\n\/**\n * [entry description]\n * @param  {[type]} name [description]\n * @return {[type]}      [description]\n *\/\nfunction entry(name) {\n    return \x27.\/src\/js\/\x27 \x2b name \x2b \x27\/index.js\x27;\n}\nmodule.exports = config;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e glob = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27glob\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = {\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e]\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: __dirname \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/dist\/js\/\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [{\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3epresets\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27es2015\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27stage-0\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e]\n            }\n        }],\n        \x3cspan class=\x22hljs-attr\x22\x3epreLoaders\x3c\/span\x3e:[{\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e, \n            \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22eslint-loader\x22\x3c\/span\x3e, \n            \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e\n        }],\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor.bundle.js\x27\x3c\/span\x3e)\n    ],\n    \x3cspan class=\x22hljs-attr\x22\x3eeslint\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3econfigFile\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/.eslintrc\x27\x3c\/span\x3e\n    }\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * find entries\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e files = glob.sync(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/js\/*\/index.js\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newEntries = files.reduce(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ememo, file\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = \x3cspan class=\x22hljs-regexp\x22\x3e\/.*\\\/(.*?)\\\/index\\.js\/\x3c\/span\x3e.exec(file)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n    memo[name] = entry(name);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e memo;\n}, {});\nconfig.entry = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, config.entry, newEntries);\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [entry description]\n * @param  {[type]} name [description]\n * @return {[type]}      [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eentry\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/js\/\x27\x3c\/span\x3e \x2b name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/index.js\x27\x3c\/span\x3e;\n}\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = config;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\/\/ gulpfile.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * [gulp description]\n * @type {[type]}\n *\/\nvar gulp = require(\x26quot;gulp\x26quot;);\nvar gutil = require(\x26quot;gulp-util\x26quot;);\nvar del = require(\x26quot;del\x26quot;);\nvar rename = require(\x27gulp-rename\x27);\nvar less = require(\x27gulp-less\x27);\nvar autoprefixer = require(\x27gulp-autoprefixer\x27);\nvar cached = require(\x27gulp-cached\x27);\nvar remember = require(\x27gulp-remember\x27);\n\nvar webpack = require(\x26quot;webpack\x26quot;);\nvar WebpackDevServer = require(\x26quot;webpack-dev-server\x26quot;);\nvar webpackConfig = require(\x26quot;.\/webpack.config.js\x26quot;);\n\nvar connect = require(\x27gulp-connect\x27);\nvar rest = require(\x27connect-rest\x27);\nvar mocks = require(\x27.\/mocks\x27);\n\n\/**\n * ----------------------------------------------------\n * source configuration\n * ----------------------------------------------------\n *\/\n\nvar src = {\n  html: \x26quot;src\/html\/*.html\x26quot;,                          \/\/ html 文件\n  vendor: [\x26quot;vendor\/**\/*\x26quot;, \x26quot;bower_components\/**\/*\x26quot;], \/\/ vendor 目录和 bower_components\n  style: \x26quot;src\/style\/*\/index.less\x26quot;,                  \/\/ style 目录下所有 xx\/index.less\n  assets: \x26quot;assets\/**\/*\x26quot;                             \/\/ 图片等应用资源\n};\n\nvar dist = {\n  root: \x26quot;dist\/\x26quot;,\n  html: \x26quot;dist\/\x26quot;,\n  style: \x26quot;dist\/style\x26quot;,\n  vendor: \x26quot;dist\/vendor\x26quot;,\n  assets: \x26quot;dist\/assets\x26quot;\n};\n\nvar bin = {\n  root: \x26quot;bin\/\x26quot;,\n  html: \x26quot;bin\/\x26quot;,\n  style: \x26quot;bin\/style\x26quot;,\n  vendor: \x26quot;bin\/vendor\x26quot;,\n  assets: \x26quot;bin\/assets\x26quot;\n};\n\n\/**\n * ----------------------------------------------------\n *  tasks\n * ----------------------------------------------------\n *\/\n\n\/**\n * clean build dir\n *\/\nfunction clean(done) {\n  del.sync(dist.root);\n  done();\n}\n\n\/**\n * [cleanBin description]\n * @return {[type]} [description]\n *\/\nfunction cleanBin(done) {\n  del.sync(bin.root);\n  done();\n}\n\n\/**\n * [copyVendor description]\n * @return {[type]} [description]\n *\/\nfunction copyVendor() {\n  return gulp.src(src.vendor)\n    .pipe(gulp.dest(dist.vendor));\n}\n\n\/**\n * [copyAssets description]\n * @return {[type]} [description]\n *\/\nfunction copyAssets() {\n  return gulp.src(src.assets)\n    .pipe(gulp.dest(dist.assets));\n}\n\n\/**\n * [copyDist description]\n * @return {[type]} [description]\n *\/\nfunction copyDist() {\n  return gulp.src(dist.root \x2b \x27**\/*\x27)\n    .pipe(gulp.dest(bin.root));\n}\n\n\/**\n * [html description]\n * @return {[type]} [description]\n *\/\nfunction html() {\n    return gulp.src(src.html)\n      .pipe(gulp.dest(dist.html))\n}\n\n\/**\n * [style description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nfunction style() {\n    return gulp.src(src.style)\n      .pipe(cached(\x27style\x27))\n      .pipe(less())\n      .on(\x27error\x27, handleError)\n      .pipe(autoprefixer({\n        browsers: [\x27last 3 version\x27]\n      }))\n      .pipe(gulp.dest(dist.style))\n}\n\nexports.style = style;\n\n\/**\n * [webpackProduction description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nfunction webpackProduction(done) {\n  var config = Object.create(webpackConfig);\n  config.plugins = config.plugins.concat(\n    new webpack.DefinePlugin({\n      \x26quot;process.env\x26quot;: {\n        \x26quot;NODE_ENV\x26quot;: \x26quot;production\x26quot;\n      }\n    }),\n    new webpack.optimize.DedupePlugin(),\n    new webpack.optimize.UglifyJsPlugin()\n  );\n\n  webpack(config, function(err, stats) {\n    if(err) throw new gutil.PluginError(\x26quot;webpack:build\x26quot;, err);\n    gutil.log(\x26quot;[webpack:production]\x26quot;, stats.toString({\n      colors: true\n    }));\n    done();\n  });\n}\n\n\n\/**\n * [webpackDevelopment description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\nvar devConfig, devCompiler;\n\ndevConfig = Object.create(webpackConfig);\ndevConfig.devtool = \x26quot;sourcemap\x26quot;;\ndevConfig.debug = true;\ndevCompiler = webpack(devConfig);\n\nfunction webpackDevelopment(done) {\n  devCompiler.run(function(err, stats) {\n    if (err) {\n      throw new gutil.PluginError(\x26quot;webpack:build-dev\x26quot;, err);\n      return;\n    }\n    gutil.log(\x26quot;[webpack:build-dev]\x26quot;, stats.toString({\n      colors: true\n    }));\n    done();\n  });\n}\n\n\/**\n * webpack develop server\n *\/\n\/\/ devConfig.plugins = devConfig.plugins || []\n\/\/ devConfig.plugins.push(new webpack.HotModuleReplacementPlugin())\n\/\/ function webpackDevelopmentServer(done) {\n\/\/   new WebpackDevServer(devCompiler, {\n\/\/    contentBase: dist.root,\n\/\/     lazy: false,\n\/\/     hot: true\n\/\/   }).listen(8080, \x27localhost\x27, function (err) {\n\/\/     if (err) throw new gutil.PluginError(\x27webpack-dev-server\x27, err)\n\/\/     gutil.log(\x27[webpack-dev-server]\x27, \x27http:\/\/localhost:8080\/\x27)\n\/\/  reload();\n\/\/  done();\n\/\/   });\n\/\/ }\n\n\/**\n * [connectServer description]\n * @return {[type]} [description]\n *\/\nfunction connectServer(done) {\n  connect.server({\n      root: dist.root,\n      port: 8080,\n      livereload: true,\n      middleware: function(connect, opt) {\n        return [rest.rester({\n          context: \x26quot;\/\x26quot;\n        })]\n      }\n  });\n  mocks(rest);\n  done();\n}\n\n\/**\n * [watch description]\n * @return {[type]} [description]\n *\/\nfunction watch() {\n  gulp.watch(src.html, html);\n  gulp.watch(\x26quot;src\/**\/*.js\x26quot;, webpackDevelopment);\n  gulp.watch(\x26quot;src\/**\/*.less\x26quot;, style);\n  gulp.watch(\x26quot;dist\/**\/*\x26quot;).on(\x27change\x27, function(file) {\n    gulp.src(\x27dist\/\x27)\n      .pipe(connect.reload());\n  });\n}\n\n\/**\n * default task\n *\/\ngulp.task(\x26quot;default\x26quot;, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackDevelopment), \n  connectServer, \n  watch\n));\n\n\/** \n * production build task\n *\/\ngulp.task(\x26quot;build\x26quot;, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackProduction), \n  cleanBin, \n  copyDist, \n  function(done) {\n    console.log(\x27build success\x27);\n    done();\n  }\n));\n\n\/**\n * [handleError description]\n * @param  {[type]} err [description]\n * @return {[type]}     [description]\n *\/\nfunction handleError(err) {\n  if (err.message) {\n    console.log(err.message)\n  } else {\n    console.log(err)\n  }\n  this.emit(\x27end\x27)\n}\n\n\/**\n * [reload description]\n * @return {[type]} [description]\n *\/\nfunction reload() {\n  connect.reload();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [gulp description]\n * @type {[type]}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gulp = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22gulp\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gutil = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22gulp-util\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e del = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22del\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rename = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-rename\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e less = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-less\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoprefixer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-autoprefixer\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cached = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-cached\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e remember = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-remember\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e WebpackDevServer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22.\/webpack.config.js\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e connect = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27gulp-connect\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rest = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27connect-rest\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mocks = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/mocks\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * ----------------------------------------------------\n * source configuration\n * ----------------------------------------------------\n *\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e src = {\n  \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/html\/*.html\x22\x3c\/span\x3e,                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ html 文件\x3c\/span\x3e\n  vendor: [\x3cspan class=\x22hljs-string\x22\x3e\x22vendor\/**\/*\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22bower_components\/**\/*\x22\x3c\/span\x3e], \x3cspan class=\x22hljs-comment\x22\x3e\/\/ vendor 目录和 bower_components\x3c\/span\x3e\n  style: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/style\/*\/index.less\x22\x3c\/span\x3e,                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ style 目录下所有 xx\/index.less\x3c\/span\x3e\n  assets: \x3cspan class=\x22hljs-string\x22\x3e\x22assets\/**\/*\x22\x3c\/span\x3e                             \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片等应用资源\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dist = {\n  \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/style\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/vendor\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassets\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/assets\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bin = {\n  \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehtml\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/style\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vendor\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassets\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/assets\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * ----------------------------------------------------\n *  tasks\n * ----------------------------------------------------\n *\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * clean build dir\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eclean\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  del.sync(dist.root);\n  done();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [cleanBin description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecleanBin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  del.sync(bin.root);\n  done();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyVendor description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyVendor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.vendor)\n    .pipe(gulp.dest(dist.vendor));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyAssets description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyAssets\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.assets)\n    .pipe(gulp.dest(dist.assets));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [copyDist description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopyDist\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(dist.root \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27**\/*\x27\x3c\/span\x3e)\n    .pipe(gulp.dest(bin.root));\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [html description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehtml\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.html)\n      .pipe(gulp.dest(dist.html))\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [style description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estyle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gulp.src(src.style)\n      .pipe(cached(\x3cspan class=\x22hljs-string\x22\x3e\x27style\x27\x3c\/span\x3e))\n      .pipe(less())\n      .on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, handleError)\n      .pipe(autoprefixer({\n        \x3cspan class=\x22hljs-attr\x22\x3ebrowsers\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27last 3 version\x27\x3c\/span\x3e]\n      }))\n      .pipe(gulp.dest(dist.style))\n}\n\nexports.style = style;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [webpackProduction description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewebpackProduction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(webpackConfig);\n  config.plugins = config.plugins.concat(\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x22process.env\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x22NODE_ENV\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22production\x22\x3c\/span\x3e\n      }\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.DedupePlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin()\n  );\n\n  webpack(config, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e gutil.PluginError(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack:build\x22\x3c\/span\x3e, err);\n    gutil.log(\x3cspan class=\x22hljs-string\x22\x3e\x22[webpack:production]\x22\x3c\/span\x3e, stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }));\n    done();\n  });\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [webpackDevelopment description]\n * @param  {Function} done [description]\n * @return {[type]}        [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e devConfig, devCompiler;\n\ndevConfig = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(webpackConfig);\ndevConfig.devtool = \x3cspan class=\x22hljs-string\x22\x3e\x22sourcemap\x22\x3c\/span\x3e;\ndevConfig.debug = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\ndevCompiler = webpack(devConfig);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewebpackDevelopment\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  devCompiler.run(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e gutil.PluginError(\x3cspan class=\x22hljs-string\x22\x3e\x22webpack:build-dev\x22\x3c\/span\x3e, err);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    gutil.log(\x3cspan class=\x22hljs-string\x22\x3e\x22[webpack:build-dev]\x22\x3c\/span\x3e, stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }));\n    done();\n  });\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * webpack develop server\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ devConfig.plugins = devConfig.plugins || []\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ devConfig.plugins.push(new webpack.HotModuleReplacementPlugin())\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ function webpackDevelopmentServer(done) {\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/   new WebpackDevServer(devCompiler, {\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/    contentBase: dist.root,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     lazy: false,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     hot: true\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/   }).listen(8080, \x27localhost\x27, function (err) {\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     if (err) throw new gutil.PluginError(\x27webpack-dev-server\x27, err)\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     gutil.log(\x27[webpack-dev-server]\x27, \x27http:\/\/localhost:8080\/\x27)\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/  reload();\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/  done();\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/   });\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ }\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [connectServer description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econnectServer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n  connect.server({\n      \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: dist.root,\n      \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3elivereload\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emiddleware\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3econnect, opt\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [rest.rester({\n          \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e\n        })]\n      }\n  });\n  mocks(rest);\n  done();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [watch description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewatch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  gulp.watch(src.html, html);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22src\/**\/*.js\x22\x3c\/span\x3e, webpackDevelopment);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22src\/**\/*.less\x22\x3c\/span\x3e, style);\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x22dist\/**\/*\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27change\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efile\x3c\/span\x3e) \x3c\/span\x3e{\n    gulp.src(\x3cspan class=\x22hljs-string\x22\x3e\x27dist\/\x27\x3c\/span\x3e)\n      .pipe(connect.reload());\n  });\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * default task\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x22default\x22\x3c\/span\x3e, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackDevelopment), \n  connectServer, \n  watch\n));\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/** \n * production build task\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e, gulp.series(\n  clean, \n  gulp.parallel(copyAssets, copyVendor, html, style, webpackProduction), \n  cleanBin, \n  copyDist, \n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27build success\x27\x3c\/span\x3e);\n    done();\n  }\n));\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [handleError description]\n * @param  {[type]} err [description]\n * @return {[type]}     [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehandleError\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err.message) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err.message)\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.emit(\x3cspan class=\x22hljs-string\x22\x3e\x27end\x27\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * [reload description]\n * @return {[type]} [description]\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereload\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  connect.reload();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\/\/ .eslintrc\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \/\/ Extend existing configuration\n  \/\/ from ESlint and eslint-plugin-react defaults.\n  \x26quot;extends\x26quot;: [\n    \x26quot;eslint:recommended\x26quot;, \n    \x26quot;plugin:react\/recommended\x26quot;\n  ],\n  \/\/ Enable ES6 support. If you want to use custom Babel\n  \/\/ features, you will need to enable a custom parser\n  \/\/ as described in a section below.\n  \x26quot;parserOptions\x26quot;: {\n    \x26quot;ecmaVersion\x26quot;: 6,\n    \x26quot;sourceType\x26quot;: \x26quot;module\x26quot;\n  },\n  \x26quot;env\x26quot;: {\n    \x26quot;browser\x26quot;: true,\n    \x26quot;node\x26quot;: true\n  },\n  \/\/ Enable custom plugin known as eslint-plugin-react\n  \x26quot;plugins\x26quot;: [\n    \x26quot;react\x26quot;\n  ],\n  \x26quot;rules\x26quot;: {\n    \/\/ Disable `no-console` rule\n    \x26quot;no-console\x26quot;: 0,\n    \/\/ Give a warning if identifiers contain underscores\n    \x26quot;no-underscore-dangle\x26quot;: 1,\n    \/\/ Default to single quotes and raise an error if something\n    \/\/ else is used\n    \x26quot;quotes\x26quot;: [2, \x26quot;single\x26quot;]\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \/\/ Extend existing configuration\n  \/\/ from ESlint and eslint-plugin-react defaults.\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22extends\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22eslint:recommended\x22\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-string\x22\x3e\x22plugin:react\/recommended\x22\x3c\/span\x3e\n  ],\n  \/\/ Enable ES6 support. If you want to use custom Babel\n  \/\/ features, you will need to enable a custom parser\n  \/\/ as described in a section below.\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22parserOptions\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22ecmaVersion\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22sourceType\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22module\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22env\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22browser\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22node\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  },\n  \/\/ Enable custom plugin known as eslint-plugin-react\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22rules\x22\x3c\/span\x3e: {\n    \/\/ Disable `no-console` rule\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22no-console\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \/\/ Give a warning if identifiers contain underscores\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22no-underscore-dangle\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    \/\/ Default to single quotes and raise an error if something\n    \/\/ else is used\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22quotes\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22single\x22\x3c\/span\x3e]\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>精益 React 学习指南 （Lean React）- 2.4 webpack + gulp 构建完整前端工作流</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005657651">https://segmentfault.com/a/1190000005657651</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4mobbvoqxib/" target="_blank">https://alili.tech/archive/4mobbvoqxib/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>