<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用electron实现百度网盘悬浮窗口功能!"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用electron实现百度网盘悬浮窗口功能! | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/juvlt542pzf/",
				"appid": "1613049289050283", 
				"title": "使用electron实现百度网盘悬浮窗口功能! | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-13T02:31:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/i65eow0f0h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8pg1qg21xnv/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&text=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&text=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&title=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&is_video=false&description=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&title=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&title=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&title=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjuvlt542pzf%2f&title=%e4%bd%bf%e7%94%a8electron%e5%ae%9e%e7%8e%b0%e7%99%be%e5%ba%a6%e7%bd%91%e7%9b%98%e6%82%ac%e6%b5%ae%e7%aa%97%e5%8f%a3%e5%8a%9f%e8%83%bd%21"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用electron实现百度网盘悬浮窗口功能!</h1><div class="meta"><div class="postdate"><time datetime="2019-02-13" itemprop="datePublished">2019-02-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e相关依赖\x3c\/h2\x3e\n\x3cp\x3e里面使用了vuex  vue  vue-route storeJs\x3c\/p\x3e\n\x3cp\x3estoreJs 用来持久化vuex状态\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e展示\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbisuB?w=592\x26amp;h=424\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbisuB?w=592\x26amp;h=424\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbisvG?w=260\x26amp;h=263\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbisvG?w=260\x26amp;h=263\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e介绍说明\x3c\/h2\x3e\n\x3cp\x3e没有使用electron内置的\x3ccode\x3e-webkit-app-region: drag\x3c\/code\x3e 因为使用他那个有很多问题\x3cbr\x3e比如事件无法使用 右键无法使用 以及不能使用手型等!\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e安装\x3c\/h2\x3e\n\x3cp\x3e安装的时候没有截图 所以就参考下我其他的文章吧\x3cbr\x3estoreJs 安装\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install storejs\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cmake\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e storejs\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e准备写代码\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e配置路由文件\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default new Router({\n    routes: [\n        {path: \x27\/\x27, name: \x27home\x27, component: ()=\x3e import(\x27@\/view\/\/home\x27)},\n        {path: \x27\/suspension\x27, name: \x27suspension\x27, component: ()=\x3e import(\x27@\/view\/components\/suspension\x27)}\n    ]\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eRouter\x3c\/span\x3e({\n    \x3cspan class=\x22hljs-attribute\x22\x3eroutes\x3c\/span\x3e: [\n        {path: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x27home\x27\x3c\/span\x3e, component: ()=\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27@\/view\/\/home\x27\x3c\/span\x3e)},\n        {\x3cspan class=\x22hljs-attribute\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/suspension\x27\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x27suspension\x27\x3c\/span\x3e, component: ()=\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27@\/view\/components\/suspension\x27\x3c\/span\x3e)}\n    ]\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e写悬浮窗页面\x3c\/h3\x3e\n\x3cp\x3e页面路径 \x3ccode\x3e\/src\/renderer\/view\/components\/suspension.vue\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv id=\x26quot;suspension\x26quot;\x3e\n        \x3cdiv class=\x26quot;logo\x26quot;\x3e\x3c\/div\x3e\n        \x3cdiv class=\x26quot;content_body\x26quot;\x3e\n            \x3cdiv class=\x26quot;upload\x26quot;\x3e拖拽上传\x3c\/div\x3e\n        \x3c\/div\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\n    export default {\n        name: \x26quot;suspension\x26quot;,\n        mounted() {\n            let win = this.$electron.remote.getCurrentWindow();\n            let biasX = 0;\n            let biasY = 0;\n            let that = this;\n            document.addEventListener(\x27mousedown\x27, function (e) {\n                switch (e.button) {\n                    case 0:\n                        biasX = e.x;\n                        biasY = e.y;\n                        document.addEventListener(\x27mousemove\x27, moveEvent);\n                        break;\n                    case 2:\n                        that.$electron.ipcRenderer.send(\x27createSuspensionMenu\x27);\n                        break;\n                }\n            });\n\n            document.addEventListener(\x27mouseup\x27, function () {\n                biasX = 0;\n                biasY = 0;\n                document.removeEventListener(\x27mousemove\x27, moveEvent)\n            });\n\n            function moveEvent(e) {\n                win.setPosition(e.screenX - biasX, e.screenY - biasY)\n            }\n        }\n    }\n\x3c\/script\x3e\n\n\x3cstyle\x3e\n    * {\n        padding: 0;\n        margin: 0;\n    }\n    .upload {\n        height: 25px;\n        line-height: 25px;\n        font-size: 12px;\n        text-align: center;\n        color: #74A1FA;\n    }\n\n    .logo {\n        width: 40px;\n        background: #5B9BFE url(\x26quot;..\/..\/assets\/img\/logo@2x.png\x26quot;) no-repeat 2px 3px;\n        background-size: 80%;\n    }\n\n    .content_body {\n        background-color: #EEF4FE;\n        width: 100%;\n    }\n\n    #suspension {\n        -webkit-user-select: none;\n        cursor: pointer;\n        overflow: hidden;\n    }\n\n    #suspension {\n        cursor: pointer !important;\n        height: 25px;\n        border-radius: 4px;\n        display: flex;\n        border: 1px solid #3388FE;\n    }\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22suspension\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22logo\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content_body\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22upload\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e拖拽上传\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22suspension\x22\x3c\/span\x3e,\n        mounted() {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e win = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$electron.remote.getCurrentWindow();\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e biasX = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e biasY = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (e.button) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\n                        biasX = e.x;\n                        biasY = e.y;\n                        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, moveEvent);\n                        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e:\n                        that.$electron.ipcRenderer.send(\x3cspan class=\x22hljs-string\x22\x3e\x27createSuspensionMenu\x27\x3c\/span\x3e);\n                        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                }\n            });\n\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                biasX = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                biasY = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, moveEvent)\n            });\n\n            \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emoveEvent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                win.setPosition(e.screenX - biasX, e.screenY - biasY)\n            }\n        }\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    * {\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.upload\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e12px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#74A1FA\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.logo\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e40px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#5B9BFE\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22..\/..\/assets\/img\/logo@2x.png\x22\x3c\/span\x3e) no-repeat \x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e80%\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.content_body\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#EEF4FE\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-id\x22\x3e#suspension\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-user-select\x3c\/span\x3e: none;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n        \x3cspan class=\x22hljs-attribute\x22\x3eoverflow\x3c\/span\x3e: hidden;\n    }\n\n    \x3cspan class=\x22hljs-selector-id\x22\x3e#suspension\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer \x3cspan class=\x22hljs-meta\x22\x3e!important\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: flex;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e solid \x3cspan class=\x22hljs-number\x22\x3e#3388FE\x3c\/span\x3e;\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e主进程创建悬浮窗页面代码\x3c\/h3\x3e\n\x3cp\x3e路径: \x3ccode\x3e\/src\/main\/window.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {BrowserWindow, ipcMain, screen, Menu, shell, app, webContents} from \x27electron\x27\n\nvar win = null;\nconst window = BrowserWindow.fromWebContents(webContents.getFocusedWebContents());\nconst winURL = process.env.NODE_ENV === \x27development\x27 ? `http:\/\/localhost:9080\/#\/suspension` : `file:\/\/${__dirname}\/index.html\/#\/suspension`;\nipcMain.on(\x27showSuspensionWindow\x27, () =\x3e {\n    if (win) {\n        if (win.isVisible()) {\n            createSuspensionWindow();\n        } else {\n            win.showInactive();\n        }\n    } else {\n        createSuspensionWindow();\n    }\n\n});\n\nipcMain.on(\x27createSuspensionMenu\x27, (e) =\x3e {\n    const rightM = Menu.buildFromTemplate([\n        {label: \x27开始全部任务\x27, enabled: false},\n        {label: \x27暂停全部任务\x27, enabled: false},\n        {label: \x27本次传输完自动关机\x27},\n        {type: \x27separator\x27},\n        {\n            label: \x27隐藏悬浮窗\x27,\n            click: () =\x3e {\n                window.webContents.send(\x27hideSuspension\x27, false);\n                win.hide()\n            }\n        },\n        {type: \x27separator\x27},\n        {\n            label: \x27加入qq群\x27,\n            click: () =\x3e {\n                shell.openExternal(\x27tencent:\/\/groupwpa\/?subcmd=all\x26amp;param=7B2267726F757055696E223A3831343237303636392C2274696D655374616D70223A313533393531303138387D0A\x27);\n            }\n        },\n        {\n            label: \x27GitHub地址\x27,\n            click: () =\x3e {\n                shell.openExternal(\x27https:\/\/github.com\/lihaotian0607\/auth\x27);\n            }\n        },\n        {\n            label: \x27退出软件\x27,\n            click: () =\x3e {\n                app.quit();\n            }\n        },\n    ]);\n    rightM.popup({});\n});\n\nfunction createSuspensionWindow() {\n    win = new BrowserWindow({\n        width: 107, \/\/悬浮窗口的宽度 比实际DIV的宽度要多2px 因为有1px的边框\n        height: 27, \/\/悬浮窗口的高度 比实际DIV的高度要多2px 因为有1px的边框\n        type: \x27toolbar\x27,    \/\/创建的窗口类型为工具栏窗口\n        frame: false,   \/\/要创建无边框窗口\n        resizable: false, \/\/禁止窗口大小缩放\n        show: false,    \/\/先不让窗口显示\n        webPreferences: {\n            devTools: false \/\/关闭调试工具\n        },\n        transparent: true,  \/\/设置透明\n        alwaysOnTop: true,  \/\/窗口是否总是显示在其他窗口之前\n    });\n    const size = screen.getPrimaryDisplay().workAreaSize;   \/\/获取显示器的宽高\n    const winSize = win.getSize();  \/\/获取窗口宽高\n\n    \/\/设置窗口的位置 注意x轴要桌面的宽度 - 窗口的宽度\n    win.setPosition(size.width - winSize[0], 100);\n    win.loadURL(winURL);\n\n    win.once(\x27ready-to-show\x27, () =\x3e {\n        win.show()\n    });\n\n    win.on(\x27close\x27, () =\x3e {\n        win = null;\n    })\n}\n\nipcMain.on(\x27hideSuspensionWindow\x27, () =\x3e {\n    if (win) {\n        win.hide();\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {BrowserWindow, ipcMain, screen, Menu, shell, app, webContents} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e win = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e = BrowserWindow.fromWebContents(webContents.getFocusedWebContents());\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e winURL = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27development\x27\x3c\/span\x3e ? \x3cspan class=\x22hljs-string\x22\x3e`http:\/\/localhost:9080\/#\/suspension`\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e`file:\/\/\x3cspan class=\x22hljs-subst\x22\x3e${__dirname}\x3c\/span\x3e\/index.html\/#\/suspension`\x3c\/span\x3e;\nipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x27showSuspensionWindow\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (win) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (win.isVisible()) {\n            createSuspensionWindow();\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            win.showInactive();\n        }\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        createSuspensionWindow();\n    }\n\n});\n\nipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x27createSuspensionMenu\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rightM = Menu.buildFromTemplate([\n        {label: \x3cspan class=\x22hljs-string\x22\x3e\x27开始全部任务\x27\x3c\/span\x3e, enabled: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n        {label: \x3cspan class=\x22hljs-string\x22\x3e\x27暂停全部任务\x27\x3c\/span\x3e, enabled: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n        {label: \x3cspan class=\x22hljs-string\x22\x3e\x27本次传输完自动关机\x27\x3c\/span\x3e},\n        {\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27separator\x27\x3c\/span\x3e},\n        {\n            label: \x3cspan class=\x22hljs-string\x22\x3e\x27隐藏悬浮窗\x27\x3c\/span\x3e,\n            click: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webContents.send(\x3cspan class=\x22hljs-string\x22\x3e\x27hideSuspension\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n                win.hide()\n            }\n        },\n        {\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27separator\x27\x3c\/span\x3e},\n        {\n            label: \x3cspan class=\x22hljs-string\x22\x3e\x27加入qq群\x27\x3c\/span\x3e,\n            click: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                shell.openExternal(\x3cspan class=\x22hljs-string\x22\x3e\x27tencent:\/\/groupwpa\/?subcmd=all\x26amp;param=7B2267726F757055696E223A3831343237303636392C2274696D655374616D70223A313533393531303138387D0A\x27\x3c\/span\x3e);\n            }\n        },\n        {\n            label: \x3cspan class=\x22hljs-string\x22\x3e\x27GitHub地址\x27\x3c\/span\x3e,\n            click: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                shell.openExternal(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/github.com\/lihaotian0607\/auth\x27\x3c\/span\x3e);\n            }\n        },\n        {\n            label: \x3cspan class=\x22hljs-string\x22\x3e\x27退出软件\x27\x3c\/span\x3e,\n            click: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                app.quit();\n            }\n        },\n    ]);\n    rightM.popup({});\n});\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateSuspensionWindow\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    win = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BrowserWindow({\n        width: \x3cspan class=\x22hljs-number\x22\x3e107\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/悬浮窗口的宽度 比实际DIV的宽度要多2px 因为有1px的边框\x3c\/span\x3e\n        height: \x3cspan class=\x22hljs-number\x22\x3e27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/悬浮窗口的高度 比实际DIV的高度要多2px 因为有1px的边框\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27toolbar\x27\x3c\/span\x3e,    \x3cspan class=\x22hljs-comment\x22\x3e\/\/创建的窗口类型为工具栏窗口\x3c\/span\x3e\n        frame: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,   \x3cspan class=\x22hljs-comment\x22\x3e\/\/要创建无边框窗口\x3c\/span\x3e\n        resizable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/禁止窗口大小缩放\x3c\/span\x3e\n        show: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,    \x3cspan class=\x22hljs-comment\x22\x3e\/\/先不让窗口显示\x3c\/span\x3e\n        webPreferences: {\n            devTools: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/关闭调试工具\x3c\/span\x3e\n        },\n        transparent: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置透明\x3c\/span\x3e\n        alwaysOnTop: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/窗口是否总是显示在其他窗口之前\x3c\/span\x3e\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e size = screen.getPrimaryDisplay().workAreaSize;   \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取显示器的宽高\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e winSize = win.getSize();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取窗口宽高\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置窗口的位置 注意x轴要桌面的宽度 - 窗口的宽度\x3c\/span\x3e\n    win.setPosition(size.width - winSize[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n    win.loadURL(winURL);\n\n    win.once(\x3cspan class=\x22hljs-string\x22\x3e\x27ready-to-show\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        win.show()\n    });\n\n    win.on(\x3cspan class=\x22hljs-string\x22\x3e\x27close\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        win = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    })\n}\n\nipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x27hideSuspensionWindow\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (win) {\n        win.hide();\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3estore文件\x3c\/h3\x3e\n\x3cp\x3e路径: \x3ccode\x3e\/src\/renderer\/store\/modules\/suspension.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import storejs from \x27storejs\x27\n\nconst state = {\n    show: storejs.get(\x27showSuspension\x27)\n};\n\nconst actions = {\n    showSuspension: function ({state, commit}) {\n        let status = true;\n        storejs.set(\x27showSuspension\x27, status);\n        state.show = status;\n    },\n\n    hideSuspension: function ({state, commit}) {\n        let status = false;\n        storejs.set(\x27showSuspension\x27, status);\n        state.show = status;\n    },\n};\n\nexport default ({\n    state,\n    actions\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eimport storejs \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27storejs\x27\n\nconst \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = {\n    show: storejs.get(\x27showSuspension\x27)\n};\n\nconst actions = {\n    showSuspension: function ({\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, commit}) {\n        let status = true;\n        storejs.\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3e(\x27showSuspension\x27, status);\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.show = status;\n    },\n\n    hideSuspension: function ({\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, commit}) {\n        let status = false;\n        storejs.\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3e(\x27showSuspension\x27, status);\n        \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.show = status;\n    },\n};\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e,\n    actions\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e版权说明\x3c\/h2\x3e\n\x3cp\x3e里面使用的百度的图标以及UI作为学习使用,请不要作为商业用途!\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e遗留问题\x3c\/h2\x3e\n\x3cp\x3e在软件关闭之后重启会导致悬浮窗口的位置重置 也曾尝试在主进程中使用store.js  但是不能用!\x3cbr\x3e如果想解决这个问题 可以在渲染进程中将拖动的最后坐标保存到storejs中\x3cbr\x3e在渲染进程给主进程发送异步消息的时候将坐标携带进去  也可以使用nedb在主进程中存储坐标!\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3egithub地址\x3c\/h2\x3e\n\x3cp\x3e使用electron制作百度网盘客户端: \x3ca href=\x22https:\/\/github.com\/lihaotian0607\/baidupan\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/lihaotian0...\x3c\/a\x3e\x3cbr\x3e使用electron制作百度网盘悬浮窗: \x3ca href=\x22https:\/\/github.com\/lihaotian0607\/electron-suspension\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/lihaotian0...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e目前这个开源代码中没有悬浮窗 有时间了会加上去!!!\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用electron实现百度网盘悬浮窗口功能!</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016753488">https://segmentfault.com/a/1190000016753488</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/juvlt542pzf/" target="_blank">https://alili.tech/archive/juvlt542pzf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>