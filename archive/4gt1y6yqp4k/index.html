<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React移动项目总结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React移动项目总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4gt1y6yqp4k/",
				"appid": "1613049289050283", 
				"title": "React移动项目总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zj8p6sg8rus/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/lvrgddxh4l/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&text=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&text=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&title=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&is_video=false&description=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&title=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&title=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&title=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4gt1y6yqp4k%2f&title=React%e7%a7%bb%e5%8a%a8%e9%a1%b9%e7%9b%ae%e6%80%bb%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React移动项目总结</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3eReact移动项目总结\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e背景\x3c\/h2\x3e\n\x3cp\x3e接触React半年了，一路走过来，团队做了几个项目，不断的总结经验，不断的重构，也看了很多大牛总结的react经验。\x3cbr\x3e尝试把自己遇到的问题总结分享出来，希望更多前辈指导指导。\x3c\/p\x3e\n\x3cp\x3e总结基于两个项目\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/gmfe\/react-mgm\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-mgm\x3c\/a\x3e 代码在Github上，一个组件库，包括了大部分的总结内容，内部的demo也算一个小SPA项目。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/bshop.guanmai.cn\/v587\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e下单系统\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eMac下开发\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3ejs\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3ereact\x3c\/h3\x3e\n\x3cp\x3e用class的写法写组件，和React.createClass不太一样。具体babel有文字介绍\x3ca href=\x22https:\/\/babeljs.io\/blog\/2015\/06\/07\/react-on-es6-plus\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-on-es6-plus\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e有自己团队的一套简单的规范\x3ca href=\x22https:\/\/github.com\/gmfe\/standard\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3estandard\x3c\/a\x3e，就是\x3ca href=\x22https:\/\/github.com\/airbnb\/javascript\/tree\/master\/react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eairbnb\x3c\/a\x3e搬过来的\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eredux\x3c\/h3\x3e\n\x3cp\x3e用redux做数据流，redux-thunk做异步。\x3c\/p\x3e\n\x3cp\x3e貌似actions reducers没法异步按需加载，于是自己倒腾了异步加载的\x3ca href=\x22https:\/\/github.com\/liyatang\/redux-async-actions-reducers\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-async-actions-reducers\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eand 如果你的应用不够大的话，就没有必要异步加载了，比如手机web。 全部打包也不会很大。\x3c\/p\x3e\n\x3cp\x3e比如说下单系统的公共文件 common.xxxx.js 占了80%的代码量，在开发的时候达到1.4M，webpack -p 后是 500\x2bkb，经过gzip压缩之后是100kb。所以文件大小压根不是什么事，没有必要纠结太多。之前是否使用immutable就纠结了很久。\x3c\/p\x3e\n\x3cp\x3e然而，更多应该关注到js的执行时间上，css和html的渲染处理上，文件大小真的没有这么重要。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3ereact-router\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ebrowserHistory\x3c\/code\x3e需要后台配合，所以用了\x3ccode\x3ehashHistory\x3c\/code\x3e。 但肯定前者更友好。\x3c\/p\x3e\n\x3cp\x3e路由过场动画react-addons-css-transition-group。做到了想微信那样前进后退的切换，很爽。（后来考虑到移动端性能不足问题，没有采用动画）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class App extends React.Component{\n    render(){\n        const action = this.props.location.action;\n        let transitionName = \x27page\x27;\n        \/\/ REPLEASE\n        if (action === \x27PUSH\x27) {\n            transitionName = \x27page-r2l\x27;\n        } else if (action === \x27POP\x27) {\n            transitionName = \x27page-l2r\x27;\n        }\n        return (\n            \x3cReactCSSTransitionGroup\n                component=\x26quot;div\x26quot;\n                transitionName={transitionName}\n                transitionEnterTimeout={200}\n                transitionLeaveTimeout={200}\n            \x3e\n                {React.cloneElement(this.props.children, {\n                    key: this.props.location.pathname\n                })}\n            \x3c\/ReactCSSTransitionGroup\x3e\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n    render(){\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e action = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.location.action;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e transitionName = \x3cspan class=\x22hljs-string\x22\x3e\x27page\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ REPLEASE\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (action === \x3cspan class=\x22hljs-string\x22\x3e\x27PUSH\x27\x3c\/span\x3e) {\n            transitionName = \x3cspan class=\x22hljs-string\x22\x3e\x27page-r2l\x27\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (action === \x3cspan class=\x22hljs-string\x22\x3e\x27POP\x27\x3c\/span\x3e) {\n            transitionName = \x3cspan class=\x22hljs-string\x22\x3e\x27page-l2r\x27\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eReactCSSTransitionGroup\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3etransitionName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{transitionName}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3etransitionEnterTimeout\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{200}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3etransitionLeaveTimeout\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{200}\x3c\/span\x3e\n            \x26gt;\x3c\/span\x3e\n                {React.cloneElement(this.props.children, {\n                    key: this.props.location.pathname\n                })}\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eReactCSSTransitionGroup\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3ees6\/7\x3c\/h3\x3e\n\x3cp\x3e写代码太爽了，跟着潮流走。需要在\x3ccode\x3e.babelrc\x3c\/code\x3e文件上配置好\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;presets\x26quot;: [\n    \x26quot;react\x26quot;,\n    \x26quot;es2015\x26quot;,\n    \x26quot;stage-0\x26quot;\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22stage-0\x22\x3c\/span\x3e\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e至于es7的stage-x是啥，看\x3ca href=\x22http:\/\/www.csdn.net\/article\/2015-11-27\/2826347?reload=1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.csdn.net\/article\/2...\x3c\/a\x3e。也可以无脑的设置stage-0\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eimmutable\x3c\/h3\x3e\n\x3cp\x3e确实是会因为一些引用问题导致数据不正确，问题难以发现和排查。和组件的多次渲染。\x3c\/p\x3e\n\x3cp\x3e于是引用immutable，需要克服的是团队的接受能力，需要点学习成本，但是带来的性能提升是很高的（做shouleComponentUpdate）。\x3c\/p\x3e\n\x3cp\x3e至于很多人都提到包大小问题，个人认为不用担心，webpack -p压缩\x2bgzip，基本压到很小的体积。我的在120kb，这可是全部代码（js\x2bcss）啊。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3efastclick\x3c\/h3\x3e\n\x3cp\x3e在移动端会点击延迟，原因百度吧。用了\x3ccode\x3ereact-fastclick\x3c\/code\x3e来处理，具体看这里 \x3ca href=\x22http:\/\/www.jianshu.com\/p\/6e2b68a93c88\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e移动端300ms点击延迟和点击穿透问题\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e兼容\x3c\/h3\x3e\n\x3cp\x3e项目用了很多es6特性，浏览器不支持。可以引入 babel-polyfill。\x3cbr\x3e当然babel-polyfill比较大，你也可以根据项目的具体情况来引入指定的方法。如\x3ccode\x3ecore-js\/es6\/object.js\x3c\/code\x3e \x3ccode\x3ecore-js\/es6\/promise.js\x3c\/code\x3e等等\x3c\/p\x3e\n\x3cp\x3e直接和commons一起打包即可\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22entry: {\n    \x27commons\x27: [\n        \x27core-js\/es6\/object.js\x27,\n        \x27core-js\/es6\/promise.js\x27,\n        ...\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eentry: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27commons\x27\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27core-js\/es6\/object.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27core-js\/es6\/promise.js\x27\x3c\/span\x3e,\n        ...\n    ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ebtw，我在移动端口的时候引入core-js的2.x版本，直接就报错了。 遇到的同学可以降级到1.x版本。\x3cem\x3e(具体原因还没有排查)\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e如果需要兼容到ie，据说有挺多坑。 推荐看下这篇文章\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005128101\x22\x3e使用ES6的浏览器兼容性问题\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3ecss\x3c\/h2\x3e\n\x3cp\x3e产品主要场景在微信端，所以选择了\x3ccode\x3eweui\x3c\/code\x3e，使用的感觉是目前weui提供的组件相对少，但是足够用。weui的克制也保证了weui的质量。有时候读代码时候发现weui确实沉淀了很多精华在里面。 配色方面基于weui做改造覆盖，所以我们选择了引入weui的less，方便用里面的已经定义好的变量。\x3c\/p\x3e\n\x3cp\x3e用了大量的Flex布局，很灵活，降低CSS难度。\x3c\/p\x3e\n\x3cp\x3e字体文件用了阿里的\x3ca href=\x22http:\/\/www.iconfont.cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eiconfont\x3c\/a\x3e。 收集好图片下载下来，推送到github，然后在发布到npm。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3eborder\x3c\/h2\x3e\n\x3cp\x3eRetina屏的boder和pc的不一样。 有很多解决方案，可以参考\x3ca\x3eweui\x3c\/a\x3e对于border的处理。 还可以看这里 \x3ca href=\x22http:\/\/jinlong.github.io\/2015\/05\/24\/css-retina-hairlines\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRetina屏的移动设备如何实现真正1px的线\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e然后实践过程中1px遇到的问题远不止于此，上一个链接提到的只是点也不够全面，独立总结了下 \x3ca href=\x22http:\/\/liyatang.github.io\/14679634456119.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e移动端1px border\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e构建\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3ebabel\x3c\/h3\x3e\n\x3cp\x3ebabel做es6\/7的转换，以前一般在loaders上直接写babel的配置，比如\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 写在webpack.config.js中\nloaders: [{\n    test: \/\\.js$\/,\n    loader: \x27babel?presets[]=react,presets[]=es2015,presets[]=stage-0\x27\n}]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 写在webpack.config.js中\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3eloaders:\x3c\/span\x3e [{\n\x3cspan class=\x22hljs-symbol\x22\x3e    test:\x3c\/span\x3e \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n\x3cspan class=\x22hljs-symbol\x22\x3e    loader:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27babel?presets[]=react,presets[]=es2015,presets[]=stage-0\x27\x3c\/span\x3e\n}]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在切换到用\x3ccode\x3e.babelrc\x3c\/code\x3e配置上.（也是官方推荐的方法）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\u2028  \x26quot;presets\x26quot;: [\u2028    \x26quot;react\x26quot;,\u2028    \x26quot;es2015\x26quot;,\u2028    \x26quot;stage-0\x26quot;\u2028  ]\u2028}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs json\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e{\u2028  \x3cspan class=\x22hljs-attr\x22\x3e\x22presets\x22\x3c\/span\x3e: [\u2028    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e,\u2028    \x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e,\u2028    \x3cspan class=\x22hljs-string\x22\x3e\x22stage-0\x22\x3c\/span\x3e\u2028  ]\u2028}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e热加载\x3c\/h3\x3e\n\x3cp\x3e可以在webpack.config.dev.js中配置，不过用命令行的形式更简洁\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22webpack-dev-server --inline --hot ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3ewebpack\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3edev\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3einline\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ehot\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3ecss\x3c\/h3\x3e\n\x3cp\x3e用了\x3ccode\x3epostcss\x3c\/code\x3e来处理css3的兼容性。\x3c\/p\x3e\n\x3cp\x3e然而你可能会有机会发现开发的时候会生成 -webkit-flex 这种前缀，发布后却丢失了。（日了狗）也许是国外的浏览器环境及比较好（国内android被微信内置浏览器统一了，iOS微信还有大约10%的iOS8的用户，有些css属性需要-webkit-前缀）\x3c\/p\x3e\n\x3cp\x3e鉴于此，特别注意这个写法\x3ccode\x3ecss?-autoprefixer\x3c\/code\x3e，具体看\x3ca href=\x22http:\/\/liyatang.github.io\/14687265941131.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e-webkit-flex 被移除了\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader16\x22\x3ejs版本控制\x3c\/h3\x3e\n\x3cp\x3e官方介绍的很详细 \x3ca href=\x22http:\/\/webpack.github.io\/docs\/long-term-caching.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elong-term-caching\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e用hash做js的版本号，通过\x3ccode\x3eAssetsPlugin\x3c\/code\x3e生成记录版本号的文件\x3ccode\x3ebuild\/webpack-assets.js\x3c\/code\x3e，然后页面引入这个文件就可以得到js文件的版本号了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22output: {\n    path: path.join(__dirname, \x27build\x27),\n    filename: \x27[name].[hash].js\x27,\n    publicPath: \x27\/react-mgm\/build\/\x27\n},\nplugins: [\n    new webpack.NoErrorsPlugin(),\n    new AssetsPlugin({\n        filename: \x27build\/webpack-assets.js\x27,\n        processOutput: function (assets) {\n            return \x27window.WEBPACK_ASSETS = \x27 \x2b JSON.stringify(assets);\n        }\n    })\n],\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eoutput: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[hash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/react-mgm\/build\/\x27\x3c\/span\x3e\n},\n\x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NoErrorsPlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e AssetsPlugin({\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27build\/webpack-assets.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eprocessOutput\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eassets\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27window.WEBPACK_ASSETS = \x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(assets);\n        }\n    })\n],\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ index.html\n\x3cscript\x3e\n    document.write(\x27\x3cscript src=\x26quot;..\/build\/webpack-assets.js\x26quot;\x3e\x3c\\\/script\x3e\x27);\n\x3c\/script\x3e\n\x3cscript\n    document.write(\x27\x3cscript src=\x26quot;\x27 \x2b window.WEBPACK_ASSETS[\x27index\x27].js \x2b \x27\x26quot;\x3e\x3c\\\/script\x3e\x27);\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\/\/ index.html\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3e\n    document.write(\x27\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22..\/build\/webpack-assets.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e\\\x3c\/span\x3e\/\x3cspan class=\x22hljs-attr\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x27);\n\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3edocument.write\x3c\/span\x3e(\x27\x26lt;\x3cspan class=\x22hljs-attr\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x27 \x2b window.WEBPACK_ASSETS[\x27index\x27].js \x2b \x27\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e\\\x3c\/span\x3e\/\x3cspan class=\x22hljs-attr\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x27);\n\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e公共文件commons处理\x3c\/h3\x3e\n\x3cp\x3e见 \x3cbr\x3e\x3ca href=\x22http:\/\/liyatang.github.io\/14716966091212.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack commons hash\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/liyatang.github.io\/14716985009978.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e如何确定哪些文件应该打包在commons\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3e构建加速\x3c\/h3\x3e\n\x3cp\x3e1\x3cbr\x3e\x3ca href=\x22http:\/\/webpack.github.io\/docs\/configuration.html#devtool\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/webpack.github.io\/docs...\x3c\/a\x3e\x3cbr\x3edevtool 设置 eval \x3c\/p\x3e\n\x3cp\x3e2\x3cbr\x3e一些文件直接引用打包好的版本可以加快构建。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module: {\n    (...省略)\n    noParse: [\n        \/\/ \x27react\/dist\/react.min.js\x27,\n        \/\/ \x27react-dom\/dist\/react-dom.min.js\x27,\n        \x27react-router\/umd\/ReactRouter.min.js\x27,\n        \x27redux\/dist\/redux.min.js\x27,\n        \x27react-redux\/dist\/react-redux.min.js\x27,\n        \x27underscore\/underscore-min.js\x27\n    ]\n},\nresolve: {\n    alias: {\n        \/\/ react 没法加速build，因为react-addons-css-transition-group\n        \/\/ \x27react\x27: \x27react\/dist\/react.min.js\x27,\n        \/\/ \x27react-dom\x27: \x27react-dom\/dist\/react-dom.min.js\x27,\n        \x27react-router\x27: \x27react-router\/umd\/ReactRouter.min.js\x27,\n        \x27redux\x27: \x27redux\/dist\/redux.min.js\x27,\n        \x27react-redux\x27: \x27react-redux\/dist\/react-redux.min.js\x27,\n        \x27underscore\x27: \x27underscore\/underscore-min.js\x27\n    }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3emodule: {\n    (...省略)\n    noParse: [\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\/dist\/react.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\/dist\/react-dom.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\/umd\/ReactRouter.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27redux\/dist\/redux.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\/dist\/react-redux.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27underscore\/underscore-min.js\x27\x3c\/span\x3e\n    ]\n},\nresolve: {\n    alias: {\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e react 没法加速build，因为react-addons-css-transition-group\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27react\/dist\/react.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\/dist\/react-dom.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\/umd\/ReactRouter.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27redux\/dist\/redux.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\/dist\/react-redux.min.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27underscore\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27underscore\/underscore-min.js\x27\x3c\/span\x3e\n    }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3e构建环境\x3c\/h3\x3e\n\x3cp\x3e目前知道需要设置两个地方，命令行中加入 NODE_ENV\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22NODE_ENV=production webpack xxxxx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ini\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-attr\x22\x3eNODE_ENV\x3c\/span\x3e=production webpack xxxxx\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eand webpack配置里面加入plugin，这样代码就能通过\x3ccode\x3eif(__DEBUG__)\x3c\/code\x3e这种代码做环境差异。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.DefinePlugin({\u2028    __DEBUG__: env === \x27development\x27 ? true : false,\u2028    \x26quot;process.env\x26quot;: { \/\/ 干掉 https:\/\/fb.me\/react-minification 提示\u2028        NODE_ENV: env === \x27development\x27 ? JSON.stringify(\x26quot;development\x26quot;) : JSON.stringify(\x26quot;production\x26quot;)\u2028    }\u2028})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3ewebpack\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.DefinePlugin\x3c\/span\x3e({\u2028    \x3cspan class=\x22hljs-attribute\x22\x3e__DEBUG__\x3c\/span\x3e: env === \x3cspan class=\x22hljs-string\x22\x3e\x27development\x27\x3c\/span\x3e ? true : false,\u2028    \x3cspan class=\x22hljs-string\x22\x3e\x22process.env\x22\x3c\/span\x3e: { \/\/ 干掉 https:\/\/fb.me\/react-minification 提示\u2028        NODE_ENV: env === \x3cspan class=\x22hljs-string\x22\x3e\x27development\x27\x3c\/span\x3e ? JSON.\x3cspan class=\x22hljs-built_in\x22\x3estringify\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22development\x22\x3c\/span\x3e) : JSON.\x3cspan class=\x22hljs-built_in\x22\x3estringify\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22production\x22\x3c\/span\x3e)\u2028    }\u2028})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3e打包库文件\x3c\/h3\x3e\n\x3cp\x3e见\x3ccode\x3ewebpack.config.js\x3c\/code\x3e \x3ccode\x3ewebpack.config.min.js\x3c\/code\x3e\x3cbr\x3e有些库作为依赖项，不应该打包进库文件中，用\x3ccode\x3eexternals\x3c\/code\x3e来描述\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals: {\n    \x27react\x27: \x27react\x27,\n    \x27react-dom\x27: \x27react-dom\x27,\n    \x27underscore\x27: \x27underscore\x27,\n    \x27classnames\x27: \x27classnames\x27\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sml\x22\x3e\x3ccode\x3eexternals: {\n    \x3cspan class=\x22hljs-symbol\x22\x3e\x27react\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27react\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-symbol\x22\x3e\x27react\x3c\/span\x3e-dom\x27: \x3cspan class=\x22hljs-symbol\x22\x3e\x27react\x3c\/span\x3e-dom\x27,\n    \x3cspan class=\x22hljs-symbol\x22\x3e\x27underscore\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27underscore\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-symbol\x22\x3e\x27classnames\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27classnames\x27\x3c\/span\x3e\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecss文件独立打包，用\x3ccode\x3eExtractTextPlugin\x3c\/code\x3e来描述。\x3c\/p\x3e\n\x3cp\x3e最后做压缩\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.optimize.UglifyJsPlugin({\n    compressor: {\n        screw_ie8: true,\n        warnings: false\n    }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3ewebpack.optimize.UglifyJsPlugin({\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    compressor:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e        screw_ie8:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e        warnings:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e})\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader21\x22\x3enpm\x3c\/h3\x3e\n\x3cp\x3e用了npm script来统一开发规范。\x3cbr\x3e\x3ccode\x3enpm start\x3c\/code\x3e来开启开发\x3cbr\x3e\x3ccode\x3enpm run deploy\x3c\/code\x3e来发布\x3cbr\x3e\x3ccode\x3enpm run publishpatch\x3c\/code\x3e来发布到npm，并同步到淘宝镜像来做加速\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;scripts\x26quot;: {\n    \x26quot;precommit\x26quot;: \x26quot;eslint .\/src\/component\/\x26quot;,\n    \x26quot;pre\x26quot;: \x26quot;npm install;\x26quot;,\n    \x26quot;clear\x26quot;: \x26quot;rm -rf build; mkdir build;\x26quot;,\n    \x26quot;start\x26quot;: \x26quot;npm run clear; webpack-dev-server --config webpack.config.dev.js --port 4000 --host 0.0.0.0 --inline --hot --devtool eval --progress --color --profile\x26quot;,\n    \x26quot;deploy\x26quot;: \x26quot;npm install; npm run build \x26amp;\x26amp; npm run build:min\x26quot;,\n    \x26quot;build\x26quot;: \x26quot;webpack --progress --color --profile\x26quot;,\n    \x26quot;build:min\x26quot;: \x26quot;webpack --config webpack.config.min.js\x26quot;,\n    \x26quot;publishpatch\x26quot;: \x26quot;npm run deploy; git add --all; git commit -m \x27c\x27; npm version patch; git push origin master:master; npm publish; npm publish --registry=\x27https:\/\/registry.npmjs.org\x27; cnpm sync react-mgm; npm version;\x26quot;\n  },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22precommit\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22eslint .\/src\/component\/\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22pre\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22npm install;\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22clear\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22rm -rf build; mkdir build;\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22start\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22npm run clear; webpack-dev-server --config webpack.config.dev.js --port 4000 --host 0.0.0.0 --inline --hot --devtool eval --progress --color --profile\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22deploy\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22npm install; npm run build \x26amp;\x26amp; npm run build:min\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack --progress --color --profile\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22build:min\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack --config webpack.config.min.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22publishpatch\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22npm run deploy; git add --all; git commit -m \x27c\x27; npm version patch; git push origin master:master; npm publish; npm publish --registry=\x27https:\/\/registry.npmjs.org\x27; cnpm sync react-mgm; npm version;\x22\x3c\/span\x3e\n  },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外在项目中遇到版本依赖的问题。开发的时候好好的，发布后就出问题了。 原因是npm依赖不一致问题。要么固定版本号，但是只能固定项目的依赖，依赖的依赖就没法固定了。 有个方案不错 \x3ca href=\x22http:\/\/tech.meituan.com\/npm-shrinkwrap.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enpm shrinkwrap\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader22\x22\x3e规范\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3eeslint\x3c\/h3\x3e\n\x3cp\x3e安装\x3ccode\x3enpm install husky\x3c\/code\x3e的时候会自动往你的git hooks上加代码，提交代码的时候触发想要的npm scripts。\x3c\/p\x3e\n\x3cp\x3e我们用eslint来做检测，配置见package.json的\x3ccode\x3enpm run precommit\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3eeslint的配置用\x3ccode\x3eeslintrc.js\x3c\/code\x3e官方推荐的写法，具体配置弄成一个自己的库了。\x3c\/p\x3e\n\x3cp\x3e用了\x3ca href=\x22http:\/\/eslint.org\/docs\/rules\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eeslint推荐的配置\x3c\/a\x3e再结合\x3ca href=\x22https:\/\/github.com\/yannickcr\/eslint-plugin-react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eeslint-plugin-react\x3c\/a\x3e的配置\x3c\/p\x3e\n\x3cp\x3e具体见\x3ca href=\x22https:\/\/github.com\/gmfe\/eslint-plugin-gm\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eeslint-plugin-gm\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n    \x26quot;plugins\x26quot;: [\n        \x26quot;gm\x26quot;\n    ],\n    \x26quot;extends\x26quot;: [\x26quot;plugin:gm\/recommended\x26quot;]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-string\x22\x3e\x22gm\x22\x3c\/span\x3e\n    ],\n    \x3cspan class=\x22hljs-string\x22\x3e\x22extends\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22plugin:gm\/recommended\x22\x3c\/span\x3e]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader24\x22\x3eserver服务\x3c\/h2\x3e\n\x3cp\x3e在开发时间避免等后台api，找了\x3ca href=\x22https:\/\/github.com\/typicode\/json-server\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejson-server\x3c\/a\x3e来做api服务，rest风格，很方便。\x3cbr\x3e等后台ready了，再通过上面提到的server代理调用联调。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader25\x22\x3e性能优化\x3c\/h2\x3e\n\x3cp\x3e见 \x3ca href=\x22http:\/\/liyatang.github.io\/14679634318513.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact性能优化\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader26\x22\x3e其他\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader27\x22\x3e键盘呼气\x3c\/h3\x3e\n\x3cp\x3e如果你的输入框比较低的话，键盘呼气就会挡住输入框。 iphone会自动把input移到可见的位置，而android不会。 可以在android上对输入框使用 scrollIntoViewIfNeed 使元素可见。\x3c\/p\x3e\n\x3cp\x3eand在react下，会出现本来点输入框的，结果却是点了其他东西，触发其他逻辑了。 所以这里就搞了500ms的延迟。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader28\x22\x3e自动呼气键盘\x3c\/h3\x3e\n\x3cp\x3e在android键盘需要用户触发才可以呼气。iOS 加个autoFocus即可。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader29\x22\x3e判断元素可见\x3c\/h3\x3e\n\x3cp\x3e一开始是慢慢的算offsetTop,如果层次很深的话，还要算多个parent的offsetTop，然后才能得出，如此必然很烦。  可以用 getBoundingClientRect 即可。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader30\x22\x3e微信title的处理\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005912548\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React移动项目总结</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005044324">https://segmentfault.com/a/1190000005044324</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4gt1y6yqp4k/" target="_blank">https://alili.tech/archive/4gt1y6yqp4k/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>