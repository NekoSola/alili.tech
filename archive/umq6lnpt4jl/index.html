<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="feWorkflow - 使用 electron, react, redux, immutable 构建桌面 App"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>feWorkflow - 使用 electron, react, redux, immutable 构建桌面 App | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/umq6lnpt4jl/",
				"appid": "1613049289050283", 
				"title": "feWorkflow - 使用 electron, react, redux, immutable 构建桌面 App | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-07T02:30:16"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/znfuhk3nwi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bw52r5xz8kr/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&text=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&text=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&title=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&is_video=false&description=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&title=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&title=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&title=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fumq6lnpt4jl%2f&title=feWorkflow%20-%20%e4%bd%bf%e7%94%a8%20electron%2c%20react%2c%20redux%2c%20immutable%20%e6%9e%84%e5%bb%ba%e6%a1%8c%e9%9d%a2%20App"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">feWorkflow - 使用 electron, react, redux, immutable 构建桌面 App</h1><div class="meta"><div class="postdate"><time datetime="2019-02-07" itemprop="datePublished">2019-02-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e这篇文章主要是项目中用到的开发框架功能点上的一个总结，包括基本的操作流程和一些心得体会。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e15年初创建了适用于目前团队的gulp工作流，旨在以一个gulpfile来操作和执行所有文件结构。随着项目依赖滚雪球式的增长，拉取npm包成了配置中最麻烦而极容易出错的一项。为了解决配置过程中遇到的种种问题，15年底草草实现了一个方案，用nw.js（基于Chromium和node.js的app执行工具）框架来编写了一个简单的桌面应用\x3ca href=\x22http:\/\/whatifhappen.github.io\/GulpUI-WX\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egulp-ui\x3c\/a\x3e, 所做的操作是打包gulpfile和所依赖的所有node_modules在一起，然后简单粗暴的在app内部执行gulpfile。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/whatifhappen.github.io\/GulpUI-WX\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egulp-ui\x3c\/a\x3e 做出来后再团队中使用了一段时间，以单个项目来执行的方式确实在经常多项目开发的使用环境中多有不便。于是在这个基础上，重写了整个代码结构，开发了现在的版本feWorkflow.\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/whatifhappen.github.io\/GulpUI-WX\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efeWorkflow\x3c\/a\x3e 改用了electron做为底层，使用react, redux, immutable框架做ui开发，仍然基于运行gulpfile的方案，这样可以使每个使用自己团队的gulp工作流快速接入和自由调整。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyPy1?w=2178\x26amp;h=1702\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyPy1?w=2178\x26amp;h=1702\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e功能：一键式开发\/压缩\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eless实时监听编译css\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ecss前缀自动补全\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e格式化html，并自动替换src源码路径为tc_idc发布路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e压缩图片(png|jpg|gif|svg)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e压缩或格式化js，并自动替换src源码路径为tc_idc发布路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e同步刷新浏览器browserSync\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e框架选型\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eelectron\x3c\/h3\x3e\n\x3cp\x3e与 NW.js 相似，Electron 提供了一个能通过 JavaScript 和 HTML 创建桌面应用的平台，同时集成 Node 来授予网页访问底层系统的权限。\x3c\/p\x3e\n\x3cp\x3e使用nw.js时遇到了很多问题，设置和api比较繁琐，于是改版过程用再开发便利性上的考虑转用了electron。\x3c\/p\x3e\n\x3cp\x3eelectron应用布署非常简单，存放应用程序的文件夹需要叫做\x26nbsp;\x3ccode\x3eapp\x3c\/code\x3e\x26nbsp;并且需要放在 Electron 的 资源文件夹下（在 macOS 中是指\x26nbsp;\x3ccode\x3eElectron.app\/Contents\/Resources\/\x3c\/code\x3e，在 Linux 和 Windows 中是指\x26nbsp;\x3ccode\x3eresources\/\x3c\/code\x3e） 就像这样：\x3c\/p\x3e\n\x3cp\x3emacOS\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22electron\/Electron.app\/Contents\/Resources\/app\/\n├── package.json\n├── main.js\n└── index.html\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eelectron\/Electron.app\/Contents\/Resources\/app\/\n├── package.json\n├── main.js\n└── index.html\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 Windows 和 Linux 中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22electron\/resources\/app\n├── package.json\n├── main.js\n└── index.html\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eelectron\/resources\/app\n├── package.json\n├── main.js\n└── index.html\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后运行\x26nbsp;\x3ccode\x3eElectron.app\x3c\/code\x3e\x26nbsp;（或者 Linux 中的\x26nbsp;\x3ccode\x3eelectron\x3c\/code\x3e，Windows 中的\x26nbsp;\x3ccode\x3eelectron.exe\x3c\/code\x3e）, 接着 Electron 就会以你的应用程序的方式启动。\x3c\/p\x3e\n\x3ch4\x3e目录释义\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3epackage.json\x3c\/code\x3e主要用来指定app的名称，版本，入口文件，依赖文件等。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;    : \x26quot;your-app\x26quot;,\n  \x26quot;version\x26quot; : \x26quot;0.1.0\x26quot;,\n  \x26quot;main\x26quot;    : \x26quot;main.js\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e    : \x3cspan class=\x22hljs-string\x22\x3e\x22your-app\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22version\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x220.1.0\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22main\x22\x3c\/span\x3e    : \x3cspan class=\x22hljs-string\x22\x3e\x22main.js\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3emain.js\x3c\/code\x3e\x26nbsp;应该用于创建窗口和处理系统事件，官方也是推荐使用\x3ccode\x3ees6\x3c\/code\x3e来开发，典型的例子如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const electron = require(\x27electron\x27);\n\/\/引入app模块\nconst {app} = electron;\n\/\/ 引入窗口视图\nconst {BrowserWindow} = electron;\n\/\/设置一个变量\nlet mainWindow;\n\nfunction createWindow() {\n  \/\/实例化一个新的窗口\n  mainWindow = new BrowserWindow({width: 800, height: 600});\n\n  \/\/加载electron主页面\n  mainWindow.loadURL(`file:\/\/${__dirname}\/index.html`);\n\n  \/\/打开chrome开发者工具\n  mainWindow.webContents.openDevTools();\n\n  \/\/监听窗口关闭状态\n  mainWindow.on(\x27closed\x27, () =\x3e {\n    mainWindow = null;\n  });\n}\n\/\/当app初始化完毕，开始创建一个新窗口\napp.on(\x27ready\x27, createWindow);\n\n\/\/监听app窗口关闭状态\napp.on(\x27window-all-closed\x27, () =\x3e {\n  \/\/mac osx中只有执行command\x2bQ才会退出app，否则保持活动状态\n  if (process.platform !== \x27darwin\x27) {\n    app.quit();\n  }\n});\n\napp.on(\x27activate\x27, () =\x3e {\n  \/\/mac osx中再dock图标点击时重新创建一个窗口\n  if (mainWindow === null) {\n    createWindow();\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e electron = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/引入app模块\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {app} = electron;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入窗口视图\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {BrowserWindow} = electron;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/设置一个变量\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mainWindow;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateWindow\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化一个新的窗口\x3c\/span\x3e\n  mainWindow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BrowserWindow({\x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e});\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/加载electron主页面\x3c\/span\x3e\n  mainWindow.loadURL(\x3cspan class=\x22hljs-string\x22\x3e`file:\/\/\x3cspan class=\x22hljs-subst\x22\x3e${__dirname}\x3c\/span\x3e\/index.html`\x3c\/span\x3e);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/打开chrome开发者工具\x3c\/span\x3e\n  mainWindow.webContents.openDevTools();\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听窗口关闭状态\x3c\/span\x3e\n  mainWindow.on(\x3cspan class=\x22hljs-string\x22\x3e\x27closed\x27\x3c\/span\x3e, () =\x26gt; {\n    mainWindow = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  });\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/当app初始化完毕，开始创建一个新窗口\x3c\/span\x3e\napp.on(\x3cspan class=\x22hljs-string\x22\x3e\x27ready\x27\x3c\/span\x3e, createWindow);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/监听app窗口关闭状态\x3c\/span\x3e\napp.on(\x3cspan class=\x22hljs-string\x22\x3e\x27window-all-closed\x27\x3c\/span\x3e, () =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/mac osx中只有执行command\x2bQ才会退出app，否则保持活动状态\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (process.platform !== \x3cspan class=\x22hljs-string\x22\x3e\x27darwin\x27\x3c\/span\x3e) {\n    app.quit();\n  }\n});\n\napp.on(\x3cspan class=\x22hljs-string\x22\x3e\x27activate\x27\x3c\/span\x3e, () =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/mac osx中再dock图标点击时重新创建一个窗口\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mainWindow === \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n    createWindow();\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eindex.html\x3c\/code\x3e则用来输出你的html：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n  \x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3eHello World!\x3c\/title\x3e\n  \x3c\/head\x3e\n  \x3cbody\x3e\n    \x3ch1\x3eHello World!\x3c\/h1\x3e\n    We are using node \x3cscript\x3edocument.write(process.versions.node)\x3c\/script\x3e,\n    Chrome \x3cscript\x3edocument.write(process.versions.chrome)\x3c\/script\x3e,\n    and Electron \x3cscript\x3edocument.write(process.versions.electron)\x3c\/script\x3e.\n  \x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello World!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello World!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    We are using node \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.write(process.versions.node)\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e,\n    Chrome \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.write(process.versions.chrome)\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e,\n    and Electron \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.write(process.versions.electron)\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e.\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eelectron官方提供了一个快速开始的模板：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# Clone the Quick Start repository\n$ git clone https:\/\/github.com\/electron\/electron-quick-start\n\n# Go into the repository\n$ cd electron-quick-start\n\n# Install the dependencies and run\n$ npm install \x26amp;\x26amp; npm start\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e# Clone the Quick Start repository\n$ git clone https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/github.com\/electron\/electron-quick-start\x3c\/span\x3e\n\n# Go into the repository\n$ cd electron-quick-start\n\n# Install the dependencies and run\n$ npm install \x26amp;\x26amp; npm start\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多入门介绍可以查看这里\x3ca href=\x22https:\/\/github.com\/electron\/electron\/blob\/master\/docs-translations\/zh-CN\/tutorial\/quick-start.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eElectron快速入门\x3c\/a\x3e.\x3c\/p\x3e\n\x3ch4\x3e添加开发者工具\x3c\/h4\x3e\n\x3cp\x3e因为项目中用到了\x3ccode\x3ereact\x3c\/code\x3e以及\x3ccode\x3eredux\x3c\/code\x3e，为了方便开发，将\x3ccode\x3echrome\x3c\/code\x3e的这两项插件引入到项目中。以\x3ccode\x3eredux\x3c\/code\x3e为例：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e安装\x3ca href=\x22https:\/\/chrome.google.com\/webstore\/detail\/redux-devtools\/lmhkpmbekcpmknklioeibfkpmmfibljd\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-devtools-extension\x3c\/a\x3e的\x3ccode\x3echrome扩展\x3c\/code\x3e；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e地址栏输入\x3ccode\x3echrome:\/\/extensions\/\x3c\/code\x3e打开扩展程序面板，找到\x3ccode\x3eredux-devtools-extension\x3c\/code\x3e的ID, 这串ID是类似于\x3ccode\x3elmhkpmbekcpmknklioeibfkpmmfibljd\x3c\/code\x3e的字符串；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e找到系统chrome存储扩展的目录：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ewindows地址: \x3ccode\x3e%LOCALAPPDATA%GoogleChromeUser DataDefaultExtensions;\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3elinux可能在：\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22~\/.config\/google-chrome\/Default\/Extensions\/\n~\/.config\/google-chrome-beta\/Default\/Extensions\/\n~\/.config\/google-chrome-canary\/Default\/Extensions\/\n~\/.config\/chromium\/Default\/Extensions\/\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-regexp\x22\x3e~\/.config\/\x3c\/span\x3egoogle-chrome\x3cspan class=\x22hljs-regexp\x22\x3e\/Default\/\x3c\/span\x3eExtensions\/\n\x3cspan class=\x22hljs-regexp\x22\x3e~\/.config\/\x3c\/span\x3egoogle-chrome-beta\x3cspan class=\x22hljs-regexp\x22\x3e\/Default\/\x3c\/span\x3eExtensions\/\n\x3cspan class=\x22hljs-regexp\x22\x3e~\/.config\/\x3c\/span\x3egoogle-chrome-canary\x3cspan class=\x22hljs-regexp\x22\x3e\/Default\/\x3c\/span\x3eExtensions\/\n\x3cspan class=\x22hljs-regexp\x22\x3e~\/.config\/\x3c\/span\x3echromium\x3cspan class=\x22hljs-regexp\x22\x3e\/Default\/\x3c\/span\x3eExtensions\/\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3emacOS目录地址：\x3ccode\x3e~\/Library\/Application Support\/Google\/Chrome\/Default\/Extensions\x3c\/code\x3e;\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e调用\x3ccode\x3eBrowserWindow.addDevToolsExtension\x3c\/code\x3e的API, 把这串地址传递进去，对于redux-devtools-extensions，大概会是\x3ccode\x3e~\/Library\/Application Support\/Google\/Chrome\/Default\/Extensions\/lmhkpmbekcpmknklioeibfkpmmfibljd\/2.2.1.1_0\/\x27\x3c\/code\x3e。在electron表现为：\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  BrowserWindow.addDevToolsExtension(\x27~\/Library\/Application Support\/Google\/Chrome\/Default\/Extensions\/lmhkpmbekcpmknklioeibfkpmmfibljd\/2.2.1.1_0\/\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e  BrowserWindow.addDevToolsExtension(\x27~\/Library\/Application Support\/Google\/Chrome\/Default\/Extensions\/lmhkpmbekcpmknklioeibfkpmmfibljd\/\x3cspan class=\x22hljs-number\x22\x3e2.2\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3e_0\/\x27);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，在electron的控制台就可以看到对应的devtools标签了。\x3cbr\x3e如果用的是\x3cstrong\x3ereact-devtools\x3c\/strong\x3e在这一步已经可以使用，需要注意的是对于\x3cstrong\x3eredux-devtools-extensions\x3c\/strong\x3e还有一个步骤，\x3ccode\x3estore\x3c\/code\x3e在\x3ccode\x3ecreateStore\x3c\/code\x3e时需要增加一行判断\x3ccode\x3ewindow.devToolsExtension \x26amp;\x26amp; window.devToolsExtension()\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const store = createStore(reducer, window.devToolsExtension \x26amp;\x26amp; window.devToolsExtension());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3econst store = createStore(\x3cspan class=\x22hljs-name\x22\x3ereducer\x3c\/span\x3e, window.devToolsExtension \x3cspan class=\x22hljs-symbol\x22\x3e\x26amp;\x26amp;\x3c\/span\x3e window.devToolsExtension())\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVzbRX?w=2214\x26amp;h=720\x22 src=\x22https:\/\/static.alili.tech\/img\/bVzbRX?w=2214\x26amp;h=720\x22 alt=\x22redux-devtools\x22 title=\x22redux-devtools\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eReact \x2b ES6\x3c\/h3\x3e\n\x3cp\x3eReact做为一个用来构建UI的JS库开辟了一个相当另类的途径，实现了前端界面的高效率高性能开发。React的虚拟DOM不仅带来了简单的UI开发逻辑，同时也带来了组件化开发的思想。\x3c\/p\x3e\n\x3cp\x3eES6做为js的新规范带来了许多新的变化，从代码的编写上也带来了许多的便利性。\x3c\/p\x3e\n\x3cp\x3e一个简单的\x3ccode\x3ereact\x3c\/code\x3e模块示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/jsx\nvar HelloMessage = React.createClass({\n  render: function() {\n    return \x3cdiv\x3eHello {this.props.name}\x3c\/div\x3e;\n  }\n});\n\nReactDOM.render(\x3cHelloMessage name=\x26quot;John\x26quot; \/\x3e, document.getElementById(\x27root\x27)));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/jsx\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HelloMessage = React.createClass({\n  \x3cspan class=\x22hljs-attr\x22\x3erender\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello {this.props.name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n});\n\nReactDOM.render(\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eHelloMessage\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22John\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e, document.getElementById(\x27root\x27)));\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/html\n\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n  \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n  \x3ctitle\x3eDocument\x3c\/title\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n  \x3cdiv id=\x26quot;root\x26quot;\x3e\x3c\/div\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\/\/html\n\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eDocument\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22root\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/实际输出\n\x3cdiv id=\x26quot;root\x26quot;\x3eHello John\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\/\/实际输出\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22root\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello John\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过\x3ccode\x3eReact.createClass\x3c\/code\x3e创建一个\x3ccode\x3ereact\x3c\/code\x3e模块，使用\x3ccode\x3erender\x3c\/code\x3e函数返回这个模块中的实际html模板，然后引用\x3ccode\x3eReactDOM\x3c\/code\x3e的\x3ccode\x3erender\x3c\/code\x3e函数生成到指定的html模块中。调用\x3ccode\x3eHelloMessage\x3c\/code\x3e的方法，则是写成一个\x3ccode\x3exhtml\x3c\/code\x3e的形式\x3ccode\x3e\x26lt;HelloMessage name=\x22John\x22 \/\x26gt;\x3c\/code\x3e，将\x3ccode\x3ename\x3c\/code\x3e里面的\x22John\x22做为一个属性值传到\x3ccode\x3eHelloMessage\x3c\/code\x3e中，通过\x3ccode\x3ethis.props.name\x3c\/code\x3e来调用。\x3c\/p\x3e\n\x3cp\x3e当然，这个是未经编译的\x3ccode\x3ejsx\x3c\/code\x3e文件，不能实际输出到html中，如果想要未经编译使用\x3ccode\x3ejsx\x3c\/code\x3e文件，可以在\x3ccode\x3ehtml\x3c\/code\x3e中引用\x3ccode\x3ebabel\x3c\/code\x3e的组件，例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n  \x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot; \/\x3e\n    \x3ctitle\x3eHello React!\x3c\/title\x3e\n    \x3cscript src=\x26quot;build\/react.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript src=\x26quot;build\/react-dom.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript src=\x26quot;https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/babel-core\/5.8.34\/browser.min.js\x26quot;\x3e\x3c\/script\x3e\n  \x3c\/head\x3e\n  \x3cbody\x3e\n    \x3cdiv id=\x26quot;example\x26quot;\x3e\x3c\/div\x3e\n    \x3cscript type=\x26quot;text\/babel\x26quot;\x3e\n      ReactDOM.render(\n        \x3ch1\x3eHello, world!\x3c\/h1\x3e,\n        document.getElementById(\x27example\x27)\n      );\n    \x3c\/script\x3e\n  \x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello React!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22build\/react.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22build\/react-dom.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/babel-core\/5.8.34\/browser.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/babel\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n      ReactDOM.render(\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello, world!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e)\n      );\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e自从\x3ccode\x3ees6\x3c\/code\x3e正式发布后，\x3ccode\x3ereact\x3c\/code\x3e也改用了\x3ccode\x3ebabel\x3c\/code\x3e做为编译工具，也因此许多开发者开始将代码开发风格项\x3ccode\x3ees6\x3c\/code\x3e转变。\x3c\/p\x3e\n\x3cp\x3e于是\x3ccode\x3eReact.createClass\x3c\/code\x3e的方法被取代为es6中的扩展类写法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class HelloWorld extends React.Component {\n  render() {\n    return \x3cdiv\x3eHello {this.props.name}\x3c\/div\x3e;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHelloWorld\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello {this.props.name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以看到这些语法有了细微的不同：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ES5的写法\nvar HelloWorld = React.createClass({\n  handleClick: function(e) {...},\n  render: function() {...},\n});\n\n\/\/ES6及以上写法\nclass HelloWorld extends React.Component {\n  handleClick(e) {...}\n  render() {...}\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ES5的写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HelloWorld = React.createClass({\n  \x3cspan class=\x22hljs-attr\x22\x3ehandleClick\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{...},\n  \x3cspan class=\x22hljs-attr\x22\x3erender\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{...},\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ES6及以上写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHelloWorld\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  handleClick(e) {...}\n  render() {...}\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在feWorkflow中基本都是使用ES6的写法做为开发, 例如最终输出的container模块：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import ListFolder from \x27.\/list\/list\x27;\nimport Dropzone from \x27.\/layout\/dropzone\x27;\nimport ContainerEmpty from \x27.\/container-empty\x27;\nimport ContainerFt from \x27.\/layout\/container-ft\x27;\nimport Aside from \x27.\/layout\/aside\x27;\nimport { connect } from \x27react-redux\x27;\n\nconst Container = ({ lists }) =\x3e (\n  \x3cdiv className=\x26quot;container\x26quot;\x3e\n    \x3cdiv className=\x26quot;container-bd\x26quot;\x3e\n      {lists.size ? \x3cListFolder \/\x3e : \x3cContainerEmpty \/\x3e}\n      \x3cDropzone \/\x3e\n    \x3c\/div\x3e\n    \x3cContainerFt \/\x3e\n    \x3cAside \/\x3e\n  \x3c\/div\x3e\n);\n\nconst mapStateToProps = (states) =\x3e ({\n  lists: states.lists\n});\n\nexport default connect(mapStateToProps)(Container);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ListFolder \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/list\/list\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Dropzone \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/layout\/dropzone\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ContainerEmpty \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/container-empty\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ContainerFt \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/layout\/container-ft\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Aside \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/layout\/aside\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Container = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ lists }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container-bd\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      {lists.size ? \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eListFolder\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e : \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eContainerEmpty\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eDropzone\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eContainerFt\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAside\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n);\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapStateToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estates\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e ({\n  \x3cspan class=\x22hljs-attr\x22\x3elists\x3c\/span\x3e: states.lists\n});\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(mapStateToProps)(Container);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eimport做为ES6的引入方式，来取代commonJS的require模式，等同于\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ListFoder = require(\x27.\/list\/list\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ListFoder = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/list\/list\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输出从\x3ccode\x3emodule.export = Container;\x3c\/code\x3e 替换成\x3ccode\x3eexport default Container;\x3c\/code\x3e，这种写法其实等同于：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ ES5写法\nvar Container = React.createClass({\n  render: function() { \n      ...\n      {this.props.lists.size ? \x3cListFolder \/\x3e : \x3cContainerEmpty \/\x3e}\n    ...\n  },\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ES5写法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Container = React.createClass({\n  \x3cspan class=\x22hljs-attr\x22\x3erender\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ \n      ...\n      {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.lists.size ? \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eListFolder\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e : \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eContainerEmpty\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e}\n    ...\n  },\n});\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e{ lists }\x3c\/code\x3e的写法编译成ES5的写法等同于：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Container = function Container(_ref) {\n  var lists = _ref.lists;\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Container = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eContainer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e_ref\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e lists = _ref.lists;\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e相当于减少了非常多的赋值操作，极大了减少了开发的工作量。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eWebpack\x3c\/h3\x3e\n\x3cp\x3eES6中介绍了一下编译之后的代码，而每个文件里其实也并没有import必须的react模块，其实都是通过Webpack这个工具来执行了编译和打包。在webpack中引入了\x3ccode\x3ebabel-loader\x3c\/code\x3e来编译\x3ccode\x3ereact\x3c\/code\x3e和\x3ccode\x3ees6\x3c\/code\x3e的代码，并将css通过\x3ccode\x3eless-loader\x3c\/code\x3e, \x3ccode\x3ecss-loader\x3c\/code\x3e, \x3ccode\x3estyle-loader\x3c\/code\x3e自动编译到html的style标签中，再通过\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.ProvidePlugin({\n  React: \x27react\x27\n}),\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.ProvidePlugin({\n  \x3cspan class=\x22hljs-attr\x22\x3eReact\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n}),\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e的形式，将react组件注册到每个js文件中，不需再重复引用，最后把所有的js模块编译打包输出到 \x3ccode\x3edist\/bundle.js\x3c\/code\x3e，再html中引入即可。\x3c\/p\x3e\n\x3cp\x3e流程图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyPyt?w=633\x26amp;h=289\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyPyt?w=633\x26amp;h=289\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3ewebpack部分设置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27);\nvar webpack = require(\x27webpack\x27);\n\nmodule.exports = {\n  devtool: \x27source-map\x27,\n  entry: [\n    \x27.\/src\/index\x27\n  ],\n  output: {\n    path: path.join(__dirname, \x27dist\x27),\n    filename: \x27bundle.js\x27,\n    publicPath: \x27\/dist\/\x27\n  },\n  target: \x27atom\x27,\n  module: {\n    loaders: [\n      {\n        test: \/\\.js$\/,\n        include: path.join(__dirname, \x27src\x27),\n        loader: require.resolve(\x27babel-loader\x27),\n        ...\n      },\n     ...\n    ]\n  },\n  ...\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3edevtool\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27source-map\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/index\x27\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/dist\/\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3etarget\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27atom\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e),\n        ...\n      },\n     ...\n    ]\n  },\n  ...\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ewebpack需要设置入口文件\x3ccode\x3eentry\x3c\/code\x3e，在此是引入了源码文件夹src中的\x3ccode\x3eindex.js\x3c\/code\x3e，和一个或多个出口文件\x3ccode\x3eoutput\x3c\/code\x3e，输出devtool\x3ccode\x3esource-map\x3c\/code\x3e使得源代码可见，而非编译后的代码，然后制定所需要的\x3ccode\x3eloader\x3c\/code\x3e来做模块的编译。\x3c\/p\x3e\n\x3cp\x3e与\x3ccode\x3eelectron\x3c\/code\x3e相关的一个比较重要的点是，必须指定\x3ccode\x3etarget: atom\x3c\/code\x3e，否则会出现无法resolve electron modules的报错提示。\x3c\/p\x3e\n\x3cp\x3e更多介绍可以参考\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000002551952\x22\x3eWebpack 入门指迷\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3efeWorkflow项目中选用了\x3ca href=\x22https:\/\/github.com\/gaearon\/react-transform-hmr\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-transform-hmr\x3c\/a\x3e做为模板，已经写好了基础的\x3ccode\x3ewebpack\x3c\/code\x3e文件，支持\x3ccode\x3ereact\x3c\/code\x3e热加载，不再需要经常去刷新electron，不过该作者已经停止维护这个项目，而是恢复维护\x3ccode\x3ereact-hot-reload\x3c\/code\x3e，现在重新开发\x3ca href=\x22https:\/\/github.com\/gaearon\/react-hot-loader\/pull\/240\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact Hot Loader 3\x3c\/a\x3e, 有兴趣可以去了解一下。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eRedux\x3c\/h3\x3e\n\x3cp\x3eRedux是针对JavaScript apps的一个可预见的state容器。它可以帮助我们写一个行为保持一致性的应用，可以运行再不同的环境中（client，server，和原生），并非常容易测试。\x3c\/p\x3e\n\x3cp\x3eRedux 可以用这三个基本原则来描述：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 单一数据源\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e整个应用的\x26nbsp;state\x26nbsp;被储存在一个 object tree 中，并且这个 object tree 只存在于唯一一个\x26nbsp;store\x26nbsp;中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let store = createStore(counter) \/\/创建一个redux store来保存你的app中所有state\n\n\/\/当state更新时，可以使用 subscribe()来绑定监听更新UI，通常情况下不会直接使用这个方法，而是会用view层绑定库（类似react-redux等)。\nstore.subscribe(() =\x3e\n  console.log(store.getState()) \/\/抛出所有数据\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e store = createStore(counter) \x3cspan class=\x22hljs-comment\x22\x3e\/\/创建一个redux store来保存你的app中所有state\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/当state更新时，可以使用 subscribe()来绑定监听更新UI，通常情况下不会直接使用这个方法，而是会用view层绑定库（类似react-redux等)。\x3c\/span\x3e\nstore.subscribe(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(store.getState()) \x3cspan class=\x22hljs-comment\x22\x3e\/\/抛出所有数据\x3c\/span\x3e\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. State是只读的\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e惟一改变 state 的方法就是触发\x26nbsp;action，action 是一个用于描述已发生事件的普通对象。\x3c\/p\x3e\n\x3cp\x3e所有的修改都被集中化处理，且严格按照一个接一个的顺序执行. 而执行的方法是调用\x3ccode\x3edispatch\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22store.dispatch({\n  type: \x27COMPLETE_TODO\x27,\n  index: 1\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3estore.dispatch({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27COMPLETE_TODO\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. 使用纯函数来执行修改\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e为了描述 action 如何改变 state tree ，你需要编写\x26nbsp;\x3ccode\x3ereducers\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eReducer\x3c\/code\x3e 只是一些纯函数，它接收先前的 \x3ccode\x3estate\x3c\/code\x3e 和 \x3ccode\x3eaction\x3c\/code\x3e，并返回新的 \x3ccode\x3estate\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function counter(state = 0, action) {\n  switch (action.type) {\n  case \x27INCREMENT\x27:\n    return state \x2b 1\n  case \x27DECREMENT\x27:\n    return state - 1\n  default:\n    return state\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecounter\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (action.type) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27INCREMENT\x27\x3c\/span\x3e:\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27DECREMENT\x27\x3c\/span\x3e:\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eredux流程图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyPyi?w=800\x26amp;h=600\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyPyi?w=800\x26amp;h=600\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eReact-Redux\x3c\/h4\x3e\n\x3cp\x3eredux在react中应用还需要加载\x3ccode\x3ereact-redux\x3c\/code\x3e模块，因为\x3ccode\x3estore\x3c\/code\x3e为单一state结构头，我们仅需要在入口处调用react-redux的\x3ccode\x3eProvider\x3c\/code\x3e方法抛出\x3ccode\x3estore\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render(\n  \x3cProvider store={store}\x3e\n    \x3cContainer \/\x3e\n  \x3c\/Provider\x3e,\n  document.getElementById(\x27root\x27)\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3erender(\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estore\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{store}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eContainer\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e)\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，在container的内部都能接收到\x3ccode\x3estore\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e我们需要一个操作store的\x3ccode\x3ereducer\x3c\/code\x3e. 当我们的reducer拆分好对应给不同的子组件之后，redux提供了一个\x3ccode\x3ecombineReducers\x3c\/code\x3e的方法，把所有的\x3ccode\x3ereducers\x3c\/code\x3e合并起来:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { combineReducers } from \x27redux\x27;\nimport lists from \x27.\/list\x27;\nimport snackbar from \x27.\/snackbar\x27;\nimport dropzone from \x27.\/dropzone\x27;\n\nexport default combineReducers({\n  lists,\n  snackbar,\n  dropzone,\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { combineReducers } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e lists \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/list\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e snackbar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/snackbar\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e dropzone \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dropzone\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e combineReducers({\n  lists,\n  snackbar,\n  dropzone,\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后通过\x3ccode\x3ecreateStore\x3c\/code\x3e的方式链接\x3ccode\x3estore\x3c\/code\x3e与\x3ccode\x3ereducer\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { createStore } from \x27redux\x27;\nimport reducer from \x27..\/reducer\/reducer\x27;\n\nexport default createStore(reducer);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createStore } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e reducer \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/reducer\/reducer\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e createStore(reducer);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上文介绍\x3ccode\x3eredux\x3c\/code\x3e的时候也说过，\x3cstrong\x3estate\x3c\/strong\x3e是只读的，只能通过action来操作，同样我们也可以把\x3ccode\x3edispatch\x3c\/code\x3e映射成为一个props传入Container中。\x3c\/p\x3e\n\x3cp\x3e在子模块中, 则把这个store映射成react的props，再用\x3ccode\x3econnect\x3c\/code\x3e方法，把store和component链接起来：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { connect } from \x27react-redux\x27; \/\/引入connect方法\nimport { addList } from \x27..\/..\/action\/addList\x27; \/\/从action中引入addList方法\n\nconst AddListBtn = ({ lists, addList }) =\x3e (\n  \x3cFloatingActionButton\n    onClick={(event) =\x3e {\n        addList(\x27do something here\x27);\n          return false;\n      });\n    \x22}}\x22\n  \x3e;\n);\nconst mapStateToProps = (states) =\x3e ({\n  \/\/从state.lists获取数据存储到lists中，做为属性传递给AddListBtn\n  lists: states.lists\n});\n\nconst mapDispatchToProps = (dispatch) =\x3e ({\n  \/\/将addList函数做为属性传递给AddListBtn\n  addList: (name, location) =\x3e dispatch(addList(name, location));\n});\n\n\/\/lists, addList做为属性链接到Conta\nexport default connect(mapStateToProps, mapDispatchToProps)(AddListBtn);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/引入connect方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { addList } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/action\/addList\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/从action中引入addList方法\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e AddListBtn = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ lists, addList }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eFloatingActionButton\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{(event)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        addList(\x27do something here\x27);\n          return false;\n      });\n    \x22}}\x22\n  \x26gt;;\n);\nconst mapStateToProps = (states) =\x26gt; ({\n  \/\/从state.lists获取数据存储到lists中，做为属性传递给AddListBtn\n  lists: states.lists\n});\n\nconst mapDispatchToProps = (dispatch) =\x26gt; ({\n  \/\/将addList函数做为属性传递给AddListBtn\n  addList: (name, location) =\x26gt; dispatch(addList(name, location));\n});\n\n\/\/lists, addList做为属性链接到Conta\nexport default connect(mapStateToProps, mapDispatchToProps)(AddListBtn);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，就完成了redux与react的交互，很便捷的从上而下操作数据。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eimmutable.js\x3c\/h3\x3e\n\x3cp\x3eImmutable Data是指一旦被创造后，就不可以被改变的数据。\x3c\/p\x3e\n\x3cp\x3e通过使用Immutable Data，可以让我们更容易的去处理缓存、回退、数据变化检测等问题，简化我们的开发。\x3c\/p\x3e\n\x3cp\x3e所以当对象的内容没有发生变化时，或者有一个新的对象进来时，我们倾向于保持对象引用的不变。这个工作正是我们需要借助Facebook的\x26nbsp;\x3ca href=\x22https:\/\/github.com\/facebook\/immutable-js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImmutable.js\x3c\/a\x3e来完成的。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e不变性意味着数据一旦创建就不能被改变，这使得应用开发更为简单，避免保护性拷贝（defensive copy），并且使得在简单的应用 逻辑中实现变化检查机制等。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var stateV1 = Immutable.fromJS({  \nusers: [\n    { name: \x27Foo\x27 },\n    { name: \x27Bar\x27 }\n]\n});\n \nvar stateV2 = stateV1.updateIn([\x27users\x27, 1], function () {  \n    return Immutable.fromJS({\n        name: \x27Barbar\x27\n    });\n});\n \nstateV1 === stateV2; \/\/ false  \nstateV1.getIn([\x27users\x27, 0]) === stateV2.getIn([\x27users\x27, 0]); \/\/ true  \nstateV1.getIn([\x27users\x27, 1]) === stateV2.getIn([\x27users\x27, 1]); \/\/ false\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stateV1 = Immutable.fromJS({  \n\x3cspan class=\x22hljs-attr\x22\x3eusers\x3c\/span\x3e: [\n    { \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo\x27\x3c\/span\x3e },\n    { \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Bar\x27\x3c\/span\x3e }\n]\n});\n \n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stateV2 = stateV1.updateIn([\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{  \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Immutable.fromJS({\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Barbar\x27\x3c\/span\x3e\n    });\n});\n \nstateV1 === stateV2; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ false  \x3c\/span\x3e\nstateV1.getIn([\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]) === stateV2.getIn([\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ true  \x3c\/span\x3e\nstateV1.getIn([\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]) === stateV2.getIn([\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ false\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3efeWorkflow项目中使用最多的是\x3ccode\x3eList\x3c\/code\x3e来创建一个数组，\x3ccode\x3eMap()\x3c\/code\x3e来创建一个对象，再通过\x3ccode\x3eset\x3c\/code\x3e的方法来更新数组，例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { List, Map } from \x27immutable\x27;\n\nexport const syncFolder = List([\n  Map({\n    name: \x27syncFromFolder\x27,\n    label: \x27从目录复制\x27,\n    location: \x27\x27\n  }),\n  Map({\n    name: \x27syncToFolder\x27,\n    label: \x27复制到目录\x27,\n    location: \x27\x27\n  })\n]);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { List, \x3cspan class=\x22hljs-built_in\x22\x3eMap\x3c\/span\x3e } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27immutable\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e syncFolder = List([\n  \x3cspan class=\x22hljs-built_in\x22\x3eMap\x3c\/span\x3e({\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27syncFromFolder\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27从目录复制\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elocation\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n  }),\n  \x3cspan class=\x22hljs-built_in\x22\x3eMap\x3c\/span\x3e({\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27syncToFolder\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27复制到目录\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elocation\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n  })\n]);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更新的时候使用\x3ccode\x3esetIn\x3c\/code\x3e方法，传递\x3ccode\x3eMap\x3c\/code\x3e对象的序号，选中\x3ccode\x3elocation\x3c\/code\x3e这个属性，通过\x3ccode\x3eaction\x3c\/code\x3e传递过来的新值\x3ccode\x3eaction.location\x3c\/code\x3e更新值，并返回一个全新的数组。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22case \x27SET_SYNC_FOLDER\x27:\n      return state.setIn([\x27syncFolder\x27, action.index, \x27location\x27], action.location);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SET_SYNC_FOLDER\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state.setIn([\x3cspan class=\x22hljs-string\x22\x3e\x27syncFolder\x27\x3c\/span\x3e, action.index, \x3cspan class=\x22hljs-string\x22\x3e\x27location\x27\x3c\/span\x3e], action.location);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e数据存储\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e存：\x3c\/strong\x3eimmutable的数据已经不是单纯的json数据格式，当我们要做json格式的数据存储的时候，可以使用\x3ccode\x3etoJS()\x3c\/code\x3e方法抛出js对象，并通过\x3ccode\x3eJSON.stringnify()\x3c\/code\x3e将js数据转换成json字符串，存入localstorage中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const saveState = (name = \x27state\x27, state = \x27state\x27) =\x3e {\n  try {\n    const data = JSON.stringify(state.toJS());\n    localStorage.setItem(name, data);\n  } catch(err) {\n    console.log(\x27err\x27, err);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e saveState = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ename = \x3cspan class=\x22hljs-string\x22\x3e\x27state\x27\x3c\/span\x3e, state = \x3cspan class=\x22hljs-string\x22\x3e\x27state\x27\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e data = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(state.toJS());\n    localStorage.setItem(name, data);\n  } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(err) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27err\x27\x3c\/span\x3e, err);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e取：\x3c\/strong\x3e读取本地的json格式数据后，当需要加载进页面，首先需要把这段json数据转换会immutable.js数据格式，\x3ccode\x3eimmutable\x3c\/code\x3e提供了\x3ccode\x3efromJS()\x3c\/code\x3e方法，将js对象和数组转换成immtable的\x3ccode\x3eMaps\x3c\/code\x3e和\x3ccode\x3eLists\x3c\/code\x3e格式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { fromJS, Iterable } from \x27immutable\x27;\n\nexport const loadState = (name = \x27setting\x27) =\x3e {\n  try {\n    const data = localStorage.getItem(name);\n\n    if (data === null) {\n      return undefined;\n    }\n\n    return fromJS(JSON.parse(data), (key, value) =\x3e {\n      const isIndexed = Iterable.isIndexed(value);\n      return isIndexed ? value.toList() : value.toMap();\n    });\n\n  } catch(err) {\n    return undefined;\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { fromJS, Iterable } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27immutable\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e loadState = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ename = \x3cspan class=\x22hljs-string\x22\x3e\x27setting\x27\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e data = localStorage.getItem(name);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data === \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e fromJS(\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(data), (key, value) =\x26gt; {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e isIndexed = Iterable.isIndexed(value);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e isIndexed ? value.toList() : value.toMap();\n    });\n\n  } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(err) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e应用示例\x3c\/h2\x3e\n\x3cp\x3e上文介绍了整个feWorkflow的UI技术实现方案，现在来介绍下实际上gulp在这里是如何工作的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e思路\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们知道\x3ccode\x3enode\x3c\/code\x3e中调用\x3ccode\x3echild_process\x3c\/code\x3e的\x3ccode\x3eexec\x3c\/code\x3e可以执行系统命令，gulpfile.js本身会调用离自身最近的node_modules，而gulp提供了API可以通过flag的形式(—cwd)来执行不同的路径。以此为思路，以最简单的方式，在按钮上绑定执行状态（dev或者build，包括flag等），通过\x3ccode\x3eexec\x3c\/code\x3e直接运行gulp file.js.\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e实现\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e当按钮点击的时候，判断是否在执行中，如果在执行中则杀掉进程，如果不在执行中则通过\x3ccode\x3eexec\x3c\/code\x3e执行当前按钮状态的命令。然后扭转按钮的状态，等待下一次按钮点击。\x3c\/p\x3e\n\x3cp\x3e命令模式如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const ListBtns = ({btns, listId, listLocation, onProcess, cancelBuild, setSnackbar}) =\x3e (\n  \x3cdiv className=\x26quot;btn-group btn-group__right\x26quot;\x3e\n    {\n      btns.map((btn, i) =\x3e (\n        \x3cRaisedButton\n          key={i}\n          className=\x26quot;btn\x26quot;\n          style={style}\n          label={btn.get(\x27name\x27)}\n          labelPosition=\x26quot;after\x26quot;\n          primary={btn.get(\x27process\x27)}\n          secondary={btn.get(\x27fail\x27)}\n          pid={btn.get(\x27pid\x27)}\n          onClick={() =\x3e {\n            if (btn.get(\x27process\x27)) {\n              kill(btn.get(\x27pid\x27));\n            } else {\n              let child = exec(`gulp ${btn.get(\x27cmd\x27)} --cwd ${listLocation} ${btn.get(\x27flag\x27)} --gulpfile ${cwd}\/gulpfile.js`,  {\n                cwd\n              });\n\n              child.stderr.on(\x27data\x27, function (data) {\n                let str = data.toString();\n\n                console.error(\x27exec error: \x27 \x2b str);\n                kill(btn.get(\x27pid\x27));\n                cancelBuild(listId, i, btn.get(\x27name\x27), child.pid, str, true);\n                dialog.showErrorBox(\x27Oops， 出错了\x27, str);\n              });\n\n              child.stdout.on(\x27data\x27, function (data) {\n                console.log(data.toString())\n                onProcess(listId, i, btn.get(\x27text\x27), child.pid, data.toString())\n              });\n\n              \/\/关闭\n              child.stdout.on(\x27close\x27, function () {\n                cancelBuild(listId, i, btn.get(\x27name\x27), child.pid, \x27编译结束\x27, false);\n                setSnackbar(\x27编译结束\x27);\n\n                console.info(\x27编译结束\x27);\n              });\n            }\n          \x22}}\x22\n        \/\x3e\n      ))\n    }\n  \x3c\/div\x3e\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ListBtns = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{btns, listId, listLocation, onProcess, cancelBuild, setSnackbar}\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn-group btn-group__right\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    {\n      btns.map((btn, i) =\x26gt; (\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRaisedButton\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{i}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btn\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{style}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{btn.get(\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e\x27)}\n          \x3cspan class=\x22hljs-attr\x22\x3elabelPosition\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22after\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eprimary\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{btn.get(\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3eprocess\x3c\/span\x3e\x27)}\n          \x3cspan class=\x22hljs-attr\x22\x3esecondary\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{btn.get(\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3efail\x3c\/span\x3e\x27)}\n          \x3cspan class=\x22hljs-attr\x22\x3epid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{btn.get(\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3epid\x3c\/span\x3e\x27)}\n          \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            if (btn.get(\x27process\x27)) {\n              kill(btn.get(\x27pid\x27));\n            } else {\n              let child = exec(`gulp ${btn.get(\x27cmd\x27)} --cwd ${listLocation} ${btn.get(\x27flag\x27)} --gulpfile ${cwd}\/gulpfile.js`,  {\n                cwd\n              });\n\n              child.stderr.on(\x27data\x27, function (data) {\n                let str = data.toString();\n\n                console.error(\x27exec error: \x27 \x2b str);\n                kill(btn.get(\x27pid\x27));\n                cancelBuild(listId, i, btn.get(\x27name\x27), child.pid, str, true);\n                dialog.showErrorBox(\x27Oops， 出错了\x27, str);\n              });\n\n              child.stdout.on(\x27data\x27, function (data) {\n                console.log(data.toString())\n                onProcess(listId, i, btn.get(\x27text\x27), child.pid, data.toString())\n              });\n\n              \/\/关闭\n              child.stdout.on(\x27close\x27, function () {\n                cancelBuild(listId, i, btn.get(\x27name\x27), child.pid, \x27编译结束\x27, false);\n                setSnackbar(\x27编译结束\x27);\n\n                console.info(\x27编译结束\x27);\n              });\n            }\n          \x22}}\x22\n        \/\x26gt;\n      ))\n    }\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e—cwd\x3c\/code\x3e把gulp的操作路径指向了我们定义的src路径，\x3ccode\x3e—gulpfile\x3c\/code\x3e则强行使用feWorkflow中封装的gulp file.js。我在js中对路径做了处理，以\x3ccode\x3esrc\x3c\/code\x3e做为截断点，拼接命令行，假设拖放了一个位于\x3ccode\x3eD:Codeworkvdlotteryv3src\x3c\/code\x3e下的路径，那么输出的命令格式为:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/执行命令\nlet child = exec(`gulp ${btn.get(\x27cmd\x27)} --cwd ${listLocation} ${btn.get(\x27flag\x27)} --gulpfile ${cwd}\/gulpfile.js`)\n\n\/\/编译输出命令：\ngulp dev --cwd D:\\Code\\work\\vd\\lottery\\v3\\src --development\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/执行命令\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e child = exec(\x3cspan class=\x22hljs-string\x22\x3e`gulp \x3cspan class=\x22hljs-subst\x22\x3e${btn.get(\x3cspan class=\x22hljs-string\x22\x3e\x27cmd\x27\x3c\/span\x3e)}\x3c\/span\x3e --cwd \x3cspan class=\x22hljs-subst\x22\x3e${listLocation}\x3c\/span\x3e \x3cspan class=\x22hljs-subst\x22\x3e${btn.get(\x3cspan class=\x22hljs-string\x22\x3e\x27flag\x27\x3c\/span\x3e)}\x3c\/span\x3e --gulpfile \x3cspan class=\x22hljs-subst\x22\x3e${cwd}\x3c\/span\x3e\/gulpfile.js`\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/编译输出命令：\x3c\/span\x3e\ngulp dev --cwd D:\\Code\\work\\vd\\lottery\\v3\\src --development\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时，通过\x3ccode\x3eaction\x3c\/code\x3e扭转了按钮状态：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function processing(id, index, name, pid, data) {\n  return {\n    id,\n    type: \x27PROCESSING\x27,\n    btns: {\n      index,\n      name,\n      pid,\n      data,\n      process: true,\n      cmd: name\n    }\n  };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eprocessing\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eid, index, name, pid, data\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    id,\n    \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27PROCESSING\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ebtns\x3c\/span\x3e: {\n      index,\n      name,\n      pid,\n      data,\n      \x3cspan class=\x22hljs-attr\x22\x3eprocess\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ecmd\x3c\/span\x3e: name\n    }\n  };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e调用\x3ccode\x3edispatch\x3c\/code\x3e发送给\x3ccode\x3ereducer\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const initState = List([]);\n\nexport default (state = initState, action) =\x3e {\n  switch (action.type) {\n      ...\n        case \x27PROCESSING\x27:\n      return state.map(item =\x3e {\n        if (item.get(\x27id\x27) == action.id) {\n          return item.withMutations(i =\x3e {\n            i\n              .set(\x27status\x27, action.btns.cmd)\n              .set(\x27snackbar\x27, action.snackbar)\n              .setIn([\x27btns\x27, action.btns.index, \x27text\x27], action.btns.name)\n              .setIn([\x27btns\x27, action.btns.index, \x27name\x27], \x27编译中...\x27)\n              .setIn([\x27btns\x27, action.btns.index, \x27process\x27], action.btns.process)\n              .setIn([\x27btns\x27, action.btns.index, \x27pid\x27], action.btns.pid);\n          });\n\n        } else {\n          return item;\n        }\n      });\n     ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initState = List([]);\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (state = initState, action) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (action.type) {\n      ...\n        case \x3cspan class=\x22hljs-string\x22\x3e\x27PROCESSING\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item.get(\x3cspan class=\x22hljs-string\x22\x3e\x27id\x27\x3c\/span\x3e) == action.id) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e item.withMutations(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            i\n              .set(\x3cspan class=\x22hljs-string\x22\x3e\x27status\x27\x3c\/span\x3e, action.btns.cmd)\n              .set(\x3cspan class=\x22hljs-string\x22\x3e\x27snackbar\x27\x3c\/span\x3e, action.snackbar)\n              .setIn([\x3cspan class=\x22hljs-string\x22\x3e\x27btns\x27\x3c\/span\x3e, action.btns.index, \x3cspan class=\x22hljs-string\x22\x3e\x27text\x27\x3c\/span\x3e], action.btns.name)\n              .setIn([\x3cspan class=\x22hljs-string\x22\x3e\x27btns\x27\x3c\/span\x3e, action.btns.index, \x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27编译中...\x27\x3c\/span\x3e)\n              .setIn([\x3cspan class=\x22hljs-string\x22\x3e\x27btns\x27\x3c\/span\x3e, action.btns.index, \x3cspan class=\x22hljs-string\x22\x3e\x27process\x27\x3c\/span\x3e], action.btns.process)\n              .setIn([\x3cspan class=\x22hljs-string\x22\x3e\x27btns\x27\x3c\/span\x3e, action.btns.index, \x3cspan class=\x22hljs-string\x22\x3e\x27pid\x27\x3c\/span\x3e], action.btns.pid);\n          });\n\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e item;\n        }\n      });\n     ...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，就是整个文件执行的过程。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e这次的改版做了很多新的尝试，断断续续的花了不少时间，还没有达到最初的设想，也还缺失了一些重要的功能。后续还需要补充不少东西。成品确实还比较简单，代码也许也比较杂乱，所有代码开源在\x3ca href=\x22https:\/\/github.com\/whatifhappen\/feWorkflow\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e上，欢迎斧正。\x3c\/p\x3e\n\x3cp\x3e参考资料：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/electron\/electron\/tree\/master\/docs-translations\/zh-CN\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eelectron docs\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/babeljs.io\/blog\/2015\/06\/07\/react-on-es6-plus\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel react-on-es6-plus\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/webpack.github.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/redux.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>feWorkflow - 使用 electron, react, redux, immutable 构建桌面 App</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005879164">https://segmentfault.com/a/1190000005879164</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/umq6lnpt4jl/" target="_blank">https://alili.tech/archive/umq6lnpt4jl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>