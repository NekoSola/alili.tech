<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端开发中的字符编码"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端开发中的字符编码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/143ti97zuf4/",
				"appid": "1613049289050283", 
				"title": "前端开发中的字符编码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-10T02:30:42"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/wze6dkms9d/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dzv2y8axm2a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&text=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&text=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&title=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&title=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&title=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&title=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f143ti97zuf4%2f&title=%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e7%bc%96%e7%a0%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端开发中的字符编码</h1><div class="meta"><div class="postdate"><time datetime="2019-02-10" itemprop="datePublished">2019-02-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前端开发过程中会接触各种各样的编码，比较常见的主要是 UTF-8 和 HTML 实体编码，但是 web 前端的世界却不止这两种编码，而且编码的选择也会造成一定的问题，如前后端开发过程中不同编码的兼容、多字节编码可能会造成的 XSS 漏洞等。因此，本文旨在更好的全面了解涉及前端开发领域的字符编码，避免可能出现的交互和开发中的忽视的漏洞。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eURL 编码\x3c\/h2\x3e\n\x3cp\x3e我曾经在 \x3ca href=\x22http:\/\/www.cnblogs.com\/accordion\/p\/4178289.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eURL 编码解码和 base64\x3c\/a\x3e 一文中讲述了 URL 编码中的三组函数，并对比了这三组函数与 base64 编码的关系，在此简要说明一下。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eescape\/unescape\x3c\/code\x3e 函数针对宽字符做 unicode 编码，并针对码值做十六进制编码，所以使用 escape 针对汉字编码会得到形如 \x3ccode\x3e\\uxxxx\x3c\/code\x3e 的结果；\x3ccode\x3eencodeURI\/decodeURI\x3c\/code\x3e, \x3ccode\x3eencodeURIComponent\/decodeURIComponent\x3c\/code\x3e 函数针对宽字节编码却不同于 escape，首先针对宽字节字符进行 UTF-8 编码，然后针对编码后的结果进行 \x3ccode\x3e％\x3c\/code\x3e 替换，得到结果。以上所述都是针对宽字节而言，对于编码靠前的 ASCII 字符而言，上述三组函数的安全字符的范围也有所不同，具体可在上文中了解。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3ebase64 编码\x3c\/h3\x3e\n\x3cp\x3ebase64 编码在前端通常用于图片和 icon 的编码，它将每 3 个 8 位字节为一组，分成 4 组 6 位字节，并且每个字节的高位补零，形成 4 个 8 位的字节，由此可看出 base64 编码是可逆推的。在大多数浏览器中，提供了 ASCII 字符的 base64 编码函数，即 window.btoa()。该函数无法针对宽字节进行base64编码，若针对中文编码，则需现转换位 UTF-8 编码，然后进行 base64 编码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function unicodeToBase64(s){\n　　　　return window.btoa(unescape(encodeURIComponent(s)))\n　　}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eunicodeToBase64\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3es\x3c\/span\x3e)\x3c\/span\x3e{\n　　　　\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.btoa(\x3cspan class=\x22hljs-built_in\x22\x3eunescape\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eencodeURIComponent\x3c\/span\x3e(s)))\n　　}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过 \x3ccode\x3eencodeURIComponent\x3c\/code\x3e 对宽字节字符编码，是 \x3ccode\x3e％xx\x3c\/code\x3e 形式的编码，与 UTF-8 编码的区别仅在于前缀（这是由规范 RFC3986 决定的，将非 ASC 字符进行某种形式编码，并转换为 16 进制，并在字节前加上“％”）。因此通过 \x3cstrong\x3e\x3ccode\x3eunescape(encodeURIComponent(s))\x3c\/code\x3e\x3c\/strong\x3e 可以转化为 UTF-8 字节。当然，也可自己写一个转换函数，按照一定规则便行为 UTF-8 编码的字节，如下例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22unescape(encodeURIComponent(\x26quot;中国\x26quot;)) \/\/结果：\x26quot;ä¸­å½\x26quot;\nencodeURIComponent(\x26quot;中国\x26quot;) \/\/结果：\x26quot;%E4%B8%AD%E5%9B%BD\x26quot;\nconsole.log(\x26quot;\\u00E4\\u00B8\\u00AD\\u00E5\\u009B\\u00BD\x26quot;) \/\/ 结果： \x26quot;ä¸­å½\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs perl\x22\x3e\x3ccode\x3eunescape(encodeURIComponent(\x3cspan class=\x22hljs-string\x22\x3e\x22中国\x22\x3c\/span\x3e)) \/\/结果：\x3cspan class=\x22hljs-string\x22\x3e\x22ä¸­å½\x22\x3c\/span\x3e\nencodeURIComponent(\x3cspan class=\x22hljs-string\x22\x3e\x22中国\x22\x3c\/span\x3e) \/\/结果：\x3cspan class=\x22hljs-string\x22\x3e\x22%E4%B8%AD%E5%9B%BD\x22\x3c\/span\x3e\nconsole.log(\x3cspan class=\x22hljs-string\x22\x3e\x22\\u00E4\\u00B8\\u00AD\\u00E5\\u009B\\u00BD\x22\x3c\/span\x3e) \/\/ 结果： \x3cspan class=\x22hljs-string\x22\x3e\x22ä¸­å½\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过简单的 replace 函数，就可以完成 URL 编码到 UTF-8 编码的转换，进而完成宽字节字符到base64编码的转换。有了这个函数，我们手动生成一些 data URI 形式的内容，只需制定 MIME 类型和编码方式，就可以实现文本的转换，如以下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ca href=\x26quot;data:text\/html;charset=utf-8;base64,PHNjcmlwdD5hbGVydCgxMik8L3NjcmlwdD4=\x26quot; \x3eabc\x3c\/a\x3e\n\/\/ 未编码前：\x3ca href=\x26quot;javascript: alert(1)\x26quot;\x3etest\x3c\/a\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22data:text\/html;charset=utf-8;base64,PHNjcmlwdD5hbGVydCgxMik8L3NjcmlwdD4=\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3eabc\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\/\/ 未编码前：\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22javascript: alert(1)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3etest\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e前端 UTF-8 编码与后端 GBK 编码的兼容\x3c\/h3\x3e\n\x3cp\x3e目前前端大都采用 UTF-8 进行编码，不管是 html、js 抑或是 css，而后端则由于历史原因大都采用 GBK 或 GB2312 进行解码，因此前端通过 parameter 传递的 URL 编码的字符串就不可能直接在后台进行解码，为了更好的兼容性，前端可进行两次 URL 编码，即 \x3ccode\x3eencodeURIComponent（encodeURIComponent（“中国”））\x3c\/code\x3e，这样后端接收到参数后，先使用 GBK 或 GB2312 解码，得到了 UTF-8 编码后再使用 UTF-8 解码即可。两次编码主要是利用“\x3cstrong\x3eASC 字符使用 GBK 或 GB2312 编码不变\x3c\/strong\x3e”的特点完成，富有技巧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eHTML 实体编码与进制编码\x3c\/h2\x3e\n\x3cp\x3e实体编码针对HTML的预留字符而言，如 \x3ccode\x3e\x26lt;\x26gt;\x3c\/code\x3e 等。实体编码有两种形式 \x3cstrong\x3e\x3ccode\x3e\x26amp;实体名;\x3c\/code\x3e\x3c\/strong\x3e 或 \x3cstrong\x3e\x3ccode\x3e\x26amp;entity_number;\x3c\/code\x3e\x3c\/strong\x3e，由于浏览器对 \x3cstrong\x3e\x3ccode\x3e\x26amp;实体名;\x3c\/code\x3e\x3c\/strong\x3e 的兼容性有差别，因此最好采用实体号的形式编码。\x3c\/p\x3e\n\x3cp\x3e进制编码，顾名思义将ASC字符对应的码值按照十六进制或十进制编码，并转化为 \x3cstrong\x3e\x3ccode\x3e\x26amp;#x;(16进制)\x3c\/code\x3e\x3c\/strong\x3e 或\x3cstrong\x3e\x3ccode\x3e\x26amp;#D;(10进制)\x3c\/code\x3e\x3c\/strong\x3e 形式。\x3c\/p\x3e\n\x3cp\x3e单单针对实体编码而言并没有什么特殊强调的点，之所以把它单独列为一个章节，意在强调这两种编码与 js 代码的作用域的关系。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221、\x3cdiv onclick=\x26quot;document.write(\x27\x3cimg src=1 onerror=alert(23)\x3e\x27)\x26quot;\x3ecccc\x3c\/div\x3e \n2、\x3cdiv onclick=\x26quot;document.write(\x27\x26amp;lt;img src=1 onerror=alert(23)\x26amp;gt;\x27)\x26quot;\x3ecccc\x3c\/div\x3e\n3、\x26amp;#x3c;\x26amp;#x69;\x26amp;#x6d;\x26amp;#x67;\x26amp;#x20;\x26amp;#x73;\x26amp;#x72;\x26amp;#x63;\x26amp;#x3d;\x26amp;#x31;\x26amp;#x20;\x26amp;#x6f;\x26amp;#x6e;\x26amp;#x65;\x26amp;#x72;\x26amp;#x72;\x26amp;#x6f;\x26amp;#x72;\x26amp;#x3d;\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x26amp;#x3e;\n4、\x3cimg src=1 onerror=\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x3e\n\n\x3cscript\x3e\n    5、document.write(\x27\x26amp;lt;img src=1 onerror=alert(23)\x26amp;gt;\x27);\n    6、document.write(\x27\x3cimg src=1 onerror=\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x33;\x26amp;#x29;\x3e\x27);\n    7、document.write(\x27\x26amp;#x3c;\x26amp;#x69;\x26amp;#x6d;\x26amp;#x67;\x26amp;#x20;\x26amp;#x73;\x26amp;#x72;\x26amp;#x63;\x26amp;#x3d;\x26amp;#x31;\x26amp;#x20;\x26amp;#x6f;\x26amp;#x6e;\x26amp;#x65;\x26amp;#x72;\x26amp;#x72;\x26amp;#x6f;\x26amp;#x72;\x26amp;#x3d;\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x26amp;#x3e;\x27)\n    8、document.write(\x27\\u003c\\u0069\\u006d\\u0067\\u0020\\u0073\\u0072\\u0063\\u003d\\u0031\\u0020\\u006f\\u006e\\u0065\\u0072\\u0072\\u006f\\u0072\\u003d\\u0061\\u006c\\u0065\\u0072\\u0074\\u0028\\u0032\\u0033\\u0029\\u003e\x27)\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e、\x26lt;div onclick=\x3cspan class=\x22hljs-string\x22\x3e\x22document.write(\x27\x26lt;img src=1 onerror=alert(23)\x26gt;\x27)\x22\x3c\/span\x3e\x26gt;cccc\x26lt;\/div\x26gt; \n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e、\x26lt;div onclick=\x3cspan class=\x22hljs-string\x22\x3e\x22document.write(\x27\x26amp;lt;img src=1 onerror=alert(23)\x26amp;gt;\x27)\x22\x3c\/span\x3e\x26gt;cccc\x26lt;\/div\x26gt;\n\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e、\x26amp;#x3c;\x26amp;#x69;\x26amp;#x6d;\x26amp;#x67;\x26amp;#x20;\x26amp;#x73;\x26amp;#x72;\x26amp;#x63;\x26amp;#x3d;\x26amp;#x31;\x26amp;#x20;\x26amp;#x6f;\x26amp;#x6e;\x26amp;#x65;\x26amp;#x72;\x26amp;#x72;\x26amp;#x6f;\x26amp;#x72;\x26amp;#x3d;\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x26amp;#x3e;\n\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e、\x26lt;img src=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e onerror=\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x26gt;\n\n\x26lt;script\x26gt;\n    \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e、document.write(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;lt;img src=1 onerror=alert(23)\x26amp;gt;\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e、document.write(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;img src=1 onerror=\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x33;\x26amp;#x29;\x26gt;\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e、document.write(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;#x3c;\x26amp;#x69;\x26amp;#x6d;\x26amp;#x67;\x26amp;#x20;\x26amp;#x73;\x26amp;#x72;\x26amp;#x63;\x26amp;#x3d;\x26amp;#x31;\x26amp;#x20;\x26amp;#x6f;\x26amp;#x6e;\x26amp;#x65;\x26amp;#x72;\x26amp;#x72;\x26amp;#x6f;\x26amp;#x72;\x26amp;#x3d;\x26amp;#x61;\x26amp;#x6c;\x26amp;#x65;\x26amp;#x72;\x26amp;#x74;\x26amp;#x28;\x26amp;#x32;\x26amp;#x33;\x26amp;#x29;\x26amp;#x3e;\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e、document.write(\x3cspan class=\x22hljs-string\x22\x3e\x27\\u003c\\u0069\\u006d\\u0067\\u0020\\u0073\\u0072\\u0063\\u003d\\u0031\\u0020\\u006f\\u006e\\u0065\\u0072\\u0072\\u006f\\u0072\\u003d\\u0061\\u006c\\u0065\\u0072\\u0074\\u0028\\u0032\\u0033\\u0029\\u003e\x27\x3c\/span\x3e)\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e代码中列举了 8 个例子：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e第一个在事件处理函数 onclick 中输出 HTML 片段；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第二个则输出经实体编码后的 HTML 片段；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第三个则是直接针对 \x3cstrong\x3e\x3ccode\x3e\x26lt;img src=1 onerror=alert(23)\x26gt;\x3c\/code\x3e\x3c\/strong\x3e 做 16 进制编码；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第四个则是针对 onerror 事件处理函数做 16 进制编码；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第五个则是在脚本中输出实体编码的字符；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第六个针对事件处理函数做 16 进制编码；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第七个则针对所有的字符做 16 进制编码；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第八个则是在 script 中直接输出 \x3cstrong\x3e\x3ccode\x3e\x26lt;img src=1 onerror=alert(23)\x26gt;\x3c\/code\x3e\x3c\/strong\x3e 的 unicode 编码\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e对比结果，前两个例子在点击后都会弹出 alert；第三个例子则在页面中显示文本 \x3cstrong\x3e\x3ccode\x3e\x26lt;img src=1 onerror=alert(23)\x26gt;\x3c\/code\x3e\x3c\/strong\x3e；第四个例子则会在页面加载初期弹出 alert；第五、七会输出字符串；第六、八则会在第四个例子中的 alert 之后也弹出 alert。现在分析这些结果，通过第一二个例子可知道，HTML 标签中（除 script 标签）的内联 js 代码可以进行 HTML 实体编码，这是非常重要的一点，我们可以更为明确的进行验证：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv onclick=\x26quot;alert(\x27\x26amp;lt;img src=1 onerror=alert(23)\x26amp;gt;\x27)\x26quot;\x3ecccc\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e\x26lt;div onclick=\x22alert(\x27\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;lt\x3c\/span\x3e;img src=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e onerror=alert(\x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e)\x3cspan class=\x22hljs-variable\x22\x3e\x26amp;gt\x3c\/span\x3e;\x27)\x22\x26gt;\x3c\/span\x3ecccc\x3cspan class=\x22hljs-params\x22\x3e\x26lt;\/div\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输出的结果自然是 \x3cstrong\x3e\x3ccode\x3e\x26lt;img src=1 onerror=alert(23)\x26gt;\x3c\/code\x3e\x3c\/strong\x3e，这的确论证了我们上文提到的这一点；第三个例子说明了HTML解析器在进行词法分析前，首先进行解码，十六进制和十进制皆可，因此，结果自然输出形如 \x3cstrong\x3e\x3ccode\x3e\x26lt;img src=1 onerror=alert(23)\x26gt;\x3c\/code\x3e\x3c\/strong\x3e 的字符串；第四个例子则紧接着论证了内联在 HTML 的并采用十六进制编码的 js 代码同样会被正确解析并执行，这说明了进制编码同样可被 HTML 解析器解析；第五、七个例子说明在 js 中同样可以使用实体编码和进制编码，解析的结果会渲染在页面上；第六个例子则论证了上一观点，只针对事件处理函数做进制编码，执行后页面弹出 alert；第八个例子则是在 js 中执行 unicode 编码的字符串，正常 alert。\x3c\/p\x3e\n\x3cp\x3e由此可见，js 代码内联在 HTML 的非 script 标签内，则会遵守 HTML 编码规范：\x3cstrong\x3e进制编码和实体编码\x3c\/strong\x3e；而在 js 代码（script 标签内以及 js 文件内）中，则遵从 js 编码：\x3cstrong\x3e1. unicode 形式编码(uxxxx)  2. 普通的 16 进制编码(xH)\x3c\/strong\x3e，这可通过第八个例子得到证明。之所以在本节提到这么多编码特点，主要提醒大家在预防 XSS 时需要注意的几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e检测用户输入时，不仅仅需要防范类似 \x3ccode\x3e\x26lt;\x26gt;\x3c\/code\x3e 这样的字符，通过 \x3ccode\x3eunicode\x3c\/code\x3e 编码或进制编码仍有可能注入代码\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e需要针对特定的关键字做过滤，如 \x3ccode\x3eeval、write、prototype\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e尽可能禁止内联事件处理函数的使用\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ejs 过滤 \x3ccode\x3esrc\/href\/action\x3c\/code\x3e 属性，如 \x3ccode\x3ejavascript:\x3c\/code\x3e, \x3ccode\x3edata:\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eJS 编码\x3c\/h2\x3e\n\x3cp\x3e其实在上节中已提到了 js 编码，即 js 可执行 unicode 编码和十六（八）进制编码后的字符串，但是不支持十进制编码的字串。具体操作可通过常用的几个函数来实现，如 \x3ccode\x3eeval，write，setTimeout，Function\x3c\/code\x3e 执行编码后的字符串；同样，对于十进制编码的字串，通过结合 \x3ccode\x3eString.fromCharCode\x3c\/code\x3e 和 \x3ccode\x3eeval\x3c\/code\x3e 同样可以执行。\x3c\/p\x3e\n\x3cp\x3e在此附上笔者实现的字符转换，更为灵活的实现各种自定义形式的字串编码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Code = {};\n    \/**\n     *\n     * @param str 待编码字串\n     * @param jinzhi 进制编码\n     * @param prefix 前缀\n     * @param postfix 后缀\n     * @param count 总共编码的位数，默认为4\n     * @returns {string}\n     *\/\n    Code.encode = function({str = \x27\x27,jinzhi = \x2716\x27,prefix = \x27\\\\u\x27,postfix = \x27;\x27,count = \x274\x27} = {}){\n        var ret = \x27\x27;\n        var addZero,tmp;\n        for(let i=0;i\x3cstr.length;i\x2b\x2b){\n            tmp = str.charCodeAt(i).toString(jinzhi);\n            addZero = count - tmp.length \x2b 1;\n            ret \x2b= prefix \x2b new Array(addZero).join(\x270\x27) \x2b tmp \x2b postfix;\n        }\n        return ret;\n    };\n    Code.decode = function({str = \x27\x27,jinzhi = \x2716\x27,prefix = \x27\\\\u\x27,postfix = \x27;\x27} = {}){\n        var ret = \x27\x27;\n        var splits = str.split(\x27;\x27);\n        for(let i=0;i\x3csplits.length;i\x2b\x2b){\n            let tmp = splits[i].replace(prefix,\x27\x27);\n            ret \x2b= String.fromCharCode(parseInt(tmp,jinzhi));\n        }\n        return ret;\n    };\n\n    console.log(Code.encode({str: \x27\x3cimg src=@ onerror=alert(123) \/\x3e\x27}));\n    console.log(Code.decode({str: Code.encode({str: \x27\x3cimg src=@ onerror=alert(123) \/\x3e\x27})}))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs zephir\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Code = {};\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     *\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e str 待编码字串\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e jinzhi 进制编码\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e prefix 前缀\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e postfix 后缀\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e count 总共编码的位数，默认为4\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@returns\x3c\/span\x3e {string}\n     *\/\x3c\/span\x3e\n    Code.encode = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e({str = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,jinzhi = \x3cspan class=\x22hljs-string\x22\x3e\x2716\x27\x3c\/span\x3e,prefix = \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\u\x27\x3c\/span\x3e,postfix = \x3cspan class=\x22hljs-string\x22\x3e\x27;\x27\x3c\/span\x3e,count = \x3cspan class=\x22hljs-string\x22\x3e\x274\x27\x3c\/span\x3e} = {})\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ret = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e addZero,tmp;\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;str.length;i\x2b\x2b){\n            tmp = str.charCodeAt(i).toString(jinzhi);\n            addZero = count - tmp.length \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n            ret \x2b= prefix \x2b \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eArray\x3c\/span\x3e(addZero).join(\x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e) \x2b tmp \x2b postfix;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n    };\n    Code.decode = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e({str = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,jinzhi = \x3cspan class=\x22hljs-string\x22\x3e\x2716\x27\x3c\/span\x3e,prefix = \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\u\x27\x3c\/span\x3e,postfix = \x3cspan class=\x22hljs-string\x22\x3e\x27;\x27\x3c\/span\x3e} = {})\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ret = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e splits = str.split(\x3cspan class=\x22hljs-string\x22\x3e\x27;\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;splits.length;i\x2b\x2b){\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e tmp = splits[i].replace(prefix,\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n            ret \x2b= String.fromCharCode(parseInt(tmp,jinzhi));\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n    };\n\n    console.log(Code.encode({str: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;img src=@ onerror=alert(123) \/\x26gt;\x27\x3c\/span\x3e}));\n    console.log(Code.decode({str: Code.encode({str: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;img src=@ onerror=alert(123) \/\x26gt;\x27\x3c\/span\x3e})}))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外，对于 js 输出点的过滤其实并不仅限于上文提到的如 \x3cstrong\x3e\x3ccode\x3eeval、setTimeout、Function\x3c\/code\x3e\x3c\/strong\x3e 等几个，由于 JS 语法比较灵活相对“漏洞”较多，可使用的“线索”也越丰富，如前段时间在 Stackoverflow 上发现的一个问题，即\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(0)[\x27constructor\x27][\x27constructor\x27](\x27return \x26quot;abc;\x26quot;\x27)()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scheme\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e(\x3cspan class=\x22hljs-name\x22\x3e0\x3c\/span\x3e)[\x3cspan class=\x22hljs-symbol\x22\x3e\x27constructor\x3c\/span\x3e\x27][\x3cspan class=\x22hljs-symbol\x22\x3e\x27constructor\x3c\/span\x3e\x27](\x3cspan class=\x22hljs-symbol\x22\x3e\x27return\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22abc;\x22\x3c\/span\x3e\x27)()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样可以执行 JS 代码，确实挺有特点的，具体为什么上述形式可以执行代码，请读者自己仔细品味。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端开发中的字符编码</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005078371">https://segmentfault.com/a/1190000005078371</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/143ti97zuf4/" target="_blank">https://alili.tech/archive/143ti97zuf4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>