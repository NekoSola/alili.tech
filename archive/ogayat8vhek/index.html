<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于RESTful API 怎么设计用户权限控制？"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于RESTful API 怎么设计用户权限控制？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ogayat8vhek/",
				"appid": "1613049289050283", 
				"title": "基于RESTful API 怎么设计用户权限控制？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-12T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/899c5heqyxi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3hcs2kda7ld/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&text=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&text=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&title=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&is_video=false&description=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&title=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&title=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&title=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fogayat8vhek%2f&title=%e5%9f%ba%e4%ba%8eRESTful%20API%20%e6%80%8e%e4%b9%88%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%ef%bc%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于RESTful API 怎么设计用户权限控制？</h1><div class="meta"><div class="postdate"><time datetime="2019-02-12" itemprop="datePublished">2019-02-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e原文链接：\x3ca href=\x22http:\/\/huang-jerryc.com\/2015\/03\/29\/%E5%9F%BA%E4%BA%8ERESTful-API-%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBlueSun | 基于RESTful API 怎么设计用户权限控制？\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e有人说，每个人都是平等的；\x3cbr\x3e也有人说，人生来就是不平等的；\x3cbr\x3e在人类社会中，并没有绝对的公平，\x3cbr\x3e一件事，并不是所有人都能去做；\x3cbr\x3e一样物，并不是所有人都能够拥有。\x3cbr\x3e每个人都有自己的角色，每种角色都有对某种资源的一定权利，或许是拥有，或许只能是远观而不可亵玩。\x3cbr\x3e把这种人类社会中如此抽象的事实，提取出来，然后写成程序，还原本质的工作，就是我们程序员该做的事了。\x3cbr\x3e有了一个这么有范儿的开头，下面便来谈谈基于RESTful，如何实现不同的人不同的角色对于不同的资源不同的操作的权限控制。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eRESTful简述\x3c\/h2\x3e\n\x3cp\x3e本文是基于RESTful描述的，需要你对这个有初步的了解。\x3cbr\x3eRESTful是什么？\x3cbr\x3e\x3cstrong\x3eRepresentational State Transfer\x3c\/strong\x3e，简称\x3cstrong\x3eREST\x3c\/strong\x3e，是Roy Fielding博士在2000年他的博士论文中提出来的一种软件架构风格。\x3cbr\x3eREST比较重要的点是\x3cstrong\x3e资源\x3c\/strong\x3e和\x3cstrong\x3e状态转换\x3c\/strong\x3e，\x3cbr\x3e所谓\x22\x3cstrong\x3e资源\x3c\/strong\x3e\x22，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。\x3cbr\x3e而 \x22\x3cstrong\x3e状态转换\x3c\/strong\x3e\x22，则是把对应的HTTP协议里面，四个表示操作方式的动词分别对应四种基本操作：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eGET，用来浏览(browse)资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ePOST，用来新建(create)资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ePUT，用来更新(update)资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eDELETE，用来删除(delete)资源\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842045\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842045\x22 alt=\x22RESTful CURD\x22 title=\x22RESTful CURD\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e资源的分类及操作\x3c\/h2\x3e\n\x3cp\x3e清楚了资源的概念，然后再来对资源进行一下分类，我把资源分为下面三类：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e私人资源 (Personal Source)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e角色资源 (Roles Source)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e公共资源 (Public Source)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842054\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842054\x22 alt=\x22Sources\x22 title=\x22Sources\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x22私人资源\x22\x3c\/strong\x3e：是属于某一个用户所有的资源，只有用户本人才能操作，其他用户不能操作。例如用户的个人信息、订单、收货地址等等。 \x3cbr\x3e\x3cstrong\x3e\x22角色资源\x22\x3c\/strong\x3e：与私人资源不同，角色资源范畴更大，一个角色可以对应多个人，也就是一群人。如果给某角色分配了权限，那么只有身为该角色的用户才能拥有这些权限。例如系统资源只能够管理员操作，一般用户不能操作。 \x3cbr\x3e\x3cstrong\x3e\x22公共资源\x22\x3c\/strong\x3e：所有人无论角色都能够访问并操作的资源。 \x3c\/p\x3e\n\x3cp\x3e而对资源的操作，无非就是分为四种：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e浏览 (browse)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e新增 (create)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e更新 (update)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e删除 (delete)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e角色、用户、权限之间的关系\x3c\/h2\x3e\n\x3cp\x3e角色和用户的概念，自不用多说，大家都懂，但是权限的概念需要提一提。    \x3cbr\x3e\x3cstrong\x3e\x22权限\x22\x3c\/strong\x3e，就是资源与操作的一套组合，例如\x22增加用户\x22是一种权限，\x22删除用户\x22是一种权限，所以对于一种资源所对应的权限有且只有四种。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842063\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842063\x22 alt=\x22Permissions\x22 title=\x22Permissions\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e角色\x3c\/strong\x3e与\x3cstrong\x3e用户\x3c\/strong\x3e的关系：一个角色对应一群用户，一个用户也可以扮演多个角色，所以它们是多对多的关系。    \x3cbr\x3e\x3cstrong\x3e角色\x3c\/strong\x3e与\x3cstrong\x3e权限\x3c\/strong\x3e的关系：一个角色拥有一堆权限，一个权限却只能属于一个角色，所以它们是一(角色)对多(权限)的关系    \x3cbr\x3e\x3cstrong\x3e权限\x3c\/strong\x3e与\x3cstrong\x3e用户\x3c\/strong\x3e的关系：由于一个用户可以扮演多个角色，一个角色拥有多个权限，所以用户与权限是间接的多对多关系。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842067\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842067\x22 alt=\x22Relations\x22 title=\x22Relations\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e需要注意两种特别情况：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e私人资源与用户的关系，一种私人资源对应的四种权限只能属于一个用户，所以这种情况下，用户和权限是一(用户)对多(权限)的关系。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e超级管理员的角色，这个角色是神一般的存在，能无视一切阻碍，对所有资源拥有绝对权限，甭管你是私人资源还是角色资源。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e数据库表的设计\x3c\/h2\x3e\n\x3cp\x3e角色、用户、权限的模型应该怎么样设计，才能满足它们之间的关系？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842072\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842072\x22 alt=\x22Models\x22 title=\x22Models\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对上图的一些关键字段进行说明：\x3c\/p\x3e\n\x3ch6\x3eSource\x3c\/h6\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ename: 资源的名称，也就是其他模型的名称，例如：user、role等等。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eidentity: 资源的唯一标识，可以像uuid，shortid这些字符串，也可以是model的名称。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3epermissions : 一种资源对应有四种权限，分别对这种资源的browse、create、update、delete\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch6\x3ePermission\x3c\/h6\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3esource : 该权限对应的资源，也就是Source的某一条记录的唯一标识\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eaction ：对应资源的操作，只能是browse、create、update、delete四个之一\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3erelation：用来标记该权限是属于私人的，还是角色的，用于OwnerPolicy检测\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eroles: 拥有该权限的角色\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch6\x3eRole\x3c\/h6\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eusers : 角色所对应的用户群，一个角色可以对应多个用户\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3epermissions: 权限列表，一个角色拥有多项权利\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch6\x3eUser\x3c\/h6\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ecreateBy : 该记录的拥有者，在user标里，一般等于该记录的唯一标识，这一属性用于OwnerPolicy的检测，其他私有资源的模型设计，也需要加上这一字段来标识资源的拥有者。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eroles : 用户所拥有的角色\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e策略\/过滤器\x3c\/h2\x3e\n\x3cp\x3e在sails下称为策略(Policy)，在java SSH下称为过滤器(Filter)，无论名称如何，他们工作原理是大同小异的，主要是在一条HTTP请求访问一个Controller下的action之前进行检测。所以在这一层，我们可以自定义一些策略\/过滤器来实现权限控制。    \x3cbr\x3e为行文方便，下面姑且允许我使用策略这一词。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 策略 (Policy) \x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e下面排版顺序对应Policy的运行顺序\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eSessionAuthPolicy\x3c\/strong\x3e：    \x3cbr\x3e检测用户是否已经登录，用户登录是进行下面检测的前提。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eSourcePolicy\x3c\/strong\x3e：    \x3cbr\x3e检测访问的资源是否存在，主要检测Source表的记录\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3ePermissionPolicy\x3c\/strong\x3e：    \x3cbr\x3e检测该用户所属的角色，是否有对所访问资源进行对应操作的权限。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eOwnerPolicy\x3c\/strong\x3e：    \x3cbr\x3e如果所访问的资源属于私人资源，则检测当前用户是否该资源的拥有者。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e如果通过所有policy的检测，则把请求转发到目标action。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000004842075\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000004842075\x22 alt=\x22Policies\x22 title=\x22Policies\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eSails下的权限控制实现\x3c\/h2\x3e\n\x3cp\x3e在Sails下，有一个很方便的套件\x3ca href=\x22https:\/\/github.com\/tjwebb\/sails-permissions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esails-permissions\x3c\/a\x3e，集成了一套权限管理的方案，本文也是基于该套件的源码所引出来的权限管理解决方案。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e对程序员最大的挑战，并不是能否掌握了哪些编程语言，哪些软件框架，而是对业务和需求的理解，然后在此基础上，把要点抽象出来，写成计算机能理解的语言。    \x3cbr\x3e最后，希望这篇文章，能够帮助你对权限管理这一课题增加多一点点理解。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e写作参考\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2011\/09\/restful.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e理解RESTful架构\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/zh.wikipedia.org\/wiki\/REST\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eREST wiki\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/tjwebb\/sails-permissions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esails-permissions 源码\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3chr\x3e\n\x3cp\x3e如果本文对您有用\x3cbr\x3e请不要吝啬你们的Follow与Start\x3cbr\x3e这会大大支持我们继续创作\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e「Github」\x3c\/strong\x3e\x3cbr\x3eMZMonster ：\x3ca href=\x22https:\/\/github.com\/MZMonster\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@MZMonster\x3c\/a\x3e\x3cbr\x3eJC_Huang ：\x3ca href=\x22https:\/\/github.com\/JerryC8080\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@JerryC8080\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>基于RESTful API 怎么设计用户权限控制？</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004627946">https://segmentfault.com/a/1190000004627946</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ogayat8vhek/" target="_blank">https://alili.tech/archive/ogayat8vhek/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>