<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Redux 入坑笔记"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Redux 入坑笔记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/q6rl37s7v5/",
				"appid": "1613049289050283", 
				"title": "Redux 入坑笔记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-12T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/49we3itqvll/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hjrplsm778/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&text=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&text=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&title=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&is_video=false&description=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&title=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&title=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&title=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq6rl37s7v5%2f&title=Redux%20%e5%85%a5%e5%9d%91%e7%ac%94%e8%ae%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Redux 入坑笔记</h1><div class="meta"><div class="postdate"><time datetime="2019-02-12" itemprop="datePublished">2019-02-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3eRedux 简要的说就是一个事件分发器和全局\x3ccode\x3estate\x3c\/code\x3e控制台。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3eRedux 有一个全局的\x3ccode\x3estate\x3c\/code\x3e，通过将根组件包进\x3ccode\x3eProvider\x3c\/code\x3e，将\x3ccode\x3estore\x3c\/code\x3e分发给所有的子组件，而子组件通过\x3ccode\x3econnect\x3c\/code\x3e方法，获取\x3ccode\x3edispatch\x3c\/code\x3e事件分发函数，以及需要的\x3ccode\x3eprops\x3c\/code\x3e(如果有需要也可以通过\x3ccode\x3econnect\x3c\/code\x3e传入想分发给子组件的\x3ccode\x3eaction\x3c\/code\x3e)\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e定义常量、state和Action\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Reducer\/ConstValue.js\nexport const ADD_NEW = \x27add_new\x27;\nexport const INCREASE = \x27increase\x27;\nexport const DECREASE = \x27decrease\x27;\nexport const DELETE = \x27delete\x27;\nexport INITIAL_STATE = {\n    objList: [\n        {\n            number: 0\n        }\n    ]\n};\n\n\/\/ Reducer\/ActionCreator.js\nimport {\n    ADD_NEW,\n    DELETE\n    INCREASE,\n    DECREASE\n} from \x27.\/ConstValue\x27;\n\nexport function addNew(obj) {\n    return {\n        type: ADD_NEW,\n        obj\n    }\n}\n\nexport function delete(index) {\n    return {\n        type: DELETE,\n        index\n    }\n}\n\nexport function increase(number, index) {\n    return {\n        type: INCREASE,\n        number,\n        index\n    }\n}\n\nexport function decrease(number, index) {\n    return {\n        type: DECREASE,\n        number,\n        index\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Reducer\/ConstValue.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ADD_NEW = \x3cspan class=\x22hljs-string\x22\x3e\x27add_new\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e INCREASE = \x3cspan class=\x22hljs-string\x22\x3e\x27increase\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DECREASE = \x3cspan class=\x22hljs-string\x22\x3e\x27decrease\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DELETE = \x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e INITIAL_STATE = {\n    objList: [\n        {\n            \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        }\n    ]\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Reducer\/ActionCreator.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\n    ADD_NEW,\n    DELETE\n    INCREASE,\n    DECREASE\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/ConstValue\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eaddNew\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: ADD_NEW,\n        obj\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edelete\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eindex\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: DELETE,\n        index\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eincrease\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e, index\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: INCREASE,\n        \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e,\n        index\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edecrease\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e, index\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: DECREASE,\n        \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e,\n        index\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e定义Reducer\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eReducer 会注册给 store,用于处理 action 事件\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Reducer\/Reducers.js\nimport {\n    ADD_NEW,\n    DELETE\n    INCREASE,\n    DECREASE,\n    INITIAL_STATE\n} from \x27.\/ConstValue\x27;\n\nlet objList = INITIAL_STATE.objList;\n\nexport function objList(state=objList, action) {\n    switch (action.type) {\n        case ADD_NEW:\n            return [...state, action.obj];\n        case DELETE:\n            return [...state.slice(0, action.index),\n                ...state.slice(action.index \x2b 1)\n            ];\n        case INCREASE:\n        case DECREASE:\n            return [...state.slice(0, action.index),\n                Object.assign({}, state[action.index], {number: number(state[action.index].number, action)}),\n                ...state.slice(action.index \x2b 1)\n            ];\n        default:\n            return state;\n    }\n}\n\nexport function number(state=objList[0].number, action) {\n    switch (action.type) {\n        case INCREASE:\n            return state \x2b action.number;\n        case DECREASE:\n            return state - action.number;\n        default:\n            return state;\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ Reducer\/Reducers.js\nimport {\n    ADD_NEW,\n    DELETE\n    INCREASE,\n    DECREASE,\n    INITIAL_STATE\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27.\/ConstValue\x27;\n\nlet objList = INITIAL_STATE.objList;\n\nexport function objList(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList, action) {\n    switch (action.type) {\n        case ADD_NEW:\n            return [...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, action.obj];\n        case DELETE:\n            return [...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action.index),\n                ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.slice(action.index \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n            ];\n        case INCREASE:\n        case DECREASE:\n            return [...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action.index),\n                Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e[action.index], {number: number(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e[action.index].number, action)}),\n                ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.slice(action.index \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n            ];\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n    }\n}\n\nexport function number(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].number, action) {\n    switch (action.type) {\n        case INCREASE:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e \x2b action.number;\n        case DECREASE:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e - action.number;\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e;\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3eIMPORTANT\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3eReducer 传入(state, action), 通过判断\x3ccode\x3eaction\x3c\/code\x3e的\x3ccode\x3etype\x3c\/code\x3e, 进行事件分发处理。当事件很多的时候可以把 Reducer 拆分, 最后通过\x3ccode\x3ecombineReducers\x3c\/code\x3e进行组合。\x3c\/p\x3e\n\x3cp\x3e每个 Reducer 都要有明确的返回值,当\x3ccode\x3esiwtch\x3c\/code\x3e到\x3ccode\x3edefault\x3c\/code\x3e的时候则返回传入的\x3ccode\x3estate\x3c\/code\x3e本身。在处理\x3ccode\x3estate\x3c\/code\x3e的时候，不要在原有参数上修改, 而应该返回一个新的参数, 例如\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22return Object.assign({}, state[0], {number: action.number});\n\/\/ 通过Object.assign获取一份state[0]的拷贝, 并修改state[0]中的number数据\n\nreturn [...state, action.obj];\n\/\/ 通过[...XXX]得到一个新的数组, 并在最后加入action.obj\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3ereturn Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], {number: action.number});\n\/\/ 通过Object.assign获取一份\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]的拷贝, 并修改\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]中的number数据\n\nreturn [...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, action.obj];\n\/\/ 通过[...XXX]得到一个新的数组, 并在最后加入action.obj\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3ecombineReducers\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Reducer\/index.js\nimport { combineReducers } from \x27redux\x27;\n\nimport * as appReducers from \x27.\/Reducers\x27;\n\nexport const AppReducer = combineReducers(appReducers);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Reducer\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { combineReducers } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e appReducers \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Reducers\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e AppReducer = combineReducers(appReducers);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码中, 通过\x3ccode\x3eimport * as appReducers\x3c\/code\x3e导出全部的 Reducer, 之后利用\x3ccode\x3ecombineReducers\x3c\/code\x3e黑魔法快速的组合 Reducer \x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e黑魔法发动条件\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e每个 Reducer 的名称, 必须与它获取的 state 参数名称一样, 例如:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function objList(state=objList, action){}\n\nexport function number(state=objList[0].number, action){}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3eexport function objList(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList, action){}\n\nexport function number(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].number, action){}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你任性的不想那么写, 那么就要:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Reducer\/Reducers.js\nexport function reducerA(state=objList, action){}\nexport function reducerB(state=objList[0].number, action){}\n\n\/\/ Reducer\/index.js\nimport { combineReducers } from \x27redux\x27;\nimport {\n    reducerA\n    reducerB,\n} from \x27.\/Reducers\x27;\n\nexport function AppReducer(state, action) {\n    return {\n        objList: reducerA(state.objList, action),\n        number: reducerB(state.objList[0].number, action)\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e\/\/ Reducer\/Reducers.js\nexport function reducerA(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList, action){}\nexport function reducerB(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e=objList[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].number, action){}\n\n\/\/ Reducer\/index.js\nimport { combineReducers } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27redux\x27;\nimport {\n    reducerA\n    reducerB,\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27.\/Reducers\x27;\n\nexport function AppReducer(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e, action) {\n    return {\n        objList: reducerA(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.objList, action),\n        number: reducerB(\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.objList[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].number, action)\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e注入到React\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 安装React绑定库\nsudo npm install --save react-redux\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gauss\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 安装React绑定库\x3c\/span\x3e\nsudo npm install --\x3cspan class=\x22hljs-keyword\x22\x3esave\x3c\/span\x3e react-redux\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在根组件上, 通过\x3ccode\x3eProvider\x3c\/code\x3e注入store\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e只有一个Store\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ App\/index.js\nimport { Provider } from \x27react-redux\x27;\nimport { createStore } from \x27redux\x27;\nimport {\n  AppReducer\n} from \x27..\/Reducer\/index\x27;\nimport RootComponent from \x27.\/RootComponent\x27;\n\nlet appStore = createStore(AppReducer);\n\nrender(\n  \x3cProvider store={appStore}\x3e\n    \x3cRootComponent \/\x3e\n  \x3c\/Provider\x3e,\n    document.getElementById(\x27index_body\x27)\n);\n\n\/\/ App\/RootComponent.js\nimport ContentComponent from \x27.\/ContentComponent\x27;\n\nclass RootComponent extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                \x3cContentComponent \/\x3e\n            \x3cdiv\x3e\n        )\n    }\n}\n\nexport default ContentComponent;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ App\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Provider } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createStore } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\n  AppReducer\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/Reducer\/index\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e RootComponent \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/RootComponent\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e appStore = createStore(AppReducer);\n\nrender(\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estore\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{appStore}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eRootComponent\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27index_body\x27\x3c\/span\x3e)\n);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ App\/RootComponent.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ContentComponent \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/ContentComponent\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eRootComponent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;div\x26gt;\n                \x26lt;ContentComponent \/\x26gt;\n            \x26lt;div\x26gt;\n        )\n    }\n}\n\nexport default ContentComponent;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注入\x3ccode\x3estore\x3c\/code\x3e后, 根组件所有的组件都可以获取到\x3ccode\x3edispatch\x3c\/code\x3e函数, 以便进行\x3ccode\x3eaction\x3c\/code\x3e的分发处理\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e子组价获取props和dispatch\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ App\/ContentComponent.js\nimport {\n    increase,\n    decrease\n} from \x27..\/Reducer\/ActionCreator\x27;\n\nclass ContentComponent extends Component {\n    render() {\n        const {obj, increaseNumber, decreaseNumber}\n        return (\n            \x3cdiv\x3e\n                \x3cspan \n                  onClick={() =\x3e {\n                      increaseNumber(1);\n                  \x22}}\x22\x3e加一\x3c\/span\x3e\n                \x3cspan\x3e{obj.number}\x3c\/span\x3e\n                \x3cspan\n                  onClick={() =\x3e {\n                      decreaseNumber(1);\n                  \x22}}\x22\x3e减一\x3c\/span\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\n\/\/ 定义props筛选函数, 以state作为传入参数, 选出需要注入该组件作为props的state. 不是必须, 不写则state作为props全部注入\nconst mapStateToProps = (state) =\x3e {\n    return {\n        obj: state.objList[0]\n        \/\/ objList: state.objList \n        \/\/ 本来想写list增删逻辑的但是太懒了暂时搁浅..\n    }\n}\n\n\/\/ 定义action筛选函数, 以dispatch作为传入参数, 选出需要注入该组件需要使用的action. 不是必须\nconst mapDispatchToProps = (dispatch) =\x3e {\n    return {\n        increaseNumber: (number) =\x3e {\n            dispatch(increase(number));\n        },\n        decreaseNumber: (number) =\x3e {\n            dispatch(decrease(number));\n        }\n    }\n}\n\nimport { connect } from \x27react-redux\x27;\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentComponent);\n\/\/ 不使用筛选函数的时候:\n\/\/ export default connect(mapStateToProps)(ContentComponent);\n\/\/ export default connect()(ContentComponent);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ App\/ContentComponent.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\n    increase,\n    decrease\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/Reducer\/ActionCreator\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eContentComponent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {obj, increaseNumber, decreaseNumber}\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \n                  \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                      increaseNumber(1);\n                  \x22}}\x22\x26gt;加一\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e{obj.number}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\n                  \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                      decreaseNumber(1);\n                  \x22}}\x22\x26gt;减一\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义props筛选函数, 以state作为传入参数, 选出需要注入该组件作为props的state. 不是必须, 不写则state作为props全部注入\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapStateToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3eobj\x3c\/span\x3e: state.objList[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ objList: state.objList \x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 本来想写list增删逻辑的但是太懒了暂时搁浅..\x3c\/span\x3e\n    }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义action筛选函数, 以dispatch作为传入参数, 选出需要注入该组件需要使用的action. 不是必须\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapDispatchToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3edispatch\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3eincreaseNumber\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3enumber\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            dispatch(increase(number));\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3edecreaseNumber\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3enumber\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            dispatch(decrease(number));\n        }\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(mapStateToProps, mapDispatchToProps)(ContentComponent);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不使用筛选函数的时候:\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ export default connect(mapStateToProps)(ContentComponent);\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ export default connect()(ContentComponent);\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在通过\x3ccode\x3econnect\x3c\/code\x3e进行注入的时候, \x3ccode\x3edispatch\x3c\/code\x3e已经作为组件的 props 而存在了。所以当需要传入的事件很多, 感觉写\x3ccode\x3emapDispatchToProps\x3c\/code\x3e很繁琐的时候, 还有另外一种写法:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ App\/ContentComponent.js\nimport {\n    increase,\n    decrease\n} from \x27..\/Reducer\/ActionCreator\x27;\n\nclass ContentComponent extends Component {\n    render() {\n        const {obj, dispatch}\n        return (\n            \x3cdiv\x3e\n                \x3cspan \n                  onClick={() =\x3e {\n                      dispatch(increaseNumber(1));\n                  \x22}}\x22\x3e加一\x3c\/span\x3e\n                \x3cspan\x3e{obj.number}\x3c\/span\x3e\n                \x3cspan\n                  onClick={() =\x3e {\n                      dispatch(decreaseNumber(1));\n                  \x22}}\x22\x3e减一\x3c\/span\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\nimport { connect } from \x27react-redux\x27;\nexport default connect(mapStateToProps)(ContentComponent);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ App\/ContentComponent.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\n    increase,\n    decrease\n} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/Reducer\/ActionCreator\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eContentComponent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {obj, dispatch}\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \n                  \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                      dispatch(increaseNumber(1));\n                  \x22}}\x22\x26gt;加一\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e{obj.number}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\n                  \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                      dispatch(decreaseNumber(1));\n                  \x22}}\x22\x26gt;减一\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { connect } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(mapStateToProps)(ContentComponent);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e优劣势\x3c\/h3\x3e\n\x3ch4\x3e优势\x3c\/h4\x3e\n\x3cp\x3e通过 Redux, 我们可以少些很多繁琐的事件传输。在 Redux 之前, 顶层组件处理 state 的改变, 而触发的事件则有可能需要层层传递给底层的子组件, 子组件触发之后再次层层回调传到顶层。\x3c\/p\x3e\n\x3cp\x3e但 Redux 的 state 是全局的, 不必关心哪个组件触发\x3ccode\x3esetState()\x3c\/code\x3e函数, 只需要设定好\x3ccode\x3eaction\x3c\/code\x3e和处理 action 的\x3ccode\x3ereducer\x3c\/code\x3e, 由\x3ccode\x3estore\x3c\/code\x3e进行分发处理。\x3c\/p\x3e\n\x3cp\x3e那样的话, 我们可以在底层触发 state 的改变而不必担心向上调用 --- 触发的 action 改变将被 store 监听, dispatch 给 reducer, reducer通过判断\x3ccode\x3eaction.type\x3c\/code\x3e, 做出适当的反应处理 state\x3c\/p\x3e\n\x3ch4\x3e劣势\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eaction 很多很繁琐\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e一开始的架构很重要，否则后期改动不易\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e淡化了传统React的组件传输事件与props的思想, 可能一开始不易理解\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Redux 入坑笔记</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004804937">https://segmentfault.com/a/1190000004804937</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/q6rl37s7v5/" target="_blank">https://alili.tech/archive/q6rl37s7v5/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>