<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Vuex &#43; Firebase 构建 Notes App"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Vuex &#43; Firebase 构建 Notes App | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/iid1xhh0akc/",
				"appid": "1613049289050283", 
				"title": "Vuex &#43; Firebase 构建 Notes App | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jugwnlvabr/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/o580jhaatc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&text=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&text=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&title=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&is_video=false&description=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&title=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&title=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&title=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiid1xhh0akc%2f&title=Vuex%20%2b%20Firebase%20%e6%9e%84%e5%bb%ba%20Notes%20App"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Vuex &#43; Firebase 构建 Notes App</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前几天翻译了基于\x3ca href=\x22https:\/\/coligo.io\/learn-vuex-by-building-notes-app\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这篇博客\x3c\/a\x3e的文章：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005015164\x22\x3e用 Vuex 构建一个笔记应用\x3c\/a\x3e。在此基础上我对它做了一些更新：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e把数据同步到 Firebase 上，不会每次关掉浏览器就丢失数据。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e加了笔记检索功能\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e为保证代码整洁，加上了 eslint\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e你可以从 \x3ca href=\x22https:\/\/github.com\/chenyiqiao\/notes-app-vuejs-vuex\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGithub Repo\x3c\/a\x3e 下载源码，和 Firebase 的同步效果看下面这个 gif:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVviUc\x22 src=\x22https:\/\/static.alili.tech\/img\/bVviUc\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e一、把数据同步到 Firebase\x3c\/h2\x3e\n\x3cp\x3e可能你也知道 Vue.js 和 Firebase 合作搞出了一个 \x3ca href=\x22https:\/\/github.com\/vuejs\/vuefire\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVuefire\x3c\/a\x3e, 但是在这里并不能用它，因为用 Vuex 管理数据的结果就是组件内部只承担基本的View层的职责，而数据基本上都在 store 里面。所以我们只能把数据的存取放在 store 里面。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.1 Firebase 概述\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e如果熟悉 Firebase 的使用，可以放心地跳过这一段。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如果你还没有 \x3ca href=\x22https:\/\/www.firebase.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFirebase\x3c\/a\x3e 的账号，可以去注册一个，注册号之后会自动生成一个\x22MY FIRST APP\x22,这个初始应用给的地址就是用来存数据的地方。\x3c\/p\x3e\n\x3cp\x3eFirebase 存的数据都是 JSON 对象。我们向 JSON 树里面加数据的时候，这条数据就变成了 JSON 树里的一个键。比方说，在\x3ccode\x3e\/user\/mchen\x3c\/code\x3e下面加上\x3ccode\x3ewidgets\x3c\/code\x3e属性之后，数据就变成了这个样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;users\x26quot;: {\n    \x26quot;mchen\x26quot;: {\n      \x26quot;friends\x26quot;: { \x26quot;brinchen\x26quot;: true },\n      \x26quot;name\x26quot;: \x26quot;Mary Chen\x26quot;,\n      \x26quot;widgets\x26quot;: { \x26quot;one\x26quot;: true, \x26quot;three\x26quot;: true }\n    },\n    \x26quot;brinchen\x26quot;: { ... },\n    \x26quot;hmadi\x26quot;: { ... }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22users\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22mchen\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22friends\x22\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3e\x22brinchen\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e },\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Mary Chen\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22widgets\x22\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3e\x22one\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3e\x22three\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22brinchen\x22\x3c\/span\x3e: { ... },\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22hmadi\x22\x3c\/span\x3e: { ... }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e创建数据引用\x3c\/h4\x3e\n\x3cp\x3e要读写数据库里的数据，首先要创建一个指向数据的引用，每个引用对应一条 URL。要获取其子元素，可以用\x3ccode\x3echild\x3c\/code\x3e API, 也可以直接把子路径加到 URL 上：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ referene \nnew Firebase(https:\/\/docs-examples.firebaseio.com\/web\/data)\n\n\/\/ 子路径加到 URL 上\nnew Firebase(\x26quot;https:\/\/docs-examples.firebaseio.com\/web\/data\/users\/mchen\/name\x26quot;)\n\n\/\/ child API\nrootRef.child(\x27users\/mchen\/name\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ referene \x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Firebase(https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/docs-examples.firebaseio.com\/web\/data)\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 子路径加到 URL 上\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Firebase(\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/docs-examples.firebaseio.com\/web\/data\/users\/mchen\/name\x22\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ child API\x3c\/span\x3e\nrootRef.child(\x3cspan class=\x22hljs-string\x22\x3e\x27users\/mchen\/name\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eFirebase 数据库中的数组\x3c\/h4\x3e\n\x3cp\x3eFirebase 数据库不能原生支持数组。如果你存了一个数组，实际上是把它存储为一个用数组作为键的对象:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ we send this\n[\x27hello\x27, \x27world\x27]\n\/\/ firebase database store this\n{0: \x27hello\x27, 1: \x27world\x27}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ we send this\x3c\/span\x3e\n[\x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27world\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ firebase database store this\x3c\/span\x3e\n{\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27world\x27\x3c\/span\x3e}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e存储数据\x3c\/h4\x3e\n\x3ch5\x3eset()\x3c\/h5\x3e\n\x3cp\x3e\x3ccode\x3eset()\x3c\/code\x3e 方法把新数据放到指定的引用的路径下，代替那个路径下原有的数据。它可以接收各种数据类型，如果参数是 null 的话就意味着删掉这个路径下的数据。\x3c\/p\x3e\n\x3cp\x3e举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 新建一个博客的引用\nvar ref = new Firebase(\x27https:\/\/docs-examples.firebaseio.com\/web\/saving-data\/fireblog\x27)\n\nvar usersRef = ref.child(\x27users\x27)\n\nusersRef.set({\n  alanisawesome: {\n  date_of_birth: \x26quot;June 23, 1912\x26quot;,\n  full_name: \x26quot;Alan Turing\x26quot;\n  },\n  gracehop: {\n    date_of_birth: \x26quot;December 9, 1906\x26quot;,\n    full_name: \x26quot;Grace Hopper\x26quot;\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 新建一个博客的引用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ref = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Firebase(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/docs-examples.firebaseio.com\/web\/saving-data\/fireblog\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e usersRef = ref.child(\x3cspan class=\x22hljs-string\x22\x3e\x27users\x27\x3c\/span\x3e)\n\nusersRef.set({\n  \x3cspan class=\x22hljs-attr\x22\x3ealanisawesome\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-attr\x22\x3edate_of_birth\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22June 23, 1912\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3efull_name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Alan Turing\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3egracehop\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3edate_of_birth\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22December 9, 1906\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efull_name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Grace Hopper\x22\x3c\/span\x3e\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然，也可以直接在子路径下存储数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22usersRef.child(\x26quot;alanisawesome\x26quot;).set({\n  date_of_birth: \x26quot;June 23, 1912\x26quot;,\n  full_name: \x26quot;Alan Turing\x26quot;\n})\n\nusersRef.child(\x26quot;gracehop\x26quot;).set({\n  date_of_birth: \x26quot;December 9, 1906\x26quot;,\n  full_name: \x26quot;Grace Hopper\x26quot;\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eusersRef.child(\x3cspan class=\x22hljs-string\x22\x3e\x22alanisawesome\x22\x3c\/span\x3e).set({\n  \x3cspan class=\x22hljs-attr\x22\x3edate_of_birth\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22June 23, 1912\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3efull_name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Alan Turing\x22\x3c\/span\x3e\n})\n\nusersRef.child(\x3cspan class=\x22hljs-string\x22\x3e\x22gracehop\x22\x3c\/span\x3e).set({\n  \x3cspan class=\x22hljs-attr\x22\x3edate_of_birth\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22December 9, 1906\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3efull_name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Grace Hopper\x22\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不同之处在于，由于分成了两次操作，这种方式会触发两个事件。另外，如果\x3ccode\x3eusersRef\x3c\/code\x3e下本来有数据的话，那么第一种方式就会覆盖掉之前的数据。\x3c\/p\x3e\n\x3ch5\x3eupdate()\x3c\/h5\x3e\n\x3cp\x3e上面的\x3ccode\x3eset()\x3c\/code\x3e对数据具有\x22破坏性\x22，如果我们并不想改动原来的数据的话，可能\x3ccode\x3eupdate()\x3c\/code\x3e是更合适的选择：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var hopperRef = userRef.child(\x27gracehop\x27)\nhopperRef.update({\n  \x27nickname\x27: \x27Amazing Grace\x27\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hopperRef = userRef.child(\x3cspan class=\x22hljs-string\x22\x3e\x27gracehop\x27\x3c\/span\x3e)\nhopperRef.update({\n  \x3cspan class=\x22hljs-string\x22\x3e\x27nickname\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Amazing Grace\x27\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码会在 Grace 的资料下面加上 nickname 这一项，如果我们用的是\x3ccode\x3eset()\x3c\/code\x3e的话，那么\x3ccode\x3efull_name\x3c\/code\x3e和\x3ccode\x3edate_of_birth\x3c\/code\x3e就会被删掉。\x3c\/p\x3e\n\x3cp\x3e另外，我们还可以在多个路径下同时做 update 操作：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22usersRef.update({\n  \x26quot;alanisawesome\/nickname\x26quot;: \x26quot;Alan The Machine\x26quot;,\n  \x26quot;gracehop\/nickname\x26quot;: \x26quot;Amazing Grace\x26quot;\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eusersRef.update({\n  \x3cspan class=\x22hljs-string\x22\x3e\x22alanisawesome\/nickname\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Alan The Machine\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22gracehop\/nickname\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Amazing Grace\x22\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3epush()\x3c\/h5\x3e\n\x3cp\x3e前面已经提到了，由于数组索引不具有独特性，Firebase 不提供对数组的支持，我们因此不得不转而用对象来处理。\x3c\/p\x3e\n\x3cp\x3e在 Firebase 里面，\x3ccode\x3epush\x3c\/code\x3e方法会为每一个子元素根据时间戳生成一个唯一的 ID，这样就能保证每个子元素的独特性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var postsRef = ref.child(\x27posts\x27)\n\n\/\/ push 进去的这个元素有了自己的路径\nvar newPostRef = postsRef.push()\n\n\/\/ 获取 ID\nvar uniqueID = newPostRef.key()\n\n\/\/ 为这个元素赋值\nnewPostRef.set({\n  author: \x27gracehop\x27,\n  title: \x27Announcing COBOL, a New Programming language\x27\n})\n\n\/\/ 也可以把这两个动作合并\npostsRef.push().set({\n  author: \x27alanisawesome\x27,\n  title: \x27The Turing Machine\x27\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e postsRef = ref.child(\x3cspan class=\x22hljs-string\x22\x3e\x27posts\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ push 进去的这个元素有了自己的路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newPostRef = postsRef.push()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取 ID\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uniqueID = newPostRef.key()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 为这个元素赋值\x3c\/span\x3e\nnewPostRef.set({\n  \x3cspan class=\x22hljs-attr\x22\x3eauthor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27gracehop\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Announcing COBOL, a New Programming language\x27\x3c\/span\x3e\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 也可以把这两个动作合并\x3c\/span\x3e\npostsRef.push().set({\n  \x3cspan class=\x22hljs-attr\x22\x3eauthor\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27alanisawesome\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27The Turing Machine\x27\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后生成的数据就是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;posts\x26quot;: {\n    \x26quot;-JRHTHaIs-jNPLXOQivY\x26quot;: {\n      \x26quot;author\x26quot;: \x26quot;gracehop\x26quot;,\n      \x26quot;title\x26quot;: \x26quot;Announcing COBOL, a New Programming Language\x26quot;\n    },\n    \x26quot;-JRHTHaKuITFIhnj02kE\x26quot;: {\n      \x26quot;author\x26quot;: \x26quot;alanisawesome\x26quot;,\n      \x26quot;title\x26quot;: \x26quot;The Turing Machine\x26quot;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs json\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22posts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22-JRHTHaIs-jNPLXOQivY\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22author\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22gracehop\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22title\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Announcing COBOL, a New Programming Language\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22-JRHTHaKuITFIhnj02kE\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22author\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22alanisawesome\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22title\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22The Turing Machine\x22\x3c\/span\x3e\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.firebase.com\/blog\/2015-02-11-firebase-unique-identifiers.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这篇博客\x3c\/a\x3e聊到了这个 ID 是怎么回事以及怎么生成的。\x3c\/p\x3e\n\x3ch4\x3e获取数据\x3c\/h4\x3e\n\x3cp\x3e获取 Firebase 数据库里的数据是通过对数据引用添加一个异步的监听器来完成的。在数据初始化和每次数据变化的时候监听器就会触发。\x3ccode\x3evalue\x3c\/code\x3e事件用来读取在此时数据库内容的快照，在初始时触发一次，然后每次变化的时候也会触发：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Get a database reference to our posts\nvar ref = new Firebase(\x26quot;https:\/\/docs-examples.firebaseio.com\/web\/saving-data\/fireblog\/posts\x26quot;)\n\n\/\/ Attach an asynchronous callback to read the data at our posts reference\nref.on(\x26quot;value\x26quot;, function(snapshot) {\n  console.log(snapshot.val());\n}, function (errorObject) {\n  console.log(\x26quot;The read failed: \x26quot; \x2b errorObject.code);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Get a database reference to our posts\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ref = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Firebase(\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/docs-examples.firebaseio.com\/web\/saving-data\/fireblog\/posts\x22\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Attach an asynchronous callback to read the data at our posts reference\x3c\/span\x3e\nref.on(\x3cspan class=\x22hljs-string\x22\x3e\x22value\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esnapshot\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(snapshot.val());\n}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerrorObject\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22The read failed: \x22\x3c\/span\x3e \x2b errorObject.code);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简单起见，我们只用了 value 事件，其他的事件就不介绍了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.2 Firebase 的数据处理方式对代码的影响\x3c\/h3\x3e\n\x3cp\x3e开始写代码之前，我想搞清楚两个问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eFirebase 是怎么管理数据的，它对组件的 View 有什么影响\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用户交互过程中是怎么和 Firebase 同步数据的\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e先看第一个问题，这是我在 Firebase 上保存的 JSON 数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;notes\x26quot; : {\n    \x26quot;-KGXQN4JVdopZO9SWDBw\x26quot; : {\n      \x26quot;favorite\x26quot; : true,\n      \x26quot;text\x26quot; : \x26quot;change\x26quot;\n    },\n    \x26quot;-KGXQN6oWiXcBe0a54cT\x26quot; : {\n      \x26quot;favorite\x26quot; : false,\n      \x26quot;text\x26quot; : \x26quot;a\x26quot;\n    },\n    \x26quot;-KGZgZBoJJQ-hl1i78aa\x26quot; : {\n      \x26quot;favorite\x26quot; : true,\n      \x26quot;text\x26quot; : \x26quot;little\x26quot;\n    },\n    \x26quot;-KGZhcfS2RD4W1eKuhAY\x26quot; : {\n      \x26quot;favorite\x26quot; : true,\n      \x26quot;text\x26quot; : \x26quot;bit\x26quot;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22notes\x22\x3c\/span\x3e : {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22-KGXQN4JVdopZO9SWDBw\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22favorite\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22change\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22-KGXQN6oWiXcBe0a54cT\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22favorite\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22a\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22-KGZgZBoJJQ-hl1i78aa\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22favorite\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22little\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22-KGZhcfS2RD4W1eKuhAY\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22favorite\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22bit\x22\x3c\/span\x3e\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个乱码一样的东西是 Firebase 为了保证数据的独特性而加上的。我们发现一个问题，在此之前 notes 实际上是一个包含对象的数组：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n  {\n    favorite: true,\n    text: \x27change\x27\n  },\n  {\n    favorite: false,\n    text: \x27a\x27\n  },\n    {\n    favorite: true,\n    text: \x27little\x27\n  },\n    {\n    favorite: true,\n    text: \x27bit\x27\n  },\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e[\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3efavorite\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27change\x27\x3c\/span\x3e\n  },\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3efavorite\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e\n  },\n    {\n    \x3cspan class=\x22hljs-attr\x22\x3efavorite\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27little\x27\x3c\/span\x3e\n  },\n    {\n    \x3cspan class=\x22hljs-attr\x22\x3efavorite\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bit\x27\x3c\/span\x3e\n  },\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e显然，对数据的处理方式的变化使得渲染 notes 列表的组件，也就是 NotesList.vue 需要大幅修改。修改的逻辑简单来说就是在思路上要完成从数组到对象的转换。\x3c\/p\x3e\n\x3cp\x3e举个例子，之前 filteredNotes 是这么写的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filteredNotes () {\n  if (this.show === \x27all\x27){\n    return this.notes\n  } else if (this.show === \x27favorites\x27) {\n    return this.notes.filter(note =\x3e note.favorite)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3efilteredNotes () {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.show === \x3cspan class=\x22hljs-string\x22\x3e\x27all\x27\x3c\/span\x3e){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.show === \x3cspan class=\x22hljs-string\x22\x3e\x27favorites\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3enote\x3c\/span\x3e =\x26gt;\x3c\/span\x3e note.favorite)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在的问题就是，notes 不再是一个数组，而是一个对象，而对象是没有 filter 方法的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filteredNotes () {\n  var favoriteNotes = {}\n  if (this.show === \x27all\x27) {\n    return this.notes\n  } else if (this.show === \x27favorites\x27) {\n    for (var note in this.notes) {\n      if (this.notes[note][\x27favorite\x27]) {\n        favoriteNotes[note] = this.notes[note]\n      }\n    }\n    return favoriteNotes\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3efilteredNotes () {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e favoriteNotes = {}\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.show === \x3cspan class=\x22hljs-string\x22\x3e\x27all\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.show === \x3cspan class=\x22hljs-string\x22\x3e\x27favorites\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e note \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes[note][\x3cspan class=\x22hljs-string\x22\x3e\x27favorite\x27\x3c\/span\x3e]) {\n        favoriteNotes[note] = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.notes[note]\n      }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e favoriteNotes\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外由于每个对象都对应一个自己的 ID，所以我也在 state 里面加了一个\x3ccode\x3eactiveKey\x3c\/code\x3e用来表示当前笔记的 ID，实际上现在我们在\x3ccode\x3eTOGGLE_FAVORITE\x3c\/code\x3e,\x3ccode\x3eSET_ACTIVE\x3c\/code\x3e这些方法里面都需要对相应的\x3ccode\x3eactiveKey\x3c\/code\x3e赋值。\x3c\/p\x3e\n\x3cp\x3e再看第二个问题，要怎么和 Firebase 交互：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ store.js\nlet notesRef = new Firebase(\x27https:\/\/crackling-inferno-296.firebaseio.com\/notes\x27)\n\nconst state = {\n  notes: {},\n  activeNote: {},\n  activeKey: \x27\x27\n}\n\n\/\/ 初始化数据，并且此后数据的变化都会反映到 View\nnotesRef.on(\x27value\x27, snapshot =\x3e {\n  state.notes = snapshot.val()\n})\n\n\/\/ 每一个操作都需要同步到 Firebase\nconst mutations = {\n\n  ADD_NOTE (state) {\n    const newNote = {\n      text: \x27New note\x27,\n      favorite: false\n    }\n    var addRef = notesRef.push()\n    state.activeKey = addRef.key()\n    addRef.set(newNote)\n    state.activeNote = newNote\n  },\n  \n  EDIT_NOTE (state, text) {\n    notesRef.child(state.activeKey).update({\n      \x27text\x27: text\n    })\n  },\n\n  DELETE_NOTE (state) {\n    notesRef.child(state.activeKey).set(null)\n  },\n\n  TOGGLE_FAVORITE (state) {\n    state.activeNote.favorite = !state.activeNote.favorite\n    notesRef.child(state.activeKey).update({\n      \x27favorite\x27: state.activeNote.favorite\n    })\n  },\n\n  SET_ACTIVE_NOTE (state, key, note) {\n    state.activeNote = note\n    state.activeKey = key\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ store.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e notesRef = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Firebase(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/crackling-inferno-296.firebaseio.com\/notes\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e state = {\n  \x3cspan class=\x22hljs-attr\x22\x3enotes\x3c\/span\x3e: {},\n  \x3cspan class=\x22hljs-attr\x22\x3eactiveNote\x3c\/span\x3e: {},\n  \x3cspan class=\x22hljs-attr\x22\x3eactiveKey\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化数据，并且此后数据的变化都会反映到 View\x3c\/span\x3e\nnotesRef.on(\x3cspan class=\x22hljs-string\x22\x3e\x27value\x27\x3c\/span\x3e, snapshot =\x26gt; {\n  state.notes = snapshot.val()\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每一个操作都需要同步到 Firebase\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mutations = {\n\n  ADD_NOTE (state) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newNote = {\n      \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27New note\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3efavorite\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e addRef = notesRef.push()\n    state.activeKey = addRef.key()\n    addRef.set(newNote)\n    state.activeNote = newNote\n  },\n  \n  EDIT_NOTE (state, text) {\n    notesRef.child(state.activeKey).update({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27text\x27\x3c\/span\x3e: text\n    })\n  },\n\n  DELETE_NOTE (state) {\n    notesRef.child(state.activeKey).set(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e)\n  },\n\n  TOGGLE_FAVORITE (state) {\n    state.activeNote.favorite = !state.activeNote.favorite\n    notesRef.child(state.activeKey).update({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27favorite\x27\x3c\/span\x3e: state.activeNote.favorite\n    })\n  },\n\n  SET_ACTIVE_NOTE (state, key, note) {\n    state.activeNote = note\n    state.activeKey = key\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e二、笔记检索功能\x3c\/h2\x3e\n\x3cp\x3e效果图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVviT2\x22 src=\x22https:\/\/static.alili.tech\/img\/bVviT2\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个功能比较常见，思路就是列表渲染 \x2b 过滤器：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ NoteList.vue\n\n\x3c!-- filter --\x3e\n\x3cdiv class=\x26quot;input\x26quot;\x3e\n  \x3cinput v-model=\x26quot;query\x26quot; placeholder=\x26quot;Filter your notes...\x26quot;\x3e\n\x3c\/div\x3e\n\n\x3c!-- render notes in a list --\x3e\n\x3cdiv class=\x26quot;container\x26quot;\x3e\n  \x3cdiv class=\x26quot;list-group\x26quot;\x3e\n    \x3ca v-for=\x26quot;note in filteredNotes | byTitle query\x26quot;\n      class=\x26quot;list-group-item\x26quot; href=\x26quot;#\x26quot;\n      :class=\x26quot;{active: activeKey === $key}\x26quot;\n      @click=\x26quot;updateActiveNote($key, note)\x26quot;\x3e\n      \x3ch4 class=\x26quot;list-group-item-heading\x26quot;\x3e\n        \x22{{\x22note.text.substring(0, 30)\x22}}\x22\n      \x3c\/h4\x3e\n    \x3c\/a\x3e\n  \x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\/\/ NoteList.vue\n\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- filter --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22input\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22query\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eplaceholder\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Filter your notes...\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- render notes in a list --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22list-group\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22note in filteredNotes | byTitle query\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22list-group-item\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22#\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{active: activeKey === $key}\x22\x3c\/span\x3e\n      @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22updateActiveNote($key, note)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22list-group-item-heading\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x22{{\x22note.text.substring(0, 30)\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ NoteList.vue\n\nfilters: {\n  byTitle (notesToFilter, filterValue) {\n    var filteredNotes = {}\n    for (let note in notesToFilter) {\n      if (notesToFilter[note][\x27text\x27].indexOf(filterValue) \x3e -1) {\n        filteredNotes[note] = notesToFilter[note]\n      }\n    }\n    return filteredNotes\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ NoteList.vue\x3c\/span\x3e\n\nfilters: {\n  byTitle (notesToFilter, filterValue) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e filteredNotes = {}\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e note \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e notesToFilter) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (notesToFilter[note][\x3cspan class=\x22hljs-string\x22\x3e\x27text\x27\x3c\/span\x3e].indexOf(filterValue) \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n        filteredNotes[note] = notesToFilter[note]\n      }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e filteredNotes\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e三、在项目中用 eslint\x3c\/h2\x3e\n\x3cp\x3e如果你是个 Vue 重度用户，你应该已经用上 eslint-standard 了吧。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;eslint\x26quot;: \x26quot;^2.0.0\x26quot;,\n\x26quot;eslint-config-standard\x26quot;: \x26quot;^5.1.0\x26quot;,\n\x26quot;eslint-friendly-formatter\x26quot;: \x26quot;^1.2.2\x26quot;,\n\x26quot;eslint-loader\x26quot;: \x26quot;^1.3.0\x26quot;,\n\x26quot;eslint-plugin-html\x26quot;: \x26quot;^1.3.0\x26quot;,\n\x26quot;eslint-plugin-promise\x26quot;: \x26quot;^1.0.8\x26quot;,\n\x26quot;eslint-plugin-standard\x26quot;: \x26quot;^1.3.2\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22eslint\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^2.0.0\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-config-standard\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^5.1.0\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-friendly-formatter\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.2.2\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-loader\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.3.0\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-plugin-html\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.3.0\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-plugin-promise\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.0.8\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-string\x22\x3e\x22eslint-plugin-standard\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.3.2\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把以上各条添加到 devDependencies 里面。如果用了 vue-cli 的话, 那就不需要手动配置 eslint 了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ webpack.config.js\nmodule: {\n  preLoaders: [\n    {\n      test: \/\\.vue$\/,\n      loader: \x27eslint\x27\n    },\n    {\n      test: \/\\.js$\/,\n      loader: \x27eslint\x27\n    }\n  ],\n  loaders: [ ... ],\n  eslint: {\n    formatter: require(\x27eslint-friendly-formatter\x27)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-attr\x22\x3epreLoaders\x3c\/span\x3e: [\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint\x27\x3c\/span\x3e\n    },\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint\x27\x3c\/span\x3e\n    }\n  ],\n  \x3cspan class=\x22hljs-attr\x22\x3eloaders\x3c\/span\x3e: [ ... ],\n  \x3cspan class=\x22hljs-attr\x22\x3eeslint\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eformatter\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27eslint-friendly-formatter\x27\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果需要自定义规则的话，就在根目录下新建\x3ccode\x3e.eslintrc\x3c\/code\x3e，这是我的配置:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  root: true,\n  \/\/ https:\/\/github.com\/feross\/standard\/blob\/master\/RULES.md#javascript-standard-style\n  extends: \x27standard\x27,\n  \/\/ required to lint *.vue files\n  plugins: [\n    \x27html\x27\n  ],\n  \/\/ add your custom rules here\n  \x27rules\x27: {\n    \/\/ allow paren-less arrow functions\n    \x27arrow-parens\x27: 0,\n    \x27no-undef\x27: 0,\n    \x27one-var\x27: 0,\n    \/\/ allow debugger during development\n    \x27no-debugger\x27: process.env.NODE_ENV === \x27production\x27 ? 2 : 0\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/feross\/standard\/blob\/master\/RULES.md#javascript-standard-style\x3c\/span\x3e\n  extends: \x3cspan class=\x22hljs-string\x22\x3e\x27standard\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ required to lint *.vue files\x3c\/span\x3e\n  plugins: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27html\x27\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ add your custom rules here\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x27rules\x27\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ allow paren-less arrow functions\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x27arrow-parens\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27no-undef\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27one-var\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ allow debugger during development\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x27no-debugger\x27\x3c\/span\x3e: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3e四、结语\x3c\/h1\x3e\n\x3cp\x3e讲得比较粗糙，具体可以拿\x3ca href=\x22https:\/\/github.com\/chenyiqiao\/notes-app-vuejs-vuex\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e跑一下。如果有什么问题，欢迎评论。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Vuex + Firebase 构建 Notes App</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005038509">https://segmentfault.com/a/1190000005038509</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/iid1xhh0akc/" target="_blank">https://alili.tech/archive/iid1xhh0akc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>