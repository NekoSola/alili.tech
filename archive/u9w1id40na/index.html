<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端Tank技能---模块化加载器的简单实现"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端Tank技能---模块化加载器的简单实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/u9w1id40na/",
				"appid": "1613049289050283", 
				"title": "前端Tank技能---模块化加载器的简单实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/is6rf3pkpqo/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/tda4awahqi/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&text=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&text=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&title=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&is_video=false&description=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&title=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&title=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&title=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fu9w1id40na%2f&title=%e5%89%8d%e7%ab%afTank%e6%8a%80%e8%83%bd---%e6%a8%a1%e5%9d%97%e5%8c%96%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端Tank技能---模块化加载器的简单实现</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e什么是模块化，为什么要模块化\x3c\/h2\x3e\n\x3cp\x3e装个b，贴一段English\x3c\/p\x3e\n\x3cp\x3eA beginning programmer writes her programs like an ant builds her hill, one piece at a time, without thought for the bigger structure. Her programs will be like loose sand. They may stand for a while, but growing too big they fall apart.\x3c\/p\x3e\n\x3cp\x3eRealizing this problem, the programmer will start to spend a lot of time thinking about structure. Her programs will be rigidly structured, like rock sculptures. They are solid, but when they must change, violence must be done to them.\x3c\/p\x3e\n\x3cp\x3eThe master programmer knows when to apply structure and when to leave things in their simple form. Her programs are like clay, solid yet malleable.\x3c\/p\x3e\n\x3cp\x3eMaster Yuan-Ma, The Book of Programming\x3c\/p\x3e\n\x3cp\x3e以上基本上是为什么要模块化的，至于什么是模块化有好多好多种。\x3c\/p\x3e\n\x3cp\x3e比如这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function dujia1(){\n    \/\/..\n}\n\nfunction dujia2(){\n    \/\/...\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edujia1\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/..\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edujia2\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样简单的放在一起也是模块化，只不过太挫，有些人不承认而已。\x3c\/p\x3e\n\x3cp\x3e再比如这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var page = {\n    init: function(){\n        \/\/..\n    },\n    getData:function(){\n        \/\/..    \n    },\n    bindEvent:function(){\n        \/\/...\n    },\n    __secret:”我不想让让人知道\x26quot;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e page = {\n    init: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/..\x3c\/span\x3e\n    },\n    getData:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/..    \x3c\/span\x3e\n    },\n    bindEvent:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n    },\n    __secret:”我不想让让人知道\x3cspan class=\x22hljs-string\x22\x3e\x22\n}\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个就是我们比价常用的了。所有page相关的功能都作为属性包在page这个模块里面，基本上对全局没有污染。但是也没有保留，也就是对外部来说，所有的东西都是可以看到的。\x3cbr\x3e比如访问   page.__secret  你能获取这个秘密，这样的包装方式是包不住的。\x3c\/p\x3e\n\x3cp\x3e再比如这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var page = (function(){\n    \n    var  __secret = ”我不想让让人知道”;\n\n    var init = function(){\n        \/\/..\n    };\n    var getData = function(){\n        \/\/..    \n    };\n    var bindEvent = function(){\n        \/\/...\n    };\n\n    return {\n        init : init\n    }    \n})();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e page = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e  __secret = ”我不想让让人知道”;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/..\x3c\/span\x3e\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e getData = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/..    \x3c\/span\x3e\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bindEvent = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        init : init\n    }    \n})();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样呢外吐的只有init了。是吧，其他都包住了。\x3c\/p\x3e\n\x3cp\x3e再比如一下这个样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var page = (function(mod){\n    mod.xxx=yyy;\n    return mod\n})(module);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fortran\x22\x3e\x3ccode\x3evar page = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(mod)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3emod\x3c\/span\x3e.xxx=yyy;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emod\x3c\/span\x3e\n})(\x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好，这样就可以扩展module了。\x3c\/p\x3e\n\x3cp\x3e其实以上都不是本篇的重点，本篇的重点是模块加载工具的简单实现。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e模块加载器\x3c\/h2\x3e\n\x3cp\x3e以上大家都看到了，要实现模块化，我们要设计，要知道怎么搞好，然后呢用这个方法去实现，啪啪啪写好多代码去实现。\x3c\/p\x3e\n\x3cp\x3e那么换个思路想想，我们为什么不在打包过程中编译过程中或者加载过程中由程序去做这个事情呢。对，fekit是这样实现，好多好多都是这样实现的，实现这样功能的东西就是模块加载器。\x3c\/p\x3e\n\x3cp\x3e先说说，我们已经写的次数和名字差不多的 require是怎么实现的。\x3c\/p\x3e\n\x3cp\x3e抛开一直写的那个require不讲，我们说的是一个简单的模块加载器的简单实现。\x3c\/p\x3e\n\x3cp\x3e定义一下：这个加载器，可以通过require一个文件的方式，把里面的内容添加到require的文件中，并能够执行他。也就是通过传入模块名来取得该模块的调用。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e实现一个readFile方法，返回对应文件的内容；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e将返回的字符串作为代码进行执行。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3ereadFile非常好实现，忽略不提。\x3c\/p\x3e\n\x3cp\x3e然后就是把字符串转成可以执行的程序代码。eval是第一个冒出来的，但是，一般提到他都会是弃用的，会有安全的漏洞\x3c\/p\x3e\n\x3cp\x3e更好的方案是Function构造器。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var plus = new Function(\x26quot;name\x26quot;, \x26quot;return name \x2b ‘ bigger\x27\x26quot;);\nconsole.log(plus(\x26quot;Iphone6\x26quot;)); \/\/Iphone6 bigger\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plus = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eFunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22return name \x2b ‘ bigger\x27\x22\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e;\nconsole.log(plus(\x3cspan class=\x22hljs-string\x22\x3e\x22Iphone6\x22\x3c\/span\x3e)); \x3cspan class=\x22hljs-comment\x22\x3e\/\/Iphone6 bigger\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e两个参数，第一个是用逗号分隔的参数列表字符串，第二个是函数体字符串\x3c\/p\x3e\n\x3cp\x3e有了这个我们就可以来实现require方法了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/module.js\n\nfunction require(name){\n\n    \/\/调用一个模块，首先检查这个模块是否已经调用\n    if(name in require.cache){\n        return require.cache[name];\n    }\n\n        \/\/此处生成一个code的函数，参数为  exports 和 module， 函数体为readFile返回的js文件中的代码字符串\n    var code = new Function(\x26quot;exports, module\x26quot;, readFile(name));\n        \n        \/\/定义外吐内容\n    var exports = {},\n        module = {exports: exports};\n        \n        \/\/执行函数体，如果有定义外吐，既module.exports 或者  exports.***之类的，会改写上面的外吐内容\n    code(exports, module);\n\n    require.cache[name] = module.exports;\n\n        \/\/返回exports\n    return module.exports;\n}\n\n\/\/缓存对象，为了应对重复调用\nrequire.cache = Object.create(null);\n\n\/\/读文件，返回结果\nfunction readFile(fileName){ ... }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/module.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e)\x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/调用一个模块，首先检查这个模块是否已经调用\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(name \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.cache){\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.cache[name];\n    }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/此处生成一个code的函数，参数为  exports 和 module， 函数体为readFile返回的js文件中的代码字符串\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eFunction\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22exports, module\x22\x3c\/span\x3e, readFile(name));\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义外吐内容\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e exports = {},\n        \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e = {\x3cspan class=\x22hljs-attr\x22\x3eexports\x3c\/span\x3e: exports};\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/执行函数体，如果有定义外吐，既module.exports 或者  exports.***之类的，会改写上面的外吐内容\x3c\/span\x3e\n    code(exports, \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.cache[name] = \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/返回exports\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/缓存对象，为了应对重复调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.cache = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.create(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/读文件，返回结果\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereadFile\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efileName\x3c\/span\x3e)\x3c\/span\x3e{ ... }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这就是一个简单的CommonJS模块风格的加载方式，也是node和fekit现在使用的加载方式。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e实现demo\x3c\/h2\x3e\n\x3cp\x3e亲测，不加demo很有可能看不懂\x3c\/p\x3e\n\x3cp\x3e有一个文件 aaa.js,内容如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function (){\n    console.log(\x26quot;this is aaa\x26quot;);\n}\nexports.aaa = \x26quot;aaa\x26quot;;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22this is aaa\x22\x3c\/span\x3e);\n}\nexports.aaa = \x3cspan class=\x22hljs-string\x22\x3e\x22aaa\x22\x3c\/span\x3e;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这是\x3ccode\x3evar aaa = require(\x27aaa.js\x27)\x3c\/code\x3e会做以下事情\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ereadFile(\x22aaa.js\x22)\x3c\/code\x3e  以字符串形式返回aaa的所有函数体，也就是上面的哪些部分代码\x3cbr\x3e  通过new Function构造器，创造一个code函数，函数体是aaa.js里面的内容\x3cbr\x3e  执行code函数，log出结果，然后扩展了module.exports\x3cbr\x3e  返回这个module.exports 改外面的变量 aaa\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e再思考\x3c\/h2\x3e\n\x3cp\x3e我们在吐js模块的时候经常使用的方案是这样两种\x3cbr\x3e # module.exports = a object;\x3cbr\x3e # exports.aaa = function();\x3c\/p\x3e\n\x3cp\x3e如果我们直接写  exports = a object  会怎么样，为什么？\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端Tank技能&mdash;模块化加载器的简单实现</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005726210">https://segmentfault.com/a/1190000005726210</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/u9w1id40na/" target="_blank">https://alili.tech/archive/u9w1id40na/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>