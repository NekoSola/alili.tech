<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="[聊一聊系列]聊一聊前端速度统计(性能统计)那些事儿"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>[聊一聊系列]聊一聊前端速度统计(性能统计)那些事儿 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bnj4hbgqdl/",
				"appid": "1613049289050283", 
				"title": "[聊一聊系列]聊一聊前端速度统计(性能统计)那些事儿 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-07T02:30:16"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4q3y3f96tb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ti50rmd47dj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&text=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&text=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&title=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&is_video=false&description=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&title=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&title=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&title=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbnj4hbgqdl%2f&title=%5b%e8%81%8a%e4%b8%80%e8%81%8a%e7%b3%bb%e5%88%97%5d%e8%81%8a%e4%b8%80%e8%81%8a%e5%89%8d%e7%ab%af%e9%80%9f%e5%ba%a6%e7%bb%9f%e8%ae%a1%28%e6%80%a7%e8%83%bd%e7%bb%9f%e8%ae%a1%29%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">[聊一聊系列]聊一聊前端速度统计(性能统计)那些事儿</h1><div class="meta"><div class="postdate"><time datetime="2019-02-07" itemprop="datePublished">2019-02-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e欢迎大家收看聊一聊系列，这一套系列文章，可以帮助前端工程师们了解前端的方方面面（不仅仅是代码）：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/blog\/frontenddriver\x22\x3ehttps:\/\/segmentfault.com\/blog\/frontenddriver\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e上一篇文章我们讨论了，如何进行前端日志打点统计：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005861012\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/a\/1190000005861012\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e这一篇我们来看看如何进行速度统计\x3c\/p\x3e\n\x3cp\x3e网站的速度影响了用户访问网站最初的体验。试想，如果一个用户，在等待了若干秒后，还是停留在白屏的状态，那么他的选择将是离开这个网站。性能统计有助于帮我们检测网站的用户体验。\x3c\/p\x3e\n\x3cp\x3e这里引用百度百科中的一句话 ----\x26nbsp;通常一个网站，如果首屏时间在2秒以内是比较优秀的，5秒以内是可以接受的，5秒以上就不可容忍了。用户会选择刷新页面或立刻离开。\x3c\/p\x3e\n\x3cp\x3e这里，有些数据需要与大家分享一下(来自FEX的统计)：\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e产品\x3c\/th\x3e\n\x3cth align=\x22left\x22\x3e性能\x3c\/th\x3e\n\x3cth align=\x22left\x22\x3e收益\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eGoogle\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e延迟\x26nbsp;400ms\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e搜索量下降\x26nbsp;0.59%\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eBing\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e延迟\x26nbsp;2s\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e收入下降\x26nbsp;4.3%\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eYahoo\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e延迟\x26nbsp;400ms\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e流量下降\x26nbsp;5-9%\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eMozilla\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e页面打开减少\x26nbsp;2.2s\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e下载量提升\x26nbsp;15.4%\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eNetflix\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e开启 Gzip性能提升 13.25%\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e带宽减少50%\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e可以看到，速度，对于一个网站来说，重要性可见一斑。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e1、网站都有哪些指标？\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.1 首屏时间\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e这个指标对于大多数网站来说，非常重要。那么何为首屏时间呢？引用百度百科里的一句话，就是:\x3c\/p\x3e\n\x3cp\x3e网站用户体验的一个重要指标。　指一个网站被浏览器如IE窗口上部800*600的区域被充满所需时间。\x3c\/p\x3e\n\x3cp\x3e其实就是你的网页刚进入时，渲染完整个浏览器屏幕的时间。\x3c\/p\x3e\n\x3cp\x3e关于是否包含首屏所有的图片下载完成。这个网上有些争议，有的同学说不包含图片，只要DOM\x2b样式 都渲染完了，就算完成了。\x3c\/p\x3e\n\x3cp\x3e笔者认为，既然是首屏，那么首屏上所有的东西都加载完成，让用户感受不到还有没完成的部分，就算完成了。\x3c\/p\x3e\n\x3cp\x3e所以，综合一下，咱们的首屏时间，包括首屏的DOM元素的渲染，展现在用户第一屏幕的所有图片都完成。\x3c\/p\x3e\n\x3cp\x3e其实Chrome提供开发着检查网站整个渲染过程的小公举，哦不，是小工具（如图1.1.1所示）在F12开发者工具的Network面板里面：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNcN\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNcN\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.1.1\x3c\/p\x3e\n\x3cp\x3e这个是屏幕捕获的工具，可以看到整个网页的渲染过程。我们接着来深究一下上述哪个时间点是首屏时间点。\x3c\/p\x3e\n\x3cp\x3e我们来一起看看百度首页的首屏情况，由于百度首页加载比较快，所以这里咱们模拟一下3G网的延迟（如图1.1.2）：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyM7j\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyM7j\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图1.1.2\x3c\/p\x3e\n\x3cp\x3e我们看到，虽然在240ms的时候，网页算是被渲染出来了，但是还是有很多空白的地方。\x3c\/p\x3e\n\x3cp\x3e279MS的时候，虽然框架都被渲染完成了，DOM与样式也都渲染完成了，但是我们看到图片还不完整，所以，当然也不算首屏完成了。\x3c\/p\x3e\n\x3cp\x3e有的同学会说，318ms的时候，总算完成了吧，nonono，我们向后观察，就会发现还有一些元素会再被渲染出来。也就是说知道稳定之前，我们都不能算首屏完成了。\x3c\/p\x3e\n\x3cp\x3e知道487 ms的时候，页面才算加载完成了。并且之后不会再发生页面的抖动了。\x3c\/p\x3e\n\x3cp\x3e看完这些，相信聪明的你心里已经有数了，什么是首屏时间。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.2 白屏时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 这个其实不多说，读者也明白，就是页面处于空白的时间。页面空白，用户就会焦躁，并且变得不耐心。影响白屏时间的多数是：DNS解析耗时\x2b服务端耗时\x2b网络传输耗时。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e1.3\x26nbsp;用户可操作时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 顾名思义，这项指标值得是，我们的网页用户可以使用的时间。一般来讲 domready时间，便是我们的用户可操作时间了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e1.4 总下载时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 通常指，页面总体的下载时间，所有的页面资源都下载完成。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e1.5 自定义指标\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 由于业务不同，站长们所关心的时间必然也不同了。比如你可能是一个电商网站的站长，你关心你的第一屏商品到底展示的有多快( 通常这会带来更多的收入)，所以，你需要监控你的商品展现的时间。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e2 如何统计自己网站的这些指标\x3c\/h2\x3e\n\x3cp\x3e如果并不想要花费精力在这些统计上，只是要小小的关注一下的话，当然可以自己打开控制台，在页面的各个阶段，将时间打印出来，亦或者是使用html5新增的接口：performance来评估一下自己的网站到底差在哪里(如图2.0.1)。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyM7E\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyM7E\x22 alt=\x22145325_AOW5_1177792.png\x22 title=\x22145325_AOW5_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.0.1\x3c\/p\x3e\n\x3cp\x3e但是，你的测试并不能代表所有的用户的情况。而且，你需要一个监控程序，去时刻提醒着你，现在你的网站的速度处于什么状况。\x3c\/p\x3e\n\x3cp\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;所以，对于有追求一些的站长而言，笔者在这里更建议采用用户日志，即，在自己网站的代码中，增加统计，并把统计结果发送到服务器。在服务器采集这些日志，并产生一个监控的网站。其实大可不必使用一些付费的服务，我们自己就可以轻轻松松的做一个简答的速度监控服务。\x3c\/p\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 在本文的第三节，我们将会一起做一个小的速度监控服务的例子。很多站长甚至可以拿过来直接使用。接下来，我们还是针对之前我们提到过的几个指标，注意讲解统计方法：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e2.1 如何统计首屏时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp;\x26nbsp;其实，对于网页高度小于屏幕的网站来说，统计首屏时间非常的简单，只要在页面底部加上脚本打印当前时间即可，或者对于网页高度大于一屏的网页来说，只要在估算接近于一屏幕的元素的位置后，打印一下当前时间即可。\x3c\/p\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 比如，现在你有一个简单的网页（如图2.1.1所示）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n    \x3chead\x3e\n        \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n        \x3cmeta name=\x26quot;viewport\x26quot; content=\x26quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0\x26quot;\x3e\n    \x3c\/head\x3e\n    \x3cbody\x3e\n        \x3cdiv\x3e这是第一屏，这是第一屏\x3c\/div\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cdiv\x3e第一屏结尾，第一屏结尾\x3c\/div\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22width=device-width,minimum-scale=1.0,maximum-scale=1.0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e这是第一屏，这是第一屏\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e第一屏结尾，第一屏结尾\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyM9P\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyM9P\x22 alt=\x22152854_WBnH_1177792.png\x22 title=\x22152854_WBnH_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.1.1\x3c\/p\x3e\n\x3cp\x3e我们需要统计首屏时间的话，则需要定义一个基准，就是--什么时候用户点开的当前网页，HTML5的performance接口提供了这个时间：performance.timing.navigationStart，这个就是用户访问我们网页最开始的跳转时间了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3chead\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        window.logInfo = {};\n        window.logInfo.openTime = performance.timing.navigationStart;\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo = \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22javascript\x22\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime = performance.timing.navigationStart;\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在页面开头处，将基准记下。\x3c\/p\x3e\n\x3cp\x3e接下来，在大约的首屏处加上我们的统计：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv\x3e第一屏结尾，第一屏结尾\x3c\/div\x3e\n\x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n    window.logInfo.firstScreen = \x2bnew Date() - window.logInfo.openTime;\n    console.log(\x27首屏时间：\x27, window.logInfo.firstScreen \x2b \x27ms\x27);\n\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e第一屏结尾，第一屏结尾\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.firstScreen = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27首屏时间：\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.firstScreen \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms\x27\x3c\/span\x3e);\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们再来看看我们的页面(如图2.1.2所示)：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyM9R\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyM9R\x22 alt=\x22154049_1pEB_1177792.png\x22 title=\x22154049_1pEB_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.1.2\x3c\/p\x3e\n\x3cp\x3e便有了首屏时间。\x3c\/p\x3e\n\x3cp\x3e霸特，霸特。同学们不要激动的太早。我们这个首屏时间，并不没有算上图片。所以，我们得把首屏中所有图片的加载时间也算上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n    \x3chead\x3e\n        \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n        \x3cmeta name=\x26quot;viewport\x26quot; content=\x26quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0\x26quot;\x3e\n        \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n            window.logInfo = {};\n            window.logInfo.openTime = performance.timing.navigationStart;\n        \x3c\/script\x3e\n    \x3c\/head\x3e\n    \x3cbody\x3e\n        \x3cdiv\x3e这是第一屏，这是第一屏\x3c\/div\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cdiv\x3e第一屏结尾，第一屏结尾\x3c\/div\x3e\n        \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n            (function logFirstScreen() {\n                var images = document.getElementsByTagName(\x27img\x27);\n                var iLen = images.length;\n                var curMax = 0;\n                var inScreenLen = 0;\n                \/\/ 图片的加载回调\n                function imageBack() {\n                    this.removeEventListener\n                    \x26amp;\x26amp; this.removeEventListener(\x27load\x27, imageBack, !1);\n                    if (\x2b\x2bcurMax === inScreenLen) {\n                        \/\/ 如果所有在首屏的图片均已加载完成了的话，发送日志\n                        log();\n                    }   \n                }   \n                \/\/ 对于所有的位于指定区域的图片，绑定回调事件\n                for (var s = 0; s \x3c iLen; s\x2b\x2b) {\n                    var img = images[s];\n                    var offset = {\n                        top: 0\n                    };\n                    var curImg = img;\n                    while (curImg.offsetParent) {\n                        offset.top \x2b= curImg.offsetTop;\n                        curImg = curImg.offsetParent;\n                    }\n                    \/\/ 判断图片在不在首屏\n                    if (document.documentElement.clientHeight \x3c offset.top) {\n                        continue;\n                    }\n                    \/\/ 图片还没有加载完成的话\n                    if (!img.complete) {\n                        inScreenLen\x2b\x2b;\n                        img.addEventListener(\x27load\x27, imageBack, !1);\n                    }\n                }\n                \/\/ 如果首屏没有图片的话，直接发送日志\n                if (inScreenLen === 0) {\n                    log();\n                }\n                \/\/ 发送日志进行统计\n                function log () {\n                    window.logInfo.firstScreen = \x2bnew Date() - window.logInfo.openTime;\n                    console.log(\x27首屏时间：\x27, window.logInfo.firstScreen \x2b \x27ms\x27);\n                }\n            })();\n        \x3c\/script\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22width=device-width,minimum-scale=1.0,maximum-scale=1.0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo = {};\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime = performance.timing.navigationStart;\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e这是第一屏，这是第一屏\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e第一屏结尾，第一屏结尾\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elogFirstScreen\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e images = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27img\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iLen = images.length;\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curMax = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e inScreenLen = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片的加载回调\x3c\/span\x3e\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eimageBack\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.removeEventListener\n                    \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27load\x27\x3c\/span\x3e, imageBack, !\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x2b\x2bcurMax === inScreenLen) {\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果所有在首屏的图片均已加载完成了的话，发送日志\x3c\/span\x3e\n                        log();\n                    }   \n                }   \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对于所有的位于指定区域的图片，绑定回调事件\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e s = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; s \x26lt; iLen; s\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = images[s];\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e offset = {\n                        \x3cspan class=\x22hljs-attr\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n                    };\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curImg = img;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (curImg.offsetParent) {\n                        offset.top \x2b= curImg.offsetTop;\n                        curImg = curImg.offsetParent;\n                    }\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断图片在不在首屏\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.clientHeight \x26lt; offset.top) {\n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片还没有加载完成的话\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!img.complete) {\n                        inScreenLen\x2b\x2b;\n                        img.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27load\x27\x3c\/span\x3e, imageBack, !\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n                    }\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果首屏没有图片的话，直接发送日志\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (inScreenLen === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                    log();\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发送日志进行统计\x3c\/span\x3e\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elog\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.firstScreen = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27首屏时间：\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.firstScreen \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms\x27\x3c\/span\x3e);\n                }\n            })();\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上封装的首屏时间函数，无依赖比较小巧，同学们可以直接使用于自己的项目中。这样，我们就轻轻松松的统计到了首屏时间。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e2.2 如何统计白屏时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;可以在页面的head底部添加的JS代码来统计白屏时间，虽然这样做可能并不十分精准，但是也可以基本代表了首屏时间，如图2.2.1所示。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n    \x3chead\x3e\n        \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n        \x3cmeta name=\x26quot;viewport\x26quot; content=\x26quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0\x26quot;\x3e\n        \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n            window.logInfo = {};\n            window.logInfo.openTime = performance.timing.navigationStart;\n            window.logInfo.whiteScreenTime = \x2bnew Date() - window.logInfo.openTime;\n            console.log(\x27白屏时间：\x27, window.logInfo.whiteScreenTime \x2b \x27ms\x27);\n        \x3c\/script\x3e\n    \x3c\/head\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22width=device-width,minimum-scale=1.0,maximum-scale=1.0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo = \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22javascript\x22\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime = performance.timing.navigationStart;\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.whiteScreenTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27白屏时间：\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.whiteScreenTime \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms\x27\x3c\/span\x3e);\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyM90\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyM90\x22 alt=\x22155950_iY5p_1177792.png\x22 title=\x22155950_iY5p_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.2.1\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e2.3 如何统计用户可操作时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;前面提到过document.ready其实就可以算作我们的用户可操作时间啦。我们不妨直接试试，如图2.3.1所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22document\n.addEventListener(\n    \x27DOMContentLoaded\x27,\n    function (event) {\n        window.logInfo.readyTime = \x2bnew Date() - window.logInfo.openTime;\n        console.log(\x27用户可操作时间：\x27, window.logInfo.readyTime);\n    }\n);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e\n.addEventListener(\n    \x3cspan class=\x22hljs-string\x22\x3e\x27DOMContentLoaded\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.readyTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27用户可操作时间：\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.readyTime);\n    }\n);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNab\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNab\x22 alt=\x22161009_jIOl_1177792.png\x22 title=\x22161009_jIOl_1177792.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.3.1\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e2.4 如何打印总下载时间\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;页面总体下载时间，使用\x3ccode\x3ewindow.onload\x3c\/code\x3e即可，这可以帮助我们看看我们所有的资源是否拖慢网页，如图2.4.1所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onload = function () {\n    window.logInfo.allloadTime = \x2bnew Date() - window.logInfo.openTime;\n    console.log(\x27总下载时间：\x27, window.logInfo.allloadTime \x2b \x27ms\x27);\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.allloadTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27总下载时间：\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.allloadTime \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms\x27\x3c\/span\x3e);\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNaw\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNaw\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.4.1\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e2.5 统一打印时间，更方便\x3c\/h3\x3e\n\x3cp\x3e\x26nbsp; \x26nbsp; 我们将上述的统计合并，一个完整的统计就出来了，如图2.5.1所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n    \x3chead\x3e\n        \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n        \x3cmeta name=\x26quot;viewport\x26quot; content=\x26quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0\x26quot;\x3e\n        \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n            window.logInfo = {};\n            window.logInfo.openTime = performance.timing.navigationStart;\n            window.logInfo.whiteScreenTime = \x2bnew Date() - window.logInfo.openTime;\n        \x3c\/script\x3e\n    \x3c\/head\x3e\n    \x3cbody\x3e\n        \x3cdiv\x3e这是第一屏，这是第一屏\x3c\/div\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cdiv\x3e第一屏结尾，第一屏结尾\x3c\/div\x3e\n        \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n            (function logFirstScreen() {\n                var images = document.getElementsByTagName(\x27img\x27);\n                var iLen = images.length;\n                var curMax = 0;\n                var inScreenLen = 0;\n                \/\/ 图片的加载回调\n                function imageBack() {\n                    this.removeEventListener\n                    \x26amp;\x26amp; this.removeEventListener(\x27load\x27, imageBack, !1);\n                    if (\x2b\x2bcurMax === inScreenLen) {\n                        \/\/ 如果所有在首屏的图片均已加载完成了的话，发送日志\n                        log();\n                    }\n                }   \n                \/\/ 对于所有的位于指定区域的图片，绑定回调事件\n                for (var s = 0; s \x3c iLen; s\x2b\x2b) {\n                    var img = images[s];\n                    var offset = {\n                        top: 0\n                    };\n                    var curImg = img;\n                    while (curImg.offsetParent) {\n                        offset.top \x2b= curImg.offsetTop;\n                        curImg = curImg.offsetParent;\n                    }\n                    \/\/ 判断图片在不在首屏\n                    if (document.documentElement.clientHeight \x3c offset.top) {\n                        continue;\n                    }\n                    \/\/ 图片还没有加载完成的话\n                    if (!img.complete) {\n                        inScreenLen\x2b\x2b;\n                        img.addEventListener(\x27load\x27, imageBack, !1);\n                    }\n                }\n                \/\/ 如果首屏没有图片的话，直接发送日志\n                if (inScreenLen === 0) {\n                    log();\n                }\n                \/\/ 发送日志进行统计\n                function log () {\n                    window.logInfo.firstScreen = \x2bnew Date() - window.logInfo.openTime;\n                }\n            })();\n            document\n            .addEventListener(\n                \x27DOMContentLoaded\x27,\n                function (event) {\n                    window.logInfo.readyTime = \x2bnew Date() - window.logInfo.openTime;\n                }\n            );\n            window.onload = function () {\n                window.logInfo.allloadTime = \x2bnew Date() - window.logInfo.openTime;\n                var timname = {\n                    whiteScreenTime: \x27白屏时间\x27,\n                    firstScreen: \x27首屏时间\x27,\n                    readyTime: \x27用户可操作时间\x27,\n                    allloadTime: \x27总下载时间\x27\n                };\n                for (var i in timname) {\n                    console.log(timname[i] \x2b \x27:\x27 \x2b window.logInfo[i] \x2b \x27ms\x27);\n                }\n            };\n        \x3c\/script\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n        \x3cimg src=\x26quot;http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x26quot;\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22width=device-width,minimum-scale=1.0,maximum-scale=1.0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo = {};\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime = performance.timing.navigationStart;\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.whiteScreenTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e这是第一屏，这是第一屏\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e第一屏结尾，第一屏结尾\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elogFirstScreen\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e images = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27img\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iLen = images.length;\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curMax = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e inScreenLen = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片的加载回调\x3c\/span\x3e\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eimageBack\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.removeEventListener\n                    \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27load\x27\x3c\/span\x3e, imageBack, !\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x2b\x2bcurMax === inScreenLen) {\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果所有在首屏的图片均已加载完成了的话，发送日志\x3c\/span\x3e\n                        log();\n                    }\n                }   \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对于所有的位于指定区域的图片，绑定回调事件\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e s = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; s \x26lt; iLen; s\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = images[s];\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e offset = {\n                        \x3cspan class=\x22hljs-attr\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n                    };\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curImg = img;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (curImg.offsetParent) {\n                        offset.top \x2b= curImg.offsetTop;\n                        curImg = curImg.offsetParent;\n                    }\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断图片在不在首屏\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.clientHeight \x26lt; offset.top) {\n                        \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n                    }\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片还没有加载完成的话\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!img.complete) {\n                        inScreenLen\x2b\x2b;\n                        img.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27load\x27\x3c\/span\x3e, imageBack, !\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n                    }\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果首屏没有图片的话，直接发送日志\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (inScreenLen === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                    log();\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发送日志进行统计\x3c\/span\x3e\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elog\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.firstScreen = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n                }\n            })();\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e\n            .addEventListener(\n                \x3cspan class=\x22hljs-string\x22\x3e\x27DOMContentLoaded\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.readyTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n                }\n            );\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.allloadTime = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e() - \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo.openTime;\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timname = {\n                    \x3cspan class=\x22hljs-attr\x22\x3ewhiteScreenTime\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27白屏时间\x27\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3efirstScreen\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27首屏时间\x27\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3ereadyTime\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27用户可操作时间\x27\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eallloadTime\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27总下载时间\x27\x3c\/span\x3e\n                };\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e timname) {\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(timname[i] \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27:\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo[i] \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms\x27\x3c\/span\x3e);\n                }\n            };\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/static.oschina.net\/uploads\/space\/2016\/0623\/152644_6UUC_1177792.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNaA\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNaA\x22 alt=\x22161744_kOfK_1177792.png\x22 title=\x22161744_kOfK_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.5.1\x3c\/p\x3e\n\x3cp\x3e按照上一节( \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005861012\x22\x3ehttps:\/\/segmentfault.com\/a\/1190000005861012\x3c\/a\x3e )所说，我们将这个日志发送到服务端去。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var logStr = \x27\x27;\nfor (var i in timname) {\n    logStr \x2b= \x27\x26amp;\x27 \x2b i \x2b \x27=\x27 \x2b window.logInfo[i];\n}\n(new Image()).src = \x27http:\/\/localhost:8091\/?action=speedlog\x27 \x2b logStr;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e logStr = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e timname) {\n    logStr \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;\x27\x3c\/span\x3e \x2b i \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27=\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.logInfo[i];\n}\n(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image()).src = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:8091\/?action=speedlog\x27\x3c\/span\x3e \x2b logStr;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e开启我们的nginx监听，并在服务端接收这条日志如图2.5.2，图2.5.3所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNaC\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNaC\x22 alt=\x22162439_crrp_1177792.png\x22 title=\x22162439_crrp_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.5.2\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyNb2\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyNb2\x22 alt=\x22162553_ZBUv_1177792.png\x22 title=\x22162553_ZBUv_1177792.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图2.5.3\x3c\/p\x3e\n\x3cp\x3e我们看看日志里面是不是已经多了一条了呢？\x3c\/p\x3e\n\x3cp\x3e要是再加以定时任务，日志采集等功能的辅助，我们就能实时掌握自己网站的性能啦。\x3c\/p\x3e\n\x3ch4\x3e不要走开，请关注我。下一章，我们将继续聊聊百度移动版首页那些事。\x3c\/h4\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005882953\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/a\/1190000005882953\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e后续，我们也会一起来聊聊，如何优化我们的这些速度，以提高我们的网站性能。\x3c\/p\x3e\n\x3cp\x3e原创文章,版权所有,转载请注明出处\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>[聊一聊系列]聊一聊前端速度统计(性能统计)那些事儿</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005869953">https://segmentfault.com/a/1190000005869953</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bnj4hbgqdl/" target="_blank">https://alili.tech/archive/bnj4hbgqdl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>