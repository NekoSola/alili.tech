<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="H5打造属于自己的视频播放器（JS篇2）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>H5打造属于自己的视频播放器（JS篇2） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/eizezdfg2ep/",
				"appid": "1613049289050283", 
				"title": "H5打造属于自己的视频播放器（JS篇2） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-05T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qtgce9g2usj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hvoqsx1kq15/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&text=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&text=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&title=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&is_video=false&description=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&title=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&title=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&title=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feizezdfg2ep%2f&title=H5%e6%89%93%e9%80%a0%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84%e8%a7%86%e9%a2%91%e6%92%ad%e6%94%be%e5%99%a8%ef%bc%88JS%e7%af%872%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">H5打造属于自己的视频播放器（JS篇2）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-05" itemprop="datePublished">2019-02-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e回顾\x3c\/h2\x3e\n\x3cp\x3e算了不回顾了 \x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBQyx\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBQyx\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e直接搞起，打开JS1中写的bvd.js\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e播放视频\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e播放按钮隐藏\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e视频开始播放\x3cbr\x3e   当点击播放按钮的时候，播放按钮将会隐藏，播放视频，这个不难，在JS1中我们就已经实现。但我们改变一下思维，给视频添加点击tap事件，使视频播放，再触发播放事件，从而让播放按钮隐藏\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22pro.initEvent = function(){\n    var that = this;\n\n    \/\/给播放按钮图片添加事件\n    this.vimg.addEventListener(\x27tap\x27,function(){\n        that.video.play();\n    })\n\n    \/\/视频点击暂停或播放事件\n    this.video.addEventListener(\x27tap\x27,function(){\n        if(this.paused || this.ended) {\n            \/\/暂停时点击就播放\n            if(this.ended) {\/\/如果播放完毕，就重头开始播放\n                this.currentTime = 0;\n            }\n            this.play();\n        } else {\n            \/\/播放时点击就暂停\n            this.pause();\n        }\n    })\n    \n    \/\/视频播放事件\n    this.video.addEventListener(\x27play\x27,function(){\n        that.vimg.style.display = \x27none\x27;\n    })\n    \n    \n    \/\/获取到元数据\n    this.video.addEventListener(\x27loadedmetadata\x27,function(){\n        that.vC.querySelector(\x27.duration\x27).innerHTML = stom(this.duration);\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3epro.initEvent = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/给播放按钮图片添加事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vimg.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        that.video.play();\n    })\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频点击暂停或播放事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.paused || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ended) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/暂停时点击就播放\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ended) {\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果播放完毕，就重头开始播放\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.play();\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/播放时点击就暂停\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pause();\n        }\n    })\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频播放事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27play\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        that.vimg.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n    })\n    \n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取到元数据\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27loadedmetadata\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        that.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.duration\x27\x3c\/span\x3e).innerHTML = stom(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.duration);\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e下方控制条渐渐隐藏\x3cbr\x3e   隐藏并不是难点，重要的是渐渐的隐藏，在这里我们有这么几种解决方案：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e定时器\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ecss3 动画帧\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e在这里我们2种结合起来使用\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBQGQ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBQGQ\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e首先我们先定义好一组动画\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22@keyframes vhide {0% {opacity: 1;}100% {opacity: 0;\x22}}\x22\n\n@-webkit-keyframes vhide {0% {opacity: 1;}100% {opacity: 0;\x22}}\x22\n\n.vhidden {\n    animation: vhide 3.5s ease-in;\n    -webkit-animation: vhide 3.5s ease-in;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e@\x3cspan class=\x22hljs-keyword\x22\x3ekeyframes\x3c\/span\x3e vhide {0% {\x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;}100% {\x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x22}}\x22\n\n@-\x3cspan class=\x22hljs-keyword\x22\x3ewebkit\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3ekeyframes\x3c\/span\x3e vhide {0% {\x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;}100% {\x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x22}}\x22\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.vhidden\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eanimation\x3c\/span\x3e: vhide \x3cspan class=\x22hljs-number\x22\x3e3.5s\x3c\/span\x3e ease-in;\n    \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-animation\x3c\/span\x3e: vhide \x3cspan class=\x22hljs-number\x22\x3e3.5s\x3c\/span\x3e ease-in;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其作用就是透明度3.5秒内1=\x26gt;0，ease-in 就是 由慢到快 的过度效果。有不懂css动画可以问问度娘哦\x3cbr\x3e然后我们给视频开始播放事件的时候给\x3cstrong\x3e控制条\x3c\/strong\x3e添加vhidden样式类\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/视频播放事件\nthis.video.addEventListener(\x27play\x27,function(){\n    that.vC.classList.add(\x27vhidden\x27);\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频播放事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27play\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vC.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27vhidden\x27\x3c\/span\x3e);\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e测试效果，果然3.5s内，控制条 慢慢透明，问题是3.5s后，透明度又回到了1，这里我讲解一下，是因为动画帧默认是回弹的，我们可以加个样式\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.vhidden {\n    animation: vhide 3.5s ease-in;\n    -webkit-animation: vhide 3.5s ease-in;\n    animation-fill-mode:forwards;\n    -webkit-animation-fill-mode: forwards;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.vhidden\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eanimation\x3c\/span\x3e: vhide \x3cspan class=\x22hljs-number\x22\x3e3.5s\x3c\/span\x3e ease-in;\n    \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-animation\x3c\/span\x3e: vhide \x3cspan class=\x22hljs-number\x22\x3e3.5s\x3c\/span\x3e ease-in;\n    \x3cspan class=\x22hljs-attribute\x22\x3eanimation-fill-mode\x3c\/span\x3e:forwards;\n    \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-animation-fill-mode\x3c\/span\x3e: forwards;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eCSS3 属性 animation-fill-mode 用来定义元素在动画结束后的样子。\x3c\/p\x3e\n\x3cp\x3eanimation-fill-mode 的默认值是 none，也就是在动画结束之后不做任何改动，如果把animation-fill-mode 改成 forwards 则动画结束后元素的样式会变成动画最后一个关键帧所规定的样式。\x3c\/p\x3e\n\x3cp\x3e加上这个样式后，果然3.5s后，动画不再回弹了，但是这里要留意一下，控制条并不是不在了而是透明了，如果这时我们有写控制条的点击时间，那么在控制条位置点击，还是会触发事件，所以呢，我们还可以写上一段setTimeout来，让控制条3.5s后隐藏，这个大家可以自行取舍\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/视频播放事件\nthis.video.addEventListener(\x27play\x27,function(){\n    that.vimg.style.display = \x27none\x27;\n    that.vC.classList.add(\x27vhidden\x27);\n    that.vCt = setTimeout(function(){\n        that.vC.style.visibility = \x27hidden\x27;\n    },3400);\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频播放事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27play\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vimg.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n    that.vC.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27vhidden\x27\x3c\/span\x3e);\n    that.vCt = setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n        that.vC.style.visibility = \x3cspan class=\x22hljs-string\x22\x3e\x27hidden\x27\x3c\/span\x3e;\n    },\x3cspan class=\x22hljs-number\x22\x3e3400\x3c\/span\x3e);\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为什么动画过程是3.5s，然而js是是3.4s后执行，这里只是在未写animation-fill-mode:forwards的情况下做个保险\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBQUI\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBQUI\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e正在播放中\x3c\/h2\x3e\n\x3cp\x3e嘿嘿，视频可以播放啦！那么现在我们该考虑一下播放中有哪些事要做呢？\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 控制条进度条慢慢增长\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们需要给视频添加一条\x3cstrong\x3etimeupdate\x3c\/strong\x3e音视频播放位置发生改变时的事件\x3c\/p\x3e\n\x3cp\x3e我们先在获取视频元数据事件中，把视频的长度给拿下来\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/获取到元数据\nthis.video.addEventListener(\x27loadedmetadata\x27,function(){\n    that.vDuration = this.duration;\n    that.vC.querySelector(\x27.duration\x27).innerHTML = stom(that.vDuration);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取到元数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27loadedmetadata\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vDuration = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.duration;\n    that.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.duration\x27\x3c\/span\x3e).innerHTML = stom(that.vDuration);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再从视频播放进度更新事件中计算比例，设置进度条的宽度\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/视频播放中事件\nthis.video.addEventListener(\x27timeupdate\x27, function() {\n    var currentPos = this.currentTime;\/\/获取当前播放的位置\n    \/\/更新进度条\n    var percentage = 100 * currentPos \/ that.vDuration; \n    \/\/设置宽度\n    that.vC.querySelector(\x27.timeBar\x27).style.width = percentage \x2b \x27%\x27;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频播放中事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27timeupdate\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e currentPos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime;\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取当前播放的位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新进度条\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e percentage = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e * currentPos \/ that.vDuration; \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置宽度\x3c\/span\x3e\n    that.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.timeBar\x27\x3c\/span\x3e).style.width = percentage \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBRgG\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBRgG\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到我们的进度条君越来越膨胀了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2. 当前播放时间变化\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e同时，我们的当前播放时间显示也在\x3cstrong\x3etimeupdate\x3c\/strong\x3e事件中设置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/视频播放中事件\nthis.video.addEventListener(\x27timeupdate\x27, function() {\n    var currentPos = this.currentTime;\/\/获取当前播放的位置\n    \/\/更新进度条\n    var percentage = 100 * currentPos \/ that.vDuration; \n    that.vC.querySelector(\x27.timeBar\x27).style.width = percentage \x2b \x27%\x27;\n    \/\/更新当前播放时间\n    that.vC.querySelector(\x27.current\x27).innerHTML = stom(currentPos);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频播放中事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27timeupdate\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e currentPos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime;\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取当前播放的位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新进度条\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e percentage = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e * currentPos \/ that.vDuration; \n    that.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.timeBar\x27\x3c\/span\x3e).style.width = percentage \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/更新当前播放时间\x3c\/span\x3e\n    that.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.current\x27\x3c\/span\x3e).innerHTML = stom(currentPos);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBRiq\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBRiq\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e暂停 or 停止\x3c\/h2\x3e\n\x3cp\x3e当我们点击视频时，如果是暂停，那就开始播放，并触发播放事件，反之视频在播放中，点击视频就会暂停，并触发暂停事件。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e0. 时间定格\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e啦啦啦，暂停播放，\x3cstrong\x3etimeupdate\x3c\/strong\x3e事件自然就不触发啦，所以进度条和当前播放时间就不会变啦。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 播放按钮显示\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在暂停的时候，显示出按钮就行啦\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/暂停or停止\nthis.video.addEventListener(\x27pause\x27,function(){\n    that.vimg.style.display = \x27block\x27;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/暂停or停止\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27pause\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vimg.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 下方控制条显示\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e控制条显示，直接去除那个vhidden样式类就好啦\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/暂停or停止\nthis.video.addEventListener(\x27pause\x27,function(){\n    that.vimg.style.display = \x27block\x27;\n    that.vC.classList.remove(\x27vhidden\x27);\n    that.vC.style.visibility = \x27visible\x27;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/暂停or停止\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27pause\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vimg.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n    that.vC.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x27vhidden\x27\x3c\/span\x3e);\n    that.vC.style.visibility = \x3cspan class=\x22hljs-string\x22\x3e\x27visible\x27\x3c\/span\x3e;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样写看样子是没错啦，但是，如果大家在之前隐藏控制条的时候写了setTimeout的话，这个时候就要清除掉哦。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/暂停or停止\nthis.video.addEventListener(\x27pause\x27,function(){\n    that.vimg.style.display = \x27block\x27;\n    that.vC.classList.remove(\x27vhidden\x27);\n    that.vC.style.visibility = \x27visible\x27; \n    that.vCt \x26amp;\x26amp; clearTimeout(that.vCt);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/暂停or停止\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27pause\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.vimg.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n    that.vC.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x27vhidden\x27\x3c\/span\x3e);\n    that.vC.style.visibility = \x3cspan class=\x22hljs-string\x22\x3e\x27visible\x27\x3c\/span\x3e; \n    that.vCt \x26amp;\x26amp; clearTimeout(that.vCt);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e快进快退\x3c\/h2\x3e\n\x3cp\x3e一个叼叼哒的小视频播放器怎么可能少的了可进可退能屈能伸呢？\x3c\/p\x3e\n\x3cp\x3e来，我们先为video添加左滑右滑事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/视频手势右滑动事件\nthis.video.addEventListener(\x27swiperight\x27,function(e){\n    this.currentTime \x2b= 5;\n});\n\/\/视频手势左滑动事件\nthis.video.addEventListener(\x27swipeleft\x27,function(e){\n    this.currentTime -= 5;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势右滑动事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27swiperight\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime \x2b= \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势左滑动事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeleft\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime -= \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可能在电脑上调试会直接进度变0，一开始我也纳闷呢，后来发现手机上webview中好像是可行的。\x3c\/p\x3e\n\x3cp\x3e关于\x3cstrong\x3e 进度条拖动改变视频进度 \x3c\/strong\x3e 我暂时不打算写，因为我还没写。\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBRMQ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBRMQ\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e全屏播放\x3c\/h2\x3e\n\x3cp\x3e可能大家会比较关注这个吧：\x3c\/p\x3e\n\x3cp\x3eios端：去除video标签webkit-playsinline属性即可，因为ios对h5的video标签支持还是比较不错的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/调用原生方式 全屏播放\npro.nativeMax = function(){\n    if(!window.plus){\n        \/\/非html5\x2b环境\n        return;\n    }\n    if($.os.ios){\n        console.log(\x27ios\x27)\n        this.video.removeAttribute(\x27webkit-playsinline\x27);\n    }else if($.os.android){\n        console.log(\x27android\x27);\n        var url = this.video.querySelector(\x27source\x27).src;\n        var Intent = plus.android.importClass(\x26quot;android.content.Intent\x26quot;);\n        var Uri = plus.android.importClass(\x26quot;android.net.Uri\x26quot;);\n        var main = plus.android.runtimeMainActivity();\n        var intent = new Intent(Intent.ACTION_VIEW);\n        var uri = Uri.parse(url);\n        intent.setDataAndType(uri, \x26quot;video\/*\x26quot;);\n        main.startActivity(intent);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用原生方式 全屏播放\x3c\/span\x3e\npro.nativeMax = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.plus){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/非html5\x2b环境\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($.os.ios){\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27ios\x27\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.removeAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27webkit-playsinline\x27\x3c\/span\x3e);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($.os.android){\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27android\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27source\x27\x3c\/span\x3e).src;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Intent = plus.android.importClass(\x3cspan class=\x22hljs-string\x22\x3e\x22android.content.Intent\x22\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Uri = plus.android.importClass(\x3cspan class=\x22hljs-string\x22\x3e\x22android.net.Uri\x22\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e main = plus.android.runtimeMainActivity();\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e intent = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Intent(Intent.ACTION_VIEW);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uri = Uri.parse(url);\n        intent.setDataAndType(uri, \x3cspan class=\x22hljs-string\x22\x3e\x22video\/*\x22\x3c\/span\x3e);\n        main.startActivity(intent);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在initEvent中添加点击 全屏 事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.vC.querySelector(\x27.fill\x27).addEventListener(\x27tap\x27,function(){\n    that.nativeMax();\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.fill\x27\x3c\/span\x3e).addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    that.nativeMax();\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样做有点鸡肋啊，就不能来点通用的？\x3c\/p\x3e\n\x3cp\x3e确实这个问题我想了一晚上，决定再拿点干货来。\x3c\/p\x3e\n\x3cp\x3e先给个状态，默认为mini播放\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var bvd = function(dom) {\n    var that = this;\n    $.ready(function() {\n        \/\/获取视频元素\n        that.video = document.querySelector(dom || \x27video\x27);\n        \/\/获取视频父元素\n        that.vRoom = that.video.parentNode;\n        \/\/元素初始化\n        that.initEm();\n        \/\/事件初始化\n        that.initEvent();\n        \/\/记录信息\n        that.initInfo();\n        \/\/当前播放模式 false 为 mini播放\n        that.isMax = false;\n    })\n}\n\n\/\/记录信息\npro.initInfo = function() {\n    var that = this;\n    \/\/在onload状态下，offsetHeight才会获取到正确的值\n    window.onload = function(){\n        that.miniInfo = {\/\/mini状态时的样式\n            width: that.video.offsetWidth \x2b \x27px\x27,\n            height: that.video.offsetHeight \x2b \x27px\x27,\n            position: that.vRoom.style.position,\n            transform: \x27translate(0,0) rotate(0deg)\x27\n        }\n\n        var info = [\n                document.documentElement.clientWidth || document.body.clientWidth,\n                document.documentElement.clientHeight || document.body.clientHeigth\n            ],\n            w = info[0],\n            h = info[1],\n            cha = Math.abs(h - w) \/ 2;\n            \n        that.maxInfo = {\/\/max状态时的样式\n            width: h \x2b \x27px\x27,\n            height: w \x2b \x27px\x27,\n            position: \x27fixed\x27,\n            transform: \x27translate(-\x27 \x2b cha \x2b \x27px,\x27 \x2b cha \x2b \x27px) rotate(90deg)\x27\n        }\n    }\n    \n    \n}\n\n\/\/全屏 mini 两种模式切换\npro.switch = function() {\n    var vR = this.vRoom;\n    \/\/获取需要转换的样式信息\n    var info = this.isMax ? this.miniInfo : this.maxInfo;\n    for(var i in info) {\n        vR.style[i] = info[i];\n    }\n    this.isMax = !this.isMax;\n}\n\n\/\/全屏按钮\nthis.vC.querySelector(\x27.fill\x27).addEventListener(\x27tap\x27, function() {\n    \/\/that.nativeMax();\n    that.switch();\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bvd = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    $.ready(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取视频元素\x3c\/span\x3e\n        that.video = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(dom || \x3cspan class=\x22hljs-string\x22\x3e\x27video\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取视频父元素\x3c\/span\x3e\n        that.vRoom = that.video.parentNode;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/元素初始化\x3c\/span\x3e\n        that.initEm();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/事件初始化\x3c\/span\x3e\n        that.initEvent();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/记录信息\x3c\/span\x3e\n        that.initInfo();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/当前播放模式 false 为 mini播放\x3c\/span\x3e\n        that.isMax = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/记录信息\x3c\/span\x3e\npro.initInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/在onload状态下，offsetHeight才会获取到正确的值\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        that.miniInfo = {\x3cspan class=\x22hljs-comment\x22\x3e\/\/mini状态时的样式\x3c\/span\x3e\n            width: that.video.offsetWidth \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: that.video.offsetHeight \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: that.vRoom.style.position,\n            \x3cspan class=\x22hljs-attr\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27translate(0,0) rotate(0deg)\x27\x3c\/span\x3e\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e info = [\n                \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.clientWidth || \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.clientWidth,\n                \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.clientHeight || \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.clientHeigth\n            ],\n            w = info[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e],\n            h = info[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e],\n            cha = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(h - w) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \n        that.maxInfo = {\x3cspan class=\x22hljs-comment\x22\x3e\/\/max状态时的样式\x3c\/span\x3e\n            width: h \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: w \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27translate(-\x27\x3c\/span\x3e \x2b cha \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px,\x27\x3c\/span\x3e \x2b cha \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px) rotate(90deg)\x27\x3c\/span\x3e\n        }\n    }\n    \n    \n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏 mini 两种模式切换\x3c\/span\x3e\npro.switch = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vR = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vRoom;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取需要转换的样式信息\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e info = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.miniInfo : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxInfo;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e info) {\n        vR.style[i] = info[i];\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax = !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏按钮\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vC.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.fill\x27\x3c\/span\x3e).addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/that.nativeMax();\x3c\/span\x3e\n    that.switch();\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e瞧一瞧拉，看一看拉\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBR8W\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBR8W\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看起来感觉很不错呢，利用css3的位移和旋转，让视频全屏在了屏幕前，但是问题也随之而来了\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e播放按钮 以及 控制条 在全屏下 似乎隐藏了，其实是video标签盖在了父元素之上，我们作出相应的调整\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3ecss\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.bad-video {\n    position: relative;\n    \/*overflow: hidden;*\/\n    background-color: #CCCCCC;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.bad-video\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: relative;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*overflow: hidden;*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#CCCCCC\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ejs\x3cbr\x3emax配置当中，设置zIndex值\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22            that.maxInfo = {\/\/max状态时的样式\n                zIndex:99,\n                width: h \x2b \x27px\x27,\n                height: w \x2b \x27px\x27,\n                position: \x27fixed\x27,\n                transform: \x27translate(-\x27 \x2b cha \x2b \x27px,\x27 \x2b cha \x2b \x27px) rotate(90deg)\x27\n            }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e            that\x3cspan class=\x22hljs-selector-class\x22\x3e.maxInfo\x3c\/span\x3e = {\x3cspan class=\x22hljs-comment\x22\x3e\/\/max状态时的样式\x3c\/span\x3e\n                zIndex:\x3cspan class=\x22hljs-number\x22\x3e99\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: h \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: w \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27translate(-\x27\x3c\/span\x3e \x2b cha \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px,\x27\x3c\/span\x3e \x2b cha \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px) rotate(90deg)\x27\x3c\/span\x3e\n            }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBXPj\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBXPj\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e横向全屏后，左右滑动事件没有跟着方向改变\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \/\/视频手势右滑动事件\n        this.video.addEventListener(\x27swiperight\x27, function(e) {\n            console.log(\x27right\x27);\n            this.currentTime \x2b= 5;\n        });\n        \/\/视频手势左滑动事件\n        this.video.addEventListener(\x27swipeleft\x27, function(e) {\n            console.log(\x27left\x27);\n            this.currentTime -= 5;\n\n        });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势右滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27swiperight\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27right\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime \x2b= \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n        });\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势左滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeleft\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27left\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentTime -= \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n\n        });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVBXQH\x22 src=\x22https:\/\/static.alili.tech\/img\/bVBXQH\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这TM就很尴尬了，难道我全屏后，手机横放，还去上下快进快退？\x3c\/p\x3e\n\x3cp\x3e这时候怎么办呢，不要方\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e手势滑动事件\x3c\/h2\x3e\n\x3cp\x3e我们先给video注册一个事件列表\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var events = {};\n    \n    \/\/增加 或者删除事件\n    pro.eve = function(ename, callback, isF) {\n        if(callback \x26amp;\x26amp; typeof(callback) == \x27function\x27) {\n            isF \x26amp;\x26amp; arguments.callee(ename);\n            events[ename] = callback;\n            this.video.addEventListener(ename, events[ename]);\n            console.log(\x27添加事件：\x27 \x2b ename);\n            return;\n        }\n        var fun = events[ename] || function(){};\n        this.video.removeEventListener(ename, fun);\n        console.log(\x27删除事件：\x27 \x2b ename);\n        return fun;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e events = {};\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/增加 或者删除事件\x3c\/span\x3e\n    pro.eve = function(ename, callback, isF) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(callback \x26amp;\x26amp; typeof(callback) == \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n            isF \x26amp;\x26amp; arguments.callee(ename);\n            events[ename] = callback;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.addEventListener(ename, events[ename]);\n            console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27添加事件：\x27\x3c\/span\x3e \x2b ename);\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efun\x3c\/span\x3e = events[ename] || \x3cspan class=\x22hljs-title\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{};\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.removeEventListener(ename, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efun\x3c\/span\x3e);\x3c\/span\x3e\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27删除事件：\x27\x3c\/span\x3e \x2b ename);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efun\x3c\/span\x3e;\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e给video事件添加一个代理来删除添加事件，isF就是在新增这个事件是否删除之前的这个相同的事件，因为添加事件用匿名函数的话，是不能删除的，这样设置一个代理就可以把动态添加的事件记录在events里面，便于操作\x3c\/p\x3e\n\x3cp\x3e这时我们补上修改当前播放进度和音量的功能\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/跳转视频进度 单位 秒\n    pro.setCurrentTime = function(t){\n        this.video.currentTime \x2b= t;\n    }\n    \/\/设置音量大小 单位 百分比 如 0.1\n    pro.setVolume = function(v){\n        this.video.volume\x2b= v;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/跳转视频进度 单位 秒\x3c\/span\x3e\n    pro.setCurrentTime = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(t)\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.currentTime \x2b= t;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置音量大小 单位 百分比 如 0.1\x3c\/span\x3e\n    pro.setVolume = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(v)\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.video.volume\x2b= v;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再通过代理给video添加左右上下滑动的事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \/\/视频手势右滑动事件\n        this.eve(\x27swiperight\x27,function(){\n            that.setCurrentTime(5);\n        });\n        \n        \/\/视频手势左滑动事件\n        this.eve(\x27swipeleft\x27, function(e) {\n            that.setCurrentTime(-5);\n        });\n        \n        \/\/视频手势上滑动事件\n        this.eve(\x27swipeup\x27,function(){\n            that.setVolume(0.2);\n        });\n        \n        \/\/视频手势下滑动事件\n        this.eve(\x27swipedown\x27, function(e) {\n            that.setCurrentTime(-0.2);\n        });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势右滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swiperight\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n            that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势左滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeleft\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e \x3c\/span\x3e{\n            that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势上滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeup\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n            that.setVolume(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势下滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e \x3c\/span\x3e{\n            that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e);\n        });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eok，四个方向的滑动事件已经添加过去了，但这是mini模式播放时的事件，在全屏播放下，四个方向事件并没有跟着video元素方向的改变而改变，这下需要再通过最最最笨的方式判断是否全屏从而触发的事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \/\/视频手势右滑动事件\n        this.eve(\x27swiperight\x27,function(){\n            if(that.isMax){\n                return that.setVolume(0.2);\n            }\n            that.setCurrentTime(5);\n        });\n        \n        \/\/视频手势左滑动事件\n        this.eve(\x27swipeleft\x27, function() {\n            if(that.isMax){\n                return that.setVolume(-0.2);\n            }\n            that.setCurrentTime(-5);\n        });\n        \n        \/\/视频手势上滑动事件\n        this.eve(\x27swipeup\x27,function(){\n            if(that.isMax){\n                return that.setCurrentTime(-5);    \n            }\n            that.setVolume(0.2);\n        });\n        \n        \/\/视频手势下滑动事件\n        this.eve(\x27swipedown\x27, function() {\n            if(that.isMax){\n                return that.setCurrentTime(5);    \n            }\n            that.setVolume(-0.2);\n        });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势右滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swiperight\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax){\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e that.setVolume(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e);\n            }\n            that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势左滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeleft\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax){\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e that.setVolume(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e);\n            }\n            that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势上滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipeup\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax){\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e);    \n            }\n            that.setVolume(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e);\n        });\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/视频手势下滑动事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27swipedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax){\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e that.setCurrentTime(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);    \n            }\n            that.setVolume(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e);\n        });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e怎么样，虽然看起来有点stupid，但是很实用呢\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e5\x2b客户端全屏解决方案\x3c\/h2\x3e\n\x3cp\x3e虽说在5\x2b客户端，android可以调用原生的方式播放，但还是差强人意，我们可以再来看一套解决方案\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e初始化时，记录mini时的样式，全屏时，通过修改视频宽度为屏幕高度，视频高度修改为视频宽度，再利用5\x2b的屏幕旋转，设置全屏，隐藏状态栏\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e0)去除手势事件判断\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22因为现在是准备改变移动设备的方向，所以，手势方向会跟着设备方向改变\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e因为现在是准备改变移动设备的方向，所以，手势方向会跟着设备方向改变\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8qs\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8qs\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e1)去除 css3 旋转以及位移\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n    \/\/记录信息\n    pro.initInfo = function() {\n        var that = this;\n        \/\/在onload状态下，offsetHeight才会获取到正确的值\n        window.onload = function() {\n            that.miniInfo = { \/\/mini状态时的样式\n                zIndex: 1,\n                width: that.video.offsetWidth \x2b \x27px\x27,\n                height: that.video.offsetHeight \x2b \x27px\x27,\n                position: that.vRoom.style.position\n            }\n\n            that.maxInfo = { \/\/max状态时的样式\n                zIndex: 99,\n                width: \x27100%\x27,\n                height: that.sw \x2b \x27px\x27,\n                position: \x27fixed\x27\n            }\n\n        }\n\n    }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/记录信息\x3c\/span\x3e\n    pro.initInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/在onload状态下，offsetHeight才会获取到正确的值\x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            that.miniInfo = { \x3cspan class=\x22hljs-comment\x22\x3e\/\/mini状态时的样式\x3c\/span\x3e\n                zIndex: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e: that.video.offsetWidth \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: that.video.offsetHeight \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: that.vRoom.style.position\n            }\n\n            that.maxInfo = { \x3cspan class=\x22hljs-comment\x22\x3e\/\/max状态时的样式\x3c\/span\x3e\n                zIndex: \x3cspan class=\x22hljs-number\x22\x3e99\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27100%\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: that.sw \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e\n            }\n\n        }\n\n    }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2）该用5\x2b的设置全屏以及隐藏状态栏\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/全屏 mini 两种模式切换\n    pro.switch = function() {\n        var vR = this.vRoom;\n        \/\/获取需要转换的样式信息\n        var info = this.isMax ? this.miniInfo : this.maxInfo;\n\n        for(var i in info) {\n            vR.style[i] = info[i];\n        }\n        this.isMax = !this.isMax;\n\n        plus.navigator.setFullscreen(this.isMax);\n        if(this.isMax) {\n            \/\/横屏\n            plus.screen.lockOrientation(\x26quot;landscape-primary\x26quot;);\n        } else {\n            \/\/竖屏\n            plus.screen.lockOrientation(\x26quot;portrait-primary\x26quot;);\n        }\n\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏 mini 两种模式切换\x3c\/span\x3e\n    pro.switch = function() {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vR = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vRoom;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取需要转换的样式信息\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e info = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.miniInfo : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxInfo;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e info) {\n            vR.style[i] = info[i];\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax = !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax;\n\n        plus.navigator.setFullscreen(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/横屏\x3c\/span\x3e\n            plus.screen.lockOrientation(\x3cspan class=\x22hljs-string\x22\x3e\x22landscape-primary\x22\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/竖屏\x3c\/span\x3e\n            plus.screen.lockOrientation(\x3cspan class=\x22hljs-string\x22\x3e\x22portrait-primary\x22\x3c\/span\x3e);\n        }\n\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3）全屏状态下，android端返回键，触发退出全屏\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22pro.initEvent = function() {\n    \/\/.......省略其他代码\n    \n    this.oback = $.back;\n        \/\/监听安卓返回键\n        $.back = function() {\n            if(that.isMax) {\n                that.switch();\n                return;\n            }\n            that.oback();\n        }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3epro.initEvent = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/.......省略其他代码\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.oback = $.back;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听安卓返回键\x3c\/span\x3e\n        $.back = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax) {\n                that.switch();\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n            }\n            that.oback();\n        }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e效果图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB320\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB320\x22 alt=\x221.gif\x22 title=\x221.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e5\x2b重力感应切换全屏\x3c\/h2\x3e\n\x3cp\x3e嘿嘿，一个在移动端的播放器怎么能少得了 自动切换 横竖屏呢？\x3cbr\x3e在个小节当中就讲了如何手动切换全屏，接下来重力感应切换横屏，需要用到5\x2b的API \x3ca href=\x22http:\/\/www.html5plus.org\/doc\/zh_cn\/accelerometer.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3eAccelerometer\x3c\/strong\x3e\x3c\/a\x3e 加速度感应\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22简单说：重力加速度感应可以想象成一个小球在坐标系中\n三个方向上的加速度。永远以手机屏幕为准\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e简单说：重力加速度感应可以想象成一个小球在坐标系中\n三个方向上的加速度。永远以手机屏幕为准\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e啥是加速度？额，就是物理书上的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22手机水平放置向上是y轴正向\n向右是x轴正向，向外是z轴正向\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs llvm\x22\x3e\x3ccode\x3e手机水平放置向上是y轴正向\n向右是\x3cspan class=\x22hljs-keyword\x22\x3ex\x3c\/span\x3e轴正向，向外是z轴正向\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e啥是xyz轴？额，就是高数书上的\x3c\/p\x3e\n\x3cp\x3e哎呀，你把手机竖屏正直的放在地上，你人正直走上去，现在你站在你的手机的屏幕上，然后你的右手打开伸直，这就是x轴，你现在看着前面，这就是y轴，你的头顶就是z轴。这样讲明白了不，但是并不是真的要你踩手机，23333\x3c\/p\x3e\n\x3cp\x3e您也可以选择查看其他讲解：\x3ca href=\x22http:\/\/blog.163.com\/sunshine_linting\/blog\/static\/448933232012111102041393\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAndroid-传感器开发-方向判断  \x3c\/a\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3ex,y轴变化：\x3c\/p\x3e\n\x3cp\x3e手机屏幕向上水平放置时： (x,y,z) = (0, 0, -9.81)\x3cbr\x3e   当手机顶部抬起时： y减小，且为负值\x3cbr\x3e   当手机底部抬起时： y增加，且为正值\x3cbr\x3e   当手机右侧抬起时： x减小，且为负值\x3cbr\x3e   当手机左侧抬起时： x增加，且为正值\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ez轴的变化：\x3cbr\x3e   手机屏幕向上水平放置时，z= -9.81\x3cbr\x3e   手机屏幕竖直放置时，      z=  0\x3cbr\x3e   手机屏幕向下水平放置时，z=  9.81\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e屏幕横竖切换条件\x3cbr\x3e   y\x26lt;=-5时， 切换为竖向\x3cbr\x3e   x\x26lt;=-5时， 换为横向\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3eok，我们新增2个方法，用于打开和关闭设备监控\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/开启方向感应\n    pro.startWatchAcc = function(){\n        var that = this;\n        this.watchAccFun = plus.accelerometer.watchAcceleration(function(a) {\n                if(that.getIsMax()){\n                    \/\/当前为全屏状态\n                    \/\/判断是否满足竖屏Mini状态\n                    a.yAxis\x3e=5 \x26amp;\x26amp; that.setIsMax(false);\n                }else{\n                    \/\/当前为Mini状态\n                    \/\/判断是否满足全屏Max状态\n                    Math.abs(a.xAxis) \x3e=5 \x26amp;\x26amp; that.setIsMax(true); \n                }\n            }, function(e) {\n                \/\/出错了大不了 不自动旋转呗  让它手动 切换\n                console.log(\x26quot;Acceleration error: \x26quot; \x2b e.message);\n                that.clearWatchAcc();\n            },{\n                frequency:1200\n            });\n    }\n    \/\/关闭方向感应\n    pro.clearWatchAcc = function(){\n        this.watchAccFun \x26amp;\x26amp; plus.accelerometer.clearWatch(this.watchAccFun);\n    }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/开启方向感应\x3c\/span\x3e\n    pro.startWatchAcc = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.watchAccFun = plus.accelerometer.watchAcceleration(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.getIsMax()){\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/当前为全屏状态\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否满足竖屏Mini状态\x3c\/span\x3e\n                    a.yAxis\x26gt;=\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x26amp;\x26amp; that.setIsMax(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n                }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/当前为Mini状态\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否满足全屏Max状态\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(a.xAxis) \x26gt;=\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x26amp;\x26amp; that.setIsMax(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e); \n                }\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/出错了大不了 不自动旋转呗  让它手动 切换\x3c\/span\x3e\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Acceleration error: \x22\x3c\/span\x3e \x2b e.message);\n                that.clearWatchAcc();\n            },{\n                \x3cspan class=\x22hljs-attr\x22\x3efrequency\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e\n            });\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/关闭方向感应\x3c\/span\x3e\n    pro.clearWatchAcc = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.watchAccFun \x26amp;\x26amp; plus.accelerometer.clearWatch(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.watchAccFun);\n    }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在初始化的时候默认打开方向监控\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var bvd = function(dom) {\n        var that = this;\n        $.ready(function() {\n            \/\/...\n        })\n\n        $.plusReady(function() {\n            that.startWatchAcc();\n        })\n\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bvd = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        $.ready(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n        })\n\n        $.plusReady(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            that.startWatchAcc();\n        })\n\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再把横向全屏改为，可双向横屏\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8oQ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8oQ\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e真机调试看看\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8qi\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8qi\x22 alt=\x22ziong.gif\x22 title=\x22ziong.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e嘿嘿，我们再给全屏播放时添加一个锁定按钮，让设备不监控 重力感应，也不响应视频的点击播放暂停事件\x3c\/p\x3e\n\x3cp\x3e先做一个锁定按钮\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8JJ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8JJ\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e当然，锁定图片，地址也改成用base64，最好也用js动态生成标签\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8JT\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8JT\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e设置它的基本样式，靠右，上下垂直居中，默认隐藏\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        .lock {\n            padding: .3rem;\n            width: 3rem;\n            height: 3rem;\n            position: absolute;\n            right: .5rem;\n            top: 50%;\n            transform: translateY(-50%);\n            -webkit-transform: translateY(-50%);\n            visibility: hidden;\n        }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e        \x3cspan class=\x22hljs-selector-class\x22\x3e.lock\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: .\x3cspan class=\x22hljs-number\x22\x3e3rem\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3rem\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3rem\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n            \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: .\x3cspan class=\x22hljs-number\x22\x3e5rem\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateY\x3c\/span\x3e(-50%);\n            \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-transform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateY\x3c\/span\x3e(-50%);\n            \x3cspan class=\x22hljs-attribute\x22\x3evisibility\x3c\/span\x3e: hidden;\n        }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8J0\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8J0\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e好，我们来整理一下逻辑，\x3c\/p\x3e\n\x3cp\x3e1）默认在mini播放时，lock隐藏\x3cbr\x3e2）全屏播放时，lock显示，但是也会跟着控制条 在4s内向右隐藏\x3cbr\x3e3）全屏暂停时，lock也跟着控制条 一直显示\x3cbr\x3e4）点击lock锁定时，提示已锁定，控制条立即隐藏，lock4s内向右隐藏，视频点击事件更换为显示lock图标，android返回键事件改为不做任何，关闭重力监控\x3cbr\x3e5）点击lock解锁时，提示已解锁，android返回键改为 切换为mini状态，开启重力监控\x3c\/p\x3e\n\x3cp\x3e我擦，其实做起来还是挺郁闷的，主要是逻辑处理比较痛苦\x3c\/p\x3e\n\x3cp\x3e0）添加一个向右移动的动画，3s延迟后 1s内 执行完动画\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22@keyframes lockhide {0% {transform: translate(0%,-50%);}100% {transform: translate(120%,-50%);\x22}}\x22\n\nwebkit-keyframes lockhide {0% {transform: translate(0%,-50%);}100% {transform: translate(120%,-50%);\x22}}\x22\n\n.lockhidden {\n    animation: lockhide 1s 3s linear;\n    -webkit-animation: lockhide 1s 3s linear;\n    animation-fill-mode:forwards;\n    -webkit-animation-fill-mode: forwards;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scss\x22\x3e\x3ccode\x3e@keyframes lockhide {0% {\x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: translate(\x3cspan class=\x22hljs-number\x22\x3e0%\x3c\/span\x3e,-\x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e);}100% {\x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: translate(\x3cspan class=\x22hljs-number\x22\x3e120%\x3c\/span\x3e,-\x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e);\x22}}\x22\n\nwebkit-keyframes lockhide {0% {\x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: translate(\x3cspan class=\x22hljs-number\x22\x3e0%\x3c\/span\x3e,-\x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e);}100% {\x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: translate(\x3cspan class=\x22hljs-number\x22\x3e120%\x3c\/span\x3e,-\x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e);\x22}}\x22\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.lockhidden\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eanimation\x3c\/span\x3e: lockhide \x3cspan class=\x22hljs-number\x22\x3e1s\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3s\x3c\/span\x3e linear;\n    -webkit-\x3cspan class=\x22hljs-attribute\x22\x3eanimation\x3c\/span\x3e: lockhide \x3cspan class=\x22hljs-number\x22\x3e1s\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3s\x3c\/span\x3e linear;\n    \x3cspan class=\x22hljs-attribute\x22\x3eanimation-fill-mode\x3c\/span\x3e:forwards;\n    -webkit-\x3cspan class=\x22hljs-attribute\x22\x3eanimation-fill-mode\x3c\/span\x3e: forwards;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e1）全屏时显示lock\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    pro.switch = function() {\n        \/\/...\n        \/\/全屏时 显示锁定 图标\n        this.vlock.style.visibility = this.isMax ? \x27visible\x27 : \x27hidden\x27;\n\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e    pro.switch = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏时 显示锁定 图标\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vlock.style.visibility = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMax ? \x3cspan class=\x22hljs-string\x22\x3e\x27visible\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27hidden\x27\x3c\/span\x3e;\n\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2)全屏播放时，lock显示，但是也会跟着控制条 在4s内向右隐藏\x3cbr\x3e我们在播放时添加lock的隐藏动画，\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8LC\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8LC\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e3）全屏暂停时，lock也跟着控制条 一直显示\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVB8LE\x22 src=\x22https:\/\/static.alili.tech\/img\/bVB8LE\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e4）点击lock锁定时，提示已锁定，控制条立即隐藏，lock4s内向右隐藏，视频点击事件更换为显示lock图标，android返回键事件改为不做任何，关闭重力监控\x3cbr\x3e5）点击lock解锁时，提示已解锁，android返回键改为 切换为mini状态，开启重力监控\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/锁定屏幕\n    pro.lockScreen = function() {\n        $.toast(\x27锁定屏幕\x27);\n        var that = this;\n        \/\/更换video点击事件为 显示 lock图标，并保存 video之前的事件 \n        this.videoTapFn = this.eve(\x27tap\x27, function() {\n            that.lockT = setTimeout(function(){\n                that.vlock.classList.add(\x27lockhidden\x27);\n            },500);\n                \/\/重新开始播放样式\n            that.vlock.classList.remove(\x27lockhidden\x27);\n            that.vlock.style.visibility = \x27visible\x27;\n        }, true);\n        \/\/隐藏控制条\n        this.vC.style.visibility = \x27hidden\x27;\n        \/\/给Lock图标增加 隐藏样式类\n        this.vlock.classList.add(\x27lockhidden\x27);\n        \/\/锁定屏幕时，不监控重力感应\n        this.clearWatchAcc();\n        \/\/标识当前更改的Lock状态\n        this.isLock = true;\n\n    }\n\n    \/\/解锁屏幕\n    pro.unlockScreen = function() {\n        $.toast(\x27解锁屏幕\x27);\n        \/\/替换回video之前的点击事件\n        this.eve(\x27tap\x27, this.videoTapFn, true);\n        \/\/给Lock图标清楚 隐藏样式类\n        this.vlock.classList.remove(\x27lockhidden\x27);\n        \/\/不锁定屏幕时，监控重力感应\n        this.startWatchAcc();\n        \/\/标识当前更改的Lock状态\n        this.isLock = false;\n    }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/锁定屏幕\x3c\/span\x3e\n    pro.lockScreen = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $.toast(\x3cspan class=\x22hljs-string\x22\x3e\x27锁定屏幕\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/更换video点击事件为 显示 lock图标，并保存 video之前的事件 \x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.videoTapFn = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            that.lockT = setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n                that.vlock.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27lockhidden\x27\x3c\/span\x3e);\n            },\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/重新开始播放样式\x3c\/span\x3e\n            that.vlock.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x27lockhidden\x27\x3c\/span\x3e);\n            that.vlock.style.visibility = \x3cspan class=\x22hljs-string\x22\x3e\x27visible\x27\x3c\/span\x3e;\n        }, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/隐藏控制条\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vC.style.visibility = \x3cspan class=\x22hljs-string\x22\x3e\x27hidden\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/给Lock图标增加 隐藏样式类\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vlock.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27lockhidden\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/锁定屏幕时，不监控重力感应\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clearWatchAcc();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/标识当前更改的Lock状态\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isLock = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/解锁屏幕\x3c\/span\x3e\n    pro.unlockScreen = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $.toast(\x3cspan class=\x22hljs-string\x22\x3e\x27解锁屏幕\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/替换回video之前的点击事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.eve(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.videoTapFn, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/给Lock图标清楚 隐藏样式类\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vlock.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x27lockhidden\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/不锁定屏幕时，监控重力感应\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startWatchAcc();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/标识当前更改的Lock状态\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isLock = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e666）最后给我们亲爱的lock图标增加一枚抚摸事件，以及android返回键的事件更改\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \/\/全屏 时 锁定点击事件\n        this.vlock.addEventListener(\x27tap\x27, function() {\n            if(that.isLock) {\n                that.unlockScreen();\n                return;\n            }\n            that.lockScreen();\n        });\n\n        this.oback = $.back;\n        \/\/监听安卓返回键\n        $.back = function(){\n            if(that.isMax){\n                if(!that.isLock){\n                    \/\/全屏状态下 按下返回键 时，1s内不监控重力，防止返回Mini状态时和重力感应并发事件\n                    setTimeout(function(){\n                        that.startWatchAcc();\n                    },1000);\n                    that.clearWatchAcc();\n                    that.switch();\n                }\n                return;\n            }\n            that.oback();\n        }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏 时 锁定点击事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vlock.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isLock) {\n                that.unlockScreen();\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n            }\n            that.lockScreen();\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.oback = $.back;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听安卓返回键\x3c\/span\x3e\n        $.back = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(that.isMax){\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!that.isLock){\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/全屏状态下 按下返回键 时，1s内不监控重力，防止返回Mini状态时和重力感应并发事件\x3c\/span\x3e\n                    setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n                        that.startWatchAcc();\n                    },\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\n                    that.clearWatchAcc();\n                    that.switch();\n                }\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n            }\n            that.oback();\n        }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好了！本文5\x2b全屏demo \x3ca href=\x22http:\/\/git.oschina.net\/newsning\/BvdVideo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码地址\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e写博客不易，但是那种分享的心情是很不错的，何尝不是另一种温习和进步呢？\x3c\/p\x3e\n\x3cp\x3e谢谢各位。\x3c\/p\x3e\n\x3cp\x3e本文相关文章：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/248\x22\x3eH5打造属于自己的视频播放器 专栏\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>H5打造属于自己的视频播放器（JS篇2）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006604046">https://segmentfault.com/a/1190000006604046</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/eizezdfg2ep/" target="_blank">https://alili.tech/archive/eizezdfg2ep/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>