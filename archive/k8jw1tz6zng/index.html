<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JS函数式编程 - 函子和范畴轮"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JS函数式编程 - 函子和范畴轮 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/k8jw1tz6zng/",
				"appid": "1613049289050283", 
				"title": "JS函数式编程 - 函子和范畴轮 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-14T02:30:37"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/mqqtg7nmv3/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/wnwuu08k8v/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&text=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&text=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&title=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&is_video=false&description=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&title=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&title=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&title=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk8jw1tz6zng%2f&title=JS%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%20-%20%e5%87%bd%e5%ad%90%e5%92%8c%e8%8c%83%e7%95%b4%e8%bd%ae"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JS函数式编程 - 函子和范畴轮</h1><div class="meta"><div class="postdate"><time datetime="2019-02-14" itemprop="datePublished">2019-02-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在前面几篇介绍了函数式比较重要的一些概念和如何用函数组合去解决相对复杂的逻辑。是时候开始介绍如何控制副作用了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e数据类型\x3c\/h2\x3e\n\x3cp\x3e我们来看看\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000016671245\x22\x3e上一篇\x3c\/a\x3e最后例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const split = curry((tag, xs) =\x3e xs.split(tag))\nconst reverse = xs =\x3e xs.reverse()\nconst join = curry((tag, xs) =\x3e xs.join(tag))\n\nconst reverseWords = compose(join(\x27\x27), reverse, split(\x27\x27))\n\nreverseWords(\x27Hello,world!\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e split = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3etag, xs\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e xs.split(tag))\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reverse = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3exs\x3c\/span\x3e =\x26gt;\x3c\/span\x3e xs.reverse()\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e join = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3etag, xs\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e xs.join(tag))\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reverseWords = compose(join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e), reverse, split(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e))\n\nreverseWords(\x3cspan class=\x22hljs-string\x22\x3e\x27Hello,world!\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里其实\x3ccode\x3ereverseWords\x3c\/code\x3e还是很难阅读，你不知道他入参是啥，返回值又是啥。你如果不去看一下代码，一开始在使用他的时候，你应该是比较害怕的。 “我是不是少传了一个参数？是不是传错了参数？返回值真的一直都是一个字符串吗？”。这也是类型系统的重要性了，在不断了解函数式后，你会发现，函数式编程和类型是密切相关的。如果在这里\x3ccode\x3ereverseWords\x3c\/code\x3e的类型明确给出，就相当于文档了。\x3c\/p\x3e\n\x3cp\x3e但是，JavaScript是动态类型语言，我们不会去明确的指定类型。不过我们可以通过注释的方式加上类型:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ reverseWords: string =\x3e string\nconst reverseWords = compose(join(\x27\x27), reverse, split(\x27\x27))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ reverseWords: string =\x26gt; string\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reverseWords = compose(join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e), reverse, split(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面就相当于指定了\x3ccode\x3ereverseWords\x3c\/code\x3e是一个接收字符串，并返回字符串的函数。\x3c\/p\x3e\n\x3cp\x3eJS 本身不支持静态类型检测，但是社区有很多JS的超集是支持类型检测的，比如\x3ca href=\x22https:\/\/github.com\/facebook\/flow\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFlow\x3c\/a\x3e还有\x3ca href=\x22https:\/\/github.com\/Microsoft\/TypeScript\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eTypeScript\x3c\/a\x3e。当然类型检测不光是上面所说的自文档的好处，它还能在预编译阶段提前发现错误，能约束行为等。\x3c\/p\x3e\n\x3cp\x3e当然我的后续文章还是以JS为语言，但是会在注释里面加上类型。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e范畴论相关概念\x3c\/h2\x3e\n\x3cp\x3e范畴论其实并不是特别难，不过是些抽象点的概念。而且我们不需要了解的特别深，函数式编程很多概念是从范畴论映射过来的。了解范畴论相关概念有助于我们理解函数式编程。另外，相信我，只要你小学初中学过一元函数和集合，看懂下面的没有问题。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e定义\x3c\/h3\x3e\n\x3cp\x3e范畴的定义：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e一组对象，是需要操作的数据的一个集合\x3c\/li\x3e\n\x3cli\x3e一组态射，是数据对象上的映射关系，比如 f: A -\x26gt; B\x3c\/li\x3e\n\x3cli\x3e态射组合，就是态射能够几个组合在一起形成一个新的态射\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbiMeh?w=150\x26amp;h=150\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbiMeh?w=150\x26amp;h=150\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图片出处：\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Category_theory\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/en.wikipedia.org\/wiki...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e一个简单的例子，上图来自维基百科。上面就是一个范畴，一共有3个数据对象\x3ccode\x3eA,B,C\x3c\/code\x3e，然后\x3ccode\x3ef\x3c\/code\x3e和\x3ccode\x3eg\x3c\/code\x3e是态射，而\x3ccode\x3egof\x3c\/code\x3e是一组态射组合。是不是很简单？\x3c\/p\x3e\n\x3cp\x3e其中态射可以理解是函数，而态射的组合，我们可以理解为函数的组合。而里面的一组对象，不就是一个具有一些相同属性的数据集嘛。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e函子(functor)\x3c\/h3\x3e\n\x3cp\x3e函子是用来将两个范畴关联起来的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbiMek?w=729\x26amp;h=857\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbiMek?w=729\x26amp;h=857\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e图片出处：\x3ca href=\x22https:\/\/ncatlab.org\/nlab\/show\/functor\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/ncatlab.org\/nlab\/show...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e对应上图，比如对于范畴 C 和 D ，函子 F : C =\x26gt; D 能够：将 C 中任意对象X 转换为 D 中的 F(X);  将 C 中的态射 f : X =\x26gt; Y 转换为 D 中的 F(f) : F(X) =\x26gt; F(Y)。你可以发现函子可以：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e转换对象\x3c\/li\x3e\n\x3cli\x3e转换态射\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e构建一个函子(functor)\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eContainer\x3c\/h3\x3e\n\x3cp\x3e正如上面所说，函子能够关联两个范畴。而范畴里面必然是有一组数据对象的。这里引入Container，就是为了引入数据对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Container {\n  constructor (value) {\n    this.$value = value\n  }\n  \/\/ (value) =\x3e Container(value)\n  static of(value) {\n    return new Container(value)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eContainer\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (value) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value = value\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (value) =\x26gt; Container(value)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e(value) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Container(value)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们声明了一个Container的类，然后给了一个静态的of方法用于去生成这个Container的实例。这个of其实还有个好听的名字，卖个关子，后面介绍。\x3c\/p\x3e\n\x3cp\x3e我们来看一下使用这个\x3ccode\x3eContainer\x3c\/code\x3e的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Container(123)\nContainer.of(123)\n\n\/\/ Container(\x26quot;Hello Conatiner!\x26quot;)\nContainer.of(\x26quot;Hello Conatiner!\x26quot;)\n\n\/\/ Container(Conatiner(\x26quot;Test !\x26quot;))\nContainer.of(Container.of(\x26quot;Test !\x26quot;))\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Container(123)\x3c\/span\x3e\nContainer.of(\x3cspan class=\x22hljs-number\x22\x3e123\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Container(\x22Hello Conatiner!\x22)\x3c\/span\x3e\nContainer.of(\x3cspan class=\x22hljs-string\x22\x3e\x22Hello Conatiner!\x22\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Container(Conatiner(\x22Test !\x22))\x3c\/span\x3e\nContainer.of(Container.of(\x3cspan class=\x22hljs-string\x22\x3e\x22Test !\x22\x3c\/span\x3e))\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如上面看到的，Container是可以嵌套的。我们仔细看一下这个Contaienr：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e$value的类型不确定，但是一旦赋值之后，类型就确定了\x3c\/li\x3e\n\x3cli\x3e一个Conatiner只会有一个value\x3c\/li\x3e\n\x3cli\x3e我们虽然能直接拿到$value，但是不要这样做，不然我们要个container干啥呢\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e第一个functor\x3c\/h3\x3e\n\x3cp\x3e让我们回看一下定义，函子是用来将两个范畴关联起来的。所以我们还需要一个态射（函数）去把两个范畴关联起来：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Container {\n  constructor (value) {\n    this.$value = value\n  }\n  \/\/ (value) =\x3e Container(value)\n  static of(value) {\n    return new Container(value)\n  }\n  \/\/ (fn: x=\x3ey) =\x3e Container(fn(value))\n  map(fn) {\n    return new Container(fn(this.$value))\n  } \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eContainer\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (value) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value = value\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (value) =\x26gt; Container(value)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e(value) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Container(value)\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (fn: x=\x26gt;y) =\x26gt; Container(fn(value))\x3c\/span\x3e\n  map(fn) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Container(fn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value))\n  } \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e先来用一把：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const concat = curry((str, xs) =\x3e xs.concat(str))\nconst prop = curry((prop, xs) =\x3e xs[prop])\n\n\/\/ Container(\x27TEST\x27)\nContainer.of(\x27test\x27).map(s =\x3e s.toUpperCase())\n\n\/\/ Container(10)\nContainer.of(\x27bombs\x27).map(concat(\x27 away\x27)).map(prop(\x27length\x27)); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e concat = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estr, xs\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e xs.concat(str))\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e prop = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eprop, xs\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e xs[prop])\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Container(\x27TEST\x27)\x3c\/span\x3e\nContainer.of(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3es\x3c\/span\x3e =\x26gt;\x3c\/span\x3e s.toUpperCase())\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Container(10)\x3c\/span\x3e\nContainer.of(\x3cspan class=\x22hljs-string\x22\x3e\x27bombs\x27\x3c\/span\x3e).map(concat(\x3cspan class=\x22hljs-string\x22\x3e\x27 away\x27\x3c\/span\x3e)).map(prop(\x3cspan class=\x22hljs-string\x22\x3e\x27length\x27\x3c\/span\x3e)); \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不晓得上面的curry是啥的看\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000016671245?_ea=4737845\x22\x3e第二篇文章\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e你可能会说：“哦，这是你说的functor，那又有啥用呢？”。接下来，就讲一个应用。\x3c\/p\x3e\n\x3cp\x3e不过再讲应用前先讲一下这个\x3ccode\x3eof\x3c\/code\x3e，其实上面这种functor，叫做\x3ccode\x3epointed functor\x3c\/code\x3e, ES5里面的Array就应用了这种模式：\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Array\/of\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray.of\x3c\/a\x3e。他是一种模式，不仅仅是用来省略构建对象的new关键字的。我感觉和scala里面的\x3ccode\x3ecompaion object\x3c\/code\x3e有点类似。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eMaybe type\x3c\/h2\x3e\n\x3cp\x3e在现实的代码中，存在很多数据是可选的，返回的数据可能是存在的也可能不存在：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22type Person = {\n  info?: {\n    age?: string\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3etype Person = {\n  info?: {\n    age?: string\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面是flow里面的类型声明，其中\x3ccode\x3e?\x3c\/code\x3e代表这个数据可能存在，可能不存在。我相信像上面的数据结构，你在接收后端返回的数据的时候经常遇到。假如我们要取这个\x3ccode\x3eage\x3c\/code\x3e属性，我们通常是怎么处理的呢？\x3c\/p\x3e\n\x3cp\x3e当然是加判断啦:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const person = { info: {} }\n\nconst getAge = (person) =\x3e {\n  return person \x26amp;\x26amp; person.info \x26amp;\x26amp; person.info.age\n}\n\ngetAge(person) \/\/ undefined\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e person = { \x3cspan class=\x22hljs-attr\x22\x3einfo\x3c\/span\x3e: {} }\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getAge = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eperson\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e person \x26amp;\x26amp; person.info \x26amp;\x26amp; person.info.age\n}\n\ngetAge(person) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ undefined\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你会发现为了取个age，我们需要加很多的判断。当数据中有很多是可选的数据，你会发现你的代码充满了这种类型判断。心累不？\x3c\/p\x3e\n\x3cp\x3eOkey，Maybe type就是为了解决这个问题的，先让我们实现一个：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nclass Maybe {\n  static of(x) {\n    return new Maybe(x);\n  }\n\n  get isNothing() {\n    return this.$value === null || this.$value === undefined;\n  }\n\n  constructor(x) {\n    this.$value = x;\n  }\n\n  map(fn) {\n    return this.isNothing ? this : Maybe.of(fn(this.$value));\n  }\n\n  get() {\n    if (this.isNothing) {\n      throw new Error(\x26quot;Get Nothing\x26quot;)\n    } else {\n      return this.$value\n    }\n  }\n\n  getOrElse(optionValue) {\n    if (this.isNothing) {\n      return optionValue\n    } else {\n      return this.$value\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMaybe\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e(x) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Maybe(x);\n  }\n\n  get isNothing() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value === \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(x) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value = x;\n  }\n\n  map(fn) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isNothing ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e : Maybe.of(fn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value));\n  }\n\n  get() {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isNothing) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22Get Nothing\x22\x3c\/span\x3e)\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value\n    }\n  }\n\n  getOrElse(optionValue) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isNothing) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e optionValue\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e应用一波：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\ntype Person = {\n  info?: {\n    age?: string\n  }\n}\n\nconst prop = curry((tag, xs) =\x3e xs[tag])\nconst map = curry((fn, f) =\x3e f.map(fn))\n\nconst person = { info: {} }\n\n\/\/ safe get age\nMaybe.of(person.info).map(prop(\x26quot;age\x26quot;)) \/\/ Nothing\n\n\/\/ safe get age Point free style\nconst safeInfo = xs =\x3e Maybe.of(person.info)\nconst getAge = compose(map(prop(\x27age\x27)), safeInfo)\ngetAge(person) \/\/ Nothing\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\ntype Person = {\n  info?: {\n    age?: string\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e prop = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3etag, xs\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e xs[tag])\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e map = curry(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3efn, f\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e f.map(fn))\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e person = { \x3cspan class=\x22hljs-attr\x22\x3einfo\x3c\/span\x3e: {} }\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ safe get age\x3c\/span\x3e\nMaybe.of(person.info).map(prop(\x3cspan class=\x22hljs-string\x22\x3e\x22age\x22\x3c\/span\x3e)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Nothing\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ safe get age Point free style\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e safeInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3exs\x3c\/span\x3e =\x26gt;\x3c\/span\x3e Maybe.of(person.info)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getAge = compose(map(prop(\x3cspan class=\x22hljs-string\x22\x3e\x27age\x27\x3c\/span\x3e)), safeInfo)\ngetAge(person) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Nothing\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e来复盘一波，上面的map依然是一个functor（函子）。不过呢，在做类型转换的时候加上了逻辑：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22map(fn) {\n  return this.isNothing ? this : Maybe.of(fn(this.$value));\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3emap(fn) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isNothing ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e : Maybe.of(fn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$value));\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以也就是上面的转换关系可以表示为：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbiMeo?w=441\x26amp;h=201\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbiMeo?w=441\x26amp;h=201\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其实一看图就出来了，“哦，你把判断移动到了map里面。有啥用？”。ok，罗列一下好处：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e更安全\x3c\/li\x3e\n\x3cli\x3e将判断逻辑进行封装，代码更简洁\x3c\/li\x3e\n\x3cli\x3e声明式代码，没有各种各样的判断\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e其实，不确定性，也是一种副作用。对于可选的数据，我们在运行时是很难确定他的真实的数据类型的，我们用\x3ccode\x3eMaybe\x3c\/code\x3e封装一下其实本身就是封装这种不确定性。这样就能保证我们的一个入参只有可能会返回一种输出了。\x3c\/p\x3e\n\x3cp\x3e先就这，下一篇介绍另外两个函子的应用(其实不应该叫应用)，\x3ccode\x3eEither\x3c\/code\x3e和\x3ccode\x3eIO\x3c\/code\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JS函数式编程 - 函子和范畴轮</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016829296">https://segmentfault.com/a/1190000016829296</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/k8jw1tz6zng/" target="_blank">https://alili.tech/archive/k8jw1tz6zng/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>