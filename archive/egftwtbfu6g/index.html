<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="《每周一点canvas动画》——用户交互"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>《每周一点canvas动画》——用户交互 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/egftwtbfu6g/",
				"appid": "1613049289050283", 
				"title": "《每周一点canvas动画》——用户交互 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-12T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/oyxc28j2vj9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/275aclkqks/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&text=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&text=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&is_video=false&description=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fegftwtbfu6g%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%e7%94%a8%e6%88%b7%e4%ba%a4%e4%ba%92"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">《每周一点canvas动画》——用户交互</h1><div class="meta"><div class="postdate"><time datetime="2019-02-12" itemprop="datePublished">2019-02-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e用户交互也许是我们学习canvas动画中首先需要掌握的部分。毕竟，如果没有交互或者向动画中做一些动态的输入，那么这跟看电影有什么区别呢？用户交互基于事件，一般来说包括：\x3ccode\x3e鼠标事件\x3c\/code\x3e，\x3ccode\x3e触摸事件\x3c\/code\x3e和\x3ccode\x3e键盘事件\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e1、事件和事件执行\x3c\/h4\x3e\n\x3cp\x3e在理解事件之前，你需要明白什么是\x3ccode\x3elistener\x3c\/code\x3e和\x3ccode\x3ehandler\x3c\/code\x3e。\x3cbr\x3elistener(即监听器)决定当一个事件发生时是否做出反应。handler(即执行者)是一个函数，当事件发生时被调用。好了，扯了这么多直接上代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    element.addEventListener(type, handler[, useCapture]);\n\n    type: 事件类型\n    handler: 事件执行函数\n    useCapture: 可选，为布尔值false\/true, 表示在冒泡\/捕获阶段执行\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fsharp\x22\x3e\x3ccode\x3e    element.addEventListener(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e, \x3cspan class=\x22hljs-title\x22\x3ehandler\x3c\/span\x3e[, \x3cspan class=\x22hljs-title\x22\x3euseCapture\x3c\/span\x3e]);\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: 事件类型\x3c\/span\x3e\n    handler: 事件执行函数\n    useCapture: 可选，为布尔值\x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, 表示在冒泡\/捕获阶段执行\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过方法\x3ccode\x3eaddEventListener\x3c\/code\x3e来为某一元素添加事件，具体到我们的canvas上是什么样的呢？加入我们现在想要在canvas上绑定一个\x3ccode\x3emousedown\x3c\/code\x3e事件，具体代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    canvas.addEventListener(\x27mousedown\x27, function(event){\n        console.log(\x26quot;Mouse pressed on element\x26quot;);\n    }, false)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Mouse pressed on element\x22\x3c\/span\x3e);\n    }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样我们就为canvas绑定了鼠标点击事件，当在canvas上按下鼠标是就会在控制台看到打印出 \x22Mouse pressed on element\x22。\x3c\/p\x3e\n\x3cp\x3e那么既然有添加事件(\x3ccode\x3eaddEventListener\x3c\/code\x3e)，就有移除事件(\x3ccode\x3eremoveEventListener\x3c\/code\x3e)，使用方式与添加事件几乎完全一样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    element.removeEventListener(type, handler[, useCapture]);\n    type: 事件类型\n    handler: 事件执行函数\n    useCapture: 可选，为布尔值false\/true, 表示在冒泡\/捕获阶段执行\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fsharp\x22\x3e\x3ccode\x3e    element.removeEventListener(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e, \x3cspan class=\x22hljs-title\x22\x3ehandler\x3c\/span\x3e[, \x3cspan class=\x22hljs-title\x22\x3euseCapture\x3c\/span\x3e]);\x3c\/span\x3e\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: 事件类型\x3c\/span\x3e\n    handler: 事件执行函数\n    useCapture: 可选，为布尔值\x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, 表示在冒泡\/捕获阶段执行\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e唯一需要注意的是\x3ccode\x3ehandler\x3c\/code\x3e,即移除事件的函数，这里只能写函数名，而不能像添加事件一样将整个功能函数全部写入。也就是说，在添加某个事件的时候，我们可以将需要执行的函数写在事件监听之外并命名，这样如果你想要在后续的代码中移除该事件，直接将函数名传入移除事件的\x3ccode\x3ehandler\x3c\/code\x3e中即可。\x3c\/p\x3e\n\x3cp\x3e现在让我们来实验下先为canvas添加一个事件，再将其移除\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbody\x3e\n  \x3ccanvas id=\x26quot;canvas\x26quot; width=\x26quot;500\x26quot; height=\x26quot;500\x26quot;\x3e\x3c\/canvas\x3e\n  \x3cscript\x3e\x3c\/script\x3e\n   \x3cscript\x3e\n       window.onload = function(){\n           var canvas = document.getElementById(\x27canvas\x27);\n           \n           \/\/定义的执行函数add\n           function add(event){\n               console.log(\x26quot;mouse down\x26quot;);\n           }\n           canvas.addEventListener(\x27mousedown\x27, add, false);\n           \n           \/\/移除事件mousedown\n           canvas.removeEventListener(\x27mousedown\x27, add, false)\n       }\n   \x3c\/script\x3e\n\x3c\/body\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22500\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22500\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n       \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n           \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n           \n           \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义的执行函数add\x3c\/span\x3e\n           \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eadd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n               \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22mouse down\x22\x3c\/span\x3e);\n           }\n           canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, add, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n           \n           \x3cspan class=\x22hljs-comment\x22\x3e\/\/移除事件mousedown\x3c\/span\x3e\n           canvas.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, add, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n       }\n   \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在你可以看看控制台是否还能打印出“mouse down”！\x3c\/p\x3e\n\x3ch4\x3e2.鼠标事件\x3c\/h4\x3e\n\x3cp\x3e鼠标事件一共可以分为：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3emousedown\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emouseup\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eclick\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3edbclick\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emousewheel\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emouseover\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3emouseout\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e每一个鼠标事件都包含两个属性来决定当前鼠标的位置：\x3ccode\x3epageX\x3c\/code\x3e和\x3ccode\x3epageY\x3c\/code\x3e。通过\x3ccode\x3epageX\x3c\/code\x3e和\x3ccode\x3epageY\x3c\/code\x3e，还有canvas元素的偏移位置，我们就能够计算出鼠标具体是在canvas元素的什么位置。为了考虑不同浏览器的兼容性，以防万一你可以使用\x3ccode\x3eclientX\x3c\/code\x3e和\x3ccode\x3eclientY\x3c\/code\x3e。在这里，我们创建一个js文件，名为\x3ccode\x3e**utils.js**\x3c\/code\x3e,这个文件是我们的一个工具函数，里面会逐渐加入一些我们重复使用的方法，那么现在我们向我们的工具函数中添加第一个方法\x3ccode\x3ecaptureMouse\x3c\/code\x3e,具体代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22utils.js文件\n\n    \/\/将utils定义为window对象下的一个属性，属性值为对象\n    window.utils = {};\n\n    \/\/在utils对象上定义捕获坐标的方法\n    window.utils.captureMouse = function(element){\n            \/\/定义一个名为mouse的对象\n            var mouse = {x:0,y:0};\n            \n            \/\/为元素绑定mousemove事件\n            element.addEventListener(\x27mousemove\x27,function(event){\n                var x,y;\n                \n                \/\/获取鼠标位于当前屏幕的位置， 并作兼容处理\n                if(event.pageX||event.pageY){\n                    x = event.pageX;\n                    y = event.pageY;\n                }else{\n                    x = event.clientX \x2b document.body.scrollLeft \x2bdocument.documentElement.scrollLeft;\n                    y = event.clientY \x2b document.body.scrollTop \x2bdocument.documentElement.scrollTop;\n                }\n                \/\/将当前的坐标值减去元素的偏移位置，即为鼠标位于当前canvas的位置\n                x -= element.offsetLeft;\n                y -= element.offsetTop;\n\n                mouse.x = x;\n                mouse.y = y;\n            },false);\n             \/\/返回值为mouse对象\n             return mouse;\n        }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eutils.js文件\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/将utils定义为window对象下的一个属性，属性值为对象\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.utils = {};\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/在utils对象上定义捕获坐标的方法\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.utils.captureMouse = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eelement\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义一个名为mouse的对象\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mouse = {\x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e};\n            \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/为元素绑定mousemove事件\x3c\/span\x3e\n            element.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x,y;\n                \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取鼠标位于当前屏幕的位置， 并作兼容处理\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(event.pageX||event.pageY){\n                    x = event.pageX;\n                    y = event.pageY;\n                }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                    x = event.clientX \x2b \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollLeft \x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollLeft;\n                    y = event.clientY \x2b \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop \x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollTop;\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/将当前的坐标值减去元素的偏移位置，即为鼠标位于当前canvas的位置\x3c\/span\x3e\n                x -= element.offsetLeft;\n                y -= element.offsetTop;\n\n                mouse.x = x;\n                mouse.y = y;\n            },\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n             \x3cspan class=\x22hljs-comment\x22\x3e\/\/返回值为mouse对象\x3c\/span\x3e\n             \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e mouse;\n        }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个方法将DOM元素作为参数传入，这样我们只要将canvas传入就可以获取到鼠标在当前canvas的位置。具体代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3ccanvas id=\x26quot;canvas\x26quot; width=\x27500\x27 height=\x26quot;500\x26quot; style=\x26quot;background:#000\x26quot;\x3e\n           \x3cp\x3eyou browser not support canvas!\x3cp\x3e\n       \x3c\/canvas\x3e\n       \x3cscript src=\x27..\/js\/utils.js\x27\x3e\x3c\/script\x3e\n       \x3cscript\x3e\n           window.onload = function(){\n              var canvas = document.getElementById(\x27canvas\x27),\n                  \/\/将canvas传入，该方法会返回一个包含属性x和y的对象\n                  mouse = utils.captureMouse(canvas);\n\n              \/\/为canvas绑定mousedown事件，当鼠标按下的时候打印出当前鼠标相对于canvas的坐标值\n              canvas.addEventListener(\x27mousedown\x27,function(event){\n                console.log(\x26quot;x:\x26quot; \x2bmouse.x \x2b\x26quot;,y:\x26quot; \x2b mouse.y);\n              });\n       \x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27500\x27\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22500\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22background:#000\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n           \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3eyou browser not support canvas!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n       \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n       \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27..\/js\/utils.js\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n       \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n           \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n              \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e),\n                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/将canvas传入，该方法会返回一个包含属性x和y的对象\x3c\/span\x3e\n                  mouse = utils.captureMouse(canvas);\n\n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/为canvas绑定mousedown事件，当鼠标按下的时候打印出当前鼠标相对于canvas的坐标值\x3c\/span\x3e\n              canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22x:\x22\x3c\/span\x3e \x2bmouse.x \x2b\x3cspan class=\x22hljs-string\x22\x3e\x22,y:\x22\x3c\/span\x3e \x2b mouse.y);\n              });\n       \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eHave a try!!!看看能否成功。\x3c\/p\x3e\n\x3ch5\x3egetBoundingClientRect（）\x3c\/h5\x3e\n\x3cp\x3e其实，关于canvas的鼠标位置获取的方法还可以应用它自身的一个方法\x3ccode\x3egetBoundingClientRect\x3c\/code\x3e，这里做一个介绍，你可以使用，但本系列文章主要使用上面这种更具广泛性的方法。具体代码可以参考如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        canvas.addEventListener(\x27mousedown\x27,function(event){\n                       \/\/event兼容处理\n                       var event = event || window.event;\n                       \/\/兼容处理，获取当前鼠标相对屏幕的坐标\n                       var winX = event.clientX\x2bdocument.body.scrollLeft \x2bdocument.documentElement.scrollLeft || event.pageX;\n                       var winY = event.clientY\x2bdocument.body.scrollTop \x2bdocument.documentElement.scrollTop || event.pageY;\n                       \n                       \/\/定义一个对象\n                       var can = {x:0, y:0};\n                       \/\/调用getBoundingClientRect方法，该方法返回一个对象，包含canvas的left、 top、 width、 height等值\n                       \n                       var canBox = canvas.getBoundingClientRect();\n                       \n                   \/\/（winX - canBox.left）：与上面的含义一样，是减去canvas的偏移量\n                   \/\/（canvas.width\/canBox.width）：一般来说canvas.width和canBox.width是一样的，也就是说这两个的比值为1.但不排除你会为canvas设置边框，这是实际的坐标位置就会有所变化，比如canvas.width = 500, 你可能设置了一个1px的边框，那么canBox.width = 502, 所以比值就不为1了。这样做只是让数据更精确。\n                   \n                       can.x = (winX - canBox.left)*(canvas.width\/canBox.width);\n                       can.y = (winY - canBox.top)*(canvas.height\/canBox.height);\n                       \n                       \/\/输出\n                       console.log(can.x，can.y);\n                   },false);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e        canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/event兼容处理\x3c\/span\x3e\n                       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e event = event || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.event;\n                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/兼容处理，获取当前鼠标相对屏幕的坐标\x3c\/span\x3e\n                       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e winX = event.clientX\x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollLeft \x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollLeft || event.pageX;\n                       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e winY = event.clientY\x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop \x2b\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollTop || event.pageY;\n                       \n                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义一个对象\x3c\/span\x3e\n                       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e can = {\x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e};\n                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/调用getBoundingClientRect方法，该方法返回一个对象，包含canvas的left、 top、 width、 height等值\x3c\/span\x3e\n                       \n                       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canBox = canvas.getBoundingClientRect();\n                       \n                   \x3cspan class=\x22hljs-comment\x22\x3e\/\/（winX - canBox.left）：与上面的含义一样，是减去canvas的偏移量\x3c\/span\x3e\n                   \x3cspan class=\x22hljs-comment\x22\x3e\/\/（canvas.width\/canBox.width）：一般来说canvas.width和canBox.width是一样的，也就是说这两个的比值为1.但不排除你会为canvas设置边框，这是实际的坐标位置就会有所变化，比如canvas.width = 500, 你可能设置了一个1px的边框，那么canBox.width = 502, 所以比值就不为1了。这样做只是让数据更精确。\x3c\/span\x3e\n                   \n                       can.x = (winX - canBox.left)*(canvas.width\/canBox.width);\n                       can.y = (winY - canBox.top)*(canvas.height\/canBox.height);\n                       \n                       \x3cspan class=\x22hljs-comment\x22\x3e\/\/输出\x3c\/span\x3e\n                       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(can.x，can.y);\n                   },\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e3、键盘事件\x3c\/h3\x3e\n\x3cp\x3e键盘事件就两个：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ekeydown\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ekeyup\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们同样可以向绑定鼠标事件那样为canvas绑定键盘事件。好吧！现在我们来看看，如何将一个键盘事件绑定到window(为什么不直接绑定到canvas上呢？想想)上：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbody \x3e\n    \x3cp\x3e任意按下按键\x3c\/p\x3e\n   \x3cscript\x3e\n       window.onload = function(){\n       \n              \/\/定义键盘事件\n           function onKeyboard(event){\n              switch (event.keyCode){\n                  case 38:\n                      console.log(\x27up!\x27);\n                      break;\n                  case 40:\n                      console.log(\x27down!\x27);\n                      break;\n                  case 37:\n                      console.log(\x27left!\x27);\n                      break;\n                  case 39:\n                      console.log(\x27right!\x27);\n                      break;\n                  default:\n                      console.log(event.keyCode);\n           }\n        }\n        \/\/为window对象绑定键盘事件\n        window.addEventListener(\x27keydown\x27,onKeyboard,false)；\n       }\n    \x3c\/script\x3e\n\x3c\/body\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e任意按下按键\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n       \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n       \n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/定义键盘事件\x3c\/span\x3e\n           \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonKeyboard\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e)\x3c\/span\x3e{\n              \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (event.keyCode){\n                  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e38\x3c\/span\x3e:\n                      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27up!\x27\x3c\/span\x3e);\n                      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e:\n                      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27down!\x27\x3c\/span\x3e);\n                      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e:\n                      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27left!\x27\x3c\/span\x3e);\n                      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                  \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e39\x3c\/span\x3e:\n                      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27right!\x27\x3c\/span\x3e);\n                      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                  \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n                      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(event.keyCode);\n           }\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/为window对象绑定键盘事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27keydown\x27\x3c\/span\x3e,onKeyboard,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)；\n       }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e试一试，当按下鼠标的方向键是是否在控制台打印出了相应的信息！\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e4、触摸事件\x3c\/h3\x3e\n\x3cp\x3e触摸事件包括以下3种：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3etouchstart\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etouchend\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etouchmove\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e触摸实践中，手指就充当了鼠标的作用。同样我们最为关心的是当前触摸的位置。和\x3ccode\x3ecaptureMouse\x3c\/code\x3e方法一样，这里在我们的工具函数文件中，需要添加一新的方法来捕获触摸的位置，名为\x3ccode\x3ecaptureTouch\x3c\/code\x3e,现在在utils.js文件中添加如下方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22utils.js文件\n\n    window.utils.captureTouch = function (element) {\n      var touch = {\n                      x: null,\n                    y: null,\n                    isPressed: false,\n                    event: null\n                    }；\n      var body_scrollLeft = document.body.scrollLeft,\n          element_scrollLeft = document.documentElement.scrollLeft,\n          body_scrollTop = document.body.scrollTop,\n          element_scrollTop = document.documentElement.scrollTop,\n          offsetLeft = element.offsetLeft,\n          offsetTop = element.offsetTop;\n          \n     \/\/ 绑定touchstart事件\n      element.addEventListener(\x27touchstart\x27, function (event) {\n        touch.isPressed = true;\n        touch.event = event;\n      }, false);\n      \n     \/\/ 绑定touchend事件\n      element.addEventListener(\x27touchend\x27, function (event) {\n        touch.isPressed = false;\n        touch.x = null;\n        touch.y = null;\n        touch.event = event;\n      }, false);\n      \n     \/\/绑定touchmove事件\n      element.addEventListener(\x27touchmove\x27, function (event) {\n        var x, y,\n            touch_event = event.touches[0]; \/\/第一次touch\n\n        if (touch_event.pageX || touch_event.pageY) {\n          x = touch_event.pageX;\n          y = touch_event.pageY;\n        } else {\n          x = touch_event.clientX \x2b body_scrollLeft \x2b element_scrollLeft;\n          y = touch_event.clientY \x2b body_scrollTop \x2b element_scrollTop;\n        }\n        \/\/剪去偏移量\n        x -= offsetLeft;\n        y -= offsetTop;\n\n        touch.x = x;\n        touch.y = y;\n        touch.event = event;\n      }, false);\n      \/\/返回touch对象\n      return touch;\n    };\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eutils.js文件\n\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.utils.captureTouch = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eelement\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e touch = {\n                      \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eisPressed\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3eevent\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n                    }；\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e body_scrollLeft = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollLeft,\n          element_scrollLeft = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollLeft,\n          body_scrollTop = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop,\n          element_scrollTop = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.documentElement.scrollTop,\n          offsetLeft = element.offsetLeft,\n          offsetTop = element.offsetTop;\n          \n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绑定touchstart事件\x3c\/span\x3e\n      element.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        touch.isPressed = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        touch.event = event;\n      }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n      \n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绑定touchend事件\x3c\/span\x3e\n      element.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchend\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        touch.isPressed = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        touch.x = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        touch.y = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        touch.event = event;\n      }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n      \n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/绑定touchmove事件\x3c\/span\x3e\n      element.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchmove\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x, y,\n            touch_event = event.touches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/第一次touch\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (touch_event.pageX || touch_event.pageY) {\n          x = touch_event.pageX;\n          y = touch_event.pageY;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          x = touch_event.clientX \x2b body_scrollLeft \x2b element_scrollLeft;\n          y = touch_event.clientY \x2b body_scrollTop \x2b element_scrollTop;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/剪去偏移量\x3c\/span\x3e\n        x -= offsetLeft;\n        y -= offsetTop;\n\n        touch.x = x;\n        touch.y = y;\n        touch.event = event;\n      }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/返回touch对象\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e touch;\n    };\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3e这一节主要介绍用户与canvas交互的各种事件，重要的是你应该在你自己的工具函数文件中包含了以下两个方法：\x3ccode\x3eutils.captureTouch\x3c\/code\x3e和\x3ccode\x3eutils.captureMouse\x3c\/code\x3e这两个方法都是为了获取当前相对于canvas元素的位置。我们将在后面的章节中频繁使用。当然，除了这两个方法，由于我们使用的\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e方法同样也涉及到兼容性的问题，我们将它一同添加到\x3ccode\x3eutils.js\x3c\/code\x3e中，具体代码请查看\x3ccode\x3eutils.js\x3c\/code\x3e文件。\x3cbr\x3e下一节，三角函数坐标旋转敬请期待！！！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>《每周一点canvas动画》——用户交互</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004882447">https://segmentfault.com/a/1190000004882447</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/egftwtbfu6g/" target="_blank">https://alili.tech/archive/egftwtbfu6g/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>