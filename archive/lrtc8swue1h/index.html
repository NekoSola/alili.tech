<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="关于修改DOM是异步还是同步的问题"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>关于修改DOM是异步还是同步的问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/lrtc8swue1h/",
				"appid": "1613049289050283", 
				"title": "关于修改DOM是异步还是同步的问题 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-08T02:30:41"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/teu32c7z8r/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/05oeo86zaig/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&text=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&text=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&title=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&is_video=false&description=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&title=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&title=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&title=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flrtc8swue1h%2f&title=%e5%85%b3%e4%ba%8e%e4%bf%ae%e6%94%b9DOM%e6%98%af%e5%bc%82%e6%ad%a5%e8%bf%98%e6%98%af%e5%90%8c%e6%ad%a5%e7%9a%84%e9%97%ae%e9%a2%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">关于修改DOM是异步还是同步的问题</h1><div class="meta"><div class="postdate"><time datetime="2019-02-08" itemprop="datePublished">2019-02-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e回 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e  同学 \x3c\/p\x3e\n\x3cp\x3e本篇文章不是笔记也不是心得，而是关于一个问题的讨论，问题最初出现于\x3ca href=\x22https:\/\/segmentfault.com\/q\/1010000005630545?_ea=903562\x22\x3ehttps:\/\/segmentfault.com\/q\/1010000005630545?_ea=903562\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e由于 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e  同学不方便加QQ\/微信，而这个问题又比较大，在问答评论里不好描述清楚，so，趁着周末专门写了一篇文章来回应 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学，提到了一个观点：\x3cstrong\x3e对DOM的修改永远是异步的\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e当时就震惊到我了（可能技术不达标，少见多怪的缘故，哈哈）\x3c\/p\x3e\n\x3cp\x3e说实话，干了好几年开发，第一次明确地听到有人这样说，根据自己看的书及一些javascript编程经验来说，起初我认为是错误的。\x3c\/p\x3e\n\x3cp\x3e然后看了看 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学的回复，能自圆其说，还说的头头是道，所以我真的以为\x3cstrong\x3e对DOM的修改永远是异步的\x3c\/strong\x3e是正确的。然后怀着震惊的心情（因为跟经验相违背），还写了一篇博客记录\x3ca href=\x22http:\/\/www.liyanshan.com\/2016\/06\/09\/%E5%AF%B9DOM%E7%9A%84%E4%BF%AE%E6%94%B9%E6%B0%B8%E8%BF%9C%E9%83%BD%E6%98%AF%E5%BC%82%E6%AD%A5%E7%9A%84\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.liyanshan.com\/2016\/06\/09\/%E5%AF%B9DOM%E7%9A%84%E4%BF%AE%E6%94%B9%E6%B0%B8%E8%BF%9C%E9%83%BD%E6%98%AF%E5%BC%82%E6%AD%A5%E7%9A%84\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e经过这么些天的发酵和消化，觉得对这个观点又回到了最初的认识（即这个观点是错的）。\x3c\/p\x3e\n\x3cp\x3e还请 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学跟我多多探讨 ！\x3c\/p\x3e\n\x3cp\x3e关于javascript修改dom是异步还是同步的问题：\x3c\/p\x3e\n\x3cp\x3e先来看代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cul\x3e\n    \x3cli id=\x26quot;i0\x26quot;\x3e\x3c\/li\x3e\n    \x3cli id=\x26quot;i1\x26quot;\x3e\x3c\/li\x3e\n    \x3cli id=\x26quot;i2\x26quot;\x3e\x3c\/li\x3e\n    \x3cli id=\x26quot;i3\x26quot;\x3e\x3c\/li\x3e\n    \x3cli id=\x26quot;i4\x26quot;\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cul id=\x26quot;newEle\x26quot;\x3e\x3c\/ul\x3e\n\n\x3cscript\x3e\n for(var i = 0;i\x3c5;i\x2b\x2b){\n    var item = document.getElementById(\x27i\x27\x2bi);\n    item.innerHTML = i;\n }\n var newEle = document.getElementById(\x27newEle\x27);\n for(i=0;i\x3c5;i\x2b\x2b){\n    var li = document.createElement(\x26quot;li\x26quot;);\n    li.innerHTML = i;\n    newEle.appendChild(li);\n }\n\x3c\/script\x3e  \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22i0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22i1\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22i2\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22i3\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22i4\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22newEle\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;i\x2b\x2b){\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e item = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27i\x27\x3c\/span\x3e\x2bi);\n    item.innerHTML = i;\n }\n \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newEle = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27newEle\x27\x3c\/span\x3e);\n \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;i\x2b\x2b){\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e li = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x22li\x22\x3c\/span\x3e);\n    li.innerHTML = i;\n    newEle.appendChild(li);\n }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e  \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码的结果完全就是同步的表现，如果是异步的话，毫无疑问，第一个ul下的li每个内容都应该是5，第二个也应该是5。\x3c\/p\x3e\n\x3cp\x3e这是数学中的反证法。即一个命题，哪怕我找出一个特例（何况我能找出很多例子）能推翻这个命题，那么这个命题就不成立。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学可能会说了，他也用反证法，比如script标签的加载，来证明\x3cstrong\x3eDOM修改是异步的\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e但是这个特例的问题在于：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e把下载的异步性当成了DOM修改的异步性\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3escript标签加载是异步的，因为要走网络（比如走网络的ajax和图片下载等都是异步的，当然ajax也可以写成同步的），也就是说，浏览器开了一个线程下载要用的script，但是马上返回（交给HTTP请求线程就不管了，请求结束，请求线程会把结果放入事件队列里），接着执行或下载其他部分。其实这个问题我在引起这个讨论的问题上已经回答了（可能回答的没有那么清楚）。\x3c\/p\x3e\n\x3cp\x3e然后又陆陆续续地看了一些书，查了一些资料，问了一些大牛，越来越坚信\x3cstrong\x3eDOM修改是同步的\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eJavaScript异步编程第一章 - 异步的I\/O函数（1.2.1）\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyvPL\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyvPL\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个也符合我最初跟 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学的解释：修改DOM是同步的，但是渲染是异步的。因为JavaScript引擎线程跟GUI渲染线程是互斥的，即\x3cstrong\x3e我执行的时候，你就靠边站，我执行完你才能执行\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e详见我2014年写的一篇关于异步的文章（当时就是记录一下心得与笔记，也不会自己搭博客，也不会MD，所以请 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学凑合看）\x3ca href=\x22http:\/\/blog.sina.com.cn\/s\/blog_6fd55a970102v64x.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.sina.com.cn\/s\/blog_6fd55a970102v64x.html\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e在群里提问\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这个其实就相当于回答了js是同步修改的。。因为这是三个异步函数！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVyvPV\x22 src=\x22https:\/\/static.alili.tech\/img\/bVyvPV\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e而 \x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学在后面的回复中，提到了一篇文章\x3ca href=\x22https:\/\/leozdgao.me\/why-dom-slow\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/leozdgao.me\/why-dom-slow\/\x3c\/a\x3e，额，我看了看这篇文章，发现其实我今年年初就看过了，当时貌似是用\x3ccode\x3e浏览器重排和重绘\x3c\/code\x3e搜索到的。。\x3c\/p\x3e\n\x3cp\x3e这篇文章主要是讲 重排和重绘及性能优化一类的知识。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22\/u\/bf\x22\x3e@bf\x3c\/a\x3e 同学可能受到这句话的影响：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e一般情况下，浏览器的layout是lazy的，也就是说：在js脚本执行时，是不会去更新DOM的，任何对DOM的修改都会被暂存在一个队列中，在当前js的执行上下文完成执行后，会根据这个队列中的修改，进行一次layout。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这个其实说明不了\x3cstrong\x3e修改DOM永远是异步的\x3c\/strong\x3e，这个是JavaScript引擎实现层面上的知识，是对js修改DOM的优化，它放入的队列其实不是\x3ccode\x3e事件队列\x3c\/code\x3e，如果放到了\x3ccode\x3e事件队列\x3c\/code\x3e中，才是异步的。。C\x2b\x2b实现一个队列是何其简单啊！js实现队列更简单！只是实现层面的东西，对程序猿都是透明的。。所以没啥可说的。只能帮助我们理解重排和重绘的机制，而不能得出\x3cstrong\x3e修改DOM永远是异步的\x3c\/strong\x3e结论。。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>关于修改DOM是异步还是同步的问题</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005803237">https://segmentfault.com/a/1190000005803237</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/lrtc8swue1h/" target="_blank">https://alili.tech/archive/lrtc8swue1h/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>