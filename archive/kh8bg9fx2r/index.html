<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（一）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（一） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/kh8bg9fx2r/",
				"appid": "1613049289050283", 
				"title": "使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（一） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-11T02:30:49"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/uvpw4v1dkq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/u1i0ntr8e3j/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&text=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&text=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&title=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&is_video=false&description=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&title=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&title=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&title=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fkh8bg9fx2r%2f&title=%e4%bd%bf%e7%94%a8React%e3%80%81Node.js%e3%80%81MongoDB%e3%80%81Socket.IO%e5%bc%80%e5%8f%91%e4%b8%80%e4%b8%aa%e8%a7%92%e8%89%b2%e6%8a%95%e7%a5%a8%e5%ba%94%e7%94%a8%e7%9a%84%e5%ad%a6%e4%b9%a0%e8%bf%87%e7%a8%8b%ef%bc%88%e4%b8%80%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（一）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-11" itemprop="datePublished">2019-02-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e本项目是对\x3ca href=\x22http:\/\/www.kancloud.cn\/kancloud\/create-voting-app\/63977\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用\x3c\/a\x3e的学习过程。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22http:\/\/sahatyalkabov.com\/create-a-character-voting-app-using-react-nodejs-mongodb-and-socketio\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e英文原文:Create a character voting app using React, Node.js, MongoDB and Socket.IO\x3c\/a\x3e \x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/sahat\/newedenfaces-react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原项目github\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e学习过程\x3c\/h2\x3e\n\x3cp\x3e要想系统的学习些新东西，网上看了很多代码片段，但很少有这样完整的一个系统来学习，基实我本来是比较偏向\x3ca href=\x22http:\/\/vuejs.org.cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue\x3c\/a\x3e的但是看到了这个文章，太全面了，对于想入门的人来说，方方面面都有，有前端，有后端，所以忍不住想把它提供的代码全敲一遍。敲代码的过程，虽然只是个抄的过程，但比光看要很很多，有的时候往往看人家代码的时候，感觉是这样的，\x3cstrong\x3e\x3cem\x3e\x22哦，就是这样的啊.so easy,不过如此吗~\x22\x3c\/em\x3e\x3c\/strong\x3e，但一句一句去敲的时候，感觉就是这样的，\x3cstrong\x3e\x3cem\x3e\x22WTF,这是什么鬼，这个函数哪里来的，这个库是干嘛用的，这里这么写到底是为了什么\x22,\x3c\/em\x3e\x3c\/strong\x3e所以当你把过程中的这些疑问都搞清楚了，才是真正的提高了，光看很多细节是注意不到的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e对原有的改动\x3c\/h3\x3e\n\x3cp\x3e抄代码是好，但是最好在原来的基础上加点自己的相法，所以我做的改动主要有如下\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e把所有不是用ES6的代码全部改成ES6的\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用数据库从mongodb 改成了mysql\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用waterline替换mongoose操作数据库\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e\n\x3cp\x3e改动后的代码，我也全发布在github上了,还没改完，我会不定期commit的\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/papersnake\/newdenfaces-es6\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/papersnake\/newdenfaces-es6\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e改写的过程和遇到的坑\x3c\/h3\x3e\n\x3cp\x3e对ES6学也的也不深，改了这么多也发现语法上也只用到了import let const 和=\x26gt;,希望大家提出更多的改进意见\x3cbr\x3e原文第一步的代码\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e原文第一步的改进\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var express = require(\x27express\x27);\nvar path = require(\x27path\x27);\nvar logger = require(\x27morgan\x27);\nvar bodyParser = require(\x27body-parser\x27);\n\nvar app = express();\n\napp.set(\x27port\x27, process.env.PORT || 3000);\napp.use(logger(\x27dev\x27));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(express.static(path.join(__dirname, \x27public\x27)));\n\napp.listen(app.get(\x27port\x27), function() {\n  console.log(\x27Express server listening on port \x27 \x2b app.get(\x27port\x27));\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e logger = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27morgan\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express();\n\napp.set(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e, process.env.PORT || \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\napp.use(logger(\x3cspan class=\x22hljs-string\x22\x3e\x27dev\x27\x3c\/span\x3e));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ \x3cspan class=\x22hljs-attr\x22\x3eextended\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }));\napp.use(express.static(path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27public\x27\x3c\/span\x3e)));\n\napp.listen(app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Express server listening on port \x27\x3c\/span\x3e \x2b app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e));\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e改写后，变成\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import express    from \x27express\x27;\nimport path       from \x27path\x27;\nimport logger     from \x27morgan\x27;\nimport bodyParser from \x27body-parser\x27;\n\nlet app = express();\n\napp.set(\x27port\x27,process.env.PORT || 3000);\napp.use(logger(\x27dev\x27));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(express.static(path.join(__dirname, \x27public\x27)));\n\napp.listen(app.get(\x27port\x27),() =\x3e {\n    console.log(\x27Express server listening on port \x27 \x2b app.get(\x27port\x27));\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e express    \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e path       \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e logger     \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27morgan\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e bodyParser \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e app = express();\n\napp.set(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e,process.env.PORT || \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\napp.use(logger(\x3cspan class=\x22hljs-string\x22\x3e\x27dev\x27\x3c\/span\x3e));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ \x3cspan class=\x22hljs-attr\x22\x3eextended\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }));\napp.use(express.static(path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27public\x27\x3c\/span\x3e)));\n\napp.listen(app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e),() =\x26gt; {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Express server listening on port \x27\x3c\/span\x3e \x2b app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e));\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了能让它跑起来，要在原有依赖的基础上添加\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3enpm install --save-dev babel-cli,babel-core,babel-preset-es2015,babel-preset-react,babel-register\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e有几个依赖是后面才用到的，我这里一并安装了\x3cbr\x3e在根目录新建一个.babelrc文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;presets\x26quot;: [\n    \x26quot;es2015\x26quot;\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e用babel-node server.js 就要以跑起来了\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e原文第二步分 构建系统的改写\x3c\/h3\x3e\n\x3cp\x3e为了节省篇幅，有些全篇的代码我就不粘贴，给出连接吧 \x3ca href=\x22https:\/\/github.com\/sahat\/newedenfaces-react\/blob\/master\/gulpfile.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egulpfile.js\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3egulp 从3.9.0开始支持babel，但是要把文件名改为\x3cstrong\x3egulpfile.babel.js\x3c\/strong\x3e\x3cbr\x3e改写后的代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport gulp from \x27gulp\x27;\nimport gutil from \x27gulp-util\x27;\nimport gulpif from \x27gulp-if\x27;\nimport streamify from \x27gulp-streamify\x27;\nimport autoprefixer from \x27gulp-autoprefixer\x27;\nimport cssmin from \x27gulp-cssmin\x27;\nimport less from \x27gulp-less\x27;\nimport concat from \x27gulp-concat\x27;\nimport plumber from \x27gulp-plumber\x27;\nimport source from \x27vinyl-source-stream\x27;\nimport babelify from \x27babelify\x27;\nimport browserify from \x27browserify\x27;\nimport watchify from \x27watchify\x27;\nimport uglify from \x27gulp-uglify\x27;\n\nconst production = process.env.NODE_ENV === \x27production\x27;\n\nconst dependencies = [\n    \x27alt\x27,\n    \x27react\x27,\n    \x27react-router\x27,\n    \x27underscore\x27\n];\n\n\/*\n |--------------------------------------------------------------------------\n | Combine all JS libraries into a single file for fewer HTTP requests.\n |--------------------------------------------------------------------------\n *\/\ngulp.task(\x27vendor\x27,()=\x3e\n    gulp.src([\n        \x27bower_components\/jquery\/dist\/jquery.js\x27,\n        \x27bower_components\/bootstrap\/dist\/bootstrap.js\x27,\n        \x27bower_components\/magnific-popup\/dist\/jquery.magnific-popup.js\x27,\n        \x27bower_components\/toastr\/toastr.js\x27\n        ]).pipe(concat(\x27vendor.js\x27))\n          .pipe(gulpif(production,uglify({ mangle:false })))\n          .pipe(gulp.dest(\x27public\/js\x27))\n    );\n\n\n\/*\n |--------------------------------------------------------------------------\n | Compile third-party dependencies separately for faster performance.\n |--------------------------------------------------------------------------\n *\/\ngulp.task(\x27browserify-vendor\x27, () =\x3e\n  browserify()\n    .require(dependencies)\n    .bundle()\n    .pipe(source(\x27vendor.bundle.js\x27))\n    .pipe(gulpif(production, streamify(uglify({ mangle: false }))))\n    .pipe(gulp.dest(\x27public\/js\x27))\n);\n\n\/*\n |--------------------------------------------------------------------------\n | Compile only project files, excluding all third-party dependencies.\n |--------------------------------------------------------------------------\n *\/\ngulp.task(\x27browserify\x27, [\x27browserify-vendor\x27], () =\x3e\n  browserify(\x27app\/main.js\x27)\n    .external(dependencies)\n    .transform(babelify,{ presets: [\x26quot;es2015\x26quot;, \x26quot;react\x26quot;]}) \/\/注意这里，只有加上presets配置才能正常编译\n    .bundle()\n    .pipe(source(\x27bundle.js\x27))\n    .pipe(gulpif(production, streamify(uglify({ mangle: false }))))\n    .pipe(gulp.dest(\x27public\/js\x27))\n);\n\n\/*\n |--------------------------------------------------------------------------\n | Same as browserify task, but will also watch for changes and re-compile.\n |--------------------------------------------------------------------------\n *\/\ngulp.task(\x27browserify-watch\x27, [\x27browserify-vendor\x27], () =\x3e{\n  var bundler = watchify(browserify(\x27app\/main.js\x27, watchify.args));\n  bundler.external(dependencies);\n  bundler.transform(babelify,{ presets: [\x26quot;es2015\x26quot;, \x26quot;react\x26quot;]});\n  bundler.on(\x27update\x27, rebundle);\n  return rebundle();\n\n  function rebundle() {\n    var start = Date.now();\n    bundler.bundle()\n      .on(\x27error\x27, function(err) {\n        gutil.log(gutil.colors.red(err.toString()));\n      })\n      .on(\x27end\x27, function() {\n        gutil.log(gutil.colors.green(\x27Finished rebundling in\x27, (Date.now() - start) \x2b \x27ms.\x27));\n      })\n      .pipe(source(\x27bundle.js\x27))\n      .pipe(gulp.dest(\x27public\/js\/\x27));\n  }\n});\n\n\n\/*\n |--------------------------------------------------------------------------\n | Compile LESS stylesheets.\n |--------------------------------------------------------------------------\n *\/\ngulp.task(\x27styles\x27, () =\x3e\n  gulp.src(\x27app\/stylesheets\/main.less\x27)\n    .pipe(plumber())\n    .pipe(less())\n    .pipe(autoprefixer())\n    .pipe(gulpif(production, cssmin()))\n    .pipe(gulp.dest(\x27public\/css\x27))\n);\n\ngulp.task(\x27watch\x27, () =\x3e{\n  gulp.watch(\x27app\/stylesheets\/**\/*.less\x27, [\x27styles\x27]);\n});\n\ngulp.task(\x27default\x27, [\x27styles\x27, \x27vendor\x27, \x27browserify-watch\x27, \x27watch\x27]);\ngulp.task(\x27build\x27, [\x27styles\x27, \x27vendor\x27, \x27browserify\x27]);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e gulp \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e gutil \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-util\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e gulpif \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-if\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e streamify \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-streamify\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e autoprefixer \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-autoprefixer\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e cssmin \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-cssmin\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e less \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-less\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e concat \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-concat\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e plumber \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-plumber\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e source \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vinyl-source-stream\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e babelify \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27babelify\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e browserify \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27browserify\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e watchify \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27watchify\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e uglify \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gulp-uglify\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e production = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dependencies = [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27alt\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27react-router\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27underscore\x27\x3c\/span\x3e\n];\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n |--------------------------------------------------------------------------\n | Combine all JS libraries into a single file for fewer HTTP requests.\n |--------------------------------------------------------------------------\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,()=\x26gt;\n    gulp.src([\n        \x3cspan class=\x22hljs-string\x22\x3e\x27bower_components\/jquery\/dist\/jquery.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27bower_components\/bootstrap\/dist\/bootstrap.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27bower_components\/magnific-popup\/dist\/jquery.magnific-popup.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27bower_components\/toastr\/toastr.js\x27\x3c\/span\x3e\n        ]).pipe(concat(\x3cspan class=\x22hljs-string\x22\x3e\x27vendor.js\x27\x3c\/span\x3e))\n          .pipe(gulpif(production,uglify({ \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e })))\n          .pipe(gulp.dest(\x3cspan class=\x22hljs-string\x22\x3e\x27public\/js\x27\x3c\/span\x3e))\n    );\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n |--------------------------------------------------------------------------\n | Compile third-party dependencies separately for faster performance.\n |--------------------------------------------------------------------------\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27browserify-vendor\x27\x3c\/span\x3e, () =\x26gt;\n  browserify()\n    .require(dependencies)\n    .bundle()\n    .pipe(source(\x3cspan class=\x22hljs-string\x22\x3e\x27vendor.bundle.js\x27\x3c\/span\x3e))\n    .pipe(gulpif(production, streamify(uglify({ \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }))))\n    .pipe(gulp.dest(\x3cspan class=\x22hljs-string\x22\x3e\x27public\/js\x27\x3c\/span\x3e))\n);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n |--------------------------------------------------------------------------\n | Compile only project files, excluding all third-party dependencies.\n |--------------------------------------------------------------------------\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27browserify\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27browserify-vendor\x27\x3c\/span\x3e], () =\x26gt;\n  browserify(\x3cspan class=\x22hljs-string\x22\x3e\x27app\/main.js\x27\x3c\/span\x3e)\n    .external(dependencies)\n    .transform(babelify,{ \x3cspan class=\x22hljs-attr\x22\x3epresets\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e]}) \x3cspan class=\x22hljs-comment\x22\x3e\/\/注意这里，只有加上presets配置才能正常编译\x3c\/span\x3e\n    .bundle()\n    .pipe(source(\x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e))\n    .pipe(gulpif(production, streamify(uglify({ \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }))))\n    .pipe(gulp.dest(\x3cspan class=\x22hljs-string\x22\x3e\x27public\/js\x27\x3c\/span\x3e))\n);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n |--------------------------------------------------------------------------\n | Same as browserify task, but will also watch for changes and re-compile.\n |--------------------------------------------------------------------------\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27browserify-watch\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27browserify-vendor\x27\x3c\/span\x3e], () =\x26gt;{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bundler = watchify(browserify(\x3cspan class=\x22hljs-string\x22\x3e\x27app\/main.js\x27\x3c\/span\x3e, watchify.args));\n  bundler.external(dependencies);\n  bundler.transform(babelify,{ \x3cspan class=\x22hljs-attr\x22\x3epresets\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e]});\n  bundler.on(\x3cspan class=\x22hljs-string\x22\x3e\x27update\x27\x3c\/span\x3e, rebundle);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e rebundle();\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erebundle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.now();\n    bundler.bundle()\n      .on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n        gutil.log(gutil.colors.red(err.toString()));\n      })\n      .on(\x3cspan class=\x22hljs-string\x22\x3e\x27end\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        gutil.log(gutil.colors.green(\x3cspan class=\x22hljs-string\x22\x3e\x27Finished rebundling in\x27\x3c\/span\x3e, (\x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.now() - start) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27ms.\x27\x3c\/span\x3e));\n      })\n      .pipe(source(\x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e))\n      .pipe(gulp.dest(\x3cspan class=\x22hljs-string\x22\x3e\x27public\/js\/\x27\x3c\/span\x3e));\n  }\n});\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n |--------------------------------------------------------------------------\n | Compile LESS stylesheets.\n |--------------------------------------------------------------------------\n *\/\x3c\/span\x3e\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27styles\x27\x3c\/span\x3e, () =\x26gt;\n  gulp.src(\x3cspan class=\x22hljs-string\x22\x3e\x27app\/stylesheets\/main.less\x27\x3c\/span\x3e)\n    .pipe(plumber())\n    .pipe(less())\n    .pipe(autoprefixer())\n    .pipe(gulpif(production, cssmin()))\n    .pipe(gulp.dest(\x3cspan class=\x22hljs-string\x22\x3e\x27public\/css\x27\x3c\/span\x3e))\n);\n\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27watch\x27\x3c\/span\x3e, () =\x26gt;{\n  gulp.watch(\x3cspan class=\x22hljs-string\x22\x3e\x27app\/stylesheets\/**\/*.less\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27styles\x27\x3c\/span\x3e]);\n});\n\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27default\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27styles\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27browserify-watch\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27watch\x27\x3c\/span\x3e]);\ngulp.task(\x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27styles\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27browserify\x27\x3c\/span\x3e]);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由于到现在为止，还没有做其他工作，所以看不到打包的实际效果， 但是也是要控制台下运行一下gulp 看看有没有语法错误。\x3c\/p\x3e\n\x3cp\x3e到这里为止没有遇到多大的坑，最多的往往是拼写错误引起的问题，唯一由于拼写导致，但不提示错误的是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.use(bodyParser.json());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eapp.use(bodyParser.json());\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我打成了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.use(bodyParser.json);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eapp.use(bodyParser.json);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行的时候服务器一直没有响应，找了好久才找到这个错误\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e后篇\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005062639\x22\x3e使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（二）\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用React、Node.js、MongoDB、Socket.IO开发一个角色投票应用的学习过程（一）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005040834">https://segmentfault.com/a/1190000005040834</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/kh8bg9fx2r/" target="_blank">https://alili.tech/archive/kh8bg9fx2r/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>