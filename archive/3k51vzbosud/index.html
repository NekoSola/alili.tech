<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="图解浏览器缓存，教你提高用户体验"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>图解浏览器缓存，教你提高用户体验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/3k51vzbosud/",
				"appid": "1613049289050283", 
				"title": "图解浏览器缓存，教你提高用户体验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-14T02:30:37"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/8w6loa8m1f3/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/vor6r3vuvqc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&text=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&text=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&title=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&is_video=false&description=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&title=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&title=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&title=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3k51vzbosud%2f&title=%e5%9b%be%e8%a7%a3%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e6%95%99%e4%bd%a0%e6%8f%90%e9%ab%98%e7%94%a8%e6%88%b7%e4%bd%93%e9%aa%8c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">图解浏览器缓存，教你提高用户体验</h1><div class="meta"><div class="postdate"><time datetime="2019-02-14" itemprop="datePublished">2019-02-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e欢迎大家前往\x3ca href=\x22https:\/\/cloud.tencent.com\/developer\/?fromSource=waitui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e腾讯云\x2b社区\x3c\/a\x3e，获取更多腾讯海量技术实践干货哦~\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e本文由\x3ca href=\x22https:\/\/cloud.tencent.com\/developer\/user\/2221081\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端林子\x3c\/a\x3e发表于\x3ca href=\x22https:\/\/cloud.tencent.com\/developer\/column\/5154?fromSource=waitui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e云\x2b社区专栏\x3c\/a\x3e\x3cp\x3e浏览器缓存，是浏览器端保存数据，用于\x3cstrong\x3e快速读取\x3c\/strong\x3e或\x3cstrong\x3e避免重复资源请求\x3c\/strong\x3e的优化机制，有效的缓存使用可以\x3cstrong\x3e避免重复的网络请求\x3c\/strong\x3e和\x3cstrong\x3e加快页面速度\x3c\/strong\x3e,从而提高用户体验。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e一 强缓存\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e1.1 区分Expires和Cache-Control\x3c\/h2\x3e\n\x3cp\x3e以一个接口返回的响应头为例：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872409\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872409\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这里我画了张思维导图，对Expires和Cache-Control做比较：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872410?w=1452\x26amp;h=452\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872410?w=1452\x26amp;h=452\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e具体介绍Expires和Cache-Control：\x3c\/p\x3e\n\x3cp\x3eExpires:\x3c\/p\x3e\n\x3cp\x3e(1)Expires是HTTP1.0的东西，现在默认浏览器均默认使用HTTP 1.1，所以它的作用基本忽略；\x3c\/p\x3e\n\x3cp\x3e(2)Expires规定了缓存失效时间（Date为当前时间），是绝对时间。由于Expires返回的是一个绝对时间，在服务器时间与客户端时间相差较大的时候，缓存命中不准确；\x3c\/p\x3e\n\x3cp\x3eCache-Control：\x3c\/p\x3e\n\x3cp\x3e(1)Cache-Control是HTTP1.1的\x3c\/p\x3e\n\x3cp\x3e(2)Cache-Control的max-age规定了缓存有效时间（2552s)，是相对时间；\x3c\/p\x3e\n\x3cp\x3e(3)若响应头Expires和Cache-Control同时存在，\x3cstrong\x3eCache-Control优先级高于Expires\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3eCache-Control的常用指令：\x3c\/p\x3e\n\x3cp\x3eno-cache：不使用本地缓存，需要使用协商缓存，也就是先与服务器确认缓存是否可用。\x3c\/p\x3e\n\x3cp\x3eno-store：禁用缓存。用于防止重要的信息被无意的发布。在请求消息中发送将使得请求和响应消息都不使用缓存。\x3c\/p\x3e\n\x3cp\x3epublic：其他用户也可使用缓存，适用于公共缓存服务器的情况。\x3c\/p\x3e\n\x3cp\x3eprivate：只有特定用户才能使用缓存，适用于公共缓存服务器的情况。\x3c\/p\x3e\n\x3cp\x3emax-age：客户机可以接收生存期不大于指定时间（以秒为单位）的响应。\x3c\/p\x3e\n\x3cp\x3emin-fresh客户机可以接收响应时间小于当前时间加上指定时间的响应。\x3c\/p\x3e\n\x3cp\x3emax-stale指示客户机可以接收超出超时期间的响应消息。如果指定max-stale消息的值，那么客户机可以接收超出超时期指定值之内的响应消息。\x3c\/p\x3e\n\x3cblockquote\x3e注意：no-cache指令并不是不缓存，no-cache的意思是可以缓存，但每次用应该去向服务器验证缓存是否可用。no-store才是不缓存内容。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e1.2 强缓存的过程\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e强缓存：\x3c\/strong\x3e浏览器直接从本地缓存中获取数据，不与服务器进行交互。\x3c\/p\x3e\n\x3cp\x3e· 浏览器第一次跟服务器请求一个资源，服务器在返回这个资源的同时，在response的header会加上Expires\/Cache-Control的header；\x3c\/p\x3e\n\x3cp\x3e·  浏览器再请求这个资源时，先从缓存中寻找，找到这个资源后，比较Expires或Cache-Control的max-age字段值做比较, 如果在有效期内，则读取缓存内容；若缓存已过期，则重新向服务器发送请求；\x3c\/p\x3e\n\x3cp\x3e·  header在重新加载的时候会被更新\x3c\/p\x3e\n\x3cp\x3e这里我画了两张图，浏览器第一次请求：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872411?w=311\x26amp;h=715\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872411?w=311\x26amp;h=715\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e浏览器第一次请求\x3c\/p\x3e\n\x3cp\x3e浏览器再次请求：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872412?w=311\x26amp;h=760\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872412?w=311\x26amp;h=760\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e强缓存\x3c\/p\x3e\n\x3cp\x3e对于强缓存，chrome浏览器的状态码：\x3c\/p\x3e\n\x3cp\x3e200 OK(from disk cache)或是200 OK (from memory cache)\x3c\/p\x3e\n\x3cp\x3e例如：请求某个图片后，当浏览器再次访问这个图片时，发现有这个图片的缓存，且缓存没过期，所以就使用缓存。\x3c\/p\x3e\n\x3cp\x3e当浏览器发现缓存过期后，缓存并不一定不能使用了。比如文件虽然过了有效期，但内容并没有发生改变，还是可以用缓存数据。所以，这个时候需要与服务器协商，让服务器判断本地缓存是否还能使用。那么又怎么判断服务端文件有没有更新呢？主要有两种方式：\x3c\/p\x3e\n\x3cp\x3eLast-Modified，If-Modified-since。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e二 协商缓存\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e2.1 区分Last-Modified和If-Modified-Since\x3c\/h2\x3e\n\x3cp\x3e以一个返回的接口为例：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872413\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872413\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eLast-Modified的格式：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eLast-Modified:\x3c\/strong\x3e Mon, 17 Sep 2018 12:06:18 GMT\x3c\/p\x3e\n\x3cp\x3eIf-Modified-Since的格式：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eIf-Modified-Since:\x3c\/strong\x3e Mon, 17 Sep 2018 12:06:18 GMT\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e2.2 Etag是什么\x3c\/h2\x3e\n\x3cp\x3eweb服务器响应请求时，告诉浏览器当前资源在服务器的唯一标识（生成规则由服务器决定）。Apache中，ETag的值默认是对文件的索引节（INode），大小（Size）和最后修改时间（MTime）进行Hash后得到的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e2.3 协商缓存的过程\x3c\/h2\x3e\n\x3cp\x3e浏览器第一次请求：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872411?w=311\x26amp;h=715\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872411?w=311\x26amp;h=715\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e浏览器第一次缓存\x3c\/p\x3e\n\x3cp\x3e浏览器再一次请求：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872414\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872414\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e协商缓存\x3c\/p\x3e\n\x3cp\x3eLast-Modified、If-Modified-Since：\x3c\/p\x3e\n\x3cp\x3e· 浏览器第一次向服务器请求一个资源，服务器在返回这个资源的同时，在respone的header加上Last-Modified字段，表示该资源在服务器上的最后修改时间；\x3c\/p\x3e\n\x3cp\x3e· 浏览器再次向服务器请求这个资源时，在request的header上加上If-Modified-Since字段，这个值就是上一次请求时返回的Last-Modified的值;\x3c\/p\x3e\n\x3cp\x3e·服务器收到资源请求时，比较If-Modified-Since字段值和被请求资源的最后修改时间，若资源最后修改时间较旧，则说明文件没有修改，返回304 Not Modified, 浏览器从缓存中加载资源；若不相同，说明文件被更新，浏览器直接从服务器加载资源, 返回200；\x3c\/p\x3e\n\x3cp\x3e·重新加载资源时更新Last-Modified Header\x3c\/p\x3e\n\x3cp\x3eEtag、If-None-Match\x3c\/p\x3e\n\x3cp\x3e· 浏览器第一次向服务器请求一个资源，服务器在返回这个资源的同时，在respone的header加上ETag字段；\x3c\/p\x3e\n\x3cp\x3e·浏览器再次跟服务器请求这个资源时，在request的header上加上If-None-Match，这个值就是上一次请求时返回的ETag的值；\x3c\/p\x3e\n\x3cp\x3e·服务器再次收到资源请求时，再根据资源生成一个新的ETag，与浏览器传过来If-None-Match比较，如果这两个值相同，则说明资源没有变化，返回304 Not Modified, 浏览器从缓存中加载资源，否则返回200 资源内容。与Last-Modified不一样的是，当服务器返回304 Not Modified的响应时，由于ETag重新生成过，response header中还会把这个ETag返回，即使这个ETag跟之前的没有变化\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e2.4 为什么有了Last-Modified，还要用Etag呢？\x3c\/h2\x3e\n\x3cp\x3eHTTP1.1中ETag的出现主要是为了解决几个Last-Modified比较难解决的问题：\x3c\/p\x3e\n\x3cp\x3e·一些文件也许会周期性的更改，但是他的内容并不改变(仅仅改变的修改时间)，这个时候我们并不希望客户端认为这个文件被修改了，而重新GET；\x3c\/p\x3e\n\x3cp\x3e·某些文件修改非常频繁，比如在秒以下的时间内进行修改，(比方说1s内修改了N次)，If-Modified-Since能检查到的粒度是s级的，这种修改无法判断(或者说UNIX记录MTIME只能精确到秒)；\x3c\/p\x3e\n\x3cp\x3e·某些服务器不能精确的得到文件的最后修改时间。\x3c\/p\x3e\n\x3cp\x3e对于上述情景，利用\x3cstrong\x3eETag能够更加准确的控制缓存\x3c\/strong\x3e，因为ETag是服务器自动生成的资源在服务器端的唯一标识符，资源每次变动，都会生成新的ETag值。Last-Modified与ETag是可以一起使用的，但服务器\x3cstrong\x3e会优先验证ETag\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e2.5 比较强缓存和协商缓存\x3c\/h2\x3e\n\x3cp\x3e基于上文对强缓存和协商缓存过程的解释，这里我把强缓存和协商缓存绘制在一张图里，方便比较，具体过程可以参照上文：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016872415?w=1315\x26amp;h=1384\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016872415?w=1315\x26amp;h=1384\x22 alt=\x22img\x22 title=\x22img\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3ehttp缓存\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e三 小结\x3c\/h1\x3e\n\x3cp\x3e本文主要通过图解介绍了http的缓存，具体包括强缓存和协商缓存。如有问题，欢迎指正。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3e相关阅读\x3c\/strong\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/cloud.tencent.com\/developer\/edu\/course-1128?fromSource=waitui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e【每日课程推荐】机器学习实战！快速入门在线广告业务及CTR相应知识\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e此文已由作者授权腾讯云\x2b社区发布，更多原文请\x3ca href=\x22https:\/\/cloud.tencent.com\/developer\/article\/1346293?fromSource=waitui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点击\x3c\/a\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e搜索关注公众号「云加社区」，第一时间获取技术干货，关注后回复1024 送你一份技术课程大礼包！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e海量技术实践经验，尽在\x3ca href=\x22https:\/\/cloud.tencent.com\/developer?fromSource=waitui\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e云加社区\x3c\/a\x3e！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>图解浏览器缓存，教你提高用户体验</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016872406">https://segmentfault.com/a/1190000016872406</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/3k51vzbosud/" target="_blank">https://alili.tech/archive/3k51vzbosud/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>