<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 组件数据流 &amp;&amp; 组件间沟通"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 组件数据流 &amp;&amp; 组件间沟通 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jjiiiwk33f/",
				"appid": "1613049289050283", 
				"title": "React 组件数据流 &amp;&amp; 组件间沟通 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lvac13l8yi9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bcpy0n0sq0b/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&text=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&text=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&title=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&is_video=false&description=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&title=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&title=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&title=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjjiiiwk33f%2f&title=React%20%e7%bb%84%e4%bb%b6%e6%95%b0%e6%8d%ae%e6%b5%81%20%26%26%20%e7%bb%84%e4%bb%b6%e9%97%b4%e6%b2%9f%e9%80%9a"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 组件数据流 &amp;&amp; 组件间沟通</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e使用React我们首先要知道如何传递数据，组件如何沟通，才能展示我们想要的数据。下面的列子都是使用ES6语法，不懂的同学需要先学习ES6语法。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e数据流\x3c\/h2\x3e\n\x3cp\x3eReact是单向数据流，从父节点传递到子节点（通过\x3ccode\x3eprops\x3c\/code\x3e）。如果顶层的某个\x3ccode\x3eprops\x3c\/code\x3e改变了，React会重渲染所有的子节点（未做性能优化）。严格意义上React只提供，也强烈建议使用这种数据交流方式。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eProps\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eprops\x3c\/code\x3e是property的缩写，可以理解为HTML标签的attribute。请把\x3ccode\x3eprops\x3c\/code\x3e当做只读的（不可以使用\x3ccode\x3ethis.props\x3c\/code\x3e直接修改props），\x3ccode\x3eprops\x3c\/code\x3e是用于整个组件树中传递数据和配置。在当前组件访问\x3ccode\x3eprops\x3c\/code\x3e，使用\x3ccode\x3ethis.props\x3c\/code\x3e。在什么情况下可以使用\x3ccode\x3eprops\x3c\/code\x3e，请看\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006792687\x22\x3e组件生命周期\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Component {\n  constructor(props){\n    super(props);\n  }\n  render(){\n    return (\n        \x3cdiv title={this.props.title}\x3e\x3c\/div\x3e\n    )\n  }\n}\n\x3cComponent title=\x26quot;test\x26quot;\/\x3e\/\/调用title就传进去了\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n  }\n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.props.title}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    )\n  }\n}\n\x26lt;Component title=\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e\/\x26gt;\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用title就传进去了\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3ePropTypes\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ePropsTypes\x3c\/code\x3e是React中用来定义\x3ccode\x3eprops\x3c\/code\x3e的类型，不符合定义好的类型会报错。建议可复用组件要使用prop验证！接着上面的列子设置\x3ccode\x3ePropsTypes\x3c\/code\x3e如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Component {\n  ...\n}\nComponent.PropsType = {\n  title: React.PropTypes.string,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22jsx\x22\x3eclass Component {\n  ...\n}\nComponent\x3cspan class=\x22hljs-selector-class\x22\x3e.PropsType\x3c\/span\x3e = {\n  title: React\x3cspan class=\x22hljs-selector-class\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.string\x3c\/span\x3e,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eReact.PropTypes\x3c\/code\x3e\x26nbsp;提供很多验证器 (validator) 来验证传入数据的有效性。官方定义的验证器如下，不是使用ES6语法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22React.createClass({\n  propTypes: {\n    \/\/ 可以声明 prop 为指定的 JS 基本类型。默认\n    \/\/ 情况下，这些 prop 都是可传可不传的。\n    optionalArray: React.PropTypes.array,\n    optionalBool: React.PropTypes.bool,\n    optionalFunc: React.PropTypes.func,\n    optionalNumber: React.PropTypes.number,\n    optionalObject: React.PropTypes.object,\n    optionalString: React.PropTypes.string,\n    optionalSymbol: React.PropTypes.symbol,\n\n    \/\/ 所有可以被渲染的对象：数字，\n    \/\/ 字符串，DOM 元素或包含这些类型的数组(or fragment) 。\n    optionalNode: React.PropTypes.node,\n\n    \/\/ React 元素\n    optionalElement: React.PropTypes.element,\n\n    \/\/ 你同样可以断言一个 prop 是一个类的实例。\n    \/\/ 用 JS 的 instanceof 操作符声明 prop 为类的实例。\n    optionalMessage: React.PropTypes.instanceOf(Message),\n\n    \/\/ 你可以用 enum 的方式\n    \/\/ 确保你的 prop 被限定为指定值。\n    optionalEnum: React.PropTypes.oneOf([\x27News\x27, \x27Photos\x27]),\n\n    \/\/ 指定的多个对象类型中的一个\n    optionalUnion: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.number,\n      React.PropTypes.instanceOf(Message)\n    ]),\n\n    \/\/ 指定类型组成的数组\n    optionalArrayOf: React.PropTypes.arrayOf(React.PropTypes.number),\n\n    \/\/ 指定类型的属性构成的对象\n    optionalObjectOf: React.PropTypes.objectOf(React.PropTypes.number),\n\n    \/\/ 特定形状参数的对象\n    optionalObjectWithShape: React.PropTypes.shape({\n      color: React.PropTypes.string,\n      fontSize: React.PropTypes.number\n    }),\n\n    \/\/ 你可以在任意东西后面加上 `isRequired`\n    \/\/ 来确保 如果 prop 没有提供 就会显示一个警告。\n    requiredFunc: React.PropTypes.func.isRequired,\n\n    \/\/ 不可空的任意类型\n    requiredAny: React.PropTypes.any.isRequired,\n\n    \/\/ 你可以自定义一个验证器。如果验证失败需要返回一个 Error 对象。\n    \/\/ 不要直接使用 `console.warn` 或抛异常，\n    \/\/ 因为这在 `oneOfType` 里不起作用。\n    customProp: function(props, propName, componentName) {\n      if (!\/matchme\/.test(props[propName])) {\n        return new Error(\x27Validation failed!\x27);\n      }\n    }\n  },\n  \/* ... *\/\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs roboconf\x22\x3e\x3ccode class=\x22jsx\x22\x3eReact.createClass({\n  \x3cspan class=\x22hljs-attribute\x22\x3epropTypes\x3c\/span\x3e: {\n    \/\/ 可以声明 prop 为指定的 JS 基本类型。默认\n    \/\/ 情况下，这些 prop 都是可传可不传的。\n    optionalArray: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.array\x3c\/span\x3e,\n    optionalBool: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.bool\x3c\/span\x3e,\n    optionalFunc: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.func\x3c\/span\x3e,\n    optionalNumber: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.number\x3c\/span\x3e,\n    optionalObject: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.object\x3c\/span\x3e,\n    optionalString: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.string\x3c\/span\x3e,\n    optionalSymbol: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.symbol\x3c\/span\x3e,\n\n    \/\/ 所有可以被渲染的对象：数字，\n    \/\/ 字符串，DOM 元素或包含这些类型的数组(or fragment) 。\n    optionalNode: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.node\x3c\/span\x3e,\n\n    \/\/ React 元素\n    optionalElement: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.element\x3c\/span\x3e,\n\n    \/\/ 你同样可以断言一个 prop 是一个类的实例。\n    \/\/ 用 JS 的 instanceof 操作符声明 prop 为类的实例。\n    optionalMessage: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.instanceOf\x3c\/span\x3e(Message),\n\n    \/\/ 你可以用 enum 的方式\n    \/\/ 确保你的 prop 被限定为指定值。\n    optionalEnum: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.oneOf\x3c\/span\x3e([\x27News\x27, \x27Photos\x27]),\n\n    \/\/ 指定的多个对象类型中的一个\n    optionalUnion: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.oneOfType\x3c\/span\x3e([\n      React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.string\x3c\/span\x3e,\n      React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.number\x3c\/span\x3e,\n      React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.instanceOf\x3c\/span\x3e(Message)\n    ]),\n\n    \/\/ 指定类型组成的数组\n    optionalArrayOf: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.arrayOf\x3c\/span\x3e(React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.number\x3c\/span\x3e),\n\n    \/\/ 指定类型的属性构成的对象\n    optionalObjectOf: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.objectOf\x3c\/span\x3e(React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.number\x3c\/span\x3e),\n\n    \/\/ 特定形状参数的对象\n    optionalObjectWithShape: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.shape\x3c\/span\x3e({\n      color: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.string\x3c\/span\x3e,\n      fontSize: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.number\x3c\/span\x3e\n    }),\n\n    \/\/ 你可以在任意东西后面加上 `isRequired`\n    \/\/ 来确保 如果 prop 没有提供 就会显示一个警告。\n    requiredFunc: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.func\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.isRequired\x3c\/span\x3e,\n\n    \/\/ 不可空的任意类型\n    requiredAny: React\x3cspan class=\x22hljs-variable\x22\x3e.PropTypes\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.any\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.isRequired\x3c\/span\x3e,\n\n    \/\/ 你可以自定义一个验证器。如果验证失败需要返回一个 Error 对象。\n    \/\/ 不要直接使用 `console\x3cspan class=\x22hljs-variable\x22\x3e.warn\x3c\/span\x3e` 或抛异常，\n    \/\/ 因为这在 `oneOfType` 里不起作用。\n    customProp: function(props, propName, componentName) {\n      if (!\/matchme\/\x3cspan class=\x22hljs-variable\x22\x3e.test\x3c\/span\x3e(props[propName])) {\n        return new Error(\x27Validation failed!\x27);\n      }\n    }\n  },\n  \/* ... *\/\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3edefaultProps\x3c\/h3\x3e\n\x3cp\x3e如何设置组件默认的\x3ccode\x3eprops\x3c\/code\x3e？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/React提供的crateClass创建方式\nvar Component = React.createClass({\n  getDefaultProps(){\n    return {\n      \/\/这里设置defaultProps\n    }\n  }\n})\n\/\/ES6\nclass Component {\n  ...\n}\nComponent.defaultProps = {}\n\/\/ES7 stage-0\nclass Component {\n  static defaultProps = {\n    \n  }\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/React提供的crateClass创建方式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Component = React.createClass({\n  getDefaultProps(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里设置defaultProps\x3c\/span\x3e\n    }\n  }\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ES6\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  ...\n}\nComponent.defaultProps = {}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ES7 stage-0\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e defaultProps = {\n    \n  }\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3estate\x3c\/h3\x3e\n\x3cp\x3e每个组件都有属于自己的\x3ccode\x3estate\x3c\/code\x3e，\x3ccode\x3estate\x3c\/code\x3e和\x3ccode\x3eprops\x3c\/code\x3e的区别在于前者之只存在于组件内部，只能从当前组件调用\x3ccode\x3ethis.setState\x3c\/code\x3e修改state值（不可以直接修改\x3ccode\x3ethis.state\x3c\/code\x3e）。一般我们更新子组件都是通过改变\x3ccode\x3estate\x3c\/code\x3e值，更新新子组件的\x3ccode\x3eprops\x3c\/code\x3e值从而达到更新。\x3c\/p\x3e\n\x3cp\x3e那如何设置默认state?\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/React提供的crateClass创建方式\nvar Component = React.createClass({\n  getInitialState(){\n    return {\n      \/\/这里设置初始state值\n    }\n  }\n})\n\/\/ES6 \x26amp;\x26amp; ES7\nclass Component {\n  constructor(){\n    this.state = {}\/\/在ES6中的构造函数中初始化，可以之直接赋值，在其他方法中，只能使用this.setState\n  }\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/React提供的crateClass创建方式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Component = React.createClass({\n  getInitialState(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里设置初始state值\x3c\/span\x3e\n    }\n  }\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ES6 \x26amp;\x26amp; ES7\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\x3cspan class=\x22hljs-comment\x22\x3e\/\/在ES6中的构造函数中初始化，可以之直接赋值，在其他方法中，只能使用this.setState\x3c\/span\x3e\n  }\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eprops和state使用方式\x3c\/h3\x3e\n\x3cp\x3e尽可能使用\x3ccode\x3eprops\x3c\/code\x3e当做数据源，\x3ccode\x3estate\x3c\/code\x3e用来存放状态值（简单的数据），如复选框、下拉菜单等。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e组件沟通\x3c\/h2\x3e\n\x3cp\x3e组件沟通因为React的单向数据流方式会有所限制，下面述说组件之间的沟通方式。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e父子组件沟通\x3c\/h3\x3e\n\x3cp\x3e这种方式是最常见的，也是最简单的。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e父组件更新组件状态\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e父组件更新子组件状态，通过传递\x3ccode\x3eprops\x3c\/code\x3e，就可以了。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e子组件更新父组件状态\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e这种情况需要父组件传递回调函数给子组件，子组件调用触发即可。\x3c\/p\x3e\n\x3cp\x3e代码示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Child extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  render(){\n    return (\n      \x3cdiv\x3e\n        {this.props.text}\n        \x3cbr \/\x3e\n        \x3cbutton onClick={this.props.refreshParent}\x3e\n            更新父组件\n        \x3c\/button\x3e\n      \x3c\/div\x3e\n    )\n  }\n}\nclass Parent extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  refreshChild(){\n    return (e)=\x3e{\n      this.setState({\n        childText: \x26quot;父组件沟通子组件成功\x26quot;,\n      })\n    }\n  }\n  refreshParent(){\n    this.setState({\n      parentText: \x26quot;子组件沟通父组件成功\x26quot;,\n    })\n  }\n  render(){\n    return (\n      \x3cdiv\x3e\n        \x3ch1\x3e父子组件沟通\x3c\/h1\x3e\n        \x3cbutton onClick={this.refreshChild()} \x3e\n            更新子组件\n        \x3c\/button\x3e\n        \x3cChild \n          text={this.state.childText || \x26quot;子组件未更新\x26quot;} \n          refreshParent={this.refreshParent.bind(this)}\n        \/\x3e\n        {this.state.parentText || \x26quot;父组件未更新\x26quot;}\n      \x3c\/div\x3e\n    )\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eChild\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.text}\n        \x26lt;br \/\x26gt;\n        \x26lt;button onClick={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.refreshParent}\x26gt;\n            更新父组件\n        \x26lt;\/button\x26gt;\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eParent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  refreshChild(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (e)=\x26gt;{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        childText: \x3cspan class=\x22hljs-string\x22\x3e\x22父组件沟通子组件成功\x22\x3c\/span\x3e,\n      })\n    }\n  }\n  refreshParent(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n      parentText: \x3cspan class=\x22hljs-string\x22\x3e\x22子组件沟通父组件成功\x22\x3c\/span\x3e,\n    })\n  }\n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        \x26lt;h1\x26gt;父子组件沟通\x26lt;\/h1\x26gt;\n        \x26lt;button onClick={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refreshChild()} \x26gt;\n            更新子组件\n        \x26lt;\/button\x26gt;\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eChild\x3c\/span\x3e \n          text={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.childText || \x3cspan class=\x22hljs-string\x22\x3e\x22子组件未更新\x22\x3c\/span\x3e} \n          refreshParent={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refreshParent.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)}\n        \/\x26gt;\n        {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.parentText || \x3cspan class=\x22hljs-string\x22\x3e\x22父组件未更新\x22\x3c\/span\x3e}\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecodepen例子\x3ca href=\x22https:\/\/codepen.io\/nange\/pen\/KgwRJk\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact组件之父子组件沟通\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22nange\/pen\/KgwRJk\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x26nbsp;。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e兄弟组件沟通\x3c\/h3\x3e\n\x3cp\x3e当两个组件有相同的父组件时，就称为兄弟组件（堂兄也算的）。按照React单向数据流方式，我们需要借助父组件进行传递，通过父组件回调函数改变兄弟组件的\x3ccode\x3eprops\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e方式一\x3c\/h4\x3e\n\x3cp\x3e通过\x3ccode\x3eprops\x3c\/code\x3e传递父组件回调函数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Brother1 extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  render(){\n    return (\n      \x3cdiv\x3e\n        \x3cbutton onClick={this.props.refresh}\x3e\n            更新兄弟组件\n        \x3c\/button\x3e\n      \x3c\/div\x3e\n    )\n  }\n}\nclass Brother2 extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  render(){\n    return (\n      \x3cdiv\x3e\n         {this.props.text || \x26quot;兄弟组件未更新\x26quot;}\n      \x3c\/div\x3e\n    )\n  }\n}\nclass Parent extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  refresh(){\n    return (e)=\x3e{\n      this.setState({\n        text: \x26quot;兄弟组件沟通成功\x26quot;,\n      })\n    }\n  }\n  render(){\n    return (\n      \x3cdiv\x3e\n        \x3ch2\x3e兄弟组件沟通\x3c\/h2\x3e\n        \x3cBrother1 refresh={this.refresh()}\/\x3e\n        \x3cBrother2 text={this.state.text}\/\x3e\n      \x3c\/div\x3e\n    )\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBrother1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        \x26lt;button onClick={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.refresh}\x26gt;\n            更新兄弟组件\n        \x26lt;\/button\x26gt;\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBrother2\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n         {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.text || \x3cspan class=\x22hljs-string\x22\x3e\x22兄弟组件未更新\x22\x3c\/span\x3e}\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eParent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  refresh(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (e)=\x26gt;{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        text: \x3cspan class=\x22hljs-string\x22\x3e\x22兄弟组件沟通成功\x22\x3c\/span\x3e,\n      })\n    }\n  }\n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        \x26lt;h2\x26gt;兄弟组件沟通\x26lt;\/h2\x26gt;\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eBrother1\x3c\/span\x3e refresh={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refresh()}\/\x26gt;\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eBrother2\x3c\/span\x3e text={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.text}\/\x26gt;\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecodepen例子：\x3ca href=\x22https:\/\/codepen.io\/nange\/pen\/xEbJVg\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact组件之兄弟组件沟通\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22nange\/pen\/xEbJVg\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e。\x3c\/p\x3e\n\x3ch4\x3e方式二\x3c\/h4\x3e\n\x3cp\x3e但是如果组件层次太深（如下图），上面的兄弟组件沟通方式就效率低了（不建议组件层次太深）。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006831823?w=278\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006831823?w=278\x26amp;h=300\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eReact提供了一种上下文方式（挺方便的），可以让子组件直接访问祖先的数据或函数，无需从祖先组件一层层地传递数据到子组件中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Brother1 extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  render(){\n    \n    return (\n      \x3cdiv\x3e\n        \x3cbutton onClick={this.context.refresh}\x3e\n            更新兄弟组件\n        \x3c\/button\x3e\n      \x3c\/div\x3e\n    )\n  }\n}\nBrother1.contextTypes = {\n  refresh: React.PropTypes.any\n}\nclass Brother2 extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  render(){\n    return (\n      \x3cdiv\x3e\n         {this.context.text || \x26quot;兄弟组件未更新\x26quot;}\n      \x3c\/div\x3e\n    )\n  }\n}\nBrother2.contextTypes = {\n  text: React.PropTypes.any\n}\nclass Parent extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {}\n  }\n  \n  getChildContext(){\n    return {\n      refresh: this.refresh(),\n          text: this.state.text,\n      }\n    }\n  \n  refresh(){\n    return (e)=\x3e{\n      this.setState({\n        text: \x26quot;兄弟组件沟通成功\x26quot;,\n      })\n    }\n  }\n  render(){\n    return (\n      \x3cdiv\x3e\n        \x3ch2\x3e兄弟组件沟通\x3c\/h2\x3e\n        \x3cBrother1 \/\x3e\n        \x3cBrother2 text={this.state.text}\/\x3e\n      \x3c\/div\x3e\n    )\n  }\n}\nParent.childContextTypes = {\n  refresh: React.PropTypes.any,\n  text: React.PropTypes.any,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBrother1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  render(){\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        \x26lt;button onClick={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.context.refresh}\x26gt;\n            更新兄弟组件\n        \x26lt;\/button\x26gt;\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-type\x22\x3eBrother1\x3c\/span\x3e.contextTypes = {\n  refresh: \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3ePropTypes\x3c\/span\x3e.any\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBrother2\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n         {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.context.text || \x3cspan class=\x22hljs-string\x22\x3e\x22兄弟组件未更新\x22\x3c\/span\x3e}\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-type\x22\x3eBrother2\x3c\/span\x3e.contextTypes = {\n  text: \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3ePropTypes\x3c\/span\x3e.any\n}\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eParent\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n  constructor(props){\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {}\n  }\n  \n  getChildContext(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      refresh: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refresh(),\n          text: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.text,\n      }\n    }\n  \n  refresh(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (e)=\x26gt;{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        text: \x3cspan class=\x22hljs-string\x22\x3e\x22兄弟组件沟通成功\x22\x3c\/span\x3e,\n      })\n    }\n  }\n  render(){\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;div\x26gt;\n        \x26lt;h2\x26gt;兄弟组件沟通\x26lt;\/h2\x26gt;\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eBrother1\x3c\/span\x3e \/\x26gt;\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eBrother2\x3c\/span\x3e text={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.text}\/\x26gt;\n      \x26lt;\/div\x26gt;\n    )\n  }\n}\n\x3cspan class=\x22hljs-type\x22\x3eParent\x3c\/span\x3e.childContextTypes = {\n  refresh: \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3ePropTypes\x3c\/span\x3e.any,\n  text: \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3ePropTypes\x3c\/span\x3e.any,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecodepen例子：\x3ca href=\x22https:\/\/codepen.io\/nange\/pen\/VKYBAX\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact组件之兄弟组件沟通2\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22nange\/pen\/VKYBAX\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e全局事件\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eFor communication between two components that don\x27t have a parent-child relationship, you can set up your own global event system. Subscribe to events in\x26nbsp;\x3ccode\x3ecomponentDidMount()\x3c\/code\x3e, unsubscribe in\x26nbsp;\x3ccode\x3ecomponentWillUnmount()\x3c\/code\x3e, and call\x26nbsp;\x3ccode\x3esetState()\x3c\/code\x3e\x26nbsp;when you receive an event.\x3ca href=\x22https:\/\/facebook.github.io\/flux\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFlux\x3c\/a\x3e\x26nbsp;pattern is one of the possible ways to arrange this.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e官网中提到可以使用全局事件来进行组件间的通信，官网推荐Flux（Facebook官方出的），还有Relay、Redux、trandux等第三方类库。这些框架思想都一致，都是统一管理组件state变化情况，达到\x3cstrong\x3e数据可控\x3c\/strong\x3e目的。本人使用了Redux，建议要会其中一种。对于EventEmitter或PostalJS这类的第三方库是不建议使用的，这类全局事件框架并没有统一管理组件数据变化，用多了会导致数据流不可控。\x3c\/p\x3e\n\x3cp\x3e这里就不细说，请选择其中一种类库，深入学习下。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e简单的组件交流我们可以使用上面非全局事件的简单方式，但是当项目复杂，组件间层次越来越深，上面的交流方式就不太合适（当然还是要用到的，简单的交流）。强烈建议使用Flux、Relay、Redux、trandux等类库其中一种，这些类库不只适合React，像Angular等都可以使用。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e参考文章\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.alloyteam.com\/2016\/01\/some-methods-of-reactjs-communication-between-components\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReactJS组件间沟通的一些方法\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.alloyteam.com\/2015\/09\/react-redux\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact 数据流管理架构之 Redux 介绍\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React 组件数据流 &amp;&amp; 组件间沟通</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006831820">https://segmentfault.com/a/1190000006831820</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jjiiiwk33f/" target="_blank">https://alili.tech/archive/jjiiiwk33f/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>