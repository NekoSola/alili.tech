<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="《每周一点canvas动画》—— 文字粒子"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>《每周一点canvas动画》—— 文字粒子 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/8nawgscig4f/",
				"appid": "1613049289050283", 
				"title": "《每周一点canvas动画》—— 文字粒子 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-09T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tda4awahqi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/584ekqeppw5/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&text=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&text=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&is_video=false&description=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8nawgscig4f%2f&title=%e3%80%8a%e6%af%8f%e5%91%a8%e4%b8%80%e7%82%b9canvas%e5%8a%a8%e7%94%bb%e3%80%8b%e2%80%94%e2%80%94%20%e6%96%87%e5%ad%97%e7%b2%92%e5%ad%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">《每周一点canvas动画》—— 文字粒子</h1><div class="meta"><div class="postdate"><time datetime="2019-02-09" itemprop="datePublished">2019-02-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/supperjet\/text-particles\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e代码文件\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e每周一点canvas动画系列文章目前已经更新了12篇，今天给大家发个福利。我们使用canvas来制作一个小的效果。这个小效果是我从codePen上看到的，我对其做了些修改增强，添加了一些新的功能。UI界面就如下图中看到的样子。我们要实现的效果就如我在图中操作的那样，在输入框中输入文字（不管中文，还是英文，还是各种表情也好）都可以在canvas画布中通过众多的粒子组成，在侧边栏中还有很多控件，它们可以控制粒子的各方面属性，以此来形成各种不同的绚丽效果。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6gy\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6gy\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e1.目录结构\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6eW\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6eW\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e2.UI界面\x3c\/h3\x3e\n\x3cp\x3eUI界面的组成很简单，主要有\x3ccode\x3e侧边栏控制台\x3c\/code\x3e和\x3ccode\x3ecanvas画布\x3c\/code\x3e两部分组成\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ccanvas id=\x26quot;canvas\x26quot;\x3e\x3c\/canvas\x3e\n\x3cdiv id=\x26quot;control\x26quot;\x3e...\x3c\/div\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26lt;canvas id=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e\x26gt;\x26lt;\/canvas\x26gt;\n\x26lt;div id=\x3cspan class=\x22hljs-string\x22\x3e\x22control\x22\x3c\/span\x3e\x26gt;...\x26lt;\/div\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在侧边栏中有一系列的控制条，他们控制着粒子的各种属性，包括文字输入框：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \x3cinput type=\x26quot;text\x26quot; id=\x26quot;message\x26quot; value=\x26quot;hahaha\x26quot; onchange=\x26quot;change()\x26quot;\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e \x26lt;input \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22message\x22\x3c\/span\x3e value=\x3cspan class=\x22hljs-string\x22\x3e\x22hahaha\x22\x3c\/span\x3e onchange=\x3cspan class=\x22hljs-string\x22\x3e\x22change()\x22\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e控制条\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cinput type=\x26quot;range\x26quot; id=\x26quot;gra\x26quot; value=\x26quot;0\x26quot; min=\x26quot;-1\x26quot; max=\x26quot;1\x26quot; step=\x26quot;0.1\x26quot; onchange=\x26quot;changeV()\x26quot;\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26lt;input \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22range\x22\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22gra\x22\x3c\/span\x3e value=\x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e min=\x3cspan class=\x22hljs-string\x22\x3e\x22-1\x22\x3c\/span\x3e max=\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e step=\x3cspan class=\x22hljs-string\x22\x3e\x220.1\x22\x3c\/span\x3e onchange=\x3cspan class=\x22hljs-string\x22\x3e\x22changeV()\x22\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e粒子选择\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cp style=\x26quot;margin: 0 0 20px 10px;\x26quot;\x3e\n      \x3cspan id=\x26quot;ball\x26quot;\x3e圆形\x3c\/span\x3e\n      \x3cspan id=\x26quot;rect\x26quot;\x3e方块\x3c\/span\x3e\n\x3c\/p\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26lt;p style=\x3cspan class=\x22hljs-string\x22\x3e\x22margin: 0 0 20px 10px;\x22\x3c\/span\x3e\x26gt;\n      \x26lt;span id=\x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e\x26gt;圆形\x26lt;\/span\x26gt;\n      \x26lt;span id=\x3cspan class=\x22hljs-string\x22\x3e\x22rect\x22\x3c\/span\x3e\x26gt;方块\x26lt;\/span\x26gt;\n\x26lt;\/p\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这我就不一一列举了！CSS样式文件主要是对UI界面的布局和样式处理，具体请查看代码文件。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e3.侧边栏滑动\x3c\/h3\x3e\n\x3cp\x3e当点击菜单按钮时，侧边栏滑出，再次点击缩回。采用\x3ccode\x3eclassList\x3c\/code\x3e来切换滑出和缩回的class,在\x3ccode\x3esidebar.js\x3c\/code\x3e中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var btn = document.getElementById(\x26quot;btn\x26quot;);\nvar control = document.getElementById(\x26quot;control\x26quot;);\n\nbtn.addEventListener(\x27click\x27, function(e){\n    control.classList.toggle(\x26quot;slide\x26quot;);\n}, false)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3evar btn = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22btn\x22\x3c\/span\x3e);\nvar control = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22control\x22\x3c\/span\x3e);\n\nbtn.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(e){\n    control.classList.toggle(\x3cspan class=\x22hljs-string\x22\x3e\x22slide\x22\x3c\/span\x3e);\n}, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样我们的基础界面就搭建完成。下面就到了我们这个动画的核心思想\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4.准备工作\x3c\/h3\x3e\n\x3cp\x3e首先，我们在我们的\x3ccode\x3eindex.js\x3c\/code\x3e文件中定义我们需要的一些变量\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var canvas = document.getElementById(\x27canvas\x27);\n    context = canvas.getContext(\x272d\x27);\n    W = canvas.width = window.innerWidth;\n     H = canvas.height = window.innerHeight;\n    gridY = 7, gridX = 7;\n    type = \x26quot;ball\x26quot;;\n\nvar message = document.getElementById(\x27message\x27),\n    gravity = document.getElementById(\x27gra\x27),\n    duration = document.getElementById(\x27dur\x27),\n    speed = document.getElementById(\x27speed\x27),\n    radius = document.getElementById(\x27rad\x27),\n    resolution = document.getElementById(\x27res\x27);\n\n   graVal = parseFloat(gravity.value);\n   durVal = parseFloat(duration.value);\n   spdVal = parseFloat(speed.value);\n   radVal = parseFloat(radius.value);\n   resVal = parseFloat(resolution.value);      \n\ncolors = [\n  \x27#f44336\x27, \x27#e91e63\x27, \x27#9c27b0\x27, \x27#673ab7\x27, \x27#3f51b5\x27,\n  \x27#2196f3\x27, \x27#03a9f4\x27, \x27#00bcd4\x27, \x27#009688\x27, \x27#4CAF50\x27,\n  \x27#8BC34A\x27, \x27#CDDC39\x27, \x27#FFEB3B\x27, \x27#FFC107\x27, \x27#FF9800\x27,\n  \x27#FF5722\x27\n  ];\n\nfunction change(){\n      。。。\n}\n\nfunction changeV() {\n     。。。\n}\n\n\n(function drawFrame(){\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, W, H);\n\n    。。。\n}())\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3evar canvas = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n    context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n    W = canvas.width = window.innerWidth;\n     H = canvas.height = window.innerHeight;\n    gridY = 7, gridX = 7;\n    \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e;\n\nvar message = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27message\x27\x3c\/span\x3e),\n    gravity = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27gra\x27\x3c\/span\x3e),\n    duration = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27dur\x27\x3c\/span\x3e),\n    speed = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27speed\x27\x3c\/span\x3e),\n    radius = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27rad\x27\x3c\/span\x3e),\n    resolution = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27res\x27\x3c\/span\x3e);\n\n   graVal = parseFloat(gravity.value);\n   durVal = parseFloat(duration.value);\n   spdVal = parseFloat(speed.value);\n   radVal = parseFloat(radius.value);\n   resVal = parseFloat(resolution.value);      \n\ncolors = [\n  \x3cspan class=\x22hljs-string\x22\x3e\x27#f44336\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#e91e63\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#9c27b0\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#673ab7\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#3f51b5\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27#2196f3\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#03a9f4\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#00bcd4\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#009688\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#4CAF50\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27#8BC34A\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#CDDC39\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#FFEB3B\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#FFC107\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#FF9800\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27#FF5722\x27\x3c\/span\x3e\n  ];\n\n\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3echange\x3c\/span\x3e\x3c\/span\x3e(){\n      。。。\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3echangeV\x3c\/span\x3e\x3c\/span\x3e() {\n     。。。\n}\n\n\n(\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e\x3c\/span\x3e(){\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, W, H);\n\n    。。。\n}())\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意这里的的context， W， H等我们定义的是全局变量。\x3cbr\x3e这里有两个变量可能你不知道他是干什么的\x3ccode\x3egridX\x3c\/code\x3e和\x3ccode\x3egridY\x3c\/code\x3e，之后我会详细介绍。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e5.shape.js 文件\x3c\/h3\x3e\n\x3cp\x3e这个文件是我们整个动画效果的核心，只有理解了它，你才能了解这个效果的实现原理。因为不是很长，这里我把文件全部列出：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Shape(x, y, texte){\n        this.x = x;\n        this.y = y;\n        this.size = 200;\n        this.text = texte;\n        this.placement = [];\n    }\nShape.prototype.getValue = function(){\n         context.textAlign = \x26quot;center\x26quot;;\n         context.font =  this.size \x2b \x26quot;px arial\x26quot;;\n         context.fillText(this.text, this.x, this.y);\n\n         var idata = context.getImageData(0, 0, W, H);\n         var buffer32 = new Uint32Array(idata.data.buffer);\n\n         for(var j=0; j \x3c H; j \x2b= gridY){\n             for(var i=0 ; i \x3c W; i \x2b= gridX){\n                 if(buffer32[j * W \x2b i]){\n                     var particle = new Particle(i, j, type);\n                     this.placement.push(particle);\n                 }\n             }\n         }\n         \n         context.clearRect(0, 0, W, H);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e Shape(x, y, texte){\n        this.x = x;\n        this.y = y;\n        this.size = 200;\n        this.text = texte;\n        this.placement = [];\n    }\nShape.prototype.getValue = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3efunction\x3c\/span\x3e\x3c\/span\x3e(){\n         context.textAlign = \x3cspan class=\x22hljs-string\x22\x3e\x22center\x22\x3c\/span\x3e;\n         context.font =  this.size \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px arial\x22\x3c\/span\x3e;\n         context.fillText(this.text, this.x, this.y);\n\n         var idata = context.getImageData(0, 0, W, H);\n         var buffer32 = new Uint32Array(idata.data.buffer);\n\n         \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(var j=0; j \x26lt; H; j \x2b= gridY){\n             \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(var i=0 ; i \x26lt; W; i \x2b= gridX){\n                 \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(buffer32[j * W \x2b i]){\n                     var particle = new Particle(i, j, \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e);\n                     this.placement.push(particle);\n                 }\n             }\n         }\n         \n         context.clearRect(0, 0, W, H);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来，我就详细的解一下该文件的代码！首先我们新建了一个构造函数\x3ccode\x3eShape\x3c\/code\x3e，该构造函数有3个参数:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ex , y: 要绘制的文字的位置\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etexte: 要绘制的文字\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们设置了文字的大小为200px, 并且定义了一个属性\x3ccode\x3eplacement\x3c\/code\x3e，这个属性是一个数组。so wired!它是干什么的呢？别急，继续往下走。\x3c\/p\x3e\n\x3cp\x3e接下来我们在原型对象上定义了一个方法\x3ccode\x3egetValue\x3c\/code\x3e.这几行代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 context.textAlign = \x26quot;center\x26quot;;\n context.font =  this.size \x2b \x26quot;px arial\x26quot;;\n context.fillText(this.text, this.x, this.y);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e context.textAlign = \x3cspan class=\x22hljs-string\x22\x3e\x22center\x22\x3c\/span\x3e;\n context.font =  this.size \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22px arial\x22\x3c\/span\x3e;\n context.fillText(this.text, this.x, this.y);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很简单，设置文字对其方式，字体大小，并且通过\x3ccode\x3efillText()\x3c\/code\x3e在canvas上绘制文字。如果此时在控制栏中输入文字，在index.js中新建一个shape对象，并把文字传入，再调用getValue方法就可以看到你已经把输入的文字绘制到了canvas中，当然这时候忽略下面的代码啊！\x3c\/p\x3e\n\x3cp\x3e回到正题，接下来我们调用了\x3ccode\x3econtext.getImageData()\x3c\/code\x3e，它是canvas绘制图片的API接口，通过它我们可以得到需要绘制的图片的数据内容。也许你会问，它是用来获取canvas上绘制的图片的数据内容，可是我们这并没有绘制图片啊？\x3c\/p\x3e\n\x3cp\x3e其实，该方法的作用并不只是局限于获取图片的内容。只要canvas上有内容，不管是绘制的文字，还是图形它都能获取，甚至是空白的canvas它也能获取，只不过此时的数据都是0。\x3c\/p\x3e\n\x3cp\x3e那么通过该API获取的内容是什么样的呢？首先，我们尝试获取一张空canvas的内容\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var canvas = document.getElementById(\x27canvas\x27),\n    context = canvas.getContext(\x272d\x27);\nvar imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n    console.log(imgData); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3evar canvas = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e),\n    context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\nvar imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n    console.log(imgData); \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e结果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6e1\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6e1\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们看到，这里的\x3ccode\x3eimgData\x3c\/code\x3e是一个对象，该对象的第一个属性就是\x3ccode\x3edata\x3c\/code\x3e,是一个8位无符号整数的类型化数组\x3ca href=\x22https:\/\/msdn.microsoft.com\/zh-cn\/library\/dn641188%28v=vs.94%29.aspx\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUint8ClampedArray\x3c\/a\x3e。打开data看看都有什么,这里我随便打开其中的一个看看。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6e2\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6e2\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因为canvas为空，所以数据都为零。现在我们换一下，在canvas中画一个蓝色的矩形。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22context.fillStyle = \x26quot;#49f\x26quot;;\ncontext.fillRect(0, 0, canvas.width,canvas.height);\nvar imgData = context.getImageData(0, 0, canvas.width, canvas.height);\nconsole.log(imgData);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3econtext.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22#49f\x22\x3c\/span\x3e;\ncontext.fillRect(0, 0, canvas.width,canvas.height);\nvar imgData = context.getImageData(0, 0, canvas.width, canvas.height);\nconsole.log(imgData);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6e4\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6e4\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看看，我们的的数据是不是不为零了！OK! 原理我在这解释的都差不多了，我们回到正题，看下一行代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var buffer32 = new Uint32Array(idata.data.buffer);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e var buffer32 = new Uint32Array(idata.data.buffer);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eidata.data.buffer\x3c\/code\x3e ,在这里我们调用Uint8ClampedArray对象的buffer属性，获取此数组引用的 \x3ccode\x3eArrayBuffer\x3c\/code\x3e。然后将它传入\x3ca href=\x22https:\/\/msdn.microsoft.com\/zh-cn\/library\/br230737%28v=vs.94%29.aspx\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUint32Array\x3c\/a\x3e对象(32位无符号整数值的类型化数组）。此时，我们看看上面绘制蓝色矩形的数据变成什么样了，首先数组长度变为[160000],刚好是上面的8位的四分之一\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6e7\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6e7\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e内容变为\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6fa\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6fa\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e相当于我们把一张图片的分辨率缩小了，以前有640000个数据， 现在只有160000个数据。当然，在本文中数据的内容不是我们所关心的。我们所关心的是在哪有数据。\x3c\/p\x3e\n\x3cp\x3e所以，接下来,就是在有数据的地方，放上我们的粒子\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22for(var j=0; j \x3c H; j \x2b= gridY){\n             for(var i=0 ; i \x3c W; i \x2b= gridX){\n                 if(buffer32[j * W \x2b i]){\n                     var particle = new Particle(i, j, type);\n                     this.placement.push(particle);\n                 }\n             }\n         }\n\n context.clearRect(0, 0, W, H); \/\/清除所画内容\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(var j=0; j \x26lt; H; j \x2b= gridY){\n             \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(var i=0 ; i \x26lt; W; i \x2b= gridX){\n                 \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(buffer32[j * W \x2b i]){\n                     var particle = new Particle(i, j, \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e);\n                     this.placement.push(particle);\n                 }\n             }\n         }\n\n context.clearRect(0, 0, W, H); \/\/清除所画内容\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们遍历整个canvas, 通过\x3ccode\x3ebuffer32[j * W \x2b i]\x3c\/code\x3e来判断这个位置的数据是否为空，如果不为空，那么，在这绘制一个粒子。粒子的位置为（i，j）我们作为参数传入。当然你也可以在数据为空的地方放上粒子，看看会出现什么样的效果。\x3c\/p\x3e\n\x3cp\x3e这里用到了gridX和gridY，它们的作用是来判断每个多少个距离取一次数据。学过信号抽样的同学应该很好理解，如果你间隔大，抽样得到的数据就小，反之如果你设定的间隔小，那么抽到的数据就多。在我们的效果中，我们绘制的是文字，同样的道理，间隔小获取的数据就多，粒子就多，组成的文字就完整。间隔大获取的就少。那么粒子组成的文字就不那么完整，这两个变量的值，通过分辨率控件来绑定。思来想去还是上张图吧！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx6fc\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx6fc\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e6.particles.js 文件\x3c\/h3\x3e\n\x3cp\x3e该文件就是我们的粒子文件，我就不做过多解释了,不懂得欢迎提问。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e7.粒子切换\x3c\/h3\x3e\n\x3cp\x3e粒子切换的代码在\x3ccode\x3eslide.js\x3c\/code\x3e中，很简单，就是绑定了两个事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/粒子切换\nvar ball = document.getElementById(\x26quot;ball\x26quot;);\nvar rect = document.getElementById(\x26quot;rect\x26quot;);\n\nfunction chose(particleName){\n    particleName.addEventListener(\x27click\x27, function(e){\n        this.style.backgroundColor = \x26quot;orange\x26quot;;\n        (particleName == ball ? rect : ball).style.backgroundColor = \x26quot;rgba(0, 0, 0, 0)\x26quot;;\n        type = (type === \x26quot;ball\x26quot; ? \x26quot;rect\x26quot; : \x26quot;ball\x26quot;);\n        change();\n        \n    }, false)\n}\n\nchose(ball);\nchose(rect);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\/粒子切换\nvar ball = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e);\nvar rect = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22rect\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e chose(particleName){\n    particleName.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(e){\n        this.style.backgroundColor = \x3cspan class=\x22hljs-string\x22\x3e\x22orange\x22\x3c\/span\x3e;\n        (particleName == ball ? rect : ball).style.backgroundColor = \x3cspan class=\x22hljs-string\x22\x3e\x22rgba(0, 0, 0, 0)\x22\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e = (\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e ? \x3cspan class=\x22hljs-string\x22\x3e\x22rect\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e);\n        change();\n        \n    }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n}\n\nchose(ball);\nchose(rect);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eOk！这个效果的关键点，基本都已经讲完了，有兴趣自己看看吧！！！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>《每周一点canvas动画》—— 文字粒子</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000005704935">https://segmentfault.com/a/1190000005704935</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/8nawgscig4f/" target="_blank">https://alili.tech/archive/8nawgscig4f/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>