<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="漫谈Web缓存"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>漫谈Web缓存 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qcoy9pzc5z/",
				"appid": "1613049289050283", 
				"title": "漫谈Web缓存 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-05T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/786d6bfemu/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/kayk26a059d/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&text=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&text=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&title=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&is_video=false&description=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&title=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&title=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&title=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqcoy9pzc5z%2f&title=%e6%bc%ab%e8%b0%88Web%e7%bc%93%e5%ad%98"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">漫谈Web缓存</h1><div class="meta"><div class="postdate"><time datetime="2019-02-05" itemprop="datePublished">2019-02-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e背景说明\x3c\/h2\x3e\n\x3cp\x3e缓存一直是前端性能优化中，浓墨重彩的一笔。了解前端缓存是打造高性能网站的必要知识。  \x3c\/p\x3e\n\x3cp\x3e之前，对于缓存的认知一直停留在看《HTTP权威指南》和一些相关帖子的深度，过了一段时间，又总是忘记，正好最近不是很忙，结合内网上的一些参考资料，结合实践，试着全面解析一下缓存以及其最佳实践。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e前后端交互中涉及到的缓存\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e前端\x3c\/h3\x3e\n\x3cp\x3e我们日常所见最多的也是我们最常利用的就是浏览器对于HTTP规范实现所进行的资源缓存，HTTP规范中，定义了4个缓存相关的字段。\x3cbr\x3e对HTTP感兴趣的同学也可以看我对《HTTP权威指南》的阅读笔记。\x3ca href=\x22http:\/\/blog.csdn.net\/liusheng95\/article\/category\/6204461\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《HTTP权威指南》\x3c\/a\x3e\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eRequest Headers\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3eResponse Headers\x3c\/th\x3e\n\x3cth align=\x22right\x22\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eExpires\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eExpires\x3c\/td\x3e\n\x3ctd align=\x22right\x22\x3eHTTP1.0中就开始支持的头字段，采用相对服务器时间来定义，但是因为服务器与浏览器时间不一定一致，所以不完全可靠\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eCache-Control\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eCache-Control\x3c\/td\x3e\n\x3ctd align=\x22right\x22\x3eHTTP1.1开始支持的字段，优先级比expires高，但是目前来说通常两者并存，采用绝对时间\x3ccode\x3eCache-Control: max-age=60\x3c\/code\x3e单位是秒\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eIf-Modified-Since\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eLast-Modified\x3c\/td\x3e\n\x3ctd align=\x22right\x22\x3e\n\x3ccode\x3eLast-Modified\x3c\/code\x3e表示上一次更改时间，注：这里的更改并非狭义上必须对内容进行相应的更改，哪怕是打开文件再直接进行保存也会刷新该时间。\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eIf-None-Match\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eEtag\x3c\/td\x3e\n\x3ctd align=\x22right\x22\x3eEtag则是与内容紧密相关的一个字段，是对文件内容进行Hash散列后得到的值(Hash会需要消耗一部分CPU时间)，比\x3ccode\x3eLast-Modified\x3c\/code\x3e可靠\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e以上是HTTP中关于缓存的头字段，浏览器其实只是一个HTTP协议的代理client，在十几年的发展中，为了满足用户，而不端增强自身功能，并加入了许多特性，最终成为我们看到的这个样子，\x3cbr\x3e正如QQ本身应该只是一款即时通信工具，但现在也如此巨无霸。\x3cbr\x3e正常情况下，我们只会对GET请求进行缓存，当然是否能对POST等其他类型的请求进行缓存呢？\x3cbr\x3e规范中指出，是可以的，只要设置了相应的头字段，即\x3ccode\x3eCache-Control\x3c\/code\x3e,\x3ccode\x3eExpires\x3c\/code\x3e等。但这里其实意义不大，我们之所以要做缓存，是因为当前互联网环境下，最影响性能，也就是最耗时的部分在于网络传输，\x3cbr\x3e在有限的带宽下，如何提高性能？这里就是缓存施展拳脚的天地了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e后端\x3c\/h3\x3e\n\x3cp\x3e后端的话，有两种缓存，一种是存储在disk硬盘中的，一种是存储在内存中的。相对来说，内存缓存速度快，但是容易造成内存泄漏，所以这部分需要慎重，需要良好的管理(听说淘宝首页就是H5页面，为了提高性能，选择常驻在内存中以提高分发速度)。\x3cbr\x3e后端的缓存主要是为了防止前端穿透到DB(databases)，因为后台主要的性能瓶颈大部分存在于查表，所以通过后端缓存，减少用户请求直接穿透到DB这种情况的发生，从而提高性能。 \x3c\/p\x3e\n\x3cp\x3e本文以前端为主，后端因为并不是非常专业的原因，仅简介如上，有兴趣的朋友可以再进行深入的研究。\x3c\/p\x3e\n\x3cp\x3e注：浏览器的缓存也是基于disk，缓存在硬盘上。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e前端缓存的套路\x3c\/h2\x3e\n\x3cp\x3e正如前文所说，前端的核心在于上述的4个头字段。\x3c\/p\x3e\n\x3cp\x3e以常见的请求一个CSS样式来说。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 第一次请求 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e通常服务器会传送这4个字段过来， 可能是4个都要，也可能一个字段也没有。这里主要讲解4个字段都存在的情况。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 第二次请求 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e前端：首先，浏览器会检查\x3ccode\x3eCache-Control\x3c\/code\x3e与\x3ccode\x3eExpires\x3c\/code\x3e，有\x3ccode\x3eCache-Control\x3c\/code\x3e的情况下,以其为标准，如果超时，则向后端发送请求，请求中会带上 \x3ccode\x3eIf-Modified-Since\x3c\/code\x3e,\x3ccode\x3eIf-None-Match\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e后台：后端服务器接收到请求之后，会对这两个字段进行对比，同样以\x3ccode\x3eIf-None-Match\x3c\/code\x3e为标准，没有\x3ccode\x3eIf-None-Match\x3c\/code\x3e的情况下,比对\x3ccode\x3eIf-Modified-Since\x3c\/code\x3e，如果比对后发现文件没有过期，即Etag没有发生变化，或者\x3ccode\x3eLast-Modified\x3c\/code\x3e与\x3ccode\x3eIf-Modified-Since\x3c\/code\x3e一致(只存在\x3ccode\x3eIf-Modified-Since\x3c\/code\x3e时)。如果改变了，就会发送新的文件，反之，则直接返回304。\x3c\/p\x3e\n\x3cp\x3e这里盗个图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006760686?w=692\x26amp;h=1031\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006760686?w=692\x26amp;h=1031\x22 alt=\x22流程图\x22 title=\x22流程图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e上面就是大致的请求流程。但是仅仅如此的话，距离真正的实践还是有一些距离的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e浏览器提供的三种刷新方式\x3c\/h3\x3e\n\x3cp\x3e我们之前假设的理想情况都是在第一种情况下，但是在现实场景中，不可能如规范那么如人意。所以浏览器提供了三种刷新方式。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eurl\x2benter或者a标签的超链接点击,点击前进后退按钮\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eF5刷新 或者 点击刷新按钮\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ectrl\x2bF5强制刷新\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e 那么，这三种情况有什么区别呢？ \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e第一种，其实就是我们理想的情况，特别注意一下，如果缓存没有过期，借助于Chrome的Network，我们会发现状态码是200，因为这里并没有向后端发起请求而是直接重现上次请求的结果，所以仍然是200，\x3cbr\x3e唯一不同的是他的size栏并不是显示他的大小，而是显示\x3ccode\x3efrom cache\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e第二种，则会直接无视\x3ccode\x3eCache-Control\x3c\/code\x3e与\x3ccode\x3eExpires\x3c\/code\x3e是否过期，而直接在\x3ccode\x3erequset headers\x3c\/code\x3e中设置\x3ccode\x3eCache-Control: max-age=0\x3c\/code\x3e,直接向服务器发送请求。\x3cbr\x3e服务器根据\x3ccode\x3eIf-None-Match\x3c\/code\x3e和\x3ccode\x3eIf-Modified-Since\x3c\/code\x3e进行判断是否过期。大多数情况下，我们对静态资源设置时间比较久，很多没有过期。这时候，我们就会看见许多304(另一种情况是过期后请求得到304)。\x3c\/p\x3e\n\x3cp\x3e第三种，同样直接无视\x3ccode\x3eCache-Control\x3c\/code\x3e与\x3ccode\x3eExpires\x3c\/code\x3e是否过期，并且设置\x3ccode\x3eCache-Control： no-cache\x3c\/code\x3e,也不会发送\x3ccode\x3eIf-None-Match\x3c\/code\x3e和\x3ccode\x3eIf-Modified-Since\x3c\/code\x3e。服务器则必须返回新的资源。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e如何开启缓存设置\x3c\/h3\x3e\n\x3cp\x3e既然知道缓存的好处，那么有哪些设置缓存的方式呢？主要有如下三种\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e配置apache或者ngix服务器，开启相应缓存模块\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e后端代码中动态设置\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e前端HTML页面meta标签\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e最省心省力的应该是第一种，也是最为常用的一种方式，第二三种，只能说是对其进行补充。\x3cbr\x3e我的是在腾讯云上买的服务器，配置方式参加:\x3ca href=\x22https:\/\/www.digitalocean.com\/community\/tutorials\/how-to-configure-apache-content-caching-on-ubuntu-14-04\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eubuntu上配置apache缓存\x3c\/a\x3e。\x3cbr\x3e\x3cstrong\x3e 配置的指导思想 \x3c\/strong\x3e\x3cbr\x3e服务器配置主要针对对象是静态资源，如图片，css，js等。\x3cbr\x3e通常对其进行类型匹配，然后设置过期时间。比如照片的过期时间则是设置的越长越好，比如1个月，而CSS与JS脚本也可以设置的比较久一些，但是HTML脚本则万万不要设置缓存时间。\x3cbr\x3e生产实践中为了满足尽可能的缓存久与版本更新的需求，通常会在构建的时候打上MD5码，因为所有静态资源都是通过HTML引入或者通过HTML页面见解引入，所以只需要控制住HTML中的请求对应更新版本即可\x3cbr\x3e完美的达到上述要求。\x3c\/p\x3e\n\x3cp\x3e第二种代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22res.set(\x27Cache-Control\x27, \x27max-age=60000\x27); \/\/ node express\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eres.set(\x27Cache-Control\x27, \x27\x3cspan class=\x22hljs-attr\x22\x3emax-age=\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e60000\x3c\/span\x3e\x27); \/\/ \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eexpress\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第三种代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cmeta http-equiv=\x26quot;cache-control\x26quot; content=\x26quot;max-age=60000\x26quot; \/\x3e\n\x3cmeta http-equiv=\x26quot;expires\x26quot; content=\x26quot;Tue, 01 Jan 1980 1:00:00 GMT\x26quot; \/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22cache-control\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22max-age=60000\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22expires\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Tue, 01 Jan 1980 1:00:00 GMT\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eCache-Control\x3c\/h3\x3e\n\x3cp\x3e为了降低网络链路的拥塞，在许多局域网中会设置许多的代理服务器，而这些代理服务器会缓存本局域网内最常用的一些资源，并根据算法动态的更新缓存的资源，以保持一定的命中率。\x3c\/p\x3e\n\x3cp\x3e这里\x3ccode\x3eCache-Control\x3c\/code\x3e就有一个public，private的属性值，默认是public。public表示允许代理服务器对其内容进行缓存，这样局域网内的其他主机要是第一次进行请求，如果在代理服务器上正好有相应的资源则可以避免前往遥远的目标服务器进行请求并返回相应的资源。当然这里结合CDN的使用会更好。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e消灭304\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3e304 Not Modified\x3c\/code\x3e 性能优化中，如果你经常看到许多304(当然，不包括你点击按钮这种刷新方式)。那么你该好好想想你设定的缓存时间是不是该延长一些了。\x3cbr\x3e304这个表示，你的请求发送到后端，后端判断并认为资源可以继续使用，直接使用本地缓存。但是这种方式下，虽然后端不会传相应的资源，但是请求的一来一回也是会花费时间的。\x3cbr\x3e并且给服务器一定的压力，所以性能优化中，有一条叫做\x3cstrong\x3e 消灭304 \x3c\/strong\x3e。尽可能的设置久缓存时间，通过md5码来管理版本。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e参考链接\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.alloyteam.com\/2016\/03\/discussion-on-web-caching\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e浅谈Web缓存\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/stackoverflow.com\/questions\/626057\/is-it-possible-to-cache-post-methods-in-http\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIs it possible to cache POST methods in HTTP?\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/liusheng95\/article\/category\/6204461\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《HTTP权威指南》\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.digitalocean.com\/community\/tutorials\/how-to-configure-apache-content-caching-on-ubuntu-14-04\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eubuntu上配置apache缓存\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3eWilsonLiu\x27s blog首发地址：\x3ca href=\x22http:\/\/blog.wilsonliu.cn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.wilsonliu.cn\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>漫谈Web缓存</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006671795">https://segmentfault.com/a/1190000006671795</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qcoy9pzc5z/" target="_blank">https://alili.tech/archive/qcoy9pzc5z/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>