<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ES6 Generators 工作原理"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ES6 Generators 工作原理 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/yt4n0dkfxl/",
				"appid": "1613049289050283", 
				"title": "ES6 Generators 工作原理 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v83mbjo4f9g/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/axkafrehxl5/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&text=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&text=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&title=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&is_video=false&description=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&title=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&title=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&title=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fyt4n0dkfxl%2f&title=ES6%20Generators%20%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ES6 Generators 工作原理</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e文章摘要\x3c\/h2\x3e\n\x3cp\x3eGenerator 是 ES6 添加的一个特性，允许函数的暂停和恢复，本文使用 generator 构建了一个惰性队列，并分析其原理。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e文章正文\x3c\/h2\x3e\n\x3cp\x3e编写正确运行的软件可能是困难的，但是我们知道这仅仅是挑战的开始。对一个好的解决方案建模可以把编程从 “可以运行” 转换到 “这样做更好”。相对的，有些事就像下面的注释一样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/\n\/\/亲爱的代码维护者：\n\/\/ \n\/\/一旦你试图优化代码，\n\/\/并且最终意识到这是一个错误的决定，\n\/\/请把下面的变量加一，\n\/\/来警告下一个家伙\n\/\/\n\/\/total_hours_wasted_here = 42\n\/\/\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/亲爱的代码维护者：\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/一旦你试图优化代码，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/并且最终意识到这是一个错误的决定，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/请把下面的变量加一，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/来警告下一个家伙\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/total_hours_wasted_here = 42\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e(源自： \x3ca href=\x22http:\/\/stackoverflow.com\/questions\/184618\/what-is-the-best-comment-in-source-code-you-have-ever-encountered\/482129#482129)\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/stackoverflow.com\/ques...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e今天，我们会去探索 ES6 Generators 的工作原理，从而更好的理解它并用新的方式来解决一些老的问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e非阻塞\x3c\/h2\x3e\n\x3cp\x3e你可能已经听过编写非阻塞 javascript 代码的重要性。当我们处理 I\/O 操作，比如发送 HTTP 请求或者写数据库，我们通常都会使用回调或者 promises。阻塞代码会冻结整个应用，在绝大多数场景下都不是一个可以被使用的方案。\x3c\/p\x3e\n\x3cp\x3e这样做的另外一个后果是，如果你写了一段无限循环的 javascript 代码，比如\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22node -e \x27while(true) {}\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enode -e \x3cspan class=\x22hljs-string\x22\x3e\x27while(true) {}\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它将很可能冻结你的电脑并且需要系统重启，请不要在家尝试。\x3c\/p\x3e\n\x3cp\x3e考虑到这些，当听到 ES6 Generators 允许我们在函数的中间暂停执行然后在未来的某个时候恢复执行时，感到非常好奇。\x3cbr\x3e虽然有些工具比如 Regenerator 和 Babel 已经把这些特性部署到了 ES5。你是否困惑过它们是怎样做到这些的？今天，我们会找到真相。\x3cbr\x3e希望我们可以更深入的理解 generators, 更好的发挥它的作用。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e一个惰性序列\x3c\/h2\x3e\n\x3cp\x3e让我们从一个简单的例子开始。比如你要操作一个序列，你可能会创建一个数组并且按照数组的方式操作其值。但是如果这个序列是无限长的呢？数组就不行了，我们可以使用 generator 函数来做：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function* generateRandoms (max) {\n  max = max || 1;\n\n  while (true) {\n    let newMax = yield Math.random() * max;\n    if (newMax !== undefined) {\n      max = newMax;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e* \x3cspan class=\x22hljs-title\x22\x3egenerateRandoms\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3emax\x3c\/span\x3e) \x3c\/span\x3e{\n  max = max || \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e newMax = \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * max;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newMax !== \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n      max = newMax;\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意 function* 部分，它标示这是一个 “generator 函数”，并且表现与普通函数不同。另一个重要的部分是 yield 关键字。普通的函数仅仅通过 return 返回结果，而 generator 函数在 yield 时返回结果。\x3c\/p\x3e\n\x3cp\x3e我们可以读出上面函数的意图 “每次你请求下一个值，它都会给你一个从 0  到 max 的值，直到程序退出（直到人类科技毁灭）。”\x3c\/p\x3e\n\x3cp\x3e根据上面的解读，我们仅仅在需要时才会得到一个值，这是非常重要的，否则，无限序列会很快的耗尽我们的内存。我们使用迭代器来获取需要的值：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var iterator = generateRandoms();\n\nconsole.log(iterator.next());     \/\/ { value: 0.4900301224552095, done: false }\nconsole.log(iterator.next());     \/\/ { value: 0.8244022422935814, done: false }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iterator = generateRandoms();\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(iterator.next());     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { value: 0.4900301224552095, done: false }\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(iterator.next());     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { value: 0.8244022422935814, done: false }\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eGenerators 允许两种交互，正如我们下面将要看到的，generators 在没有被调用时会被挂起，而当迭代器请求下一个值时会被唤醒。所以当我们屌用 iterator.next 并且传递了参数后，参数会被赋值到 newMax：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(iterator.next());     \/\/ { value: 0.4900301224552095, done: false }\n\n\/\/ 为 `newMax` 赋值，该值会一直存在\nconsole.log(iterator.next(1000)); \/\/ { value: 963.7744706124067, done: false }\nconsole.log(iterator.next());     \/\/ { value: 714.516609441489, done: false }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(iterator.next());     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { value: 0.4900301224552095, done: false }\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 为 `newMax` 赋值，该值会一直存在\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(iterator.next(\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { value: 963.7744706124067, done: false }\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(iterator.next());     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { value: 714.516609441489, done: false }\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e在 ES5 中使用 Generators\x3c\/h2\x3e\n\x3cp\x3e为了更好的理解 generators 工作原理，我们可以看一下 generators 是怎样转换成 ES5 代码的。你可以安装 babel 然后看一下它转换后的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install -g babel\n\nbabel generate-randoms.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3enpm install -g babel\n\nbabel generate-randoms.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是转换后的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var generateRandoms = regeneratorRuntime.mark(function generateRandoms(max) {\n  var newMax;\n  return regeneratorRuntime.wrap(function generateRandoms$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        max = max || 1;\n\n      case 1:\n        if (!true) {\n          context$1$0.next = 8;\n          break;\n        }\n        context$1$0.next = 4;\n        return Math.random() * max;\n      case 4:\n        newMax = context$1$0.sent;\n        if (newMax !== undefined) {\n          max = newMax;\n        }\n        context$1$0.next = 1;\n        break;\n      case 8:\n      case \x26quot;end\x26quot;:\n        return context$1$0.stop();\n    }\n  }, generateRandoms, this);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generateRandoms = regeneratorRuntime.mark(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerateRandoms\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emax\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newMax;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e regeneratorRuntime.wrap(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerateRandoms$\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3econtext$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3eprev = context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3enext) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\n        max = max || \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e) {\n          context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3enext = \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        }\n        context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3enext = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * max;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e:\n        newMax = context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3esent;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newMax !== \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n          max = newMax;\n        }\n        context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3enext = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22end\x22\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3estop();\n    }\n  }, generateRandoms, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如你所见，generator 函数的核心代码被转换成了 switch 块， 这对于我们探索其内部原理提供了很有价值的线索。我们可以把 generator 想象成一个循环状态机，它根据我们的交互切换不同的状态。变量 \x3ccode\x3econtext$1$0\x3c\/code\x3e 保存了当前的状态，case 语句都在该状态中之行。\x3c\/p\x3e\n\x3cp\x3e看一下这些 switch 块的条件：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecase 0: \x3c\/code\x3e 初始化 max 的值并且执行到了 \x3ccode\x3ecase1\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecase 1:\x3c\/code\x3e 返回一个随机值然后 \x3ccode\x3eGOTO 4\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ecase 4:\x3c\/code\x3e 检查迭代器是否设置了 newMax 的值，如果是，就更新 max 的值，然后 \x3ccode\x3eGOTO 1\x3c\/code\x3e, 返回一个随机值。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e这就解释了为什么 generator 可以在遵循非阻塞的原则上可以无限循环和暂停。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e何时退出循环\x3c\/h2\x3e\n\x3cp\x3e读者可能注意到我跳过了 9-12 行的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (!true) {\n    context$1$0.next = 8;\n    break;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e) {\n    context$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3enext = \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里发生了什么？它其实是原始代码 \x3ccode\x3ewhile (true)\x3c\/code\x3e 被转换后的代码。每当状态机循环时，它都会检查是否已经到了最后一步。在我们的示例中，是没有循环结束的，但你在编码时可能会遇到很多时候需要退出循环。当符合循环结束条件时，状态机 \x3ccode\x3eGOTO 8\x3c\/code\x3e， generator 之行完毕。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e迭代器中的私有状态\x3c\/h2\x3e\n\x3cp\x3e另外一个有趣的事情是 generator 是如何为每一个独立的迭代器保存私有状态的。因为变量 max 在 \x3ccode\x3eregeneratorRuntime.wrap\x3c\/code\x3e 的外层作用域，它的值会被保留以供之后的 \x3ccode\x3eiterator.next()\x3c\/code\x3e 访问。\x3cbr\x3e如果我们调用 \x3ccode\x3erandomNumbers()\x3c\/code\x3e 创建一个新的迭代器，那么一个新的闭包也会被创建。这也就解释了迭代器在使用同一个 generator 时有自己的私有状态而不会相互影响。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e状态机内部\x3c\/h2\x3e\n\x3cp\x3e目前为止，我们已经看到 switch 的本质就是状态机。你可能已经注意到这个函数被包了两层：\x3ccode\x3eregeneratorRuntime.mark\x3c\/code\x3e，\x3ccode\x3eregeneratorRuntime.wrap\x3c\/code\x3e。\x3cbr\x3e这些是 \x3ca href=\x22https:\/\/github.com\/facebook\/regenerator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregenerator\x3c\/a\x3e 模块，它可以在 ES5 中定义 ES6 generator 形式的状态机。\x3c\/p\x3e\n\x3cp\x3eRegenerator runtime 是一个很长的话题，但是我们会覆盖一些有趣的部分。首先，我们可以看到 generator 从 “Suspended Start” 状态开始：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emakeInvokeMethod\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einnerFn, self, context\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e state = GenStateSuspendedStart;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einvoke\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emethod, arg\x3c\/span\x3e) \x3c\/span\x3e{\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e源代码： \x3ca href=\x22https:\/\/github.com\/facebook\/regenerator\/blob\/v0.8.22\/runtime.js#L130-L133\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eruntime.js:130,133\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在这里并没有发生什么事，它仅仅是创建并返回了一个函数。这也意味着当我们调用 \x3ccode\x3evar iterator = generateRandoms()\x3c\/code\x3e， generateRandoms 内部并没有执行。\x3c\/p\x3e\n\x3cp\x3e当我们调用 \x3ccode\x3eiterator.next()\x3c\/code\x3e， generator 函数（之前switch 块中的内容）会在 tryCatch 中被调用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var record = tryCatch(innerFn, self, context);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = tryCatch(innerFn, self, context);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e源代码： \x3ca href=\x22https:\/\/github.com\/facebook\/regenerator\/blob\/v0.8.22\/runtime.js#L234\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eruntime.js:234\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e如果返回结果是普通的 return (而不是 throw)， 会把结果包装成 \x3ccode\x3e{value, done}\x3c\/code\x3e。新的状态是 \x3ccode\x3eGenStateCompleted\x3c\/code\x3e 或者 \x3ccode\x3eGenStateSuspendedYield\x3c\/code\x3e。由于我们的示例是无限循环，所以将总是跳转到挂起状态。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var record = tryCatch(innerFn, self, context);\n        if (record.type === \x26quot;normal\x26quot;) {\n          \/\/ If an exception is thrown from innerFn, we leave state ===\n          \/\/ GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e record = tryCatch(innerFn, self, context);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (record.type === \x3cspan class=\x22hljs-string\x22\x3e\x22normal\x22\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If an exception is thrown from innerFn, we leave state ===\x3c\/span\x3e\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ GenStateExecuting and loop back for another invocation.\x3c\/span\x3e\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e info = {\n            \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: record.arg,\n            \x3cspan class=\x22hljs-attr\x22\x3edone\x3c\/span\x3e: context.done\n          };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e源代码： \x3ca href=\x22https:\/\/github.com\/facebook\/regenerator\/blob\/v0.8.22\/runtime.js#L234-L245\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eruntime.js:234,245\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e你可以用它做什么？\x3c\/h2\x3e\n\x3cp\x3e今天我们用 generator 函数实现了一个惰性序列状态机。这个特性现在就可以使用： 现代浏览器都已经原生支持了 generator， 而对于老的浏览器，也很容易做代码转换。\x3c\/p\x3e\n\x3cp\x3e通常，做一件事情的方式有多种。从这种层面上讲，你可能不需要 generators，但如果它允许我们以一种更富表现力的方式完成目标，那就是值得的。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e作者信息\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e原文作者： Josh Johnston\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e原文链接： \x3ca href=\x22http:\/\/x-team.com\/2015\/04\/generators-work\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/x-team.com\/2015\/04\/gen...\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e翻译自MaxLeap团队_前端研发人员：Henry Bai\x3cbr\x3e译者简介：多年后端及前端开发经验，现任MaxLeap UX团队成员，主要从事MaxLeap相关开发，目前对React Native有浓厚兴趣。\x3cbr\x3e中文链接：\x3ca href=\x22https:\/\/blog.maxleap.cn\/archives\/1136\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/blog.maxleap.cn\/archi...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e相关文章\x3cbr\x3e\x3ca href=\x22https:\/\/blog.maxleap.cn\/archives\/727\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack 入门\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者往期佳作\x3cbr\x3e\x3ca href=\x22https:\/\/blog.maxleap.cn\/archives\/930\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRedux 最佳实践「译」\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e欢迎订阅微信公众号：MaxLeap_yidongyanfa\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e\x3cstrong\x3e关于MaxLeap\x3c\/strong\x3e\x3cbr\x3eMaxLeap 移动业务研发的云服务平台，为企业提供包括应用开发所需的后端云数据库、云数据源、云代码、云容器、 IM、移动支付、应用内社交、第三方登录、社交分享、数据分析、推送营销，用户支持等服务， MaxLeap 致力于让移动应用开发更快速简单。\x3cbr\x3e官网：\x3ca href=\x22https:\/\/maxleap.cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/maxleap.cn\/\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ES6 Generators 工作原理</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006777434">https://segmentfault.com/a/1190000006777434</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/yt4n0dkfxl/" target="_blank">https://alili.tech/archive/yt4n0dkfxl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>