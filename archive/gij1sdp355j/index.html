<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content=" 实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gij1sdp355j/",
				"appid": "1613049289050283", 
				"title": " 实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-15T02:30:44"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/y9eqaypgij/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5ed53lrrg7e/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&text=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&text=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&title=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&is_video=false&description=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&title=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&title=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&title=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgij1sdp355j%2f&title=%20%e5%ae%9e%e8%b7%b5%e6%98%af%e6%a3%80%e9%aa%8c%e7%a8%8b%e5%ba%8f%e5%91%98%e7%9a%84%e5%94%af%e4%b8%80%e6%a0%87%e5%87%8602%ef%bc%9a%e7%94%a8%e6%88%b7%e4%b8%8d%e6%83%b3%e8%b7%9f%e4%bd%a0%e8%af%b4%e8%af%9d%e5%b9%b6%e5%90%91%e4%bd%a0%e6%89%94%e5%87%ba%e4%b8%80%e5%bc%a0%e5%9b%be%e7%89%87%20-%20%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6%e5%bc%80%e5%8f%91%e3%80%90%e5%bc%80%e5%8f%91%e7%af%87%e3%80%91"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】</h1><div class="meta"><div class="postdate"><time datetime="2019-02-15" itemprop="datePublished">2019-02-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e温馨提示：这里除了一些幼稚的小组件啥也没有\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e写在前面\x3c\/h1\x3e\n\x3cp\x3e距离写完上一篇\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000013038300?_ea=4373226\x22\x3e实践是检验程序员的唯一标准01：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【思路篇】\x3c\/a\x3e过去了大半年，才开始写开发篇真的是令人悲哀，不过有句话说的好，开始做一件事最好的时间是大半年前，其次是现在\x3cbr\x3e上一篇偏设计和尝试技术能否实现，这一篇会在工程层面实现，并且保证他能被（轻易）引用！\x3cbr\x3e上一篇文章的评论里好多同学（差不多3个人）希望我传到git上。好吧，本文最终的劳动成果会放上去的，不过那是下一篇文章干的事了，不过这里我已经把全部源码贴上来了- -\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e功能完善\x3c\/h1\x3e\n\x3cp\x3e在之前那篇文章中，又习惯性的做了很多无用的设计，你就是一个上传图片的组件，低调点谢谢，所以最终我搞成了这样子\x3c\/p\x3e\n\x3cp\x3estate-1:初始状态\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbip19?w=684\x26amp;h=678\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbip19?w=684\x26amp;h=678\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3estate-2:完成载入状态\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbip2i?w=700\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbip2i?w=700\x26amp;h=668\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3estate-3:图片截取\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbip2p?w=1166\x26amp;h=688\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbip2p?w=1166\x26amp;h=688\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e总体来说，把能剩的按钮都省了，本体就是个框，适合放在任何地方，此外为了防止破坏页面的整体性，组件不再自带截图预览功能，而是通过事件的方式将所截取的图像的DataURL实时穿给父组件，方便父组件自由使用（图中的展示区就是在父组件中写的）\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e组件设计\x3c\/h1\x3e\n\x3cp\x3e在一开始设计组件的时候简直就是父母给孩子报课外班的心情，希望能尽可能的满足各种需求，但转头想想先把最基本的功能（做个好人）做好别的都是可以慢慢加上的（懒）\x3c\/p\x3e\n\x3cp\x3e要保证基本功能能（好）用，大概以下这几点：\x3cbr\x3e1.要让其大小可控，方便应用于不同场景，所以组件的宽高有必要成为参数\x3cbr\x3e2.对于被裁出的部分，在原图中看和拎出来单独看视觉上差别还挺大的，所以一个可以实时单独展现所截取内容的功能就挺重要的\x3cbr\x3e3.在大多数情况下，裁剪区域的选定可能是有固定比例的，所以要将是否限制比例以及按照什么比例作为参数，根据适用场景决定\x3c\/p\x3e\n\x3cp\x3e所以组件的参数和事件大概也就这么几个了\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e参数名：inputWidth\x3c\/strong\x3e\x3cbr\x3e说明：组件宽度\x3cbr\x3e类型：Number\x3cbr\x3e默认值：200px\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e参数名：inputHeight\x3c\/strong\x3e\x3cbr\x3e说明：组件高度\x3cbr\x3e类型：Number\x3cbr\x3e默认值：200px\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e参数名：cuttingRatio\x3c\/strong\x3e\x3cbr\x3e说明：裁剪比例，限定比例为宽\/高，为空时没有比例限制\x3cbr\x3e类型：Number\x3cbr\x3e默认值：0\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e事件名：getImageData\x3c\/strong\x3e\x3cbr\x3e说明：框选完成后鼠标抬起时触发，返回选定区域的图像数据\x3cbr\x3e参数：blobData\x3cbr\x3e参数格式：Blob对象\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e事件名：getImageDataURL\x3c\/strong\x3e\x3cbr\x3e说明：鼠标拖动的每一帧触发，返回选定区域的图像数据，可用于预览区域展示\x3cbr\x3e参数：dataURL\x3cbr\x3e参数格式：dataURL\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e代码实现\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eHTML框架搭建\x3c\/h2\x3e\n\x3cp\x3e由于功能很单一，HTML的布局也就很简单\x3cbr\x3e大概结构如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c根标签\x3e\n    \x3c提示信息 \/\x3e\/\/绝对定位，位于组件下方，初始状态不可见，载入图片后出现\n    \x3c重新选择按钮 \/\x3e\/\/绝对定位，位于组件右上角，初始状态不可见，载入图片后出现\n    \x3c初始及载入层 \/\x3e\/\/绝对定位，位于画布上方，大小与画布完全相同\n    \x3c画布 \/\x3e\/\/canvas\n    \x3c隐藏的input标签 \/\x3e\/\/不可见\n\x3c\/根标签\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-params\x22\x3e\x26lt;根标签\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-params\x22\x3e\x26lt;提示信息 \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/绝对定位，位于组件下方，初始状态不可见，载入图片后出现\x3c\/span\x3e\n    \x3cspan class=\x22hljs-params\x22\x3e\x26lt;重新选择按钮 \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/绝对定位，位于组件右上角，初始状态不可见，载入图片后出现\x3c\/span\x3e\n    \x3cspan class=\x22hljs-params\x22\x3e\x26lt;初始及载入层 \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/绝对定位，位于画布上方，大小与画布完全相同\x3c\/span\x3e\n    \x3cspan class=\x22hljs-params\x22\x3e\x26lt;画布 \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/canvas\x3c\/span\x3e\n    \x3cspan class=\x22hljs-params\x22\x3e\x26lt;隐藏的input标签 \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/不可见\x3c\/span\x3e\n\x3cspan class=\x22hljs-params\x22\x3e\x26lt;\/根标签\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eHTML代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv class=\x26quot;inputArea\x26quot; :style=\x26quot;{height:inputHeight\x2b\x27px\x27,width:inputWidth\x2b\x27px\x27}\x26quot;\x3e\n        \x3c!--提示区域--\x3e\n        \x3cdiv class=\x26quot;notice\x26quot; :class=\x26quot;{showNotice:noticeFlag}\x26quot;\x3e\n            \x22{{\x22notice\x22}}\x22\n            \x3cdiv class=\x26quot;close-notice\x26quot; @click=\x26quot;closeNotice\x26quot;\x3eX\x3c\/div\x3e\n        \x3c\/div\x3e\n        \x3c!--重新选择按钮--\x3e\n        \x3cdiv class=\x26quot;reloadBtn\x26quot; @click=\x26quot;openWindow\x26quot;\x3e\n            重新选择\n        \x3c\/div\x3e\n        \x3c!--初始及载入层--\x3e\n        \x3cdiv class=\x26quot;blankMask\x26quot; @click=\x26quot;openWindow\x26quot; v-if=\x26quot;loadFlag!=2\x26quot;\x3e\n            \x3cimg v-if=\x26quot;loadFlag==0\x26quot; src=\x26quot;..\/assets\/img.png\x26quot; \/\x3e\n            \x3cimg v-if=\x26quot;loadFlag==1\x26quot; src=\x26quot;..\/assets\/loading.png\x26quot; \/\x3e\n            \x3cdiv class=\x26quot;text\x26quot;\x3e\x22{{\x22loadFlag == 0?\x27点击浏览图片\x27:\x27加载中\x27\x22}}\x22\x3c\/div\x3e\n        \x3c\/div\x3e\n        \x3c!--画布--\x3e\n        \x3cdiv class=\x26quot;canvasArea\x26quot;\x3e\n            \x3ccanvas id=\x26quot;inputAreaCanvas\x26quot; @mousedown=\x26quot;setStartPoint\x26quot; @mousemove=\x26quot;drawArea\x26quot; @mouseup=\x26quot;reset\x26quot;\x3e    \n            \x3c\/canvas\x3e\n        \x3c\/div\x3e\n        \x3c!--隐藏的input标签--\x3e\n        \x3cinput id=\x26quot;input\x26quot; type=\x26quot;file\x26quot; @change=\x26quot;loadImg\x26quot; \/\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22inputArea\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:style\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{height:inputHeight\x2b\x27px\x27,width:inputWidth\x2b\x27px\x27}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--提示区域--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22notice\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{showNotice:noticeFlag}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22notice}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22close-notice\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22closeNotice\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eX\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--重新选择按钮--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22reloadBtn\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22openWindow\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            重新选择\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--初始及载入层--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22blankMask\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22openWindow\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loadFlag!=2\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loadFlag==0\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22..\/assets\/img.png\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loadFlag==1\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22..\/assets\/loading.png\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22loadFlag == 0?\x27点击浏览图片\x27:\x27加载中\x27}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--画布--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvasArea\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22inputAreaCanvas\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3emousedown\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22setStartPoint\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3emousemove\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawArea\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3emouseup\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22reset\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e    \n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--隐藏的input标签--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22input\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3echange\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loadImg\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对应的css如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cstyle\x3e    \n    .inputArea {\n        position: relative;\n        background: #000;\n    }\n\n    .inputArea .notice {\n        height: 30px;\n        line-height: 30px;\n        text-align: center;\n        background: #FFF;\n        color: #2C3E50;\n        font-size: 12px;\n        text-align: center;\n        position: absolute;\n        width: 90%;\n        margin-left: 5%;\n        left: 0px;\n        transition: all .5s;\n        bottom: -30px;\n        opacity: 0;\n        box-shadow: 0px 0px 5px rgba(0,0,0,0.3);\n        border-radius: 2px;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n    }\n\n    .inputArea .notice.showNotice {\n        bottom: 0px;\n        opacity: 1;\n    }\n    \n    .inputArea .notice .close-notice {\n        position: absolute;\n        right: 10px;\n        top: 0px;\n        height: 30px;\n        line-height: 30px;\n        cursor: pointer;\n    }\n    \n    .inputArea .reloadBtn {\n        height: 20px;\n        padding: 2px 5px 2px 5px;\n        text-align: center;\n        line-height: 20px;\n        font-size: 12px;\n        background: #FFFFFF;\n        box-shadow: 0px 0px 5px rgba(0,0,0,0.3);\n        color: #2C3E50;\n        position: absolute;\n        top: 5px;\n        right: 5px;\n        cursor: pointer;\n        transition: all 0.5s;\n    }\n    \n    .inputArea .reloadBtn:hover {\n        box-shadow: 0px 0px 8px rgba(0,0,0,0.5);\n    }\n\n    .inputArea .blankMask {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        color: gainsboro;\n        border-radius: 2px;\n        background: #FFF;\n        cursor: pointer;\n        flex-direction: column;\n        -ms-flex-direction: column;\n        justify-content: center;\n        -webkit-justify-content: center;\n        align-items: center;\n        -webkit-align-items: center;\n        transition: all 0.5s;\n        z-index: 2;\n    }\n    \n    .inputArea .blankMask:hover {\n        background: #F6F6F6;\n    }\n    \n    .inputArea .blankMask .text {\n        margin-top: 10px;\n        font-size: 16px;\n        font-weight: bold;\n    }\n    \n    .inputArea .blankMask img {\n        height: 40px;\n        width: 40px;\n    }\n\n    .inputArea .canvasArea {\n        display: flex;\n        align-items: center;\n        -webkit-align-items: center;\n        justify-content: center;\n        -webkit-justify-content: center;\n        height: 100%;\n        width: 100%;\n    }\n    \n    #input {\n        display: none;\n    }\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: relative;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#000\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.notice\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#FFF\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#2C3E50\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e12px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e90%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3emargin-left\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all .\x3cspan class=\x22hljs-number\x22\x3e5s\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebottom\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0,0,0,0.3);\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-moz-user-select\x3c\/span\x3e: none;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-ms-user-select\x3c\/span\x3e: none;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-user-select\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.notice\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.showNotice\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ebottom\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.notice\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.close-notice\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.reloadBtn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e12px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#FFFFFF\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0,0,0,0.3);\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#2C3E50\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n        \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.5s\x3c\/span\x3e;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.reloadBtn\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:hover\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8px\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0,0,0,0.5);\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.blankMask\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: flex;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: gainsboro;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#FFF\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n        \x3cspan class=\x22hljs-attribute\x22\x3eflex-direction\x3c\/span\x3e: column;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-ms-flex-direction\x3c\/span\x3e: column;\n        \x3cspan class=\x22hljs-attribute\x22\x3ejustify-content\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-justify-content\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ealign-items\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-align-items\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.5s\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ez-index\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.blankMask\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:hover\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#F6F6F6\x3c\/span\x3e;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.blankMask\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.text\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3emargin-top\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e16px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-weight\x3c\/span\x3e: bold;\n    }\n    \n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.blankMask\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e40px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e40px\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.inputArea\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.canvasArea\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: flex;\n        \x3cspan class=\x22hljs-attribute\x22\x3ealign-items\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-align-items\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ejustify-content\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3e-webkit-justify-content\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n    }\n    \n    \x3cspan class=\x22hljs-selector-id\x22\x3e#input\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e参数及变量定义以及对象初始化\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22props:{\n    inputWidth:{\n        type:Number,\n        default:200\n    },\n    inputHeight:{\n        type:Number,\n        default:200\n    },\n    cuttingRatio:{\n        type:Number,\n        default:0\n    }\n},\ndata() {\n    return {\n        mouseDownFlag: false,\/\/记录鼠标点击状态用标记\n        loadFlag: 0,\/\/记录图像家在状态用标记\n        resultImgData: {},\/\/被截取数据\n        input: {},\/\/输入框对象\n        imgObj: new Image(),\/\/图片对象\n        inputAreaCanvas: {},\/\/主体canvas对象\n        inputArea2D: {},\/\/主体CanvasRenderingContext2D对象\n        notice: \x26quot;拖拽鼠标框选所需要的区域\x26quot;,\/\/提示区域文本\n        noticeFlag: false,\/\/提示区域展示状态标记\n        dataURL:\x26quot;\x26quot;,\/\/被截取dataURL\n        tempCanvas:{},\/\/存放截取结果用canvas对象\n        tempCanvas2D:{},\/\/存放截取结果用CanvasRenderingContext2D对象\n        resetX:0,\/\/组件起点横坐标\n        resetY:0,\/\/组件起点纵坐标\n        \/*\n        181031改：其实并不用这两个变量\n        startX:0,\/\/截取开始点横坐标\n        startY:0,\/\/截取开始点纵坐标\n        *\/\n        resultX:0,\/\/截取结束点横坐标\n        resultY:0,\/\/截取结束点纵坐标\n    }\n},\nmounted: function() {\n    \/\/对象初始化\n    this.input = document.getElementById(\x27input\x27)\n    this.inputAreaCanvas = document.getElementById(\x26quot;inputAreaCanvas\x26quot;);\n    this.inputArea2D = this.inputAreaCanvas.getContext(\x26quot;2d\x26quot;);\n    this.tempCanvas = document.createElement(\x27canvas\x27);\n    this.tempCanvas2D = this.tempCanvas.getContext(\x272d\x27);\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3eprops:{\n    inputWidth:{\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e\n    },\n    inputHeight:{\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e\n    },\n    cuttingRatio:{\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    }\n},\ndata() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        mouseDownFlag: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/记录鼠标点击状态用标记\x3c\/span\x3e\n        loadFlag: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/记录图像家在状态用标记\x3c\/span\x3e\n        resultImgData: {},\x3cspan class=\x22hljs-comment\x22\x3e\/\/被截取数据\x3c\/span\x3e\n        input: {},\x3cspan class=\x22hljs-comment\x22\x3e\/\/输入框对象\x3c\/span\x3e\n        imgObj: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\x3cspan class=\x22hljs-comment\x22\x3e\/\/图片对象\x3c\/span\x3e\n        inputAreaCanvas: {},\x3cspan class=\x22hljs-comment\x22\x3e\/\/主体canvas对象\x3c\/span\x3e\n        inputArea2D: {},\x3cspan class=\x22hljs-comment\x22\x3e\/\/主体CanvasRenderingContext2D对象\x3c\/span\x3e\n        notice: \x3cspan class=\x22hljs-string\x22\x3e\x22拖拽鼠标框选所需要的区域\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/提示区域文本\x3c\/span\x3e\n        noticeFlag: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/提示区域展示状态标记\x3c\/span\x3e\n        dataURL:\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/被截取dataURL\x3c\/span\x3e\n        tempCanvas:{},\x3cspan class=\x22hljs-comment\x22\x3e\/\/存放截取结果用canvas对象\x3c\/span\x3e\n        tempCanvas2D:{},\x3cspan class=\x22hljs-comment\x22\x3e\/\/存放截取结果用CanvasRenderingContext2D对象\x3c\/span\x3e\n        resetX:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/组件起点横坐标\x3c\/span\x3e\n        resetY:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/组件起点纵坐标\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*\n        181031改：其实并不用这两个变量\n        startX:0,\/\/截取开始点横坐标\n        startY:0,\/\/截取开始点纵坐标\n        *\/\x3c\/span\x3e\n        resultX:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/截取结束点横坐标\x3c\/span\x3e\n        resultY:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/截取结束点纵坐标\x3c\/span\x3e\n    }\n},\nmounted: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/对象初始化\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27input\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputAreaCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22inputAreaCanvas\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputAreaCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x222d\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas2D = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e图片的读取\x3c\/h2\x3e\n\x3cp\x3e\x3cem\x3e此部分开始放在methods对象下\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e图片读取的功能主要设计两个方法：\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eopenWindow\x3c\/code\x3e方法主要用于触发隐藏的\x3ccode\x3e\x26lt;input\x26gt;\x3c\/code\x3e标签的文件读取功能\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/打开文件选择窗口\nopenWindow() {\n    this.input.click();\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/打开文件选择窗口\x3c\/span\x3e\nopenWindow() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input.\x3cspan class=\x22hljs-built_in\x22\x3eclick\x3c\/span\x3e();\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eloadImg\x3c\/code\x3e方法完成了以下几个步骤\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e新建一个FileReader对象用来读取选中的图片文件\x3c\/li\x3e\n\x3cli\x3e将原有的被选中的dataURL变量清空\x3c\/li\x3e\n\x3cli\x3e将读取的图片文件转为dataURL格式\x3c\/li\x3e\n\x3cli\x3e将dataURL赋给一个创建的image对象\x3c\/li\x3e\n\x3cli\x3e计算image对象的长宽比决定图片渲染方式\x3c\/li\x3e\n\x3cli\x3e获取canvas起点坐标\x3c\/li\x3e\n\x3cli\x3e将image对象中的图像数据赋给canvas\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/载入图片方法，当图片被选中后，input的value发生改变时触发\nloadImg() {\n    let vm = this;\n    let reader = new FileReader();\n    \/\/每次载入后传给父组件的dataURL清空\n    this.dataURL = \x27\x27;\n    \/\/文件为空时返回\n    if(this.input.files[0] == null) {\n        return\n    }\n    \/\/开始载入图片，并将数据通过dataURL的方式读取，展现载入层信息\n    this.loadFlag = 1;\n    reader.readAsDataURL(this.input.files[0]);\n    \/\/读取完成后将图像的dataURL数据赋给image对象的src的属性，使其加载图像\n    reader.onload = function(e) {\n        vm.imgObj.src = e.target.result;\n    }\n    \/\/图像加载完成，利用drawImage将image对象渲染至canvas\n    this.imgObj.onload = function() {\n        vm.loadFlag = 2;\n        vm.noticeFlag = true;\n         \/\/计算载入图像的长宽比，决定图片显示方式\n        let ratioHW = (vm.imgObj.height\/vm.imgObj.width)\n        \/\/每张图片根据比例不同，总有一个方向占满显示区域\n        if(ratioHW \x3e 1) {\n            vm.inputAreaCanvas.height = vm.inputHeight;\n            vm.inputAreaCanvas.width = vm.inputHeight \/ ratioHW;\n        } else {\n            vm.inputAreaCanvas.width = vm.inputWidth;\n            vm.inputAreaCanvas.height = vm.inputWidth * ratioHW;\n        }\n\n        \/*\n        181031改：其实并不用这两个变量，直接用offset属性即可\n        \/\/获取组件起点坐标\n        vm.resetX = vm.inputAreaCanvas.getBoundingClientRect().left;\n        vm.resetY = vm.inputAreaCanvas.getBoundingClientRect().top;\n        *\/\n        \n        \/\/将获取的图像数据选在至canvas\n        vm.inputArea2D.clearRect(0, 0, vm.inputAreaCanvas.width, vm.inputAreaCanvas.height);\n        vm.inputArea2D.drawImage(vm.imgObj, 0, 0, vm.inputAreaCanvas.width, vm.inputAreaCanvas.height);\n        vm.inputArea2D.fillStyle = \x27rgba(0,0,0,0.5)\x27; \/\/设定为半透明的黑色\n        vm.inputArea2D.fillRect(0, 0, vm.inputWidth, vm.inputHeight); \/\/矩形A\n    }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/载入图片方法，当图片被选中后，input的value发生改变时触发\x3c\/span\x3e\nloadImg() {\n    let vm = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    let reader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FileReader();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/每次载入后传给父组件的dataURL清空\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dataURL = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/文件为空时返回\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] == \x3cspan class=\x22hljs-keyword\x22\x3enull\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/开始载入图片，并将数据通过dataURL的方式读取，展现载入层信息\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.loadFlag = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    reader.readAsDataURL(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input.files[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/读取完成后将图像的dataURL数据赋给image对象的src的属性，使其加载图像\x3c\/span\x3e\n    reader.onload = function(e) {\n        vm.imgObj.src = e.target.result;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/图像加载完成，利用drawImage将image对象渲染至canvas\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.imgObj.onload = function() {\n        vm.loadFlag = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        vm.noticeFlag = \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e;\n         \x3cspan class=\x22hljs-comment\x22\x3e\/\/计算载入图像的长宽比，决定图片显示方式\x3c\/span\x3e\n        let ratioHW = (vm.imgObj.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e\/vm.imgObj.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/每张图片根据比例不同，总有一个方向占满显示区域\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(ratioHW \x26gt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = vm.inputHeight;\n            vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = vm.inputHeight \/ ratioHW;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = vm.inputWidth;\n            vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = vm.inputWidth * ratioHW;\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*\n        181031改：其实并不用这两个变量，直接用offset属性即可\n        \/\/获取组件起点坐标\n        vm.resetX = vm.inputAreaCanvas.getBoundingClientRect().left;\n        vm.resetY = vm.inputAreaCanvas.getBoundingClientRect().top;\n        *\/\x3c\/span\x3e\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/将获取的图像数据选在至canvas\x3c\/span\x3e\n        vm.inputArea2D.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e, vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n        vm.inputArea2D.drawImage(vm.imgObj, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e, vm.inputAreaCanvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n        vm.inputArea2D.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27rgba(0,0,0,0.5)\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/设定为半透明的黑色\x3c\/span\x3e\n        vm.inputArea2D.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, vm.inputWidth, vm.inputHeight); \x3cspan class=\x22hljs-comment\x22\x3e\/\/矩形A\x3c\/span\x3e\n    }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e图像的截取\x3c\/h2\x3e\n\x3cp\x3e图像截取功能包含四个方法：\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esetStartPoint\x3c\/code\x3e方法用于获取截取范围的起点以及更改点击状态\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/获取截取范围起始坐标，当鼠标在canvas标签上点击时触发\nsetStartPoint(e) {\n    this.mouseDownFlag = true; \/\/改变标记状态，置为点击状态\n    this.startX = e.offsetX \/\/获得起始点横坐标\n    this.startY = e.offsetY \/\/获得起始点纵坐标\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取截取范围起始坐标，当鼠标在canvas标签上点击时触发\x3c\/span\x3e\nsetStartPoint(e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.mouseDownFlag = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/改变标记状态，置为点击状态\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX = e.offsetX \x3cspan class=\x22hljs-comment\x22\x3e\/\/获得起始点横坐标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY = e.offsetY \x3cspan class=\x22hljs-comment\x22\x3e\/\/获得起始点纵坐标\x3c\/span\x3e\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3edrawArea\x3c\/code\x3e方法通过以下步骤实现了选定区域的展现和截取功能：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e取得实时鼠标坐标作为截取区域的终点\x3c\/li\x3e\n\x3cli\x3e在被选择区域外绘制半透明蒙版\x3c\/li\x3e\n\x3cli\x3e获取将所选区域图像对应imageData数据\x3c\/li\x3e\n\x3cli\x3e利用新建的canvas对象将imageData转为dataURL\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/选择截取范围，当鼠标被拖动时触发\ndrawArea(e) {\n     \/\/当鼠标被拖动时触发（处于按下状态且移动）\n    if(this.mouseDownFlag) {\n\n        \/*181031改：结束坐标的获取方式进行了优化，请忽略此处\n        \/\/在canvas标签上范围的终点横坐标\n        this.resultX = parseInt(e.clientX - this.resetX);\n        \/\/在canvas标签上范围的终点纵坐标，根据比例参数决定\n        if(this.cuttingRatio != 0) {\n            \/\/根据一定比例截取\n            this.resultY = this.startY \x2b parseInt((1 \/ this.cuttingRatio) * (this.resultX - this.startX))\n        } else {\n            \/\/自由截取\n            this.resultY = parseInt(e.clientY - this.resetY);\n        }\n        *\/\n        \n        \/\/在canvas标签上范围的终点横坐标\n        this.resultX = e.offsetX;\n        \/\/在canvas标签上范围的终点纵坐标，根据比例参数决定\n        if(this.cuttingRatio != 0) {\n            \/\/根据一定比例截取\n            this.resultY = this.startY \x2b parseInt((1 \/ this.cuttingRatio) * (this.resultX - this.startX))\n        } else {\n            \/\/自由截取\n            this.resultY = e.offsetX;\n        }\n        \/\/所选区域外阴影部分\n        this.inputArea2D.clearRect(0, 0, this.inputWidth, this.inputHeight); \/\/清空整个画面\n        this.inputArea2D.drawImage(this.imgObj, 0, 0, this.inputAreaCanvas.width, this.inputAreaCanvas.height); \/\/重新绘制图片\n        this.inputArea2D.fillStyle = \x27rgba(0,0,0,0.5)\x27; \/\/设定为半透明的白色\n        this.inputArea2D.fillRect(0, 0, this.resultX, this.startY); \/\/矩形A\n        this.inputArea2D.fillRect(this.resultX, 0, this.inputWidth, this.resultY); \/\/矩形B\n        this.inputArea2D.fillRect(this.startX, this.resultY, this.inputWidth - this.startX, this.inputHeight - this.resultY); \/\/矩形C\n        this.inputArea2D.fillRect(0, this.startY, this.startX, this.inputHeight - this.startY); \/\/矩形D\n        \/\/当选择区域大于0时，将所选范围内的图像数据实时返回\n        if(this.resultX - this.startX \x3e 0 \x26amp;\x26amp; this.resultY - this.startY \x3e 0) {\n            this.resultImgData = this.inputArea2D.getImageData(this.startX, this.startY, this.resultX - this.startX, this.resultY - this.startY);\n            \/\/canvas to DataURL\n            this.tempCanvas.width = this.resultImgData.width;\n            this.tempCanvas.height = this.resultImgData.height;\n            this.tempCanvas2D.putImageData(this.resultImgData, 0, 0)\n            this.dataURL = this.tempCanvas.toDataURL(\x27image\/jpeg\x27, 1.0);\n        }\n    }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/选择截取范围，当鼠标被拖动时触发\x3c\/span\x3e\ndrawArea(e) {\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/当鼠标被拖动时触发（处于按下状态且移动）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.mouseDownFlag) {\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*181031改：结束坐标的获取方式进行了优化，请忽略此处\n        \/\/在canvas标签上范围的终点横坐标\n        this.resultX = parseInt(e.clientX - this.resetX);\n        \/\/在canvas标签上范围的终点纵坐标，根据比例参数决定\n        if(this.cuttingRatio != 0) {\n            \/\/根据一定比例截取\n            this.resultY = this.startY \x2b parseInt((1 \/ this.cuttingRatio) * (this.resultX - this.startX))\n        } else {\n            \/\/自由截取\n            this.resultY = parseInt(e.clientY - this.resetY);\n        }\n        *\/\x3c\/span\x3e\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/在canvas标签上范围的终点横坐标\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX = e.offsetX;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/在canvas标签上范围的终点纵坐标，根据比例参数决定\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cuttingRatio != \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/根据一定比例截取\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY \x2b parseInt((\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cuttingRatio) * (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX))\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/自由截取\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY = e.offsetX;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/所选区域外阴影部分\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputWidth, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputHeight); \x3cspan class=\x22hljs-comment\x22\x3e\/\/清空整个画面\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.imgObj, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputAreaCanvas.width, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputAreaCanvas.height); \x3cspan class=\x22hljs-comment\x22\x3e\/\/重新绘制图片\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27rgba(0,0,0,0.5)\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/设定为半透明的白色\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY); \x3cspan class=\x22hljs-comment\x22\x3e\/\/矩形A\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.fillRect(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputWidth, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY); \x3cspan class=\x22hljs-comment\x22\x3e\/\/矩形B\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.fillRect(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputWidth - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputHeight - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY); \x3cspan class=\x22hljs-comment\x22\x3e\/\/矩形C\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputHeight - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY); \x3cspan class=\x22hljs-comment\x22\x3e\/\/矩形D\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/当选择区域大于0时，将所选范围内的图像数据实时返回\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultImgData = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputArea2D.getImageData(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startX, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultY - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startY);\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/canvas to DataURL\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas.width = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultImgData.width;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas.height = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultImgData.height;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas2D.putImageData(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resultImgData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dataURL = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tempCanvas.toDataURL(\x3cspan class=\x22hljs-string\x22\x3e\x27image\/jpeg\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e);\n        }\n    }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ereset\x3c\/code\x3e方法用于重制鼠标点击状态，并获取blob格式的所截图像数据，触发\x3ccode\x3egetImageData\x3c\/code\x3e事件将数据专递给父组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/结束选择截取范围，返回所选范围的数据，重制鼠标状态，当鼠标点击结束时触发\nreset() {\n    this.mouseDownFlag = false; \/\/将标志置为已抬起状态\n    let blob = this.dataURLtoBlob(this.dataURL)\n    this.$emit(\x27getImageData\x27, blob);\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/结束选择截取范围，返回所选范围的数据，重制鼠标状态，当鼠标点击结束时触发\x3c\/span\x3e\nreset() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.mouseDownFlag = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/将标志置为已抬起状态\x3c\/span\x3e\n    let blob = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dataURLtoBlob(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dataURL)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27getImageData\x27\x3c\/span\x3e, blob);\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3edataURLtoBlob方法的作用是将dataURL对象转化为Blob对象，来自\x3ca href=\x22https:\/\/www.cnblogs.com\/jyuf\/p\/7251591.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBlob\/DataURL\/canvas\/image的相互转换-Lorem\x3c\/a\x3e\x3cbr\x3e由于在IE中并不支持Canvas.toBlob，所以需要这里走个弯路，自己写一下这个方法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/DataURL to Blob，兼容IE\ndataURLtoBlob(dataurl) {\n    let arr = dataurl.split(\x27,\x27)\n    let mime = arr[0].match(\/:(.*?);\/)[1]\n    let bstr = atob(arr[1])\n    let n = bstr.length\n    let u8arr = new Uint8Array(n)\n    while(n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n    }\n    return new Blob([u8arr], {\n        type: mime\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/DataURL to Blob，兼容IE\x3c\/span\x3e\ndataURLtoBlob(dataurl) {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = dataurl.split(\x3cspan class=\x22hljs-string\x22\x3e\x27,\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mime = arr[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].match(\x3cspan class=\x22hljs-regexp\x22\x3e\/:(.*?);\/\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e bstr = atob(arr[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e])\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e n = bstr.length\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e u8arr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eUint8Array\x3c\/span\x3e(n)\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Blob([u8arr], {\n        \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: mime\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e其他方法\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/关闭提示信息\ncloseNotice() {\n    this.noticeFlag = false\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/关闭提示信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3ecloseNotice\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e {\n    this\x3cspan class=\x22hljs-selector-class\x22\x3e.noticeFlag\x3c\/span\x3e = false\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过监听\x3ccode\x3edataURL\x3c\/code\x3e的变化，将结果实时返回给父组件以达到预览的目的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22watch:{\n    dataURL:function(newVal,oldVal){\n        this.$emit(\x27getImageDataUrl\x27, this.dataURL)\/\/将所截图的dataURL返回给父组件，共预览使用\n    }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ewatch\x3c\/span\x3e:{\n    \x3cspan class=\x22hljs-attribute\x22\x3edataURL\x3c\/span\x3e:\x3cspan class=\x22hljs-built_in\x22\x3efunction\x3c\/span\x3e(newVal,oldVal){\n        this.$\x3cspan class=\x22hljs-built_in\x22\x3eemit\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27getImageDataUrl\x27\x3c\/span\x3e, this.dataURL)\/\/将所截图的dataURL返回给父组件，共预览使用\n    }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e应用方式\x3c\/h1\x3e\n\x3cp\x3e用起来嘛，就很简单了\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3ehtml\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv id=\x26quot;app\x26quot;\x3e      \n        \x3cMainBlock \n        @getImageData=\x26quot;getImageData\x26quot;\n        @getImageDataUrl=\x26quot;getImageDataUrl\x26quot;\n        :inputHeight=\x27300\x27 \n        :inputWidth=\x27300\x27 \n        \x3e\x3c\/MainBlock\x3e     \n        \x3cimg :src=\x26quot;src\x26quot;\/\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e      \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eMainBlock\x3c\/span\x3e \n        @\x3cspan class=\x22hljs-attr\x22\x3egetImageData\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22getImageData\x22\x3c\/span\x3e\n        @\x3cspan class=\x22hljs-attr\x22\x3egetImageDataUrl\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22getImageDataUrl\x22\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3e:inputHeight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27300\x27\x3c\/span\x3e \n        \x3cspan class=\x22hljs-attr\x22\x3e:inputWidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27300\x27\x3c\/span\x3e \n        \x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eMainBlock\x3c\/span\x3e\x26gt;\x3c\/span\x3e     \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22src\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3ejavascript\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\n    import MainBlock from \x27.\/components\/mainBlock\x27\n    export default {\n        name: \x27App\x27,\n        components: {\n            MainBlock,\n        },\n        data() {\n            return {\n                imageData: \x27\x27,\n                src: \x26quot;\x26quot;\n            }\n        },\n        methods: {\n            getImageData(imageData) {\n                this.imageData = imageData\n                console.log(this.imageData)\n            },\n            getImageDataUrl(dataUrl) {\n                this.src = dataUrl\n            }\n        },\n    }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e MainBlock \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/components\/mainBlock\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27App\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ecomponents\x3c\/span\x3e: {\n            MainBlock,\n        },\n        data() {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3eimageData\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\n            }\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n            getImageData(imageData) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.imageData = imageData\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.imageData)\n            },\n            getImageDataUrl(dataUrl) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.src = dataUrl\n            }\n        },\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader12\x22\x3e写在后面\x3c\/h1\x3e\n\x3cp\x3e第一次写相对独立的组件\x3cbr\x3e从有想法到完全实现成一个能用的组件，中间还是有很多路的，而且功能还简单的令人发质，怎么说呢感觉自己可以进步的空间还很大啊\x3cbr\x3e不过令人欣慰的是这个组件已经用在单位的一个项目中了，可喜可贺\x3cbr\x3e虽然拖了很久，不过还是有成就感的，希望能继续下去，谁知道能走到哪呢\x3c\/p\x3e\n\x3cp\x3e欢迎大家挑错提意见，虽然不情愿，但是接受\x3c\/p\x3e\n\x3cp\x3e能看到这的，功能应该都实现了把？！\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader13\x22\x3e181031修改\x3c\/h1\x3e\n\x3cp\x3e之前应该是脑子抽了，其实在\x3ccode\x3edrawArea\x3c\/code\x3e方法中，\x3ccode\x3ee.offsetX和e.offsetY\x3c\/code\x3e就是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22parseInt(e.clientX - this.resetX)\nparseInt(e.clientY - this.resetY)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3eparseInt\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e.clientX - this.resetX)\x3c\/span\x3e\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3eparseInt\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e.clientY - this.resetY)\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016743925">https://segmentfault.com/a/1190000016743925</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gij1sdp355j/" target="_blank">https://alili.tech/archive/gij1sdp355j/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/qpsy2j0ebq/">JavaScript: 什么是纯函数以及为什么要用纯函数?<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>