<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="温故js系列（14）-闭包&amp;垃圾回收&amp;内存泄露&amp;闭包应用&amp;作用域链&amp;再析闭包"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>温故js系列（14）-闭包&amp;垃圾回收&amp;内存泄露&amp;闭包应用&amp;作用域链&amp;再析闭包 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9ghlt4romd8/",
				"appid": "1613049289050283", 
				"title": "温故js系列（14）-闭包&amp;垃圾回收&amp;内存泄露&amp;闭包应用&amp;作用域链&amp;再析闭包 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-04T02:30:58"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/gm84gcxb9ba/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4s42teg7fwd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&text=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&text=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&title=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&is_video=false&description=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&title=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&title=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&title=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9ghlt4romd8%2f&title=%e6%b8%a9%e6%95%85js%e7%b3%bb%e5%88%97%ef%bc%8814%ef%bc%89-%e9%97%ad%e5%8c%85%26%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%26%e5%86%85%e5%ad%98%e6%b3%84%e9%9c%b2%26%e9%97%ad%e5%8c%85%e5%ba%94%e7%94%a8%26%e4%bd%9c%e7%94%a8%e5%9f%9f%e9%93%be%26%e5%86%8d%e6%9e%90%e9%97%ad%e5%8c%85"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">温故js系列（14）-闭包&amp;垃圾回收&amp;内存泄露&amp;闭包应用&amp;作用域链&amp;再析闭包</h1><div class="meta"><div class="postdate"><time datetime="2019-02-04" itemprop="datePublished">2019-02-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前端学习：\x3ca href=\x22https:\/\/github.com\/xiaohuazheng\/-\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e教程\x26amp;开发模块化\/规范化\/工程化\/优化\x26amp;工具\/调试\x26amp;值得关注的博客\/Git\x26amp;面试-前端资源汇总\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e欢迎提issues斧正：\x3ca href=\x22https:\/\/github.com\/xiaohuazheng\/tasteJs\/issues\/16\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e闭包\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eJavaScript-闭包\x3c\/h2\x3e\n\x3cp\x3e闭包(closure)是一个让人又爱又恨的something，它可以实现很多高级功能和应用，同时在理解和应用上有很多难点和需要小心注意的地方。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e闭包的定义\x3c\/h3\x3e\n\x3cp\x3e闭包，官方对闭包的解释是：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。\x3cbr\x3e简单来说，闭包就是能够读取其他函数内部变量的函数。在Javascript中，只有函数内部的子函数才能读取函数的局部变量，所以，可以把闭包理解成：定义在一个函数内部的函数，也就是函数嵌套函数，给函数内部和函数外部搭建起一座桥梁。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e闭包的特点\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e定义在一个函数内部的函数。\x3c\/li\x3e\n\x3cli\x3e函数内部可以引用函数外部的参数和变量。\x3c\/li\x3e\n\x3cli\x3e作为一个函数变量的一个引用，当函数返回时，其处于激活状态。\x3c\/li\x3e\n\x3cli\x3e当一个函数返回时，一个闭包就是一个没有释放资源的栈区。函数的参数和变量不会被垃圾回收机制回收。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e闭包的形成\x3c\/h3\x3e\n\x3cp\x3eJavascript允许使用内部函数，可以将函数定义和函数表达式放在另一个函数的函数体内。而且，内部函数可以访问它所在的外部函数声明的局部变量、参数以及声明的其他内部函数。当其中一个这样的内部函数在包含它们的外部函数之外被调用时，就会形成闭包。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function a() {  \n    var i = 0;  \n    function b() { \n        console.log(i\x2b\x2b); \n    }  \n    return b; \n}\nvar c = a(); \nc();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{  \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;  \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eb\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ \n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i\x2b\x2b); \n    }  \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e b; \n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e c = a(); \nc();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e闭包的缺点\x3c\/h3\x3e\n\x3cp\x3e1.由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大。所以在闭包不用之后，将不使用的局部变量删除，使其被回收。在IE中可能导致内存泄露，即无法回收驻留在内存中的元素，这时候需要手动释放。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function a() {  \n    var i = 1;  \n    function b() { \n        console.log(i\x2b\x2b); \n    }  \n    return b; \n}\nvar c = a(); \nc(); \/\/1\nc(); \/\/2\nc(); \/\/3   i不被回收\nc = null;  \/\/i被回收\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{  \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;  \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eb\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ \n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i\x2b\x2b); \n    }  \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e b; \n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e c = a(); \nc(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\nc(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/2\x3c\/span\x3e\nc(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/3   i不被回收\x3c\/span\x3e\nc = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/i被回收\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.闭包会在父函数外部，改变父函数内部变量的值。如果你把父函数当作对象使用，把闭包当作它的公用方法，把内部变量当作它的私有属性，要小心，不要随便改变父函数内部变量的值。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Xzavier = { \n    ten:10,  \n    addTen: function(num) {  \n       return this.ten \x2b num;   \/\/给一个数加10 \n   }    \n}\n \nconsole.log(Xzavier.addTen(15));  \/\/25\nXzavier.ten = 20; \nconsole.log(Xzavier.addTen(15));  \/\/35\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Xzavier = { \n    \x3cspan class=\x22hljs-attr\x22\x3eten\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,  \n    \x3cspan class=\x22hljs-attr\x22\x3eaddTen\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enum\x3c\/span\x3e) \x3c\/span\x3e{  \n       \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.ten \x2b num;   \x3cspan class=\x22hljs-comment\x22\x3e\/\/给一个数加10 \x3c\/span\x3e\n   }    \n}\n \n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(Xzavier.addTen(\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e));  \x3cspan class=\x22hljs-comment\x22\x3e\/\/25\x3c\/span\x3e\nXzavier.ten = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e; \n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(Xzavier.addTen(\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e));  \x3cspan class=\x22hljs-comment\x22\x3e\/\/35\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e内存泄露\x3c\/h3\x3e\n\x3cp\x3e内存泄漏指一块被分配的内存既不能使用，又不能回收，直到浏览器进程结束。\x3c\/p\x3e\n\x3cp\x3e出现原因：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.循环引用：含有DOM对象的循环引用将导致大部分当前主流浏览器内存泄露。循环 引用，简单来说假如a引用了b,b又引用了a,a和b就构成了循环引用。\n2.JS闭包：闭包，函数返回了内部函数还可以继续访问外部方法中定义的私有变量。\n3.Dom泄露，当原有的DOM被移除时，子结点引用没有被移除则无法回收。  \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e.循环引用：含有DOM对象的循环引用将导致大部分当前主流浏览器内存泄露。循环 引用，简单来说假如a引用了\x3cspan class=\x22hljs-selector-tag\x22\x3eb\x3c\/span\x3e,b又引用了\x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e,a和b就构成了循环引用。\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e.JS闭包：闭包，函数返回了内部函数还可以继续访问外部方法中定义的私有变量。\n\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e.Dom泄露，当原有的DOM被移除时，子结点引用没有被移除则无法回收。  \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eJavaScript垃圾回收机制\x3c\/h3\x3e\n\x3cp\x3eJavascript中，如果一个对象不再被引用，那么这个对象就会被GC(garbage collection)回收。如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。垃圾回收不是时时的，因为其开销比较大，所以垃圾回收器会按照固定的时间间隔周期性的执行。\x3c\/p\x3e\n\x3cp\x3e函数a被b引用，b又被a外的c引用，这就是为什么函数a执行后不会被回收的原因。\x3c\/p\x3e\n\x3cp\x3e垃圾回收的两个方法：\x3c\/p\x3e\n\x3cp\x3e标记清除法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.垃圾回收机制给存储在内存中的所有变量加上标记，然后去掉环境中的变量以及被环境中变量所引用的变量（闭包）。\n2.操作1之后内存中仍存在标记的变量就是要删除的变量，垃圾回收机制将这些带有标记的变量回收。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e垃圾回收机制给存储在内存中的所有变量加上标记，然后去掉环境中的变量以及被环境中变量所引用的变量（闭包）。\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e操作\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e之后内存中仍存在标记的变量就是要删除的变量，垃圾回收机制将这些带有标记的变量回收。\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e引用计数法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.垃圾回收机制给一个变量一个引用次数，当声明了一个变量并将一个引用类型赋值给该变量的时候这个值的引用次数就加1。\n2.当该变量的值变成了另外一个值，则这个值得引用次数减1。\n3.当这个值的引用次数变为0的时候，说明没有变量在使用，垃圾回收机制会在运行的时候清理掉引用次数为0的值占用的空间。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e垃圾回收机制给一个变量一个引用次数，当声明了一个变量并将一个引用类型赋值给该变量的时候这个值的引用次数就加\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e。\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e当该变量的值变成了另外一个值，则这个值得引用次数减\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e。\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e当这个值的引用次数变为\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e的时候，说明没有变量在使用，垃圾回收机制会在运行的时候清理掉引用次数为\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e的值占用的空间。\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e闭包的应用\x3c\/h3\x3e\n\x3ch4\x3e1.维护函数内的变量安全,避免全局变量的污染。\x3c\/h4\x3e\n\x3cp\x3e函数a中i只有函数b才能访问，而无法通过其他途径访问到。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function xzavier(){\n    var i = 1;\n    i\x2b\x2b;\n    console.log(i);\n}\nxzavier();   \/\/2 \nconsole.log(x);   \/\/ x is not defined                 \nxzavier();   \/\/2\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3exzavier\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    i\x2b\x2b;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i);\n}\nxzavier();   \x3cspan class=\x22hljs-comment\x22\x3e\/\/2 \x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(x);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ x is not defined                 \x3c\/span\x3e\nxzavier();   \x3cspan class=\x22hljs-comment\x22\x3e\/\/2\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2.维持一个变量不被回收。\x3c\/h4\x3e\n\x3cp\x3e由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1，且i不被垃圾回收机制回收。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function a() {  \n    var i = 1;  \n    function b() { \n        console.log(i\x2b\x2b); \n    }  \n    return b; \n}\nvar c = a(); \nc();  \/\/1\nc();  \/\/2\nc();  \/\/3\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{  \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;  \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eb\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ \n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i\x2b\x2b); \n    }  \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e b; \n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e c = a(); \nc();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\nc();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/2\x3c\/span\x3e\nc();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/3\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e3.通过第1点的特性设计私有的方法和属性。\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var xzavier = (function(){\n    var i = 1;\n    var s = \x27xzavier\x27;\n    function f(){\n        i\x2b\x2b;\n        console.log(i);\n    }\n    return {\n        i:i,\n        s:s,             \n        f:f\n    }\n})();\nxzavier.s;     \/\/\x27xzavier\x27\nxzavier.s;     \/\/1\nxzavier.f()    \/\/2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xzavier = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e s = \x3cspan class=\x22hljs-string\x22\x3e\x27xzavier\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ef\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        i\x2b\x2b;\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ei\x3c\/span\x3e:i,\n        \x3cspan class=\x22hljs-attr\x22\x3es\x3c\/span\x3e:s,             \n        \x3cspan class=\x22hljs-attr\x22\x3ef\x3c\/span\x3e:f\n    }\n})();\nxzavier.s;     \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27xzavier\x27\x3c\/span\x3e\nxzavier.s;     \x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\nxzavier.f()    \x3cspan class=\x22hljs-comment\x22\x3e\/\/2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e4.操作DOM获取目标元素\x3c\/h4\x3e\n\x3cp\x3e方法2即使用了闭包的方法，当然操作DOM还是有别的方法的，比如事件委托就比较好用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ul id=\x26quot;test\x26quot;\x3e\n    \x3cli\x3efirst\x3c\/li\x3e\n    \x3cli\x3esecond\x3c\/li\x3e\n    \x3cli\x3ethird\x3c\/li\x3e\n\x3c\/ul\x3e\n\/\/ 方法一：this方法\nvar lis = document.getElementById(\x27test\x27).getElementsByTagName(\x27li\x27);\nfor(var i = 0;i \x3c 3;i\x2b\x2b){\n    lis[i].index = i;\n    lis[i].onclick = function(){\n        console.log(this.index);\n    };\n} \n\/\/ 方法二：闭包方法\nvar lis = document.getElementById(\x27test\x27).getElementsByTagName(\x27li\x27);\nfor(var i = 0;i \x3c 3;i\x2b\x2b){\n    lis[i].index = i;\n    lis[i].onclick = (function(val){\n        return function() {\n            console.log(val);\n        }\n    })(i);\n}\n\/\/ 方法三 事件委托方法\nvar oUl = document.getElementById(\x27test\x27);\noUl.addEventListener(\x27click\x27,function(e){\n    var lis = e.target;\n    console.log(lis); \n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3eul id=\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;first\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;second\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;third\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n\x26lt;\/ul\x26gt;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 方法一：this方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e = document.getElementById(\x27\x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e\x27).getElementsByTagName(\x27\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x27);\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = 0;i \x26lt; 3;i\x2b\x2b){\n    \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e[i].index = i;\n    \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e[i].onclick = function(){\n        console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(this.index);\n    };\n} \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 方法二：闭包方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e = document.getElementById(\x27\x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e\x27).getElementsByTagName(\x27\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x27);\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = 0;i \x26lt; 3;i\x2b\x2b){\n    \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e[i].index = i;\n    \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e[i].onclick = (function(val){\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e function() {\n            console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(val);\n        }\n    })(i);\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 方法三 事件委托方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oUl = document.getElementById(\x27\x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e\x27);\noUl.addEventListener(\x27click\x27,function(\x3cspan class=\x22hljs-keyword\x22\x3ee\x3c\/span\x3e){\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ee\x3c\/span\x3e.target;\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elis\x3c\/span\x3e); \n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e5.封装模块\x3c\/h4\x3e\n\x3cp\x3e逻辑随业务复杂而复杂O(∩_∩)O~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Xzavier = function(){       \n    var name = \x26quot;xzavier\x26quot;;       \n    return {    \n       getName : function(){    \n           return name;    \n       },    \n       setName : function(newName){    \n           name = newName;    \n       }    \n    }    \n}();    \n\nconsole.log(person.name); \/\/undefined，变量作用域为函数内部，外部无法访问    \nconsole.log(person.getName()); \/\/ \x26quot;xzavier\x26quot; \nperson.setName(\x26quot;xz\x26quot;);    \nconsole.log(person.getName());  \/\/\x26quot;xz\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Xzavier = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{       \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = \x3cspan class=\x22hljs-string\x22\x3e\x22xzavier\x22\x3c\/span\x3e;       \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {    \n       \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{    \n           \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e name;    \n       },    \n       \x3cspan class=\x22hljs-attr\x22\x3esetName\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enewName\x3c\/span\x3e)\x3c\/span\x3e{    \n           name = newName;    \n       }    \n    }    \n}();    \n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(person.name); \x3cspan class=\x22hljs-comment\x22\x3e\/\/undefined，变量作用域为函数内部，外部无法访问    \x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(person.getName()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22xzavier\x22 \x3c\/span\x3e\nperson.setName(\x3cspan class=\x22hljs-string\x22\x3e\x22xz\x22\x3c\/span\x3e);    \n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(person.getName());  \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22xz\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e6.实现类和继承\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Xzavier(){       \n    var name = \x26quot;xzavier\x26quot;;       \n    return {    \n       getName : function(){    \n           return name;    \n       },    \n       setName : function(newName){    \n           name = newName;    \n       }    \n    }    \n}\n\nvar xz = new Xzavier();  \/\/Xzavier就是一个类，可以实例化\nconsole.log(xz.getName());  \/\/ \x26quot;xzavier\x26quot;  \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eXzavier\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{       \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = \x3cspan class=\x22hljs-string\x22\x3e\x22xzavier\x22\x3c\/span\x3e;       \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {    \n       \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{    \n           \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e name;    \n       },    \n       \x3cspan class=\x22hljs-attr\x22\x3esetName\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enewName\x3c\/span\x3e)\x3c\/span\x3e{    \n           name = newName;    \n       }    \n    }    \n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xz = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Xzavier();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/Xzavier就是一个类，可以实例化\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(xz.getName());  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22xzavier\x22  \x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里是原型继承，我会在下一篇文章讲一讲原型继承。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var X = function(){};\nX.prototype = new Xzavier(); \nX.prototype.sports = function(){\n    console.log(\x26quot;basketball\x26quot;);\n};\nvar x = new X();\nx.setName(\x26quot;xz\x26quot;);\nx.sports();  \/\/\x26quot;basketball\x26quot;\nconsole.log(x.getName());  \/\/\x26quot;xz\x26quot;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e X = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{};\nX.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Xzavier(); \nX.prototype.sports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22basketball\x22\x3c\/span\x3e);\n};\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e X();\nx.setName(\x3cspan class=\x22hljs-string\x22\x3e\x22xz\x22\x3c\/span\x3e);\nx.sports();  \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22basketball\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(x.getName());  \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22xz\x22\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eJavaScript作用域链\x3c\/h3\x3e\n\x3cp\x3eJavaScript作用域\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。\n在JavaScript中，变量的作用域有全局作用域和局部作用域两种。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3e作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。\n在\x3cspan class=\x22hljs-keyword\x22\x3eJavaScript中，变量的作用域有全局作用域和局部作用域两种。\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eJavaScript作用域链\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22JavaScript函数对象拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。\n其中一个内部属性是[[Scope]]，该内部属性包含了函数被创建的作用域中对象的集合。\n这个集合被称为函数的作用域链。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lua\x22\x3e\x3ccode\x3eJavaScript函数对象拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。\n其中一个内部属性是\x3cspan class=\x22hljs-string\x22\x3e[[Scope]]\x3c\/span\x3e，该内部属性包含了函数被创建的作用域中对象的集合。\n这个集合被称为函数的作用域链。\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行上下文\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22当函数执行时，会创建一个执行上下文(execution context)，执行上下文是一个内部对象，定义了函数执行时的环境。\n每个执行上下文都有自己的作用域链，用于标识符解析。\n当执行上下文被创建时，而它的作用域链初始化为当前运行函数的[[Scope]]包含的对象。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lua\x22\x3e\x3ccode\x3e当函数执行时，会创建一个执行上下文(execution context)，执行上下文是一个内部对象，定义了函数执行时的环境。\n每个执行上下文都有自己的作用域链，用于标识符解析。\n当执行上下文被创建时，而它的作用域链初始化为当前运行函数的\x3cspan class=\x22hljs-string\x22\x3e[[Scope]]\x3c\/span\x3e包含的对象。\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e活动对象\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22这些值按照它们出现在函数中的顺序被复制到执行上下文的作用域链中。\n它们共同组成了一个新的对象，活动对象(activation object)。\n该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端。\n当执行上下文被销毁，活动对象也随之销毁。\n活动对象是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e这些值按照它们出现在函数中的顺序被复制到执行上下文的作用域链中。\n它们共同组成了一个新的对象，活动对象(activation \x3cspan class=\x22hljs-keyword\x22\x3eobject\x3c\/span\x3e)。\n该对象包含了函数的所有局部变量、命名参数、参数集合以及\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e，然后此对象会被推入作用域链的前端。\n当执行上下文被销毁，活动对象也随之销毁。\n活动对象是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e查找机制:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.当函数访问一个变量时，先搜索自身的活动对象，如果存在则返回，如果不存在将继续搜索函数父函数的活动对象，依次查找，直到找到为止。\n2.如果函数存在prototype原型对象，则在查找完自身的活动对象后先查找自身的原型对象，再继续查找。\n3.如果整个作用域链上都无法找到，则返回undefined。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e当函数访问一个变量时，先搜索自身的活动对象，如果存在则返回，如果不存在将继续搜索函数父函数的活动对象，依次查找，直到找到为止。\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e如果函数存在prototype原型对象，则在查找完自身的活动对象后先查找自身的原型对象，再继续查找。\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e如果整个作用域链上都无法找到，则返回undefined。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在执行上下文的作用域链中，标识符所在的位置越深，读写速度就会越慢。全局变量总是存在于执行上下文作用域链的最末端，因此在标识符解析的时候，查找全局变量是最慢的。\x3c\/p\x3e\n\x3cp\x3eso\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22在编写代码的时候应尽量少使用全局变量，尽可能使用局部变量。\n我们经常使用局部变量先保存一个多次使用的需要跨作用取的值再使用。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e在编写代码的时候应尽量少使用全局变量，尽可能使用局部变量。\n我们经常使用局部变量先保存一个多次使用的需要跨作用取的值再使用。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e再析闭包\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function a() {  \n    var i = 1;  \n    function b() { \n        console.log(i\x2b\x2b); \n    }  \n    return b; \n}\nvar c = a(); \nc();\n\n1.当定义函数a，js解释器将函数a的作用域链设置为定义a时a所在的环境。\n2.执行函数a的时候，a会进入相应的执行上下文。\n3.在创建执行上下文的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为a的作用域链。\n4.然后执行上下文会创建一个活动对象。\n5.创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。\n6.接着在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。\n7.最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。    \n  在这一步中，完成了函数b的的定义（如同a），函数b的作用域链被设置为b所被定义的环境，即a的作用域。\n8.整个函数a从定义到执行的步骤完成。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ea()\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\x3c\/span\x3e  \n    \x3cspan class=\x22hljs-comment\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ei\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e1;\x3c\/span\x3e  \n    \x3cspan class=\x22hljs-comment\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3eb()\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\x3c\/span\x3e \n        \x3cspan class=\x22hljs-comment\x22\x3econsole\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3elog(i\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e\x2b\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e\x2b\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e);\x3c\/span\x3e \n    \x3cspan class=\x22hljs-comment\x22\x3e}\x3c\/span\x3e  \n    \x3cspan class=\x22hljs-comment\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3eb;\x3c\/span\x3e \n\x3cspan class=\x22hljs-comment\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ec\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ea();\x3c\/span\x3e \n\x3cspan class=\x22hljs-comment\x22\x3ec();\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e当定义函数a，js解释器将函数a的作用域链设置为定义a时a所在的环境。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e2\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e执行函数a的时候，a会进入相应的执行上下文。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e3\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e在创建执行上下文的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为a的作用域链。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e然后执行上下文会创建一个活动对象。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e5\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e6\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e接着在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e7\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。\x3c\/span\x3e    \n  \x3cspan class=\x22hljs-comment\x22\x3e在这一步中，完成了函数b的的定义（如同a），函数b的作用域链被设置为b所被定义的环境，即a的作用域。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e8\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e整个函数a从定义到执行的步骤完成。\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ea返回函数b的引用给c，因为函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收，所以形成了闭包。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>温故js系列（14）-闭包&amp;垃圾回收&amp;内存泄露&amp;闭包应用&amp;作用域链&amp;再析闭包</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006855822">https://segmentfault.com/a/1190000006855822</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9ghlt4romd8/" target="_blank">https://alili.tech/archive/9ghlt4romd8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>