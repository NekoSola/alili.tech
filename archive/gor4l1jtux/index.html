<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React源码解析-首次渲染（纯DOM元素）I"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React源码解析-首次渲染（纯DOM元素）I | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gor4l1jtux/",
				"appid": "1613049289050283", 
				"title": "React源码解析-首次渲染（纯DOM元素）I | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-13T02:31:22"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/g2w22dfhapq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7f52s3sx55/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&text=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&text=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&title=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&is_video=false&description=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&title=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&title=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&title=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgor4l1jtux%2f&title=React%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90-%e9%a6%96%e6%ac%a1%e6%b8%b2%e6%9f%93%ef%bc%88%e7%ba%afDOM%e5%85%83%e7%b4%a0%ef%bc%89I"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React源码解析-首次渲染（纯DOM元素）I</h1><div class="meta"><div class="postdate"><time datetime="2019-02-13" itemprop="datePublished">2019-02-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cul\x3e\x3cli\x3e\x3ch3 id=\x22articleHeader0\x22\x3e前言\x3c\/h3\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3eReact 是一个十分庞大的库，由于要同时考虑 ReactDom 和 ReactNative ，还有服务器渲染等，导致其代码抽象化程度很高，嵌套层级非常深，阅读其源码是一个非常艰辛的过程。在学习 React 源码的过程中，给我帮助最大的就是\x3ca href=\x22https:\/\/holmeshe.me\/categories\/Understanding-The-React-Source-Code\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这个系列文章\x3c\/a\x3e，于是决定基于这个系列文章谈一下自己的理解。本文会大量用到原文中的例子，想体会原汁原味的感觉，推荐阅读原文。\x3c\/p\x3e\n\x3cp\x3e本系列文章将基于 React 15.4.2。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3ch3 id=\x22articleHeader1\x22\x3eReact.createElement\x3c\/h3\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e在写 React 项目的时候，我们一般会直接用 JSX 的形式来写，而 JSX 经过 Babel 编译后最终会将 HTML 标签转换为\x3ccode\x3eReact.createElement\x3c\/code\x3e的函数形式。如果想进行更深入的了解，可以看我之前写的这篇文章：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000016129036\x22\x3e你不知道的Virtual DOM（一）：Virtual Dom介绍\x3c\/a\x3e。文章中的\x3ccode\x3eh\x3c\/code\x3e函数，如果不在 Babel 中配置的话，默认就是\x3ccode\x3eReact.createElement\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e下面，我们将从一个最简单的例子，来看React是如何渲染的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ReactDOM.render(\n    \x3ch1 style=\x22{{\x22\x26quot;color\x26quot;:\x26quot;blue\x26quot;\x22}}\x22\x3ehello world\x3c\/h1\x3e,\n    document.getElementById(\x27root\x27)\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eReactDOM.render(\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22\x3c\/span\x3e\x22\x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e\x22\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e\x22\x3cspan class=\x22hljs-attr\x22\x3eblue\x3c\/span\x3e\x22\x22}}\x22\x26gt;\x3c\/span\x3ehello world\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e)\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e经过JSX编译后，会是下面这个样子\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ReactDOM.render(\n    React.createElement(\n        \x27h1\x27,\n        { style: { \x26quot;color\x26quot;: \x26quot;blue\x26quot; } },\n        \x27hello world\x27\n    ),\n    document.getElementById(\x27root\x27)\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eReactDOM.render(\n    React.createElement(\n        \x3cspan class=\x22hljs-string\x22\x3e\x27h1\x27\x3c\/span\x3e,\n        { \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e: { \x3cspan class=\x22hljs-string\x22\x3e\x22color\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22blue\x22\x3c\/span\x3e } },\n        \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e\n    ),\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e)\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e先来看下\x3ccode\x3eReact.createElement\x3c\/code\x3e的源码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/isomorphic\/React.js\n\nvar ReactElement = require(\x27ReactElement\x27);\n\n...\n\nvar createElement = ReactElement.createElement;\n\n...\n\nvar React = {\n    ...\n    \n    createElement: createElement,\n    \n    ...\n}\n\nmodule.exports = React;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/isomorphic\/React.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactElement = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ReactElement\x27\x3c\/span\x3e);\n\n...\n\nvar createElement = ReactElement.createElement;\n\n...\n\nvar React = {\n    ...\n    \n    createElement: createElement,\n    \n    ...\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = React;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终的实现需要查看\x3ccode\x3eReactElement.createElement\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/isomorphic\/classic\/element\/ReactElement.js\n\nReactElement.createElement = function (type, config, children) {\n    ...\n\n    \/\/ 1. 将过滤后的有效的属性，从config拷贝到props\n    if (config != null) {\n        \n        ...\n        \n        for (propName in config) {\n            if (hasOwnProperty.call(config, propName) \x26amp;\x26amp;\n                !RESERVED_PROPS.hasOwnProperty(propName)) {\n                props[propName] = config[propName];\n            }\n        }\n    }\n\n    \/\/ 2. 将children以数组的形式拷贝到props.children属性\n    var childrenLength = arguments.length - 2;\n    if (childrenLength === 1) {\n        props.children = children;\n    } else if (childrenLength \x3e 1) {\n        var childArray = Array(childrenLength);\n        for (var i = 0; i \x3c childrenLength; i\x2b\x2b) {\n            childArray[i] = arguments[i \x2b 2];\n        }\n        if (__DEV__) {\n            if (Object.freeze) {\n                Object.freeze(childArray);\n            }\n        }\n        props.children = childArray;\n    }\n\n    \/\/ 3. 默认属性赋值\n    if (type \x26amp;\x26amp; type.defaultProps) {\n        var defaultProps = type.defaultProps;\n        for (propName in defaultProps) {\n            if (props[propName] === undefined) {\n                props[propName] = defaultProps[propName];\n            }\n        }\n    }\n    \n    ...\n    \n    return ReactElement(\n        type,\n        key,\n        ref,\n        self,\n        source,\n        ReactCurrentOwner.current,\n        props\n    );\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/isomorphic\/classic\/element\/ReactElement.js\x3c\/span\x3e\n\nReactElement.createElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etype, config, children\x3c\/span\x3e) \x3c\/span\x3e{\n    ...\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1. 将过滤后的有效的属性，从config拷贝到props\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config != \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        \n        ...\n        \n        for (propName \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e config) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (hasOwnProperty.call(config, propName) \x26amp;\x26amp;\n                !RESERVED_PROPS.hasOwnProperty(propName)) {\n                props[propName] = config[propName];\n            }\n        }\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2. 将children以数组的形式拷贝到props.children属性\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e childrenLength = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (childrenLength === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n        props.children = children;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (childrenLength \x26gt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e childArray = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(childrenLength);\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; childrenLength; i\x2b\x2b) {\n            childArray[i] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[i \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (__DEV__) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.freeze) {\n                \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.freeze(childArray);\n            }\n        }\n        props.children = childArray;\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 3. 默认属性赋值\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (type \x26amp;\x26amp; type.defaultProps) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e defaultProps = type.defaultProps;\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (propName \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e defaultProps) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (props[propName] === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n                props[propName] = defaultProps[propName];\n            }\n        }\n    }\n    \n    ...\n    \n    return ReactElement(\n        type,\n        key,\n        ref,\n        self,\n        source,\n        ReactCurrentOwner.current,\n        props\n    );\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e本质上只做了3件事：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e将过滤后的有效的属性，从config拷贝到props\x3c\/li\x3e\n\x3cli\x3e将children以数组的形式拷贝到props.children属性\x3c\/li\x3e\n\x3cli\x3e默认属性赋值\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e最终的返回值是\x3ccode\x3eReactElement\x3c\/code\x3e。我们再来看看它做了什么\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/isomorphic\/classic\/element\/ReactElement.js\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n    var element = {\n        \/\/ This tag allow us to uniquely identify this as a React Element\n        $$typeof: REACT_ELEMENT_TYPE,\n\n        \/\/ Built-in properties that belong on the element\n        type: type,\n        key: key,\n        ref: ref,\n        props: props,\n\n        \/\/ Record the component responsible for creating this element.\n        _owner: owner,\n    };\n    \n    ...\n\n    return element;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/isomorphic\/classic\/element\/ReactElement.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etype, key, ref, self, source, owner, props\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e element = {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This tag allow us to uniquely identify this as a React Element\x3c\/span\x3e\n        $$\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e: REACT_ELEMENT_TYPE,\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Built-in properties that belong on the element\x3c\/span\x3e\n        type: type,\n        \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e: key,\n        \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e: ref,\n        \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: props,\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Record the component responsible for creating this element.\x3c\/span\x3e\n        _owner: owner,\n    };\n    \n    ...\n\n    return element;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终只是返回了一个简单对象。调用栈是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22React.createElement\n|=ReactElement.createElement(type, config, children)\n    |-ReactElement(type,..., props)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eReact.createElement\n|=ReactElement.createElement(type, config, children)\n    |-ReactElement(type,..., props)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里生成的 ReactElement 我们将其命名为\x3ccode\x3eReactElement[1]\x3c\/code\x3e，它将作为参数传入到 ReactDom.render。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3ch3 id=\x22articleHeader2\x22\x3eReactDom.render\x3c\/h3\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3eReactDom.render 最终会调用 ReactMount 的 _renderSubtreeIntoContainer：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/renderers\/dom\/client\/ReactMount.js\n\n_renderSubtreeIntoContainer: function (parentComponent, nextElement, container, callback) {\n    ...\n    var nextWrappedElement = React.createElement(\n        TopLevelWrapper, \n        {\n            child: nextElement\n        }\n    );\n\n    ...\n    \n    var component = ReactMount._renderNewRootComponent(\n        nextWrappedElement,\n        container,\n        shouldReuseMarkup,\n        nextContext\n    )._renderedComponent.getPublicInstance();\n    \n    ...\n    \n    return component;\n},\n\n...\n\nvar TopLevelWrapper = function () {\n    this.rootID = topLevelRootCounter\x2b\x2b;\n};\n\nTopLevelWrapper.prototype.isReactComponent = {};\n\nTopLevelWrapper.prototype.render = function () {\n    return this.props.child;\n};\n\nTopLevelWrapper.isReactTopLevelWrapper = true;\n\n...\n\n_renderNewRootComponent: function (\n    nextElement,\n    container,\n    shouldReuseMarkup,\n    context\n) {\n    ...\n    \n    var componentInstance = instantiateReactComponent(nextElement, false);\n\n    ...\n\n    return componentInstance;\n},\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/renderers\/dom\/client\/ReactMount.js\x3c\/span\x3e\n\n_renderSubtreeIntoContainer: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eparentComponent, nextElement, container, callback\x3c\/span\x3e) \x3c\/span\x3e{\n    ...\n    var nextWrappedElement = React.createElement(\n        TopLevelWrapper, \n        {\n            \x3cspan class=\x22hljs-attr\x22\x3echild\x3c\/span\x3e: nextElement\n        }\n    );\n\n    ...\n    \n    var component = ReactMount._renderNewRootComponent(\n        nextWrappedElement,\n        container,\n        shouldReuseMarkup,\n        nextContext\n    )._renderedComponent.getPublicInstance();\n    \n    ...\n    \n    return component;\n},\n\n...\n\nvar TopLevelWrapper = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rootID = topLevelRootCounter\x2b\x2b;\n};\n\nTopLevelWrapper.prototype.isReactComponent = {};\n\nTopLevelWrapper.prototype.render = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.child;\n};\n\nTopLevelWrapper.isReactTopLevelWrapper = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n...\n\n_renderNewRootComponent: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\n    nextElement,\n    container,\n    shouldReuseMarkup,\n    context\n\x3c\/span\x3e) \x3c\/span\x3e{\n    ...\n    \n    var componentInstance = instantiateReactComponent(nextElement, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\n    ...\n\n    return componentInstance;\n},\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里又会调用到另一个文件 instantiateReactComponent：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/renders\/shared\/stack\/reconciler\/instantiateReactComponent.js\n\nfunction instantiateReactComponent(node, shouldHaveDebugID) {\n    var instance;\n\n    ...\n\n    instance = new ReactCompositeComponentWrapper(element);\n    \n    ...\n\n    return instance;\n}\n\n\/\/ To avoid a cyclic dependency, we create the final class in this module\nvar ReactCompositeComponentWrapper = function (element) {\n    this.construct(element);\n};\n\nObject.assign(\n    ReactCompositeComponentWrapper.prototype,\n    ReactCompositeComponent, \n    {\n        _instantiateReactComponent: instantiateReactComponent,\n    }\n);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/renders\/shared\/stack\/reconciler\/instantiateReactComponent.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einstantiateReactComponent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enode, shouldHaveDebugID\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e instance;\n\n    ...\n\n    instance = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ReactCompositeComponentWrapper(element);\n    \n    ...\n\n    return instance;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ To avoid a cyclic dependency, we create the final class in this module\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactCompositeComponentWrapper = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eelement\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.construct(element);\n};\n\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(\n    ReactCompositeComponentWrapper.prototype,\n    ReactCompositeComponent, \n    {\n        \x3cspan class=\x22hljs-attr\x22\x3e_instantiateReactComponent\x3c\/span\x3e: instantiateReactComponent,\n    }\n);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里又会调用到另一个文件 ReactCompositeComponent：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件位置：src\/renders\/shared\/stack\/reconciler\/ReactCompositeComponent.js\n\nvar ReactCompositeComponent = {\n    construct: function (element) {\n        this._currentElement = element;\n        this._rootNodeID = 0;\n        this._compositeType = null;\n        this._instance = null;\n        this._hostParent = null;\n        this._hostContainerInfo = null;\n\n        \/\/ See ReactUpdateQueue\n        this._updateBatchNumber = null;\n        this._pendingElement = null;\n        this._pendingStateQueue = null;\n        this._pendingReplaceState = false;\n        this._pendingForceUpdate = false;\n\n        this._renderedNodeType = null;\n        this._renderedComponent = null;\n        this._context = null;\n        this._mountOrder = 0;\n        this._topLevelWrapper = null;\n\n        \/\/ See ReactUpdates and ReactUpdateQueue.\n        this._pendingCallbacks = null;\n\n        \/\/ ComponentWillUnmount shall only be called once\n        this._calledComponentWillUnmount = false;\n\n        if (__DEV__) {\n            this._warnedAboutRefsInRender = false;\n        }\n    }\n    \n    ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件位置：src\/renders\/shared\/stack\/reconciler\/ReactCompositeComponent.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ReactCompositeComponent = {\n    \x3cspan class=\x22hljs-attr\x22\x3econstruct\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eelement\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._currentElement = element;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._rootNodeID = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._compositeType = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._instance = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._hostParent = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._hostContainerInfo = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ See ReactUpdateQueue\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._updateBatchNumber = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._pendingElement = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._pendingStateQueue = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._pendingReplaceState = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._pendingForceUpdate = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._renderedNodeType = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._renderedComponent = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._context = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._mountOrder = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._topLevelWrapper = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ See ReactUpdates and ReactUpdateQueue.\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._pendingCallbacks = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ComponentWillUnmount shall only be called once\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._calledComponentWillUnmount = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (__DEV__) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._warnedAboutRefsInRender = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        }\n    }\n    \n    ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们用\x3ccode\x3eReactCompositeComponent[T]\x3c\/code\x3e来表示这里生成的顶层 component。\x3c\/p\x3e\n\x3cp\x3e整个的调用栈是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ReactDOM.render\n|=ReactMount.render(nextElement, container, callback)\n|=ReactMount._renderSubtreeIntoContainer()\n    |-ReactMount._renderNewRootComponent(\n        nextWrappedElement, \/\/ scr:------------------\x3e ReactElement[2]\n        container,          \/\/ scr:------------------\x3e document.getElementById(\x27root\x27)\n        shouldReuseMarkup,  \/\/ scr: null from ReactDom.render()\n        nextContext,        \/\/ scr: emptyObject from ReactDom.render()\n    )\n    |-instantiateReactComponent(\n          node,             \/\/ scr:------------------\x3e ReactElement[2]\n          shouldHaveDebugID \/* false *\/\n        )\n        |-ReactCompositeComponentWrapper(\n            element         \/\/ scr:------------------\x3e ReactElement[2]\n        );\n        |=ReactCompositeComponent.construct(element)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eReactDOM.render\n|=ReactMount.render(nextElement, container, callback)\n|=ReactMount._renderSubtreeIntoContainer()\n    |-ReactMount._renderNewRootComponent(\n        nextWrappedElement, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr:------------------\x26gt; ReactElement[2]\x3c\/span\x3e\n        container,          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr:------------------\x26gt; document.getElementById(\x27root\x27)\x3c\/span\x3e\n        shouldReuseMarkup,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr: null from ReactDom.render()\x3c\/span\x3e\n        nextContext,        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr: emptyObject from ReactDom.render()\x3c\/span\x3e\n    )\n    |-instantiateReactComponent(\n          node,             \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr:------------------\x26gt; ReactElement[2]\x3c\/span\x3e\n          shouldHaveDebugID \x3cspan class=\x22hljs-comment\x22\x3e\/* false *\/\x3c\/span\x3e\n        )\n        |-ReactCompositeComponentWrapper(\n            element         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ scr:------------------\x26gt; ReactElement[2]\x3c\/span\x3e\n        );\n        |=ReactCompositeComponent.construct(element)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e组件间的层级结构是这样的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbipq2?w=678\x26amp;h=152\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbipq2?w=678\x26amp;h=152\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e当顶层组件构建完毕后，下一步就是调用 batchedMountComponentIntoNode（来自 ReactMount 的 _renderNewRootComponent方法），进行页面的渲染了。这部分内容将在下一篇文章进行讲解。如果你等不及的话，可以直接看\x3ca href=\x22https:\/\/holmeshe.me\/categories\/Understanding-The-React-Source-Code\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这个系列文章\x3c\/a\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React源码解析-首次渲染（纯DOM元素）I</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016741764">https://segmentfault.com/a/1190000016741764</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gor4l1jtux/" target="_blank">https://alili.tech/archive/gor4l1jtux/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>