<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="throttle与debounce的区别"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>throttle与debounce的区别 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bxt83zp42h6/",
				"appid": "1613049289050283", 
				"title": "throttle与debounce的区别 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-12T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/x1ay6karvhd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/civuizfy2y/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&text=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&text=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&title=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&is_video=false&description=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&title=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&title=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&title=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbxt83zp42h6%2f&title=throttle%e4%b8%8edebounce%e7%9a%84%e5%8c%ba%e5%88%ab"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">throttle与debounce的区别</h1><div class="meta"><div class="postdate"><time datetime="2019-02-12" itemprop="datePublished">2019-02-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前几天看到一篇文章，我的公众号里也分享了《一次发现underscore源码bug的经历以及对学术界拿来主义的思考》具体文章详见，微信公众号：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuLiV?w=258\x26amp;h=258\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuLiV?w=258\x26amp;h=258\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e文中讲了大家对throttle和debounce存在误解，同时提到了《高程3》中实现节流方法存在一些问题，为了更好的理解这两个概念，搜了很多相关文章，详见文章底部。\x3c\/p\x3e\n\x3cp\x3ethrottle与debounce是两个类似的概念，目的都是随着时间的推移控制执行函数的次数，但是有些细微的差别。\x3c\/p\x3e\n\x3cp\x3e当我们为DOM事件关联方法时，若我们有一个debounced和throttled函数将会很方便，为何？因为这样我们可以在事件和执行函数之间添加一层控制，注意我们并没有去控制DOM事件触发的次数。\x3c\/p\x3e\n\x3cp\x3e例如，我们谈一下scroll事件，看下面的例子：\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22xVpoOe\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/xVpoOe\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eScroll events counter\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/xVpoOe\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e当你在触控板或者鼠标滚动时，每次最少会达到30次，在手机上更多。可是你的滚动事件处理函数对这个频率是否应付的过来？\x3c\/p\x3e\n\x3cp\x3e在2011年，Twitter网站曾爆出一个问题：当你在主页往下滚动时，页面会变得缓慢以致没有响应。John Resig发表了一篇文章\x3ca href=\x22http:\/\/ejohn.org\/blog\/learning-from-twitter\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《 a blog post about the problem》\x3c\/a\x3e指出直接在scroll事件上面绑定高消耗的事件是一个多么愚蠢的想法。\x3c\/p\x3e\n\x3cp\x3e在那个时候John建议使用一个独立于scroll事件且每250ms执行的轮询方法。这样的话处理方法就不会耦合于事件。通过这个简单的技术，我们可以提高用户体验。\x3c\/p\x3e\n\x3cp\x3e现在有一些更先进的事件处理方法，让我来给你介绍：__Debounce，Throttle和requestAnimationFrame__，同时会介绍一些适用的场景。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDebounce\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3eDebounce技术使我们可以将一个连续的调用归为一个。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuLjf?w=661\x26amp;h=133\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuLjf?w=661\x26amp;h=133\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e想象你在电梯的场景，当电梯门开始要关闭的时候，突然一个人进来，此时电梯并不会关闭并且也不会执行改变楼层的方法，如果还有人进来同样的事情会发生：电梯延迟执行它的方法（改变楼层），优化了它的资源。\x3c\/p\x3e\n\x3cp\x3e自己尝试一下，在按钮上点击或者移动鼠标：\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22vGpqLO\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/vGpqLO\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDebounce. Trailing\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/vGpqLO\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e你可以看到快速连续的事件是如何通过一个debounce事件来表示的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eLeading edge (or \x22immediate\x22)\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e你可以发现事件结束的时候，debounce的事件并没有立即执行而是等待了一些时间才触发。为何不立即触发，就像开始没有使用debounce事件处理？直到在连续执行的事件中有一个暂停，才会再次触发。\x3c\/p\x3e\n\x3cp\x3e你可以通过一个__leading__的参数做到：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuLjg?w=710\x26amp;h=195\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuLjg?w=710\x26amp;h=195\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在underscore.js中，这个参数叫immediate。\x3c\/p\x3e\n\x3cp\x3e自己尝试一下：\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22VaQwRm\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/VaQwRm\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDebounce. Leading\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/VaQwRm\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDebounce Implementations\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e2009年在\x3ca href=\x22http:\/\/unscriptable.com\/2009\/03\/20\/debouncing-javascript-methods\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJohn Hann的文章\x3c\/a\x3e中第一次看到debounce的实现方法。\x3c\/p\x3e\n\x3cp\x3e在那之后不久，Ben Alman写了一个\x3ca href=\x22http:\/\/benalman.com\/projects\/jquery-throttle-debounce-plugin\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejQuery插件\x3c\/a\x3e(现在不在维护)，一年以后Jeremy Ashkenas把此方法添加到\x3ca href=\x22https:\/\/github.com\/jashkenas\/underscore\/commit\/9e3e067f5025dbe5e93ed784f93b233882ca0ffe\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eunderscore.js\x3c\/a\x3e中，不久又被添加到lodash中。\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22GZQRLv\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/GZQRLv\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edebounce-click\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/GZQRLv\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e这三种实现方法内部不同，但是接口几乎一致。\x3c\/p\x3e\n\x3cp\x3e有段时间underscore采用了Lodash的实现方法，但是在我发现了一个\x3ca href=\x22http:\/\/drupalmotion.com\/article\/debounce-and-throttle-visual-explanation\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebug\x3c\/a\x3e之后，自此两个库的实现开始分道扬镳。\x3c\/p\x3e\n\x3cp\x3eLodash在_.debounce和_.throttle中添加了许多特性。immediate标示替代了leading和trailing。你可以二选一或者都选，默认情况下，只有trailing是开启的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDebounce Examples\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e当改变浏览器窗口时，resize事件会触发多次。\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22PNQorE\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/PNQorE\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDebounce Resize Event Example\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/PNQorE\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e如你所见，我们使用了__trailing__参数，因为我们只对用户停止改变浏览器大小时最后一次事件感兴趣。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eAutoComplete中的Ajax请求使用的keypress\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e当用户仍旧在输入的时候，为何每隔50ms发送Ajax请求？__ _.debounce __可以帮助我们避免额外的工作，只在用户停止输入的时候发送请求。\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22wGyvVj\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/wGyvVj\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDebouncing keystrokes Example\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/wGyvVj\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e另一个使用场景是在进行input校验的时候，“你的密码太短”等类似的信息。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e如何使用debounce和throttle以及常见的陷阱？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e可以自己实现这两个方法或者随便复制别人blog中的实现方法，我的建议是直接使用underscore和lodash中的方法。如果你只需要这两个方法，可以定制输出lodash方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i -g lodash-cli\nlodash-cli include=debounce,throttle\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3enpm i -\x3cspan class=\x22hljs-keyword\x22\x3eg\x3c\/span\x3e lodash-\x3cspan class=\x22hljs-keyword\x22\x3ecli\x3c\/span\x3e\nlodash-\x3cspan class=\x22hljs-keyword\x22\x3ecli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einclude\x3c\/span\x3e=debounce,throttle\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一个常见的陷阱：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ WRONG\n$(window).on(\x27scroll\x27, function() {\n   _.debounce(doSomething, 300); \n});\n\n\/\/ RIGHT\n$(window).on(\x27scroll\x27, _.debounce(doSomething, 200));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ WRONG\x3c\/span\x3e\n$(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27scroll\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n   _.debounce(doSomething, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e); \n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ RIGHT\x3c\/span\x3e\n$(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27scroll\x27\x3c\/span\x3e, _.debounce(doSomething, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3edebounce方法赋值给一个变量之后允许我们调用一个私有方法：__debounced_version.cancel()__：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var debounced_version = _.debounce(doSomething, 200);\n$(window).on(\x27scroll\x27, debounced_version);\n\n\/\/ If you need it\ndebounced_version.cancel();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e debounced_version = _.debounce(doSomething, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n$(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27scroll\x27\x3c\/span\x3e, debounced_version);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ If you need it\x3c\/span\x3e\ndebounced_version.cancel();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3eThrottle\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e使用__ _.throttle __，我们不允许方法在每Xms间执行超过一次。\x3c\/p\x3e\n\x3cp\x3e和debounce的主要区别是throttle保证方法每Xms有规律的执行。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eThrottling Examples\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e一个相当常见的例子，用户在你无限滚动的页面上向下拖动，你需要判断现在距离页面底部多少。如果用户快接近底部时，我们应该发送请求来加载更多内容到页面。\x3c\/p\x3e\n\x3cp\x3e在此__ _.debounce \x3cstrong\x3e没有用，因为它只会在用户停止滚动时触发，但我们需要用户快到达底部时去请求。通过\x3c\/strong\x3e _.throttle __我们可以不间断的监测距离底部多远。\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22xVYbGZ\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/xVYbGZ\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eInfinite scrolling throttled\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/xVYbGZ\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3erequestAnimationFrame (rAF)\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3erequestAnimationFrame是另一个频率限制的方法。\x3c\/p\x3e\n\x3cp\x3e它可以通过__ _.throttle(dosomething, 16)__实现，但为了更加精准浏览器提供了内置API。\x3c\/p\x3e\n\x3cp\x3e我们可以使用rAF API作为throttle方法的替代，考虑一下利弊：\x3c\/p\x3e\n\x3cp\x3e利：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e目标60fps（16ms每贞），但是内部使用最优的时间间隔来渲染\x3c\/li\x3e\n\x3cli\x3e使用简单并且是标准API，以后不会变动，不需要维护\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e弊：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3erAF的开始或者取消需要我们自己处理，不像.debounce和.throttle内部实现\x3c\/li\x3e\n\x3cli\x3e浏览器Tag没有激活，它就不会执行\x3c\/li\x3e\n\x3cli\x3e即使多数现代浏览器支持，但是IE9，Opera Mini以及老版本Android依旧不支持。\x3ca href=\x22http:\/\/www.paulirish.com\/2011\/requestanimationframe-for-smart-animating\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eA polyfill\x3c\/a\x3e到现在依旧\x3ca href=\x22http:\/\/caniuse.com\/#feat=requestanimationframe\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e需要\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3erAF在node.js中不支持\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e根据经验，我建议在JS执行\x22painting\x22或\x22animating\x22中直接操作属性和重新计算元素位置时使用rAF。\x3c\/p\x3e\n\x3cp\x3e发送Ajax请求或者是否添加／删除class（触发一个CSS动画）时，我会考虑debounce和throttle，此时你可以降低执行频率（200ms而不是16ms）。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3erAF的例子\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e在\x3ca href=\x22http:\/\/www.html5rocks.com\/en\/tutorials\/speed\/animations\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePaul Lewis的文章\x3c\/a\x3e激发下，我只在scroll事件中提供例子。\x3c\/p\x3e\n\x3cp\x3e我一步步的调throttle到16ms，希望给一个类似的体验，但是rAF在复杂场景下或许会提供更好的结果。\x3c\/p\x3e\n\x3cp\x3e\x26lt;p data-height=\x22268\x22 data-theme-id=\x220\x22 data-slug-hash=\x22qZxEaq\x22 data-default-tab=\x22result\x22 data-user=\x22ghostcode\x22 class=\x22codepen\x22\x26gt;See the Pen \x3ca href=\x22http:\/\/codepen.io\/ghostcode\/pen\/qZxEaq\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eScroll comparison requestAnimationFrame vs throttle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\/pen\/qZxEaq\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by ghostcode (\x3ca href=\x22http:\/\/codepen.io\/ghostcode\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@ghostcode\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22ghostcode\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22http:\/\/codepen.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x26lt;\/p\x26gt;\x3c\/p\x3e\n\x3cp\x3e一个更好的例子我是在headroom.js中看到的，这里通过一个对象封装，进行了\x3ca href=\x22https:\/\/github.com\/WickyNilliams\/headroom.js\/blob\/3282c23bc69b14f21bfbaf66704fa37b58e3241d\/src\/Debouncer.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e逻辑解藕\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e总结：\x3c\/strong\x3e\x3cbr\x3e使用debounce，throttle和requestAnimationFrame优化你的事件处理函数。每一个方法有一些细微的差别，三个都很有用而且互相弥补。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e__debounce:__把突然涌进的事件（键盘事件）归位一个\x3c\/li\x3e\n\x3cli\x3e__throttle:__保证持续执行方法分隔为每Xms执行一次。就像每200ms监测滚动位置来触发css动画。\x3c\/li\x3e\n\x3cli\x3e__requestAnimationFrame:__throttle的替代方案，当你的方法需要重新计算和渲染元素同时你需要更平滑的变动或动画。注意：IE9- 不支持。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/blog.coding.net\/blog\/the-difference-between-throttle-and-debounce-in-underscorejs\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/blog.coding.net\/blog\/...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/css-tricks.com\/the-difference-between-throttling-and-debouncing\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/css-tricks.com\/the-di...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/stackoverflow.com\/questions\/25991367\/difference-between-throttling-and-debouncing-a-function\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/stackoverflow.com\/ques...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/demo.nimius.net\/debounce_throttle\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/demo.nimius.net\/deboun...\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>throttle与debounce的区别</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000004909376">https://segmentfault.com/a/1190000004909376</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bxt83zp42h6/" target="_blank">https://alili.tech/archive/bxt83zp42h6/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>